(()=>{var __webpack_modules__={},__webpack_module_cache__={},inProgress,dataWebpackPrefix;function __webpack_require__(e){if(__webpack_module_cache__[e])return __webpack_module_cache__[e].exports;var g=__webpack_module_cache__[e]={id:e,loaded:!1,exports:{}};return __webpack_modules__[e].call(g.exports,g,g.exports,__webpack_require__),g.loaded=!0,g.exports}__webpack_require__.m=__webpack_modules__,__webpack_require__.d=(e,g)=>{for(var I in g)__webpack_require__.o(g,I)&&!__webpack_require__.o(e,I)&&Object.defineProperty(e,I,{enumerable:!0,get:g[I]})},__webpack_require__.f={},__webpack_require__.e=e=>Promise.all(Object.keys(__webpack_require__.f).reduce(((g,I)=>(__webpack_require__.f[I](e,g),g)),[])),__webpack_require__.u=e=>e+".bundle.js",__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),__webpack_require__.o=(e,g)=>Object.prototype.hasOwnProperty.call(e,g),inProgress={},dataWebpackPrefix="PianoRoll:",__webpack_require__.l=(e,g,I)=>{if(inProgress[e])inProgress[e].push(g);else{var n,C;if(void 0!==I)for(var A=document.getElementsByTagName("script"),t=0;t<A.length;t++){var i=A[t];if(i.getAttribute("src")==e||i.getAttribute("data-webpack")==dataWebpackPrefix+I){n=i;break}}n||(C=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc),n.setAttribute("data-webpack",dataWebpackPrefix+I),n.src=e),inProgress[e]=[g];var c=(g,I)=>{n.onerror=n.onload=null,clearTimeout(r);var C=inProgress[e];if(delete inProgress[e],n.parentNode&&n.parentNode.removeChild(n),C&&C.forEach((e=>e(I))),g)return g(I)},r=setTimeout(c.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=c.bind(null,n.onerror),n.onload=c.bind(null,n.onload),C&&document.head.appendChild(n)}},__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},__webpack_require__.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;__webpack_require__.g.importScripts&&(e=__webpack_require__.g.location+"");var g=__webpack_require__.g.document;if(!e&&g&&(g.currentScript&&(e=g.currentScript.src),!e)){var I=g.getElementsByTagName("script");I.length&&(e=I[I.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=e})(),(()=>{var e={179:0};__webpack_require__.f.j=(g,I)=>{var n=__webpack_require__.o(e,g)?e[g]:void 0;if(0!==n)if(n)I.push(n[2]);else{var C=new Promise(((I,C)=>{n=e[g]=[I,C]}));I.push(n[2]=C);var A=__webpack_require__.p+__webpack_require__.u(g),t=new Error;__webpack_require__.l(A,(I=>{if(__webpack_require__.o(e,g)&&(0!==(n=e[g])&&(e[g]=void 0),n)){var C=I&&("load"===I.type?"missing":I.type),A=I&&I.target&&I.target.src;t.message="Loading chunk "+g+" failed.\n("+C+": "+A+")",t.name="ChunkLoadError",t.type=C,t.request=A,n[1](t)}}),"chunk-"+g)}};var g=self.webpackChunkPianoRoll=self.webpackChunkPianoRoll||[],I=g.push.bind(g);g.push=g=>{for(var n,C,[A,t,i]=g,c=0,r=[];c<A.length;c++)C=A[c],__webpack_require__.o(e,C)&&e[C]&&r.push(e[C][0]),e[C]=0;for(n in t)__webpack_require__.o(t,n)&&(__webpack_require__.m[n]=t[n]);for(i&&i(__webpack_require__),I(g);r.length;)r.shift()()}})(),eval('/**\n * Copyright 2016 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the "License");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an "AS IS" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nPromise.all(/* AMD require */[__webpack_require__.e(945), __webpack_require__.e(12)]).then(function() { var __WEBPACK_AMD_REQUIRE_ARRAY__ = [__webpack_require__(8393), __webpack_require__(4342), __webpack_require__(9960), __webpack_require__(8280), __webpack_require__(9255),\n        __webpack_require__(7143), __webpack_require__(4587), __webpack_require__(9503), __webpack_require__(9833), __webpack_require__(4789), __webpack_require__(9725)]; (function (domReady, Roll, Player, Interface, Tone, preludeInC,\n              StartAudioContext, mainStyle, Orientation, Overlay) {\n\n        const Transport = Tone.Transport\n\n        domReady(function () {\n\n            //the interface\n            var player = new Player();\n\n            var roll = new Roll(document.body);\n\n            var interface = new Interface(document.body);\n\n            var overlay = new Overlay(document.body, roll, interface);\n\n            //set the first score\n            roll.setScore(preludeInC);\n\n            /**\n             * EVENTS\n             */\n            interface.onInstrument(function (inst) {\n                player.setInstrument(inst);\n            });\n            interface.onPlay(function (playing) {\n                if (playing) {\n                    roll.start();\n                } else {\n                    roll.stop();\n                    player.releaseAll();\n                }\n            });\n            interface.onScore(function (json) {\n                roll.setScore(json);\n            });\n\n            var wasPlaying = false;\n            interface.onRecord(function (recording) {\n                if (recording) {\n                    wasPlaying = Transport.state === "started";\n                    roll.stop();\n                } else {\n                    if (wasPlaying) {\n                        wasPlaying = false;\n                        roll.start();\n                    }\n                }\n            });\n            interface.onBuffer(function (buffer, duration, onset) {\n                player.setBuffer(buffer, duration, onset);\n            });\n\n\n            roll.onnote = function (note, duration, time, velocity) {\n                player.triggerAttackRelease(note, duration, time, velocity);\n            };\n            roll.onstop = function () {\n                player.releaseAll();\n            };\n\n            var orientation = new Orientation(function () {\n                //called when stopped\n                Transport.stop();\n                roll.stop();\n                interface.stop();\n            });\n\n            window.parent.postMessage("loaded", "*");\n\n            //send the ready message to the parent\n            var isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\n            var isAndroid = /Android/.test(navigator.userAgent) && !window.MSStream;\n\n            //full screen button on iOS\n            if (isIOS || isAndroid) {\n                // Tone.js fix audio context state on touch devices\n                window.addEventListener(\'touchstart\', function() {\n                    if (Tone.context.state !== \'running\') {\n                        Tone.context.resume();\n                    }\n                }, false);\n            } else {\n                document.documentElement.addEventListener(\'click\', function() {\n\t\t\t\t\tif (Tone.context.state !== \'running\') {\n\t\t\t\t\t\tTone.context.resume();\n\t\t\t\t\t}\n\t\t\t    }, false);\n            }\n\n            window.parent.postMessage("ready", "*");\n        });\n    }).apply(null, __WEBPACK_AMD_REQUIRE_ARRAY__);}).catch(__webpack_require__.oe);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNTg0Mi5qcyIsInNvdXJjZXMiOlsid2VicGFjazovL1BpYW5vUm9sbC8uL2FwcC9NYWluLmpzPzQ0YjQiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgMjAxNiBHb29nbGUgSW5jLlxuICpcbiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIik7XG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuXG4gKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG5yZXF1aXJlKFtcImRvbXJlYWR5XCIsIFwicm9sbC9Sb2xsXCIsIFwic291bmQvUGxheWVyXCIsIFwiaW50ZXJmYWNlL0ludGVyZmFjZVwiLCBcIlRvbmVcIixcbiAgICAgICAgXCIuLi9taWRpL3ByZWx1ZGVJbkMuanNvblwiLCBcIlN0YXJ0QXVkaW9Db250ZXh0XCIsIFwiLi4vc3R5bGUvbWFpbi5zY3NzXCIsIFwiaW50ZXJmYWNlL09yaWVudGF0aW9uXCIsIFwiaW50ZXJmYWNlL092ZXJsYXlcIiwgXCJUb3VjaHN0YXJ0XCJdLFxuICAgIGZ1bmN0aW9uIChkb21SZWFkeSwgUm9sbCwgUGxheWVyLCBJbnRlcmZhY2UsIFRvbmUsIHByZWx1ZGVJbkMsXG4gICAgICAgICAgICAgIFN0YXJ0QXVkaW9Db250ZXh0LCBtYWluU3R5bGUsIE9yaWVudGF0aW9uLCBPdmVybGF5KSB7XG5cbiAgICAgICAgY29uc3QgVHJhbnNwb3J0ID0gVG9uZS5UcmFuc3BvcnRcblxuICAgICAgICBkb21SZWFkeShmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIC8vdGhlIGludGVyZmFjZVxuICAgICAgICAgICAgdmFyIHBsYXllciA9IG5ldyBQbGF5ZXIoKTtcblxuICAgICAgICAgICAgdmFyIHJvbGwgPSBuZXcgUm9sbChkb2N1bWVudC5ib2R5KTtcblxuICAgICAgICAgICAgdmFyIGludGVyZmFjZSA9IG5ldyBJbnRlcmZhY2UoZG9jdW1lbnQuYm9keSk7XG5cbiAgICAgICAgICAgIHZhciBvdmVybGF5ID0gbmV3IE92ZXJsYXkoZG9jdW1lbnQuYm9keSwgcm9sbCwgaW50ZXJmYWNlKTtcblxuICAgICAgICAgICAgLy9zZXQgdGhlIGZpcnN0IHNjb3JlXG4gICAgICAgICAgICByb2xsLnNldFNjb3JlKHByZWx1ZGVJbkMpO1xuXG4gICAgICAgICAgICAvKipcbiAgICAgICAgICAgICAqIEVWRU5UU1xuICAgICAgICAgICAgICovXG4gICAgICAgICAgICBpbnRlcmZhY2Uub25JbnN0cnVtZW50KGZ1bmN0aW9uIChpbnN0KSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnNldEluc3RydW1lbnQoaW5zdCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGludGVyZmFjZS5vblBsYXkoZnVuY3Rpb24gKHBsYXlpbmcpIHtcbiAgICAgICAgICAgICAgICBpZiAocGxheWluZykge1xuICAgICAgICAgICAgICAgICAgICByb2xsLnN0YXJ0KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcm9sbC5zdG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIHBsYXllci5yZWxlYXNlQWxsKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpbnRlcmZhY2Uub25TY29yZShmdW5jdGlvbiAoanNvbikge1xuICAgICAgICAgICAgICAgIHJvbGwuc2V0U2NvcmUoanNvbik7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgdmFyIHdhc1BsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgIGludGVyZmFjZS5vblJlY29yZChmdW5jdGlvbiAocmVjb3JkaW5nKSB7XG4gICAgICAgICAgICAgICAgaWYgKHJlY29yZGluZykge1xuICAgICAgICAgICAgICAgICAgICB3YXNQbGF5aW5nID0gVHJhbnNwb3J0LnN0YXRlID09PSBcInN0YXJ0ZWRcIjtcbiAgICAgICAgICAgICAgICAgICAgcm9sbC5zdG9wKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHdhc1BsYXlpbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdhc1BsYXlpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvbGwuc3RhcnQoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW50ZXJmYWNlLm9uQnVmZmVyKGZ1bmN0aW9uIChidWZmZXIsIGR1cmF0aW9uLCBvbnNldCkge1xuICAgICAgICAgICAgICAgIHBsYXllci5zZXRCdWZmZXIoYnVmZmVyLCBkdXJhdGlvbiwgb25zZXQpO1xuICAgICAgICAgICAgfSk7XG5cblxuICAgICAgICAgICAgcm9sbC5vbm5vdGUgPSBmdW5jdGlvbiAobm90ZSwgZHVyYXRpb24sIHRpbWUsIHZlbG9jaXR5KSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnRyaWdnZXJBdHRhY2tSZWxlYXNlKG5vdGUsIGR1cmF0aW9uLCB0aW1lLCB2ZWxvY2l0eSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcm9sbC5vbnN0b3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcGxheWVyLnJlbGVhc2VBbGwoKTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHZhciBvcmllbnRhdGlvbiA9IG5ldyBPcmllbnRhdGlvbihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgLy9jYWxsZWQgd2hlbiBzdG9wcGVkXG4gICAgICAgICAgICAgICAgVHJhbnNwb3J0LnN0b3AoKTtcbiAgICAgICAgICAgICAgICByb2xsLnN0b3AoKTtcbiAgICAgICAgICAgICAgICBpbnRlcmZhY2Uuc3RvcCgpO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHdpbmRvdy5wYXJlbnQucG9zdE1lc3NhZ2UoXCJsb2FkZWRcIiwgXCIqXCIpO1xuXG4gICAgICAgICAgICAvL3NlbmQgdGhlIHJlYWR5IG1lc3NhZ2UgdG8gdGhlIHBhcmVudFxuICAgICAgICAgICAgdmFyIGlzSU9TID0gL2lQYWR8aVBob25lfGlQb2QvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkgJiYgIXdpbmRvdy5NU1N0cmVhbTtcbiAgICAgICAgICAgIHZhciBpc0FuZHJvaWQgPSAvQW5kcm9pZC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSAmJiAhd2luZG93Lk1TU3RyZWFtO1xuXG4gICAgICAgICAgICAvL2Z1bGwgc2NyZWVuIGJ1dHRvbiBvbiBpT1NcbiAgICAgICAgICAgIGlmIChpc0lPUyB8fCBpc0FuZHJvaWQpIHtcbiAgICAgICAgICAgICAgICAvLyBUb25lLmpzIGZpeCBhdWRpbyBjb250ZXh0IHN0YXRlIG9uIHRvdWNoIGRldmljZXNcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoVG9uZS5jb250ZXh0LnN0YXRlICE9PSAncnVubmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFRvbmUuY29udGV4dC5yZXN1bWUoKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGZhbHNlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKFRvbmUuY29udGV4dC5zdGF0ZSAhPT0gJ3J1bm5pbmcnKSB7XG5cdFx0XHRcdFx0XHRUb25lLmNvbnRleHQucmVzdW1lKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0ICAgIH0sIGZhbHNlKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgd2luZG93LnBhcmVudC5wb3N0TWVzc2FnZShcInJlYWR5XCIsIFwiKlwiKTtcbiAgICAgICAgfSk7XG4gICAgfSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0S0FDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///5842\n')})();