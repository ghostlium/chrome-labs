parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"sNTB":[function(require,module,exports) {
module.exports={shared_piano_metronome_label:"Metronome",shared_piano_settings_label:"Settings",shared_piano_save_label:"Save",shared_piano_clear_label:"Clear","shared_piano_copy-link_label":"Copy link","shared_piano_copy-link-parentheses_label":"(Copy link)",shared_piano_room_label:"Room:","shared_piano_copresence-live_label":"Live","shared_piano_copresence_user-count-single_label":"person","shared_piano_copresence_user-count-plural_label":"people","shared_piano_copresence_in-session_label":"in session",shared_piano_copresence_you_label:"(you)","shared_piano_copresence_ping-ms_label":"ms","shared_piano_copresence_you-alt_label":"This is you.",shared_piano_copresence_user_label:"User","shared_piano_copresence_timecode-unit":"seconds","shared_piano_copresence_play-along_label":"Play along:","shared_piano_copy-link_confirmed_label":"‚úì Copied","shared_piano_copy-link_failed_label":"Error","shared_piano_header_new-room_label":"New Room",shared_piano_header_help_label:"Help",shared_piano_header_logotype:"Shared Piano",shared_piano_about_logotype:"Chrome Music Lab:",shared_piano_header_jumpstart_text:"Click to turn sound on","shared_piano_settings_settings-title":"Settings","shared_piano_settings_custom-note-title":"Custom note names","shared_piano_settings_keymap-description":"Click the keys to select other note names. You can also leave select keys blank.",shared_piano_settings_octaves_label:"Octaves","shared_piano_settings_note-names_label":"Note Names",shared_piano_settings_emojis_label:"Emojis","shared_piano_settings_note-trails_label":"Note Trails","shared_piano_settings_scroll-behavior_label":"Scroll Behavior","shared_piano_settings_midi-device_label":"Midi Device",shared_piano_settings_show_label:"Show",shared_piano_settings_hide_label:"Hide","shared_piano_settings_scroll-behavior_pause_label":"Pause when idle","shared_piano_settings_scroll-behavior_scroll_label":"Scroll when idle",shared_piano_settings_speed_label:"Speed",shared_piano_settings_transpose_label:"Transpose","shared_piano_about_header-1":"Playing Live","shared_piano_about_header-2":"Saving Songs","shared_piano_about_header-3":"FAQ","shared_piano_about_title-1":"What is this?","shared_piano_about_title-2":"How do I play?","shared_piano_about_title-3":"How do I play with others?","shared_piano_about_title-4":"How do I use my MIDI keyboard?","shared_piano_about_title-5":"How do I play using my computer keyboard?","shared_piano_about_title-6":"How do I play the drums?","shared_piano_about_title-7":"How does it work?","shared_piano_about_title-8":"How can I improve my latency?","shared_piano_about_title-9":"How do I play back the song?","shared_piano_about_title-10":"How do I save my song?","shared_piano_about_title-11":"Who can access my song?","shared_piano_about_title-12":"Do I need to login or make an account? ","shared_piano_about_title-13":"Is my personal information stored with the song?","shared_piano_about_title-14":"Can I delete my song after it‚Äôs saved?","shared_piano_about_title-15":"What if I have concerns about a song link I find on the web?","shared_piano_about_title-16":"Can I show note names?","shared_piano_about_title-17":"Can I change the size of the keyboard?","shared_piano_about_title-18":"I can‚Äôt connect with friends.","shared_piano_about_title-19":"I don‚Äôt hear any sound.","shared_piano_about_title-20":"What devices does this site work on?","shared_piano_about_title-21":"What‚Äôs next for Shared Piano?","shared_piano_about_description-1":"Shared Piano is a simple tool for remote music teaching and collaboration that lets you play music together live on the web.","shared_piano_about_description-2":"You can play using your computer keyboard, clicking/tapping the keys, or using a MIDI keyboard.","shared_piano_about_description-3":"Just send the link to someone, and they can join in. Up to 10 people can play together at once. You don‚Äôt need to login or install anything. Just open the link and start playing.","shared_piano_about_description-4":"Just plug it in via USB and start playing. Note that you need a browser that supports WebMIDI, such as the latest version of Chrome.","shared_piano_about_description-5":"Use the center row of your keyboard for white keys of a piano, and keys above those for the black keys. Hold shift for sustain pedal, and use the bottom letter keys adjacent to the shift button to move octaves up and down.","shared_piano_about_description-6":"Select ‚ÄúDrum Kit‚Äù or ‚ÄúDrum Machine.‚Äù Play a C note for kick drum. Play D or E for snare. Play F, G, A, or B for toms. Play C# or D# for a clap/woodblock sound. Play F#, G#, A# for hihats.","shared_piano_about_description-7":"This site synchronizes your playing with others using WebRTC, an open standard that enables real-time communications in the browser. There will always be some latency, as it takes time for your playing to reach others. Hover over the emojis in the lower left to see the latency estimate between you and that person.","shared_piano_about_description-8":"Latency is influenced by many variables such as physical distance and your internet connection. Bluetooth headsets also add delay which may make it hard for you to play.","shared_piano_about_description-9":"Scroll up to listen to what has been played.","shared_piano_about_description-10":"When you want to save your song to share or to return later, click ‚ÄúSave.‚Äù A unique link is created for your song ‚Äì the notes, instruments, beats, and so on. Anyone you share the link with will be able to hear it.","shared_piano_about_description-11":"Anyone you share the link with will be able to listen to your song in the browser.","shared_piano_about_description-12":"No. You do not need to log in or create an account.","shared_piano_about_description-13":"No. We do not store any personally identifiable information with your creation.","shared_piano_about_description-14":"This site doesn‚Äôt require any kind of account or login. Because of this, we have no means to associate a song with the person who created it, so we can‚Äôt accommodate requests to delete song links.","shared_piano_about_description-15":'If you have concerns about a song link you‚Äôve found on the web, please contact us at <a href="mailto:chromemusiclab-support@google.com">chromemusiclab-support@google.com</a>.',"shared_piano_about_description-16":"Yes. Click ‚ÄúSettings‚Äù to show or hide note names, or even customize the note names.","shared_piano_about_description-17":"Yes. Change the size of the keyboard in ‚ÄúSettings.‚Äù If you don‚Äôt have a MIDI keyboard, you might want to reduce the number of octaves to make it easier to tap or click on keys.","shared_piano_about_description-18":"Firewalls or VPN might cause this issue. Playing over a cell connection (instead of WiFi) can also lead to connection issues. In some situations, refreshing your browser might fix things.","shared_piano_about_description-19":"You might need to click the speaker icon in the upper right to unmute the site.","shared_piano_about_description-20":"In general, you can use this site across most devices ‚Äì phones, tablets, laptops ‚Äì just by opening the site on a web browser such as Chrome. It‚Äôs still a work-in-progress beta version, so you may encounter some bugs as we continue to work on it.","shared_piano_about_description-21":'Our hope is to iron out bugs, build out a few more features, and fully integrate it as part of <a href="https://musiclab.chromeexperiments.com/Experiments">Chrome Music Lab</a>. Follow <a href="https://twitter.com/expwithgoogle">@expwithgoogle</a> to stay up to date. If you‚Äôd like to share something or reach out to us, drop us a line at <a href="mailto:sharedpiano-support@google.com">sharedpiano-support@google.com</a>.',shared_piano_about_privacy:"Privacy","shared_piano_about_and-symbol":"&",shared_piano_about_terms:"Terms","shared_piano_about_keyboard-diagram_alt-text":"Keyboard diagram of piano keys","shared_piano_about_keyboard-drum-diagram_alt-text":"Keyboard diagram of drum keys",shared_piano_general_close_label:"Close button to close help modal",shared_piano_general_close_save_modal_label:"Close the save modal","shared_piano_general_mute-enabled_label":"Audio is muted. Click to unmute","shared_piano_general_mute-disabled_label":"Audio is unmuted. Click to mute.","shared_piano_general_play-button-stop_label":"Stop the playback.","shared_piano_general_play-button-play_label":"Play the playback.",shared_piano_settings_none_label:"None",shared_piano_settings_auto_label:"Auto","shared_piano_settings_fit-to-song_label":"Fit to song","shared_piano_settings_not-supported_label":"Not supported","shared_piano_settings_instrument-piano":"Piano","shared_piano_settings_instrument-drum-machine":"Drum Machine","shared_piano_settings_instrument-drum-kit":"Drum Kit","shared_piano_settings_instrument-marimba":"Marimba","shared_piano_settings_instrument-strings":"Strings","shared_piano_settings_instrument-synth":"Synth","shared_piano_settings_instrument-woodwind":"Woodwind",shared_piano_general_fallback:"Your browser is not compatible with this experiment. Please try a different browser.","shared_piano_general_save-title":"Song is saved at this link.","shared_piano_general_save-new-tab":"Open in new tab","shared_piano_general_save-tweet_label":"Tweet","shared_piano_general_save-confirmed":"Song Saved","shared_piano_general_save-link_label":"link","shared_piano_general_save-banner":'This is a saved song. Play along here, or <a href="..">start your own live&nbsp;room</a>.',"shared_piano_general_save-tweet-text":"Check out this song created with #SharedPiano üéπ ‚Üí","shared_piano_general_clear-title":"Clear all notes?",shared_piano_general_loading:"Loading‚Ä¶","shared_piano_settings_half-step-single_label":"half step","shared_piano_settings_half-step-plural_label":"half steps",shared_piano_settings_all_label:"All inputs",shared_piano_share_label:"Share","shared_piano_share-recording_label":"Share recording"};
},{}],"sOiy":[function(require,module,exports) {
module.exports={en:require("./en.json")};
},{"./en.json":"sNTB"}],"xCiE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class t{constructor(){this.__storageKey="spSettings",null===this.__getSettings()&&this.__saveSettings({})}__getSettings(){return JSON.parse(localStorage.getItem(this.__storageKey))}__getSettingsNamespace(t){const e=this.__getSettings();return e.hasOwnProperty(t)||(e[t]={}),e[t]}__saveSettings(t){localStorage.setItem(this.__storageKey,JSON.stringify(t))}getSetting(t,e,s=null){const n=this.__getSettingsNamespace(t);return n.hasOwnProperty(e)?n[e]:s}setSetting(t,e){const s=this.__getSettings();s[t]=e,this.__saveSettings(s)}}const e=new t;exports.default=e;
},{}],"Ez1H":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("../src/util/local-store"));exports.languages=[{value:"en",name:"English"}],exports.getBrowserLanguage=(()=>{const e=window.navigator.language.slice(0,2),l=t.default.getSetting("lang","selected",null);return l||(exports.languages.filter(t=>t.value===e).length>0?e:"en")});
},{"../src/util/local-store":"xCiE"}],"Pc7K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LANG_CHANGED_EVENT=exports.CLEANUP_PARTS_MS=void 0;const e=6e4;exports.CLEANUP_PARTS_MS=6e4;const t="langChanged";exports.LANG_CHANGED_EVENT="langChanged";
},{}],"X5Vp":[function(require,module,exports) {
"use strict";function t(t,e,r){return Object.entries(n(e||{})).reduce((t,[e,r])=>t.replace(new RegExp(`{{[ ¬†]*${e}[ ¬†]*}}`,"gm"),String(n(r))),t)}function e(t,e){const n=t.split(".");let r=e.strings;for(;null!=r&&n.length>0;)r=r[n.shift()];return null!=r?r.toString():null}function n(t){return"function"==typeof t?t():t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.interpolate=t,exports.lookup=e,exports.extract=n;
},{}],"UVhF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerTranslateConfig=o,exports.dispatchLangChanged=a,exports.updateLang=s,exports.listenForLangChanged=i,exports.use=l,exports.get=p,exports.translateConfig=exports.defaultTranslateConfig=void 0;var e=require("./config"),t=require("./helpers");const n=()=>({loader:()=>Promise.resolve({}),empty:e=>`[${e}]`,lookup:t.lookup,interpolate:t.interpolate,translationCache:{}});exports.defaultTranslateConfig=n;let r=n();function o(e){return exports.translateConfig=r=Object.assign(Object.assign({},r),e)}function a(t){window.dispatchEvent(new CustomEvent(e.LANG_CHANGED_EVENT,{detail:t}))}function s(e,t,n=r){a({previousStrings:n.strings,previousLang:n.lang,lang:n.lang=e,strings:n.strings=t})}function i(t,n){const r=e=>t(e.detail);return window.addEventListener(e.LANG_CHANGED_EVENT,r,n),()=>window.removeEventListener(e.LANG_CHANGED_EVENT,r)}async function l(e,t=r){const n=await t.loader(e,t);t.translationCache={},s(e,n,t)}function p(e,n,o=r){let a=o.translationCache[e]||(o.translationCache[e]=o.lookup(e,o)||o.empty(e,o));return null!=(n=null!=n?(0,t.extract)(n):null)?o.interpolate(a,n,o):a}exports.translateConfig=r;
},{"./config":"Pc7K","./helpers":"X5Vp"}],"uWh2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDirective=exports.directive=void 0;const e=new WeakMap,t=t=>(...s)=>{const i=t(...s);return e.set(i,!0),i};exports.directive=t;const s=t=>"function"==typeof t&&e.has(t);exports.isDirective=s;
},{}],"ytxR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeNodes=exports.reparentNodes=exports.isCEPolyfill=void 0;const e="undefined"!=typeof window&&null!=window.customElements&&void 0!==window.customElements.polyfillWrapFlushCallback;exports.isCEPolyfill=e;const o=(e,o,l=null,s=null)=>{for(;o!==l;){const l=o.nextSibling;e.insertBefore(o,s),o=l}};exports.reparentNodes=o;const l=(e,o,l=null)=>{for(;o!==l;){const l=o.nextSibling;e.removeChild(o),o=l}};exports.removeNodes=l;
},{}],"pnLb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.nothing=exports.noChange=void 0;const e={};exports.noChange=e;const o={};exports.nothing=o;
},{}],"Av0K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.lastAttributeNameRegex=exports.createMarker=exports.isTemplatePartActive=exports.Template=exports.boundAttributeSuffix=exports.markerRegex=exports.nodeMarker=exports.marker=void 0;const e=`{{lit-${String(Math.random()).slice(2)}}}`;exports.marker=e;const t=`\x3c!--${e}--\x3e`;exports.nodeMarker=t;const r=new RegExp(`${e}|${t}`);exports.markerRegex=r;const s="$lit$";exports.boundAttributeSuffix=s;class o{constructor(t,o){this.parts=[],this.element=o;const i=[],l=[],p=document.createTreeWalker(o.content,133,null,!1);let c=0,d=-1,u=0;const{strings:f,values:{length:h}}=t;for(;u<h;){const t=p.nextNode();if(null!==t){if(d++,1===t.nodeType){if(t.hasAttributes()){const e=t.attributes,{length:o}=e;let i=0;for(let t=0;t<o;t++)n(e[t].name,s)&&i++;for(;i-- >0;){const e=f[u],o=x.exec(e)[2],n=o.toLowerCase()+s,i=t.getAttribute(n);t.removeAttribute(n);const a=i.split(r);this.parts.push({type:"attribute",index:d,name:o,strings:a}),u+=a.length-1}}"TEMPLATE"===t.tagName&&(l.push(t),p.currentNode=t.content)}else if(3===t.nodeType){const o=t.data;if(o.indexOf(e)>=0){const e=t.parentNode,l=o.split(r),p=l.length-1;for(let r=0;r<p;r++){let o,i=l[r];if(""===i)o=a();else{const e=x.exec(i);null!==e&&n(e[2],s)&&(i=i.slice(0,e.index)+e[1]+e[2].slice(0,-s.length)+e[3]),o=document.createTextNode(i)}e.insertBefore(o,t),this.parts.push({type:"node",index:++d})}""===l[p]?(e.insertBefore(a(),t),i.push(t)):t.data=l[p],u+=p}}else if(8===t.nodeType)if(t.data===e){const e=t.parentNode;null!==t.previousSibling&&d!==c||(d++,e.insertBefore(a(),t)),c=d,this.parts.push({type:"node",index:d}),null===t.nextSibling?t.data="":(i.push(t),d--),u++}else{let r=-1;for(;-1!==(r=t.data.indexOf(e,r+1));)this.parts.push({type:"node",index:-1}),u++}}else p.currentNode=l.pop()}for(const e of i)e.parentNode.removeChild(e)}}exports.Template=o;const n=(e,t)=>{const r=e.length-t.length;return r>=0&&e.slice(r)===t},i=e=>-1!==e.index;exports.isTemplatePartActive=i;const a=()=>document.createComment("");exports.createMarker=a;const x=/([ \x09\x0a\x0c\x0d])([^\0-\x1F\x7F-\x9F "'>=/]+)([ \x09\x0a\x0c\x0d]*=[ \x09\x0a\x0c\x0d]*(?:[^ \x09\x0a\x0c\x0d"'`<>=]*|"[^"]*|'[^']*))$/;exports.lastAttributeNameRegex=x;
},{}],"bn5t":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TemplateInstance=void 0;var e=require("./dom.js"),t=require("./template.js");class s{constructor(e,t,s){this.__parts=[],this.template=e,this.processor=t,this.options=s}update(e){let t=0;for(const s of this.__parts)void 0!==s&&s.setValue(e[t]),t++;for(const s of this.__parts)void 0!==s&&s.commit()}_clone(){const s=e.isCEPolyfill?this.template.element.content.cloneNode(!0):document.importNode(this.template.element.content,!0),o=[],r=this.template.parts,n=document.createTreeWalker(s,133,null,!1);let i,p=0,l=0,a=n.nextNode();for(;p<r.length;)if(i=r[p],(0,t.isTemplatePartActive)(i)){for(;l<i.index;)l++,"TEMPLATE"===a.nodeName&&(o.push(a),n.currentNode=a.content),null===(a=n.nextNode())&&(n.currentNode=o.pop(),a=n.nextNode());if("node"===i.type){const e=this.processor.handleTextExpression(this.options);e.insertAfterNode(a.previousSibling),this.__parts.push(e)}else this.__parts.push(...this.processor.handleAttributeExpressions(a,i.name,i.strings,this.options));p++}else this.__parts.push(void 0),p++;return e.isCEPolyfill&&(document.adoptNode(s),customElements.upgrade(s)),s}}exports.TemplateInstance=s;
},{"./dom.js":"ytxR","./template.js":"Av0K"}],"cVNN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SVGTemplateResult=exports.TemplateResult=void 0;var e=require("./dom.js"),t=require("./template.js");const s=` ${t.marker} `;class r{constructor(e,t,s,r){this.strings=e,this.values=t,this.type=s,this.processor=r}getHTML(){const e=this.strings.length-1;let r="",n=!1;for(let l=0;l<e;l++){const e=this.strings[l],i=e.lastIndexOf("\x3c!--");n=(i>-1||n)&&-1===e.indexOf("--\x3e",i+1);const o=t.lastAttributeNameRegex.exec(e);r+=null===o?e+(n?s:t.nodeMarker):e.substr(0,o.index)+o[1]+o[2]+t.boundAttributeSuffix+o[3]+t.marker}return r+=this.strings[e]}getTemplateElement(){const e=document.createElement("template");return e.innerHTML=this.getHTML(),e}}exports.TemplateResult=r;class n extends r{getHTML(){return`<svg>${super.getHTML()}</svg>`}getTemplateElement(){const t=super.getTemplateElement(),s=t.content,r=s.firstChild;return s.removeChild(r),(0,e.reparentNodes)(s,r.firstChild),t}}exports.SVGTemplateResult=n;
},{"./dom.js":"ytxR","./template.js":"Av0K"}],"atl2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EventPart=exports.PropertyPart=exports.PropertyCommitter=exports.BooleanAttributePart=exports.NodePart=exports.AttributePart=exports.AttributeCommitter=exports.isIterable=exports.isPrimitive=void 0;var t=require("./directive.js"),e=require("./dom.js"),i=require("./part.js"),s=require("./template-instance.js"),n=require("./template-result.js"),r=require("./template.js");const o=t=>null===t||!("object"==typeof t||"function"==typeof t);exports.isPrimitive=o;const a=t=>Array.isArray(t)||!(!t||!t[Symbol.iterator]);exports.isIterable=a;class h{constructor(t,e,i){this.dirty=!0,this.element=t,this.name=e,this.strings=i,this.parts=[];for(let s=0;s<i.length-1;s++)this.parts[s]=this._createPart()}_createPart(){return new l(this)}_getValue(){const t=this.strings,e=t.length-1;let i="";for(let s=0;s<e;s++){i+=t[s];const e=this.parts[s];if(void 0!==e){const t=e.value;if(o(t)||!a(t))i+="string"==typeof t?t:String(t);else for(const e of t)i+="string"==typeof e?e:String(e)}}return i+=t[e]}commit(){this.dirty&&(this.dirty=!1,this.element.setAttribute(this.name,this._getValue()))}}exports.AttributeCommitter=h;class l{constructor(t){this.value=void 0,this.committer=t}setValue(e){e===i.noChange||o(e)&&e===this.value||(this.value=e,(0,t.isDirective)(e)||(this.committer.dirty=!0))}commit(){for(;(0,t.isDirective)(this.value);){const t=this.value;this.value=i.noChange,t(this)}this.value!==i.noChange&&this.committer.commit()}}exports.AttributePart=l;class u{constructor(t){this.value=void 0,this.__pendingValue=void 0,this.options=t}appendInto(t){this.startNode=t.appendChild((0,r.createMarker)()),this.endNode=t.appendChild((0,r.createMarker)())}insertAfterNode(t){this.startNode=t,this.endNode=t.nextSibling}appendIntoPart(t){t.__insert(this.startNode=(0,r.createMarker)()),t.__insert(this.endNode=(0,r.createMarker)())}insertAfterPart(t){t.__insert(this.startNode=(0,r.createMarker)()),this.endNode=t.endNode,t.endNode=this.startNode}setValue(t){this.__pendingValue=t}commit(){if(null===this.startNode.parentNode)return;for(;(0,t.isDirective)(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=i.noChange,t(this)}const e=this.__pendingValue;e!==i.noChange&&(o(e)?e!==this.value&&this.__commitText(e):e instanceof n.TemplateResult?this.__commitTemplateResult(e):e instanceof Node?this.__commitNode(e):a(e)?this.__commitIterable(e):e===i.nothing?(this.value=i.nothing,this.clear()):this.__commitText(e))}__insert(t){this.endNode.parentNode.insertBefore(t,this.endNode)}__commitNode(t){this.value!==t&&(this.clear(),this.__insert(t),this.value=t)}__commitText(t){const e=this.startNode.nextSibling,i="string"==typeof(t=null==t?"":t)?t:String(t);e===this.endNode.previousSibling&&3===e.nodeType?e.data=i:this.__commitNode(document.createTextNode(i)),this.value=t}__commitTemplateResult(t){const e=this.options.templateFactory(t);if(this.value instanceof s.TemplateInstance&&this.value.template===e)this.value.update(t.values);else{const i=new s.TemplateInstance(e,t.processor,this.options),n=i._clone();i.update(t.values),this.__commitNode(n),this.value=i}}__commitIterable(t){Array.isArray(this.value)||(this.value=[],this.clear());const e=this.value;let i,s=0;for(const n of t)void 0===(i=e[s])&&(i=new u(this.options),e.push(i),0===s?i.appendIntoPart(this):i.insertAfterPart(e[s-1])),i.setValue(n),i.commit(),s++;s<e.length&&(e.length=s,this.clear(i&&i.endNode))}clear(t=this.startNode){(0,e.removeNodes)(this.startNode.parentNode,t.nextSibling,this.endNode)}}exports.NodePart=u;class d{constructor(t,e,i){if(this.value=void 0,this.__pendingValue=void 0,2!==i.length||""!==i[0]||""!==i[1])throw new Error("Boolean attributes can only contain a single expression");this.element=t,this.name=e,this.strings=i}setValue(t){this.__pendingValue=t}commit(){for(;(0,t.isDirective)(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=i.noChange,t(this)}if(this.__pendingValue===i.noChange)return;const e=!!this.__pendingValue;this.value!==e&&(e?this.element.setAttribute(this.name,""):this.element.removeAttribute(this.name),this.value=e),this.__pendingValue=i.noChange}}exports.BooleanAttributePart=d;class c extends h{constructor(t,e,i){super(t,e,i),this.single=2===i.length&&""===i[0]&&""===i[1]}_createPart(){return new p(this)}_getValue(){return this.single?this.parts[0].value:super._getValue()}commit(){this.dirty&&(this.dirty=!1,this.element[this.name]=this._getValue())}}exports.PropertyCommitter=c;class p extends l{}exports.PropertyPart=p;let _=!1;(()=>{try{const e={get capture(){return _=!0,!1}};window.addEventListener("test",e,e),window.removeEventListener("test",e,e)}catch(t){}})();class m{constructor(t,e,i){this.value=void 0,this.__pendingValue=void 0,this.element=t,this.eventName=e,this.eventContext=i,this.__boundHandleEvent=(t=>this.handleEvent(t))}setValue(t){this.__pendingValue=t}commit(){for(;(0,t.isDirective)(this.__pendingValue);){const t=this.__pendingValue;this.__pendingValue=i.noChange,t(this)}if(this.__pendingValue===i.noChange)return;const e=this.__pendingValue,s=this.value,n=null==e||null!=s&&(e.capture!==s.capture||e.once!==s.once||e.passive!==s.passive),r=null!=e&&(null==s||n);n&&this.element.removeEventListener(this.eventName,this.__boundHandleEvent,this.__options),r&&(this.__options=v(e),this.element.addEventListener(this.eventName,this.__boundHandleEvent,this.__options)),this.value=e,this.__pendingValue=i.noChange}handleEvent(t){"function"==typeof this.value?this.value.call(this.eventContext||this.element,t):this.value.handleEvent(t)}}exports.EventPart=m;const v=t=>t&&(_?{capture:t.capture,passive:t.passive,once:t.once}:t.capture);
},{"./directive.js":"uWh2","./dom.js":"ytxR","./part.js":"pnLb","./template-instance.js":"bn5t","./template-result.js":"cVNN","./template.js":"Av0K"}],"LBiL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.defaultTemplateProcessor=exports.DefaultTemplateProcessor=void 0;var e=require("./parts.js");class t{handleAttributeExpressions(t,r,s,o){const a=r[0];if("."===a){return new e.PropertyCommitter(t,r.slice(1),s).parts}return"@"===a?[new e.EventPart(t,r.slice(1),o.eventContext)]:"?"===a?[new e.BooleanAttributePart(t,r.slice(1),s)]:new e.AttributeCommitter(t,r,s).parts}handleTextExpression(t){return new e.NodePart(t)}}exports.DefaultTemplateProcessor=t;const r=new t;exports.defaultTemplateProcessor=r;
},{"./parts.js":"atl2"}],"gbKZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.templateFactory=t,exports.templateCaches=void 0;var e=require("./template.js");function t(t){let s=r.get(t.type);void 0===s&&(s={stringsArray:new WeakMap,keyString:new Map},r.set(t.type,s));let n=s.stringsArray.get(t.strings);if(void 0!==n)return n;const a=t.strings.join(e.marker);return void 0===(n=s.keyString.get(a))&&(n=new e.Template(t,t.getTemplateElement()),s.keyString.set(a,n)),s.stringsArray.set(t.strings,n),n}const r=new Map;exports.templateCaches=r;
},{"./template.js":"Av0K"}],"Fhpq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.render=exports.parts=void 0;var e=require("./dom.js"),t=require("./parts.js"),r=require("./template-factory.js");const s=new WeakMap;exports.parts=s;const o=(o,a,p)=>{let d=s.get(a);void 0===d&&((0,e.removeNodes)(a,a.firstChild),s.set(a,d=new t.NodePart(Object.assign({templateFactory:r.templateFactory},p))),d.appendInto(a)),d.setValue(o),d.commit()};exports.render=o;
},{"./dom.js":"ytxR","./parts.js":"atl2","./template-factory.js":"gbKZ"}],"SPDu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"DefaultTemplateProcessor",{enumerable:!0,get:function(){return e.DefaultTemplateProcessor}}),Object.defineProperty(exports,"defaultTemplateProcessor",{enumerable:!0,get:function(){return e.defaultTemplateProcessor}}),Object.defineProperty(exports,"SVGTemplateResult",{enumerable:!0,get:function(){return t.SVGTemplateResult}}),Object.defineProperty(exports,"TemplateResult",{enumerable:!0,get:function(){return t.TemplateResult}}),Object.defineProperty(exports,"directive",{enumerable:!0,get:function(){return r.directive}}),Object.defineProperty(exports,"isDirective",{enumerable:!0,get:function(){return r.isDirective}}),Object.defineProperty(exports,"removeNodes",{enumerable:!0,get:function(){return n.removeNodes}}),Object.defineProperty(exports,"reparentNodes",{enumerable:!0,get:function(){return n.reparentNodes}}),Object.defineProperty(exports,"noChange",{enumerable:!0,get:function(){return o.noChange}}),Object.defineProperty(exports,"nothing",{enumerable:!0,get:function(){return o.nothing}}),Object.defineProperty(exports,"AttributeCommitter",{enumerable:!0,get:function(){return i.AttributeCommitter}}),Object.defineProperty(exports,"AttributePart",{enumerable:!0,get:function(){return i.AttributePart}}),Object.defineProperty(exports,"BooleanAttributePart",{enumerable:!0,get:function(){return i.BooleanAttributePart}}),Object.defineProperty(exports,"EventPart",{enumerable:!0,get:function(){return i.EventPart}}),Object.defineProperty(exports,"isIterable",{enumerable:!0,get:function(){return i.isIterable}}),Object.defineProperty(exports,"isPrimitive",{enumerable:!0,get:function(){return i.isPrimitive}}),Object.defineProperty(exports,"NodePart",{enumerable:!0,get:function(){return i.NodePart}}),Object.defineProperty(exports,"PropertyCommitter",{enumerable:!0,get:function(){return i.PropertyCommitter}}),Object.defineProperty(exports,"PropertyPart",{enumerable:!0,get:function(){return i.PropertyPart}}),Object.defineProperty(exports,"parts",{enumerable:!0,get:function(){return u.parts}}),Object.defineProperty(exports,"render",{enumerable:!0,get:function(){return u.render}}),Object.defineProperty(exports,"templateCaches",{enumerable:!0,get:function(){return p.templateCaches}}),Object.defineProperty(exports,"templateFactory",{enumerable:!0,get:function(){return p.templateFactory}}),Object.defineProperty(exports,"TemplateInstance",{enumerable:!0,get:function(){return a.TemplateInstance}}),Object.defineProperty(exports,"createMarker",{enumerable:!0,get:function(){return s.createMarker}}),Object.defineProperty(exports,"isTemplatePartActive",{enumerable:!0,get:function(){return s.isTemplatePartActive}}),Object.defineProperty(exports,"Template",{enumerable:!0,get:function(){return s.Template}}),exports.svg=exports.html=void 0;var e=require("./lib/default-template-processor.js"),t=require("./lib/template-result.js"),r=require("./lib/directive.js"),n=require("./lib/dom.js"),o=require("./lib/part.js"),i=require("./lib/parts.js"),u=require("./lib/render.js"),p=require("./lib/template-factory.js"),a=require("./lib/template-instance.js"),s=require("./lib/template.js");"undefined"!=typeof window&&(window.litHtmlVersions||(window.litHtmlVersions=[])).push("1.2.1");const l=(r,...n)=>new t.TemplateResult(r,n,"html",e.defaultTemplateProcessor);exports.html=l;const c=(r,...n)=>new t.SVGTemplateResult(r,n,"svg",e.defaultTemplateProcessor);exports.svg=c;
},{"./lib/default-template-processor.js":"LBiL","./lib/template-result.js":"cVNN","./lib/directive.js":"uWh2","./lib/dom.js":"ytxR","./lib/part.js":"pnLb","./lib/parts.js":"atl2","./lib/render.js":"Fhpq","./lib/template-factory.js":"gbKZ","./lib/template-instance.js":"bn5t","./lib/template.js":"Av0K"}],"GN68":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isConnected=t,exports.removeDisconnectedParts=n,exports.whenIdle=o,exports.attachPartsGarbageCollector=r;var e=require("lit-html");function t(t){return t instanceof e.NodePart?t.startNode.isConnected:t instanceof e.AttributePart?t.committer.element.isConnected:t.element.isConnected}function n(e){for(const[n]of e)t(n)||e.delete(n)}function o(e){"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e)}function r(e,t){setInterval(()=>o(()=>n(e)),t)}
},{"lit-html":"SPDu"}],"UJGa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.langChanged=exports.partCache=void 0;var e=require("lit-html"),t=require("./cleanup"),r=require("./config"),o=require("./util");const a=new Map;function n(){(0,o.listenForLangChanged)(e=>{for(const[r,o]of a)(0,t.isConnected)(r)&&c(r,o,e)})}function c(e,t,r){const o=t(r);e.value!==o&&(e.setValue(o),e.commit())}exports.partCache=a,n(),(0,t.attachPartsGarbageCollector)(a,r.CLEANUP_PARTS_MS);const i=(0,e.directive)(e=>t=>{a.set(t,e),c(t,e)});exports.langChanged=i;
},{"lit-html":"SPDu","./cleanup":"GN68","./config":"Pc7K","./util":"UVhF"}],"RtTJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.translate=void 0;var e=require("../directive"),t=require("../util");const r=(r,s,a)=>(0,e.langChanged)(()=>(0,t.get)(r,s,a));exports.translate=r;
},{"../directive":"UJGa","../util":"UVhF"}],"jTPt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.unsafeHTML=void 0;var e=require("../lib/parts.js"),t=require("../lit-html.js");const n=new WeakMap,r=(0,t.directive)(r=>i=>{if(!(i instanceof t.NodePart))throw new Error("unsafeHTML can only be used in text bindings");const s=n.get(i);if(void 0!==s&&(0,e.isPrimitive)(r)&&r===s.value&&i.value===s.fragment)return;const o=document.createElement("template");o.innerHTML=r;const a=document.importNode(o.content,!0);i.setValue(a),n.set(i,{value:r,fragment:a})});exports.unsafeHTML=r;
},{"../lib/parts.js":"atl2","../lit-html.js":"SPDu"}],"XZN2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.translateUnsafeHTML=void 0;var e=require("lit-html/directives/unsafe-html"),t=require("../directive"),r=require("../util");const s=(s,a,i)=>(0,t.langChanged)(()=>(0,e.unsafeHTML)((0,r.get)(s,a,i)));exports.translateUnsafeHTML=s;
},{"lit-html/directives/unsafe-html":"jTPt","../directive":"UJGa","../util":"UVhF"}],"NZZ9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={langChanged:!0};Object.defineProperty(exports,"langChanged",{enumerable:!0,get:function(){return a.langChanged}});var r=require("./util");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var t=require("./helpers");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var n=require("./directives/translate");Object.keys(n).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return n[r]}}))});var o=require("./directives/translate-unsafe-html");Object.keys(o).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return o[r]}}))});var a=require("./directive");
},{"./util":"UVhF","./helpers":"X5Vp","./directives/translate":"RtTJ","./directives/translate-unsafe-html":"XZN2","./directive":"UJGa"}],"HLSW":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,a){function o(e){try{c(r.next(e))}catch(t){a(t)}}function u(e){try{c(r.throw(e))}catch(t){a(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,u)}c((r=r.apply(e,t||[])).next())})},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const n=t(require("./lang/*.json")),r=require("../i18n/languages"),i=require("lit-translate");function a(){return e(this,void 0,void 0,function*(){const e=new URLSearchParams(window.location.search).get("lang")||r.getBrowserLanguage();yield i.use(e)})}i.registerTranslateConfig({loader:e=>n.default[e],interpolate:(e,t)=>{for(const[n,r]of Object.entries(i.extract(t)))e=e.replace(new RegExp(`\\\${${n}}`,"gm"),String(i.extract(r)));return e}}),a();
},{"./lang/*.json":"sOiy","../i18n/languages":"Ez1H","lit-translate":"NZZ9"}],"NXoq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.removeNodesFromTemplate=n,exports.insertNodeIntoTemplate=l;var e=require("./template.js");const t=133;function n(e,n){const{element:{content:r},parts:l}=e,u=document.createTreeWalker(r,t,null,!1);let c=o(l),d=l[c],s=-1,i=0;const a=[];let p=null;for(;u.nextNode();){s++;const e=u.currentNode;for(e.previousSibling===p&&(p=null),n.has(e)&&(a.push(e),null===p&&(p=e)),null!==p&&i++;void 0!==d&&d.index===s;)d.index=null!==p?-1:d.index-i,d=l[c=o(l,c)]}a.forEach(e=>e.parentNode.removeChild(e))}const r=e=>{let n=11===e.nodeType?0:1;const r=document.createTreeWalker(e,t,null,!1);for(;r.nextNode();)n++;return n},o=(t,n=-1)=>{for(let r=n+1;r<t.length;r++){const n=t[r];if((0,e.isTemplatePartActive)(n))return r}return-1};function l(e,n,l=null){const{element:{content:u},parts:c}=e;if(null==l)return void u.appendChild(n);const d=document.createTreeWalker(u,t,null,!1);let s=o(c),i=0,a=-1;for(;d.nextNode();){for(a++,d.currentNode===l&&(i=r(n),l.parentNode.insertBefore(n,l));-1!==s&&c[s].index===a;){if(i>0){for(;-1!==s;)c[s].index+=i,s=o(c,s);return}s=o(c,s)}}}
},{"./template.js":"Av0K"}],"eBH8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"html",{enumerable:!0,get:function(){return a.html}}),Object.defineProperty(exports,"svg",{enumerable:!0,get:function(){return a.svg}}),Object.defineProperty(exports,"TemplateResult",{enumerable:!0,get:function(){return a.TemplateResult}}),exports.render=void 0;var e=require("./dom.js"),t=require("./modify-template.js"),r=require("./render.js"),n=require("./template-factory.js"),o=require("./template-instance.js"),s=require("./template.js"),a=require("../lit-html.js");const l=(e,t)=>`${e}--${t}`;let i=!0;void 0===window.ShadyCSS?i=!1:void 0===window.ShadyCSS.prepareTemplateDom&&(console.warn("Incompatible ShadyCSS version detected. Please update to at least @webcomponents/webcomponentsjs@2.0.2 and @webcomponents/shadycss@1.3.1."),i=!1);const d=e=>t=>{const r=l(t.type,e);let o=n.templateCaches.get(r);void 0===o&&(o={stringsArray:new WeakMap,keyString:new Map},n.templateCaches.set(r,o));let a=o.stringsArray.get(t.strings);if(void 0!==a)return a;const d=t.strings.join(s.marker);if(void 0===(a=o.keyString.get(d))){const r=t.getTemplateElement();i&&window.ShadyCSS.prepareTemplateDom(r,e),a=new s.Template(t,r),o.keyString.set(d,a)}return o.stringsArray.set(t.strings,a),a},p=["html","svg"],c=e=>{p.forEach(r=>{const o=n.templateCaches.get(l(r,e));void 0!==o&&o.keyString.forEach(e=>{const{element:{content:r}}=e,n=new Set;Array.from(r.querySelectorAll("style")).forEach(e=>{n.add(e)}),(0,t.removeNodesFromTemplate)(e,n)})})},m=new Set,y=(e,r,n)=>{m.add(e);const o=n?n.element:document.createElement("template"),s=r.querySelectorAll("style"),{length:a}=s;if(0===a)return void window.ShadyCSS.prepareTemplateStyles(o,e);const l=document.createElement("style");for(let t=0;t<a;t++){const e=s[t];e.parentNode.removeChild(e),l.textContent+=e.textContent}c(e);const i=o.content;n?(0,t.insertNodeIntoTemplate)(n,l,i.firstChild):i.insertBefore(l,i.firstChild),window.ShadyCSS.prepareTemplateStyles(o,e);const d=i.querySelector("style");if(window.ShadyCSS.nativeShadow&&null!==d)r.insertBefore(d.cloneNode(!0),r.firstChild);else if(n){i.insertBefore(l,i.firstChild);const e=new Set;e.add(l),(0,t.removeNodesFromTemplate)(n,e)}},S=(t,n,s)=>{if(!s||"object"!=typeof s||!s.scopeName)throw new Error("The `scopeName` option is required.");const a=s.scopeName,l=r.parts.has(n),p=i&&11===n.nodeType&&!!n.host,c=p&&!m.has(a),S=c?document.createDocumentFragment():n;if((0,r.render)(t,S,Object.assign({templateFactory:d(a)},s)),c){const t=r.parts.get(S);r.parts.delete(S);const s=t.value instanceof o.TemplateInstance?t.value.template:void 0;y(a,S,s),(0,e.removeNodes)(n,n.firstChild),n.appendChild(S),r.parts.set(n,t)}!l&&p&&window.ShadyCSS.styleElement(n.host)};exports.render=S;
},{"./dom.js":"ytxR","./modify-template.js":"NXoq","./render.js":"Fhpq","./template-factory.js":"gbKZ","./template-instance.js":"bn5t","./template.js":"Av0K","../lit-html.js":"SPDu"}],"fKvB":[function(require,module,exports) {
"use strict";var t;Object.defineProperty(exports,"__esModule",{value:!0}),exports.UpdatingElement=exports.notEqual=exports.defaultConverter=void 0,window.JSCompiler_renameProperty=((t,e)=>t);const e={toAttribute(t,e){switch(e){case Boolean:return t?"":null;case Object:case Array:return null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){switch(e){case Boolean:return null!==t;case Number:return null===t?null:Number(t);case Object:case Array:return JSON.parse(t)}return t}};exports.defaultConverter=e;const r=(t,e)=>e!==t&&(e==e||t==t);exports.notEqual=r;const s={attribute:!0,type:String,converter:e,reflect:!1,hasChanged:r},i=1,a=4,o=8,p=16,n="finalized";class h extends HTMLElement{constructor(){super(),this._updateState=0,this._instanceProperties=void 0,this._updatePromise=new Promise(t=>this._enableUpdatingResolver=t),this._changedProperties=new Map,this._reflectingProperties=void 0,this.initialize()}static get observedAttributes(){this.finalize();const t=[];return this._classProperties.forEach((e,r)=>{const s=this._attributeNameForProperty(r,e);void 0!==s&&(this._attributeToPropertyMap.set(s,r),t.push(s))}),t}static _ensureClassProperties(){if(!this.hasOwnProperty(JSCompiler_renameProperty("_classProperties",this))){this._classProperties=new Map;const t=Object.getPrototypeOf(this)._classProperties;void 0!==t&&t.forEach((t,e)=>this._classProperties.set(e,t))}}static createProperty(t,e=s){if(this._ensureClassProperties(),this._classProperties.set(t,e),e.noAccessor||this.prototype.hasOwnProperty(t))return;const r="symbol"==typeof t?Symbol():`__${t}`,i=this.getPropertyDescriptor(t,r,e);void 0!==i&&Object.defineProperty(this.prototype,t,i)}static getPropertyDescriptor(t,e,r){return{get(){return this[e]},set(r){const s=this[t];this[e]=r,this._requestUpdate(t,s)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this._classProperties&&this._classProperties.get(t)||s}static finalize(){const t=Object.getPrototypeOf(this);if(t.hasOwnProperty(n)||t.finalize(),this[n]=!0,this._ensureClassProperties(),this._attributeToPropertyMap=new Map,this.hasOwnProperty(JSCompiler_renameProperty("properties",this))){const t=this.properties,e=[...Object.getOwnPropertyNames(t),..."function"==typeof Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t):[]];for(const r of e)this.createProperty(r,t[r])}}static _attributeNameForProperty(t,e){const r=e.attribute;return!1===r?void 0:"string"==typeof r?r:"string"==typeof t?t.toLowerCase():void 0}static _valueHasChanged(t,e,s=r){return s(t,e)}static _propertyValueFromAttribute(t,r){const s=r.type,i=r.converter||e,a="function"==typeof i?i:i.fromAttribute;return a?a(t,s):t}static _propertyValueToAttribute(t,r){if(void 0===r.reflect)return;const s=r.type,i=r.converter;return(i&&i.toAttribute||e.toAttribute)(t,s)}initialize(){this._saveInstanceProperties(),this._requestUpdate()}_saveInstanceProperties(){this.constructor._classProperties.forEach((t,e)=>{if(this.hasOwnProperty(e)){const t=this[e];delete this[e],this._instanceProperties||(this._instanceProperties=new Map),this._instanceProperties.set(e,t)}})}_applyInstanceProperties(){this._instanceProperties.forEach((t,e)=>this[e]=t),this._instanceProperties=void 0}connectedCallback(){this.enableUpdating()}enableUpdating(){void 0!==this._enableUpdatingResolver&&(this._enableUpdatingResolver(),this._enableUpdatingResolver=void 0)}disconnectedCallback(){}attributeChangedCallback(t,e,r){e!==r&&this._attributeToProperty(t,r)}_propertyToAttribute(t,e,r=s){const i=this.constructor,a=i._attributeNameForProperty(t,r);if(void 0!==a){const t=i._propertyValueToAttribute(e,r);if(void 0===t)return;this._updateState=this._updateState|o,null==t?this.removeAttribute(a):this.setAttribute(a,t),this._updateState=this._updateState&~o}}_attributeToProperty(t,e){if(this._updateState&o)return;const r=this.constructor,s=r._attributeToPropertyMap.get(t);if(void 0!==s){const t=r.getPropertyOptions(s);this._updateState=this._updateState|p,this[s]=r._propertyValueFromAttribute(e,t),this._updateState=this._updateState&~p}}_requestUpdate(t,e){let r=!0;if(void 0!==t){const s=this.constructor,i=s.getPropertyOptions(t);s._valueHasChanged(this[t],e,i.hasChanged)?(this._changedProperties.has(t)||this._changedProperties.set(t,e),!0!==i.reflect||this._updateState&p||(void 0===this._reflectingProperties&&(this._reflectingProperties=new Map),this._reflectingProperties.set(t,i))):r=!1}!this._hasRequestedUpdate&&r&&(this._updatePromise=this._enqueueUpdate())}requestUpdate(t,e){return this._requestUpdate(t,e),this.updateComplete}async _enqueueUpdate(){this._updateState=this._updateState|a;try{await this._updatePromise}catch(e){}const t=this.performUpdate();return null!=t&&await t,!this._hasRequestedUpdate}get _hasRequestedUpdate(){return this._updateState&a}get hasUpdated(){return this._updateState&i}performUpdate(){this._instanceProperties&&this._applyInstanceProperties();let t=!1;const e=this._changedProperties;try{(t=this.shouldUpdate(e))?this.update(e):this._markUpdated()}catch(r){throw t=!1,this._markUpdated(),r}t&&(this._updateState&i||(this._updateState=this._updateState|i,this.firstUpdated(e)),this.updated(e))}_markUpdated(){this._changedProperties=new Map,this._updateState=this._updateState&~a}get updateComplete(){return this._getUpdateComplete()}_getUpdateComplete(){return this._updatePromise}shouldUpdate(t){return!0}update(t){void 0!==this._reflectingProperties&&this._reflectingProperties.size>0&&(this._reflectingProperties.forEach((t,e)=>this._propertyToAttribute(e,this[e],t)),this._reflectingProperties=void 0),this._markUpdated()}updated(t){}firstUpdated(t){}}exports.UpdatingElement=h,h[t=n]=!0;
},{}],"FzpZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.property=i,exports.internalProperty=s,exports.query=c,exports.queryAsync=u,exports.queryAll=l,exports.eventOptions=f,exports.queryAssignedNodes=m,exports.customElement=void 0;const e=(e,t)=>(window.customElements.define(e,t),t),t=(e,t)=>{const{kind:r,elements:n}=t;return{kind:r,elements:n,finisher(t){window.customElements.define(e,t)}}},r=r=>n=>"function"==typeof n?e(r,n):t(r,n);exports.customElement=r;const n=(e,t)=>"method"!==t.kind||!t.descriptor||"value"in t.descriptor?{kind:"field",key:Symbol(),placement:"own",descriptor:{},initializer(){"function"==typeof t.initializer&&(this[t.key]=t.initializer.call(this))},finisher(r){r.createProperty(t.key,e)}}:Object.assign(Object.assign({},t),{finisher(r){r.createProperty(t.key,e)}}),o=(e,t,r)=>{t.constructor.createProperty(r,e)};function i(e){return(t,r)=>void 0!==r?o(e,t,r):n(e,t)}function s(e){return i({attribute:!1,hasChanged:null==e?void 0:e.hasChanged})}function c(e){return(t,r)=>{const n={get(){return this.renderRoot.querySelector(e)},enumerable:!0,configurable:!0};return void 0!==r?a(n,t,r):d(n,t)}}function u(e){return(t,r)=>{const n={async get(){return await this.updateComplete,this.renderRoot.querySelector(e)},enumerable:!0,configurable:!0};return void 0!==r?a(n,t,r):d(n,t)}}function l(e){return(t,r)=>{const n={get(){return this.renderRoot.querySelectorAll(e)},enumerable:!0,configurable:!0};return void 0!==r?a(n,t,r):d(n,t)}}const a=(e,t,r)=>{Object.defineProperty(t,r,e)},d=(e,t)=>({kind:"method",placement:"prototype",key:t.key,descriptor:e}),p=(e,t)=>Object.assign(Object.assign({},t),{finisher(r){Object.assign(r.prototype[t.key],e)}}),y=(e,t,r)=>{Object.assign(t[r],e)};function f(e){return(t,r)=>void 0!==r?y(e,t,r):p(e,t)}function m(e="",t=!1){return(r,n)=>{const o={get(){const r=`slot${e?`[name=${e}]`:""}`,n=this.renderRoot.querySelector(r);return n&&n.assignedNodes({flatten:t})},enumerable:!0,configurable:!0};return void 0!==n?a(o,r,n):d(o,r)}}
},{}],"ZFCR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.css=exports.unsafeCSS=exports.CSSResult=exports.supportsAdoptingStyleSheets=void 0;const e="adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype;exports.supportsAdoptingStyleSheets=e;const t=Symbol();class s{constructor(e,s){if(s!==t)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e}get styleSheet(){return void 0===this._styleSheet&&(e?(this._styleSheet=new CSSStyleSheet,this._styleSheet.replaceSync(this.cssText)):this._styleSheet=null),this._styleSheet}toString(){return this.cssText}}exports.CSSResult=s;const r=e=>new s(String(e),t);exports.unsafeCSS=r;const o=e=>{if(e instanceof s)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but\n            take care to ensure page security.`)},n=(e,...r)=>{const n=r.reduce((t,s,r)=>t+o(s)+e[r+1],e[0]);return new s(n,t)};exports.css=n;
},{}],"bhxD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={LitElement:!0,html:!0,svg:!0,TemplateResult:!0,SVGTemplateResult:!0};Object.defineProperty(exports,"html",{enumerable:!0,get:function(){return n.html}}),Object.defineProperty(exports,"svg",{enumerable:!0,get:function(){return n.svg}}),Object.defineProperty(exports,"TemplateResult",{enumerable:!0,get:function(){return n.TemplateResult}}),Object.defineProperty(exports,"SVGTemplateResult",{enumerable:!0,get:function(){return n.SVGTemplateResult}}),exports.LitElement=void 0;var t=require("lit-html/lib/shady-render.js"),r=require("./lib/updating-element.js");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var s=require("./lib/decorators.js");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return s[t]}}))});var n=require("lit-html/lit-html.js"),o=require("./lib/css-tag.js");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return o[t]}}))}),(window.litElementVersions||(window.litElementVersions=[])).push("2.3.1");const i={};class l extends r.UpdatingElement{static getStyles(){return this.styles}static _getUniqueStyles(){if(this.hasOwnProperty(JSCompiler_renameProperty("_styles",this)))return;const e=this.getStyles();if(void 0===e)this._styles=[];else if(Array.isArray(e)){const t=(e,r)=>e.reduceRight((e,r)=>Array.isArray(r)?t(r,e):(e.add(r),e),r),r=t(e,new Set),s=[];r.forEach(e=>s.unshift(e)),this._styles=s}else this._styles=[e]}initialize(){super.initialize(),this.constructor._getUniqueStyles(),this.renderRoot=this.createRenderRoot(),window.ShadowRoot&&this.renderRoot instanceof window.ShadowRoot&&this.adoptStyles()}createRenderRoot(){return this.attachShadow({mode:"open"})}adoptStyles(){const e=this.constructor._styles;0!==e.length&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow?o.supportsAdoptingStyleSheets?this.renderRoot.adoptedStyleSheets=e.map(e=>e.styleSheet):this._needsShimAdoptedStyleSheets=!0:window.ShadyCSS.ScopingShim.prepareAdoptedCssText(e.map(e=>e.cssText),this.localName))}connectedCallback(){super.connectedCallback(),this.hasUpdated&&void 0!==window.ShadyCSS&&window.ShadyCSS.styleElement(this)}update(e){const t=this.render();super.update(e),t!==i&&this.constructor.render(t,this.renderRoot,{scopeName:this.localName,eventContext:this}),this._needsShimAdoptedStyleSheets&&(this._needsShimAdoptedStyleSheets=!1,this.constructor._styles.forEach(e=>{const t=document.createElement("style");t.textContent=e.cssText,this.renderRoot.appendChild(t)}))}render(){return i}}exports.LitElement=l,l.finalized=!0,l.render=t.render;
},{"lit-html/lib/shady-render.js":"eBH8","./lib/updating-element.js":"fKvB","./lib/decorators.js":"FzpZ","lit-html/lit-html.js":"SPDu","./lib/css-tag.js":"ZFCR"}],"nAWl":[function(require,module,exports) {
"use strict";var t=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,l=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,n,o);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(l=(r<3?i(l):r>3?i(e,n,l):i(e,n))||l);return r>3&&l&&Object.defineProperty(e,n,l),l},e=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))(function(i,r){function l(t){try{s(o.next(t))}catch(e){r(e)}}function a(t){try{s(o.throw(t))}catch(e){r(e)}}function s(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(l,a)}s((o=o.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const n=require("lit-element"),o=require("lit-translate");let i=class extends n.LitElement{constructor(){super(...arguments),this.label="",this.link=""}clicked(t){return e(this,void 0,void 0,function*(){t.stopPropagation(),t.stopImmediatePropagation(),this.dispatchEvent(new CustomEvent("click",t))})}static get styles(){return n.css`
            :host {
                --button-bg-color: white;
                --button-bg-hover-color: #f5f5f5;
            }

            #button-icon {
				display: block;
				width: 100%;
				height: 100%;
			}

			button {
                -webkit-appearance: none;
                appearance: none;
                border-radius: 50%;
                border: 1px solid rgba(0,0,0,0.1);
                background-color: var(--button-bg-color);
                margin: 0 auto;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                position: relative;
                transition: background-color 0.13s ease;
                width: 8.5ch;
                height: 8.5ch;
                padding: 18px;
            }

            button:hover {
                background-color: var(--button-bg-hover-color);
            }

            .label {
                text-align: center;
                margin-top: 3px;
                font-size: 15px;
                letter-spacing: 0.1ex;
                color: #222;
            }

            .button-link {
                color: 	#007BC7;
                text-decoration: none;
                font-size: 18px;
                display:  inline-flex;
                align-items: center;
            }

            @media (max-width: 1200px) {
                .label {
                    font-size: 14px;
                }
            }

            @media (max-width: 992px) {
                button {
                    width: 35px;
                    height: 35px;
                    padding: 10px;
                }

                .button-link span {
                    display: none;
                }

                .label {
                    font-size: 10px;
                }
            }

            @media (max-width: 992px) {
                button {
                    padding-top: 7px;
                }
            }
		`}render(){return this.link?n.html`
            <a class="button-link" href=${this.link}>
                <slot></slot>
                <span>${o.get(this.label)}</span>
            </a>
        `:n.html`
            <button
                aria-label=${this.label}
				@click=${this.clicked.bind(this)}>
				<slot></slot>
            </button>
            <div class="label">${o.get(this.label)}</div>
        `}};t([n.property({type:String})],i.prototype,"label",void 0),t([n.property({type:String})],i.prototype,"link",void 0),i=t([n.customElement("piano-button")],i),exports.Button=i;
},{"lit-element":"bhxD","lit-translate":"NZZ9"}],"HB37":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,o,i){var n,r=arguments.length,p=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)p=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(p=(r<3?n(p):r>3?n(t,o,p):n(t,o))||p);return r>3&&p&&Object.defineProperty(t,o,p),p};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("lit-element"),o=require("lit-translate");require("./button");let i=class extends t.LitElement{constructor(){super(...arguments),this.open=!1,this.label="Nothing",this.icon=null,this.hideClose=!1,this.altTextLabel="shared_piano_general_close_label",this.footerHeight=175,this.headerHeight=100}firstUpdated(){document.body.addEventListener("click",e=>{if(this.open){-1!==e.composedPath().indexOf(this.shadowRoot.querySelector("#container"))||(this.open=!1)}}),this.onResize()}onResize(){const e=document.querySelector("footer").offsetHeight,t=document.querySelector("header").offsetHeight+document.querySelector("piano-banner").offsetHeight;this.footerHeight=e+15,this.headerHeight=t}updated(e){if(!this.hideClose&&e.has("open")){const e=this.shadowRoot.querySelector("#close-button");this.open?(this.dispatchEvent(new CustomEvent("onExpand")),e.focus(),window.addEventListener("resize",this.onResize,!1)):(this.dispatchEvent(new CustomEvent("onCollapse")),e.blur(),window.removeEventListener("resize",this.onResize))}}static get styles(){return t.css`
			#container {
				position: relative;
				bottom: 0;
				background-color: white;
			}

			details {
				right: 0px;
				width: 120px;
				transition: box-shadow 0.2s;
				padding: 5px;
			}

			#close-button {
				color: 	#007BC7;
				text-decoration: none;
				font-size: 18px;
				cursor: pointer;
				margin-left: 25px;
				position: fixed;
				border-radius: 50%;
				background-color: white;
				box-shadow: 0px 2px 6px rgba(60, 64, 67, 0.15), 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 4px 8px rgba(128, 134, 139, 0.06), 0px -2px 8px rgba(128, 134, 139, 0.09);
				top: 20px;
				right: 20px;
				padding: 30px;
				display:  inline-flex;
				align-items: center;
				z-index: 102;
			}

			#close-button svg {
				width: 26px;
				height: 26px;
			}

			#content {
				background-color: white;
				position: fixed;
				max-width: 90%;
				overflow-y: auto;
				overflow-x: hidden;
				right: 30px;
				z-index: 9999;
				box-shadow: 0px 6px 10px rgba(60, 64, 67, 0.15), 0px 2px 3px rgba(60, 64, 67, 0.3), 0px 8px 13px rgba(128, 134, 139, 0.06), 0px -4px 13px rgba(128, 134, 139, 0.09);
			}

			#close-button {
				color: 	#007BC7;
				background: none;
				border-radius: 0px;
				box-shadow: none;
				border: none;
				appearance: none;
				-moz-appearance: none;
				-webkit-appearance: none;
				text-decoration: none;
				font-size: 18px;
				cursor: pointer;
				padding: 0;
				margin-left: 25px;
				position: absolute;
				padding: 20px;
				top: 0;
				right: 0;
				display:  inline-flex;
				align-items: center;
				z-index: 102;
			}

			#close-button svg {
				width: 19px;
				height: 19px;
			}

			@media (max-width: 768px) {
				#content {
					right: 0;
					max-width: 100%;
					left: 0;
					margin: 0 15px;
				}
			}
		`}render(){return t.html`
			<div id="container">
				<piano-button @click=${()=>this.open=!this.open} label=${this.label}>
					${this.icon}
				</piano-button>
				<div id="content" role="dialog" style=${`display: ${this.open?"block":"none"}; bottom: ${this.footerHeight}px; max-height: calc(95% - ${this.headerHeight+this.footerHeight}px);}`}>
					${this.hideClose?t.html``:t.html`<button id="close-button" aria-label=${o.get(this.altTextLabel)} @click=${()=>this.open=!this.open}>
						<svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
							<path d="M26.8233 2.82174L24.1781 0.176514L13.6909 10.6636L3.20382 0.176514L0.558594 2.82174L11.0457 13.3089L0.558594 23.796L3.20382 26.4412L13.6909 15.9541L24.1781 26.4412L26.8233 23.796L16.3362 13.3089L26.8233 2.82174Z" fill="#666666"/>
						</svg>
					</button>`}
					<slot></slot>
				</div>
			</div>
		`}};e([t.property({type:Boolean})],i.prototype,"open",void 0),e([t.property({type:String})],i.prototype,"label",void 0),e([t.property({type:Object})],i.prototype,"icon",void 0),e([t.property({type:Boolean})],i.prototype,"hideClose",void 0),e([t.property({type:String})],i.prototype,"altTextLabel",void 0),e([t.property({type:Number})],i.prototype,"footerHeight",void 0),e([t.property({type:Number})],i.prototype,"headerHeight",void 0),i=e([t.customElement("piano-collapsible")],i),exports.PianoCollapse=i;
},{"lit-element":"bhxD","lit-translate":"NZZ9","./button":"nAWl"}],"sw20":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,l){var n,a=arguments.length,o=a<3?t:null===l?l=Object.getOwnPropertyDescriptor(t,r):l;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,r,l);else for(var i=e.length-1;i>=0;i--)(n=e[i])&&(o=(a<3?n(o):a>3?n(t,r,o):n(t,r))||o);return a>3&&o&&Object.defineProperty(t,r,o),o};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("lit-element"),r=require("lit-translate");require("./collapsible");let l=class extends t.LitElement{static get styles(){return t.css`
			#fallback {
				position: absolute;
				top: 30vh;
				left: 50%;
				transform: translateX(-50%);
				font-family: Poppins, sans-serif;
				color: #007BC7;
				background: #fff;
				text-align: center;
				border: none;
				box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
				font-size: 15px;
				display: flex;
				align-items: center;
				justify-content: center;
				padding: 16px 25px;
				border-radius: 52px;
				cursor: pointer;
				max-width: 250px;
				width: 95%;
			}
		`}render(){return t.html`
			<div id="fallback">
				${r.get("shared_piano_general_fallback")}
			</div>
		`}};l=e([t.customElement("piano-fallback")],l),exports.Fallback=l;
},{"lit-element":"bhxD","lit-translate":"NZZ9","./collapsible":"HB37"}],"LJG5":[function(require,module,exports) {
"use strict";require("../interface/fallback");const e=[navigator.platform,navigator.userAgent,navigator.appVersion,navigator.vendor,window.opera],n=[{name:"Windows Phone",value:"Windows Phone",version:"OS"},{name:"Windows",value:"Win",version:"NT"},{name:"iPhone",value:"iPhone",version:"OS"},{name:"iPad",value:"iPad",version:"OS"},{name:"Android",value:"Android",version:"Android"},{name:"Macintosh",value:"Mac",version:"OS X"}],r=[{name:"Chrome",value:"Chrome",version:"Chrome"},{name:"Firefox",value:"Firefox",version:"Firefox"},{name:"Safari",value:"Safari",version:"Version"},{name:"Internet Explorer",value:"MSIE",version:"MSIE"},{name:"Opera",value:"Opera",version:"Opera"},{name:"Mozilla",value:"Mozilla",version:"Mozilla"}];function o(){const o=(e,n)=>{let r,o,a,i,s,t=0,l=0;for(t=0;t<n.length;t+=1)if(a=(r=new RegExp(n[t].value,"i")).test(e)){if(o=new RegExp(n[t].version+"[- /:;]([\\d._]+)","i"),s="",(i=e.match(o))&&i[1]&&(i=i[1]),i)for(i=i.split(/[._]+/),l=0;l<i.length;l+=1)s+=0===l?i[l]+".":i[l];else s="0";return{name:n[t].name,version:parseFloat(s)}}return{name:"unknown",version:0}},a=e.join(" "),i={os:o(a,n),browser:o(a,r)};return!(i&&i.os&&("iPhone"===i.os.name||"iPad"===i.os.name)&&i.os.version<12.2)&&!(i&&i.browser&&"Chrome"===i.browser.name&&i.browser.version<=65)}function a(){const e=document.getElementById("wrapper");if(!o())throw e&&(e.innerHTML="<piano-fallback></piano-fallback>"),new Error("Your browser is not compatible with this experiment. Please try a different browser.")}a();
},{"../interface/fallback":"sw20"}],"UR5M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.version=void 0;var e="14.6.1";exports.version=e;
},{}],"OUZ9":[function(require,module,exports) {
function r(r){if(Array.isArray(r))return r}module.exports=r;
},{}],"vKPt":[function(require,module,exports) {
function r(r,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r)){var e=[],n=!0,o=!1,l=void 0;try{for(var i,u=r[Symbol.iterator]();!(n=(i=u.next()).done)&&(e.push(i.value),!t||e.length!==t);n=!0);}catch(a){o=!0,l=a}finally{try{n||null==u.return||u.return()}finally{if(o)throw l}}return e}}module.exports=r;
},{}],"NVR6":[function(require,module,exports) {
function n(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,l=new Array(r);e<r;e++)l[e]=n[e];return l}module.exports=n;
},{}],"UyFj":[function(require,module,exports) {
var r=require("./arrayLikeToArray");function t(t,e){if(t){if("string"==typeof t)return r(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(t,e):void 0}}module.exports=t;
},{"./arrayLikeToArray":"NVR6"}],"Rom6":[function(require,module,exports) {
function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}module.exports=e;
},{}],"HETk":[function(require,module,exports) {
var r=require("./arrayWithHoles"),e=require("./iterableToArrayLimit"),t=require("./unsupportedIterableToArray"),i=require("./nonIterableRest");function u(u,a){return r(u)||e(u,a)||t(u,a)||i()}module.exports=u;
},{"./arrayWithHoles":"OUZ9","./iterableToArrayLimit":"vKPt","./unsupportedIterableToArray":"UyFj","./nonIterableRest":"Rom6"}],"fcMS":[function(require,module,exports) {
function n(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}module.exports=n;
},{}],"P8NW":[function(require,module,exports) {
function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}module.exports=r;
},{}],"lnwn":[function(require,module,exports) {
var define;
var global = arguments[3];
var t,e=arguments[3];!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("@babel/runtime/helpers/slicedToArray"),require("@babel/runtime/helpers/classCallCheck"),require("@babel/runtime/helpers/createClass")):"function"==typeof t&&t.amd?t(["exports","@babel/runtime/helpers/slicedToArray","@babel/runtime/helpers/classCallCheck","@babel/runtime/helpers/createClass"],n):n((e=e||self).automationEvents={},e._slicedToArray,e._classCallCheck,e._createClass)}(this,function(t,e,n,a){"use strict";e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,n=n&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var i=function(t,e,n){return{endTime:e,insertTime:n,type:"exponentialRampToValue",value:t}},u=function(t,e,n){return{endTime:e,insertTime:n,type:"linearRampToValue",value:t}},r=function(t,e){return{startTime:e,type:"setValue",value:t}},o=function(t,e,n){return{duration:n,startTime:e,type:"setValueCurve",values:t}},s=function(t,e,n){var a=n.startTime,i=n.target,u=n.timeConstant;return i+(e-i)*Math.exp((a-t)/u)},l=function(t){return"exponentialRampToValue"===t.type},v=function(t){return"linearRampToValue"===t.type},m=function(t){return l(t)||v(t)},c=function(t){return"setValue"===t.type},h=function(t){return"setValueCurve"===t.type},f=function t(e,n,a,i){var u=e[n];return void 0===u?i:m(u)||c(u)?u.value:h(u)?u.values[u.values.length-1]:s(a,t(e,n-1,u.startTime,i),u)},d=function(t,e,n,a,i){return void 0===n?[a.insertTime,i]:m(n)?[n.endTime,n.value]:c(n)?[n.startTime,n.value]:h(n)?[n.startTime+n.duration,n.values[n.values.length-1]]:[n.startTime,f(t,e-1,n.startTime,i)]},p=function(t){return"cancelAndHold"===t.type},T=function(t){return"cancelScheduledValues"===t.type},_=function(t){return p(t)||T(t)?t.cancelTime:l(t)||v(t)?t.endTime:t.startTime},E=function(t,e,n,a){var i=a.endTime,u=a.value;return n===u?u:0<n&&0<u||n<0&&u<0?n*Math.pow(u/n,(t-e)/(i-e)):0},y=function(t,e,n,a){return n+(t-e)/(a.endTime-e)*(a.value-n)},V=function(t,e){var n=e.duration,a=e.startTime,i=e.values;return function(t,e){var n=Math.floor(e),a=Math.ceil(e);return n===a?t[n]:(1-(e-n))*t[n]+(1-(a-e))*t[a]}(i,(t-a)/n*(i.length-1))},b=function(t){return"setTarget"===t.type},g=function(){function t(e){n(this,t),this._automationEvents=[],this._currenTime=0,this._defaultValue=e}return a(t,[{key:Symbol.iterator,value:function(){return this._automationEvents[Symbol.iterator]()}},{key:"add",value:function(t){var e=_(t);if(p(t)||T(t)){var n=this._automationEvents.findIndex(function(t){return _(t)>=e}),a=this._automationEvents[n];if(-1!==n&&(this._automationEvents=this._automationEvents.slice(0,n)),p(t)){var s=this._automationEvents[this._automationEvents.length-1];if(void 0!==a&&m(a)){if(b(s))throw new Error("The internal list is malformed.");var c=h(s)?s.startTime+s.duration:_(s),f=h(s)?s.values[s.values.length-1]:s.value,d=l(a)?E(e,c,f,a):y(e,c,f,a),V=l(a)?i(d,e,this._currenTime):u(d,e,this._currenTime);this._automationEvents.push(V)}void 0!==s&&b(s)&&this._automationEvents.push(r(this.getValue(e),e)),void 0!==s&&h(s)&&s.startTime+s.duration>e&&(this._automationEvents[this._automationEvents.length-1]=o(new Float32Array([6,7]),s.startTime,e-s.startTime))}}else{var g=this._automationEvents.findIndex(function(t){return _(t)>e}),C=-1===g?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[g-1];if(void 0!==C&&h(C)&&_(C)+C.duration>e)return!1;var A=l(t)?i(t.value,t.endTime,this._currenTime):v(t)?u(t.value,e,this._currenTime):t;if(-1===g)this._automationEvents.push(A);else{if(h(t)&&e+t.duration>_(this._automationEvents[g]))return!1;this._automationEvents.splice(g,0,A)}}return!0}},{key:"flush",value:function(t){var e=this._automationEvents.findIndex(function(e){return _(e)>t});if(e>1){var n=this._automationEvents.slice(e-1),a=n[0];b(a)&&n.unshift(r(f(this._automationEvents,e-2,a.startTime,this._defaultValue),a.startTime)),this._automationEvents=n}}},{key:"getValue",value:function(t){if(0===this._automationEvents.length)return this._defaultValue;var n=this._automationEvents[this._automationEvents.length-1],a=this._automationEvents.findIndex(function(e){return _(e)>t}),i=this._automationEvents[a],u=_(n)<=t?n:this._automationEvents[a-1];if(void 0!==u&&b(u)&&(void 0===i||!m(i)||i.insertTime>t))return s(t,f(this._automationEvents,a-2,u.startTime,this._defaultValue),u);if(void 0!==u&&c(u)&&(void 0===i||!m(i)))return u.value;if(void 0!==u&&h(u)&&(void 0===i||!m(i)||u.startTime+u.duration>t))return t<u.startTime+u.duration?V(t,u):u.values[u.values.length-1];if(void 0!==u&&m(u)&&(void 0===i||!m(i)))return u.value;if(void 0!==i&&l(i)){var r=d(this._automationEvents,a-1,u,i,this._defaultValue),o=e(r,2),p=o[0],T=o[1];return E(t,p,T,i)}if(void 0!==i&&v(i)){var g=d(this._automationEvents,a-1,u,i,this._defaultValue),C=e(g,2),A=C[0],x=C[1];return y(t,A,x,i)}return this._defaultValue}}]),t}();t.AutomationEventList=g,t.createCancelAndHoldAutomationEvent=function(t){return{cancelTime:t,type:"cancelAndHold"}},t.createCancelScheduledValuesAutomationEvent=function(t){return{cancelTime:t,type:"cancelScheduledValues"}},t.createExponentialRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"exponentialRampToValue",value:t}},t.createLinearRampToValueAutomationEvent=function(t,e){return{endTime:e,type:"linearRampToValue",value:t}},t.createSetTargetAutomationEvent=function(t,e,n){return{startTime:e,target:t,timeConstant:n,type:"setTarget"}},t.createSetValueAutomationEvent=r,t.createSetValueCurveAutomationEvent=o,Object.defineProperty(t,"__esModule",{value:!0})});
},{"@babel/runtime/helpers/slicedToArray":"HETk","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW"}],"EBr0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAbortError=void 0;const r=()=>{try{return new DOMException("","AbortError")}catch(r){return r.code=20,r.name="AbortError",r}};exports.createAbortError=r;
},{}],"kcKd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddAudioNodeConnections=void 0;const e=e=>(t,o,s)=>{const n=[];for(let e=0;e<s.numberOfInputs;e+=1)n.push(new Set);e.set(t,{activeInputs:n,outputs:new Set,passiveInputs:new WeakMap,renderer:o})};exports.createAddAudioNodeConnections=e;
},{}],"h06o":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddAudioParamConnections=void 0;const e=e=>(t,s)=>{e.set(t,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:s})};exports.createAddAudioParamConnections=e;
},{}],"xmDf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NODE_TO_PROCESSOR_MAPS=exports.NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=exports.CYCLE_COUNTERS=exports.EVENT_LISTENERS=exports.CONTEXT_STORE=exports.BACKUP_NATIVE_CONTEXT_STORE=exports.AUDIO_PARAM_STORE=exports.AUDIO_PARAM_CONNECTIONS_STORE=exports.AUDIO_NODE_STORE=exports.AUDIO_NODE_CONNECTIONS_STORE=exports.ACTIVE_AUDIO_NODE_STORE=void 0;const O=new WeakSet;exports.ACTIVE_AUDIO_NODE_STORE=O;const _=new WeakMap;exports.AUDIO_NODE_CONNECTIONS_STORE=_;const e=new WeakMap;exports.AUDIO_NODE_STORE=e;const E=new WeakMap;exports.AUDIO_PARAM_CONNECTIONS_STORE=E;const T=new WeakMap;exports.AUDIO_PARAM_STORE=T;const t=new WeakMap;exports.BACKUP_NATIVE_CONTEXT_STORE=t;const S=new WeakMap;exports.CONTEXT_STORE=S;const N=new WeakMap;exports.EVENT_LISTENERS=N;const o=new WeakMap;exports.CYCLE_COUNTERS=o;const s=new WeakMap;exports.NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=s;const p=new WeakMap;exports.NODE_TO_PROCESSOR_MAPS=p;
},{}],"Y8FY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isConstructible=void 0;const t={construct:()=>t},e=e=>{try{new new Proxy(e,t)}catch{return!1}return!0};exports.isConstructible=e;
},{}],"Yg7j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.splitImportStatements=void 0;const s=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,e=(e,t)=>{const r=[];let o=e.replace(/^[\s]+/,""),l=o.match(s);for(;null!==l;){const e=l[1].slice(1,-1),p=l[0].replace(/([\s]+)?;?$/,"").replace(e,new URL(e,t).toString());r.push(p),l=(o=o.slice(l[0].length).replace(/^[\s]+/,"")).match(s)}return[r.join(";"),o]};exports.splitImportStatements=e;
},{}],"Rhwl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddAudioWorkletModule=void 0;var e=require("../globals"),r=require("../helpers/is-constructible"),t=require("../helpers/split-import-statements");const o=e=>{if(void 0!==e&&!Array.isArray(e))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},s=e=>{if(!(0,r.isConstructible)(e))throw new TypeError("The given value for processorCtor should be a constructor.");if(null===e.prototype||"object"!=typeof e.prototype)throw new TypeError("The given value for processorCtor should have a prototype.")},i=(r,i,n,a,c,p,d,l,u)=>(h,v,w={credentials:"omit"})=>{const f=p(h),m=new URL(v,u.location.href).toString();if(void 0!==f.audioWorklet)return a(v).then(e=>{const[r,o]=(0,t.splitImportStatements)(e,m),s=new Blob([`${r};(registerProcessor=>{${o}\n})((n,p)=>registerProcessor(n,class extends p{process(i,o,p){return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}))`],{type:"application/javascript; charset=utf-8"}),i=URL.createObjectURL(s),n=c(f);return(null!==n?n:f).audioWorklet.addModule(i,w).then(()=>URL.revokeObjectURL(i)).catch(e=>{throw URL.revokeObjectURL(i),void 0!==e.code&&"SyntaxError"!==e.name||(e.code=12),e})});const R=l.get(h);if(void 0!==R&&R.has(v))return Promise.resolve();const S=d.get(h);if(void 0!==S){const e=S.get(v);if(void 0!==e)return e}const g=a(v).then(e=>{const[r,o]=(0,t.splitImportStatements)(e,m);return i(`${r};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${o}\n})})(window,'_AWGS')`)}).then(()=>{const t=u._AWGS.pop();if(void 0===t)throw new SyntaxError;n(f.currentTime,f.sampleRate,()=>t(class{},void 0,(t,i)=>{if(""===t.trim())throw r();const n=e.NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(f);if(void 0!==n){if(n.has(t))throw r();s(i),o(i.parameterDescriptors),n.set(t,i)}else s(i),o(i.parameterDescriptors),e.NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(f,new Map([[t,i]]))},f.sampleRate,void 0,void 0))}).catch(e=>{throw void 0!==e.code&&"SyntaxError"!==e.name||(e.code=12),e});return void 0===S?d.set(h,new Map([[v,g]])):S.set(v,g),g.then(()=>{const e=l.get(h);void 0===e?l.set(h,new Set([v])):e.add(v)}).catch(()=>{}).then(()=>{const e=d.get(h);void 0!==e&&e.delete(v)}),g};exports.createAddAudioWorkletModule=i;
},{"../globals":"xmDf","../helpers/is-constructible":"Y8FY","../helpers/split-import-statements":"Yg7j"}],"vgiY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddSilentConnection=void 0;const e=e=>(n,t)=>{const o=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});t.connect(o).connect(o.context.destination);const c=()=>{t.removeEventListener("ended",c),t.disconnect(o),o.disconnect()};t.addEventListener("ended",c)};exports.createAddSilentConnection=e;
},{}],"VYaX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAddUnrenderedAudioWorkletNode=void 0;const e=e=>(d,r)=>{e(d).add(r)};exports.createAddUnrenderedAudioWorkletNode=e;
},{}],"EGFv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAnalyserNodeConstructor=void 0;const e={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},t=(t,n,i,s,a,o)=>(class extends t{constructor(t,i=e){const r=a(t),l={...e,...i},c=s(r,l);super(t,!1,c,o(r)?n():null),this._nativeAnalyserNode=c}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(e){this._nativeAnalyserNode.fftSize=e}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(e){const t=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=e,!(e>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=t,i()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(e){const t=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=e,!(this._nativeAnalyserNode.maxDecibels>e))throw this._nativeAnalyserNode.minDecibels=t,i()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(e){this._nativeAnalyserNode.smoothingTimeConstant=e}getByteFrequencyData(e){this._nativeAnalyserNode.getByteFrequencyData(e)}getByteTimeDomainData(e){this._nativeAnalyserNode.getByteTimeDomainData(e)}getFloatFrequencyData(e){this._nativeAnalyserNode.getFloatFrequencyData(e)}getFloatTimeDomainData(e){this._nativeAnalyserNode.getFloatTimeDomainData(e)}});exports.createAnalyserNodeConstructor=t;
},{}],"ogqP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isOwnedByContext=void 0;const e=(e,t)=>e.context===t;exports.isOwnedByContext=e;
},{}],"UUnX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAnalyserNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const n=(n,t,o)=>()=>{const r=new WeakMap;return{render(s,a,i){const c=r.get(a);return void 0!==c?Promise.resolve(c):(async(s,a,i)=>{let c=t(s);if(!(0,e.isOwnedByContext)(c,a)){const e={channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,fftSize:c.fftSize,maxDecibels:c.maxDecibels,minDecibels:c.minDecibels,smoothingTimeConstant:c.smoothingTimeConstant};c=n(a,e)}return r.set(a,c),await o(s,a,c,i),c})(s,a,i)}}};exports.createAnalyserNodeRendererFactory=n;
},{"../helpers/is-owned-by-context":"ogqP"}],"dlQz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAudioBufferCopyChannelMethodsOutOfBoundsSupport=void 0;const e=e=>{try{e.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0};exports.testAudioBufferCopyChannelMethodsOutOfBoundsSupport=e;
},{}],"Mtiz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIndexSizeError=void 0;const e=()=>{try{return new DOMException("","IndexSizeError")}catch(e){return e.code=1,e.name="IndexSizeError",e}};exports.createIndexSizeError=e;
},{}],"kdSl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioBufferGetChannelDataMethod=void 0;var e=require("../factories/index-size-error");const r=r=>{r.getChannelData=(t=>a=>{try{return t.call(r,a)}catch(o){if(12===o.code)throw(0,e.createIndexSizeError)();throw o}})(r.getChannelData)};exports.wrapAudioBufferGetChannelDataMethod=r;
},{"../factories/index-size-error":"Mtiz"}],"MHKk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioBufferConstructor=void 0;var e=require("../helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support"),t=require("../helpers/wrap-audio-buffer-get-channel-data-method");const n={numberOfChannels:1},o=(o,r,u,s,a,f,l,p)=>{let c=null;return class h{constructor(h){if(null===a)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:d,numberOfChannels:i,sampleRate:C}={...n,...h};null===c&&(c=new a(1,1,44100));const O=null!==s&&r(f,f)?new s({length:d,numberOfChannels:i,sampleRate:C}):c.createBuffer(i,d,C);if(0===O.numberOfChannels)throw u();return"function"!=typeof O.copyFromChannel?(l(O),(0,t.wrapAudioBufferGetChannelDataMethod)(O)):r(e.testAudioBufferCopyChannelMethodsOutOfBoundsSupport,()=>(0,e.testAudioBufferCopyChannelMethodsOutOfBoundsSupport)(O))||p(O),o.add(O),O}static[Symbol.hasInstance](e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===h.prototype||o.has(e)}}};exports.createAudioBufferConstructor=o;
},{"../helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support":"dlQz","../helpers/wrap-audio-buffer-get-channel-data-method":"kdSl"}],"Pf5U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MOST_POSITIVE_SINGLE_FLOAT=exports.MOST_NEGATIVE_SINGLE_FLOAT=void 0;const e=-3.4028234663852886e38;exports.MOST_NEGATIVE_SINGLE_FLOAT=-3.4028234663852886e38;const _=3.4028234663852886e38;exports.MOST_POSITIVE_SINGLE_FLOAT=3.4028234663852886e38;
},{}],"uftV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getValueForKey=void 0;const e=(e,t)=>{const o=e.get(t);if(void 0===o)throw new Error("A value with the given key could not be found.");return o};exports.getValueForKey=e;
},{}],"SbyG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getEventListenersOfAudioNode=void 0;var e=require("../globals"),t=require("./get-value-for-key");const r=r=>(0,t.getValueForKey)(e.EVENT_LISTENERS,r);exports.getEventListenersOfAudioNode=r;
},{"../globals":"xmDf","./get-value-for-key":"uftV"}],"CJGF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setInternalStateToActive=void 0;var e=require("../globals"),t=require("./get-event-listeners-of-audio-node");const r=r=>{if(e.ACTIVE_AUDIO_NODE_STORE.has(r))throw new Error("The AudioNode is already stored.");e.ACTIVE_AUDIO_NODE_STORE.add(r),(0,t.getEventListenersOfAudioNode)(r).forEach(e=>e(!0))};exports.setInternalStateToActive=r;
},{"../globals":"xmDf","./get-event-listeners-of-audio-node":"SbyG"}],"cZUl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setInternalStateToPassive=void 0;var e=require("../globals"),t=require("./get-event-listeners-of-audio-node");const o=o=>{if(!e.ACTIVE_AUDIO_NODE_STORE.has(o))throw new Error("The AudioNode is not stored.");e.ACTIVE_AUDIO_NODE_STORE.delete(o),(0,t.getEventListenersOfAudioNode)(o).forEach(e=>e(!1))};exports.setInternalStateToPassive=o;
},{"../globals":"xmDf","./get-event-listeners-of-audio-node":"SbyG"}],"hw4i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioBufferSourceNodeConstructor=void 0;var e=require("../constants"),t=require("../helpers/set-internal-state-to-active"),o=require("../helpers/set-internal-state-to-passive");const r={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},u=(u,i,n,s,f,d,a,l)=>(class extends u{constructor(t,o=r){const u=d(t),s={...r,...o},l=f(u,s),c=a(u),h=c?i():null;super(t,!1,l,h),this._audioBufferSourceNodeRenderer=h,this._isBufferNullified=!1,this._isBufferSet=null!==o.buffer&&void 0!==o.buffer,this._nativeAudioBufferSourceNode=l,this._onended=null,this._playbackRate=n(this,c,l.playbackRate,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(e){try{this._nativeAudioBufferSourceNode.buffer=e}catch(t){if(null!==e||17!==t.code)throw t;if(null!==this._nativeAudioBufferSourceNode.buffer){const e=this._nativeAudioBufferSourceNode.buffer,t=e.numberOfChannels;for(let o=0;o<t;o+=1)e.getChannelData(o).fill(0);this._isBufferNullified=!0}}if(null!==e){if(this._isBufferSet)throw s();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(e){this._nativeAudioBufferSourceNode.loop=e}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(e){this._nativeAudioBufferSourceNode.loopEnd=e}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(e){this._nativeAudioBufferSourceNode.loopStart=e}get onended(){return this._onended}set onended(e){const t="function"==typeof e?l(this,e):null;this._nativeAudioBufferSourceNode.onended=t;const o=this._nativeAudioBufferSourceNode.onended;this._onended=null!==o&&o===t?e:o}get playbackRate(){return this._playbackRate}start(e=0,r=0,u){if(this._nativeAudioBufferSourceNode.start(e,r,u),null!==this._audioBufferSourceNodeRenderer)this._audioBufferSourceNodeRenderer.start=void 0===u?[e,r]:[e,r,u];else{(0,t.setInternalStateToActive)(this);const e=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",e),setTimeout(()=>(0,o.setInternalStateToPassive)(this),1e3)};this._nativeAudioBufferSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeAudioBufferSourceNode.stop(e),null!==this._audioBufferSourceNodeRenderer&&(this._audioBufferSourceNodeRenderer.stop=e)}});exports.createAudioBufferSourceNodeConstructor=u;
},{"../constants":"Pf5U","../helpers/set-internal-state-to-active":"CJGF","../helpers/set-internal-state-to-passive":"cZUl"}],"JLaf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioBufferSourceNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const t=(t,o,a,n,r)=>()=>{const l=new WeakMap;let c=null,s=null;return{set start(e){c=e},set stop(e){s=e},render(u,p,d){const i=l.get(p);return void 0!==i?Promise.resolve(i):(async(u,p,d)=>{let i=a(u);const y=(0,e.isOwnedByContext)(i,p);if(!y){const e={buffer:i.buffer,channelCount:i.channelCount,channelCountMode:i.channelCountMode,channelInterpretation:i.channelInterpretation,loop:i.loop,loopEnd:i.loopEnd,loopStart:i.loopStart,playbackRate:i.playbackRate.value};i=o(p,e),null!==c&&i.start(...c),null!==s&&i.stop(s)}return l.set(p,i),y?await t(p,u.playbackRate,i.playbackRate,d):await n(p,u.playbackRate,i.playbackRate,d),await r(u,p,i,d),i})(u,p,d)}}};exports.createAudioBufferSourceNodeRendererFactory=t;
},{"../helpers/is-owned-by-context":"ogqP"}],"EvFL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isValidLatencyHint=void 0;const e=e=>void 0===e||"number"==typeof e||"string"==typeof e&&("balanced"===e||"interactive"===e||"playback"===e);exports.isValidLatencyHint=e;
},{}],"KCtY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioContextConstructor=void 0;var t=require("../helpers/is-valid-latency-hint");const e=(e,n,s,a,i,r,o,u,c)=>(class extends e{constructor(e={}){if(null===c)throw new Error("Missing the native AudioContext constructor.");const n=new c(e);if(null===n)throw a();if(!(0,t.isValidLatencyHint)(e.latencyHint))throw new TypeError(`The provided value '${e.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==e.sampleRate&&n.sampleRate!==e.sampleRate)throw s();super(n,2);const{latencyHint:i}=e,{sampleRate:r}=n;if(this._baseLatency="number"==typeof n.baseLatency?n.baseLatency:"balanced"===i?512/r:"interactive"===i||void 0===i?256/r:"playback"===i?1024/r:128*Math.max(2,Math.min(128,Math.round(i*r/128)))/r,this._nativeAudioContext=n,this._state=null,"running"===n.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),n.removeEventListener("statechange",t)};n.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw n()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close())}createMediaElementSource(t){return new i(this,{mediaElement:t})}createMediaStreamDestination(){return new r(this)}createMediaStreamSource(t){return new o(this,{mediaStream:t})}createMediaStreamTrackSource(t){return new u(this,{mediaStreamTrack:t})}resume(){return"suspended"===this._state?new Promise((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(t=>{if(void 0===t||15===t.code)throw n();throw t})}suspend(){return this._nativeAudioContext.suspend().catch(t=>{if(void 0===t)throw n();throw t})}});exports.createAudioContextConstructor=e;
},{"../helpers/is-valid-latency-hint":"EvFL"}],"YAVu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioDestinationNodeConstructor=void 0;const t=(t,e,n,o,i,s,a,u)=>(class extends t{constructor(t,n){const o=s(t),d=a(o),h=i(o,n,d);super(t,!1,h,d?e(u):null),this._isNodeOfNativeOfflineAudioContext=d,this._nativeAudioDestinationNode=h}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(t){if(this._isNodeOfNativeOfflineAudioContext)throw o();if(t>this._nativeAudioDestinationNode.maxChannelCount)throw n();this._nativeAudioDestinationNode.channelCount=t}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(t){if(this._isNodeOfNativeOfflineAudioContext)throw o();this._nativeAudioDestinationNode.channelCountMode=t}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}});exports.createAudioDestinationNodeConstructor=t;
},{}],"rdEV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioDestinationNodeRenderer=void 0;const e=e=>{let t=null;return{render:(r,n,o)=>(null===t&&(t=(async(t,r,n)=>{const o=r.destination;return await e(t,r,o,n),o})(r,n,o)),t)}};exports.createAudioDestinationNodeRenderer=e;
},{}],"UHbp":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioListenerFactory=void 0;var t=require("../constants");const e=(e,n,r,o,a)=>(i,s)=>{const u=s.listener,{forwardX:p,forwardY:c,forwardZ:l,positionX:d,positionY:f,positionZ:g,upX:h,upY:C,upZ:w}=void 0===u.forwardX?(()=>{const p=n(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),c=a(s),l=o(s,256,9,0),d=(n,o)=>{const a=r(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:o});return a.connect(p,0,n),a.start(),Object.defineProperty(a.offset,"defaultValue",{get:()=>o}),e({context:i},c,a.offset,t.MOST_POSITIVE_SINGLE_FLOAT,t.MOST_NEGATIVE_SINGLE_FLOAT)};let f=[0,0,-1,0,1,0],g=[0,0,0];return l.onaudioprocess=(({inputBuffer:t})=>{const e=[t.getChannelData(0)[0],t.getChannelData(1)[0],t.getChannelData(2)[0],t.getChannelData(3)[0],t.getChannelData(4)[0],t.getChannelData(5)[0]];e.some((t,e)=>t!==f[e])&&(u.setOrientation(...e),f=e);const n=[t.getChannelData(6)[0],t.getChannelData(7)[0],t.getChannelData(8)[0]];n.some((t,e)=>t!==g[e])&&(u.setPosition(...n),g=n)}),p.connect(l),{forwardX:d(0,0),forwardY:d(1,0),forwardZ:d(2,-1),positionX:d(6,0),positionY:d(7,0),positionZ:d(8,0),upX:d(3,0),upY:d(4,1),upZ:d(5,0)}})():u;return{get forwardX(){return p},get forwardY(){return c},get forwardZ(){return l},get positionX(){return d},get positionY(){return f},get positionZ(){return g},get upX(){return h},get upY(){return C},get upZ(){return w}}};exports.createAudioListenerFactory=e;
},{"../constants":"Pf5U"}],"P17V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAudioNode=void 0;const e=e=>"context"in e;exports.isAudioNode=e;
},{}],"J8k7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAudioNodeOutputConnection=void 0;var e=require("./audio-node");const o=o=>(0,e.isAudioNode)(o[0]);exports.isAudioNodeOutputConnection=o;
},{"./audio-node":"P17V"}],"uQeN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAudioWorkletNode=void 0;const e=e=>"port"in e;exports.isAudioWorkletNode=e;
},{}],"AGg2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNativeAudioNodeFaker=void 0;const e=e=>"inputs"in e;exports.isNativeAudioNodeFaker=e;
},{}],"CtZ1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connectNativeAudioNodeToNativeAudioNode=void 0;var e=require("../guards/native-audio-node-faker");const o=(o,t,i,d)=>{if((0,e.isNativeAudioNodeFaker)(t)){const e=t.inputs[d];return o.connect(e,i,0),[e,i,0]}return o.connect(t,i,d),[t,i,d]};exports.connectNativeAudioNodeToNativeAudioNode=o;
},{"../guards/native-audio-node-faker":"AGg2"}],"jiB6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deleteEventListenerOfAudioNode=void 0;var e=require("./get-event-listeners-of-audio-node");const t=(t,o)=>{if(!(0,e.getEventListenersOfAudioNode)(t).delete(o))throw new Error("Missing the expected event listener.")};exports.deleteEventListenerOfAudioNode=t;
},{"./get-event-listeners-of-audio-node":"SbyG"}],"N32I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.disconnectNativeAudioNodeFromNativeAudioNode=void 0;var e=require("../guards/native-audio-node-faker");const o=(o,i,d,t)=>{(0,e.isNativeAudioNodeFaker)(i)?o.disconnect(i.inputs[t],d,0):o.disconnect(i,d,t)};exports.disconnectNativeAudioNodeFromNativeAudioNode=o;
},{"../guards/native-audio-node-faker":"AGg2"}],"tryv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAudioNodeConnections=void 0;var e=require("../globals"),o=require("./get-value-for-key");const t=t=>(0,o.getValueForKey)(e.AUDIO_NODE_CONNECTIONS_STORE,t);exports.getAudioNodeConnections=t;
},{"../globals":"xmDf","./get-value-for-key":"uftV"}],"KCaw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAudioParamConnections=void 0;var e=require("../globals"),o=require("./get-value-for-key");const r=r=>(0,o.getValueForKey)(e.AUDIO_PARAM_CONNECTIONS_STORE,r);exports.getAudioParamConnections=r;
},{"../globals":"xmDf","./get-value-for-key":"uftV"}],"zHV8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNativeAudioNode=void 0;var e=require("../globals"),o=require("./get-value-for-key");const t=t=>(0,o.getValueForKey)(e.AUDIO_NODE_STORE,t);exports.getNativeAudioNode=t;
},{"../globals":"xmDf","./get-value-for-key":"uftV"}],"LRIZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getNativeAudioParam=void 0;var e=require("../globals"),r=require("./get-value-for-key");const t=t=>(0,r.getValueForKey)(e.AUDIO_PARAM_STORE,t);exports.getNativeAudioParam=t;
},{"../globals":"xmDf","./get-value-for-key":"uftV"}],"eD4e":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.insertElementInSet=void 0;const e=(e,t,r,n)=>{for(const o of e)if(r(o)){if(n)return!1;throw Error("The set contains at least one similar element.")}return e.add(t),!0};exports.insertElementInSet=e;
},{}],"M3Ad":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isActiveAudioNode=void 0;var e=require("../globals");const o=o=>e.ACTIVE_AUDIO_NODE_STORE.has(o);exports.isActiveAudioNode=o;
},{"../globals":"xmDf"}],"JEss":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPartOfACycle=void 0;var e=require("../globals");const r=r=>e.CYCLE_COUNTERS.has(r);exports.isPartOfACycle=r;
},{"../globals":"xmDf"}],"a80H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isPassiveAudioNode=void 0;var e=require("../globals");const s=s=>!e.ACTIVE_AUDIO_NODE_STORE.has(s);exports.isPassiveAudioNode=s;
},{"../globals":"xmDf"}],"pc6K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.pickElementFromSet=void 0;const e=(e,t)=>{const r=Array.from(e).filter(t);if(r.length>1)throw Error("More than one element was found.");if(0===r.length)throw Error("No element was found.");const[o]=r;return e.delete(o),o};exports.pickElementFromSet=e;
},{}],"ao9Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setInternalStateToPassiveWhenNecessary=void 0;var e=require("../guards/audio-worklet-node"),s=require("./set-internal-state-to-passive");const t=(t,r)=>{!(0,e.isAudioWorkletNode)(t)&&r.every(e=>0===e.size)&&(0,s.setInternalStateToPassive)(t)};exports.setInternalStateToPassiveWhenNecessary=t;
},{"../guards/audio-worklet-node":"uQeN","./set-internal-state-to-passive":"cZUl"}],"DFzg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAudioNodeDisconnectMethodSupport=void 0;const e=e=>new Promise(t=>{const o=e.createScriptProcessor(256,1,1),n=e.createGain(),c=e.createBuffer(1,2,44100),s=c.getChannelData(0);s[0]=1,s[1]=1;const r=e.createBufferSource();r.buffer=c,r.loop=!0,r.connect(o).connect(e.destination),r.connect(n),r.disconnect(n),o.onaudioprocess=(n=>{const c=n.inputBuffer.getChannelData(0);Array.prototype.some.call(c,e=>1===e)?t(!0):t(!1),r.stop(),o.onaudioprocess=null,r.disconnect(o),o.disconnect(e.destination)}),r.start()});exports.testAudioNodeDisconnectMethodSupport=e;
},{}],"vTek":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.visitEachAudioNodeOnce=void 0;const o=(o,e)=>{const t=new Map;for(const s of o)for(const o of s){const e=t.get(o);t.set(o,void 0===e?1:e+1)}t.forEach((o,t)=>e(t,o))};exports.visitEachAudioNodeOnce=o;
},{}],"JgId":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isNativeAudioNode=void 0;const e=e=>"context"in e;exports.isNativeAudioNode=e;
},{}],"du0A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioNodeDisconnectMethod=void 0;var e=require("../guards/native-audio-node");const t=t=>{const o=new Map;t.connect=(t=>(n,i=0,u=0)=>{const s=(0,e.isNativeAudioNode)(n)?t(n,i,u):t(n,i),c=o.get(n);return void 0===c?o.set(n,[{input:u,output:i}]):c.every(e=>e.input!==u||e.output!==i)&&c.push({input:u,output:i}),s})(t.connect.bind(t)),t.disconnect=(n=>(i,u,s)=>{if(n.apply(t),void 0===i)o.clear();else if("number"==typeof i)for(const[e,t]of o){const n=t.filter(e=>e.output!==i);0===n.length?o.delete(e):o.set(e,n)}else if(o.has(i))if(void 0===u)o.delete(i);else{const e=o.get(i);if(void 0!==e){const t=e.filter(e=>e.output!==u&&(e.input!==s||void 0===s));0===t.length?o.delete(i):o.set(i,t)}}for(const[n,c]of o)c.forEach(o=>{(0,e.isNativeAudioNode)(n)?t.connect(n,o.output,o.input):t.connect(n,o.output)})})(t.disconnect)};exports.wrapAudioNodeDisconnectMethod=t;
},{"../guards/native-audio-node":"JgId"}],"d7ck":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioNodeConstructor=void 0;var e=require("../globals"),t=require("../guards/audio-node"),o=require("../guards/audio-node-output-connection"),n=require("../guards/audio-worklet-node"),i=require("../helpers/connect-native-audio-node-to-native-audio-node"),s=require("../helpers/delete-event-listeners-of-audio-node"),r=require("../helpers/disconnect-native-audio-node-from-native-audio-node"),u=require("../helpers/get-audio-node-connections"),d=require("../helpers/get-audio-param-connections"),c=require("../helpers/get-event-listeners-of-audio-node"),a=require("../helpers/get-native-audio-node"),l=require("../helpers/get-native-audio-param"),h=require("../helpers/get-value-for-key"),p=require("../helpers/insert-element-in-set"),v=require("../helpers/is-active-audio-node"),N=require("../helpers/is-part-of-a-cycle"),A=require("../helpers/is-passive-audio-node"),f=require("../helpers/pick-element-from-set"),g=require("../helpers/set-internal-state-to-active"),m=require("../helpers/set-internal-state-to-passive-when-necessary"),C=require("../helpers/test-audio-node-disconnect-method-support"),I=require("../helpers/visit-each-audio-node-once"),O=require("../helpers/wrap-audio-node-disconnect-method");const E=(e,t,[o,n,i],s)=>{(0,p.insertElementInSet)(e[n],[t,o,i],e=>e[0]===t&&e[1]===o,s)},S=(e,t,[o,n],i)=>{(0,p.insertElementInSet)(e,[t,o,n],e=>e[0]===t&&e[1]===o,i)},q=(e,t,o,n)=>(0,f.pickElementFromSet)(e[n],e=>e[0]===t&&e[1]===o),_=(e,t,o)=>(0,f.pickElementFromSet)(e,e=>e[0]===t&&e[1]===o),w=(e,t,[o,n,i],s)=>{const r=e.get(o);void 0===r?e.set(o,new Set([[n,t,i]])):(0,p.insertElementInSet)(r,[n,t,i],e=>e[0]===n&&e[1]===t,s)},y=(e,[t,o,n],i)=>{const s=e.get(t);void 0===s?e.set(t,new Set([[o,n]])):(0,p.insertElementInSet)(s,[o,n],e=>e[0]===o,i)},P=(e,t,o,n)=>{const i=(0,h.getValueForKey)(e,t),s=(0,f.pickElementFromSet)(i,e=>e[0]===o&&e[1]===n);return 0===i.size&&e.delete(t),s},b=(e,t,o)=>{const n=(0,h.getValueForKey)(e,t),i=(0,f.pickElementFromSet)(n,e=>e[0]===o);return 0===n.size&&e.delete(t),i},T=(e,t,o,n)=>{const{activeInputs:s,passiveInputs:d}=(0,u.getAudioNodeConnections)(t),{outputs:l}=(0,u.getAudioNodeConnections)(e),h=(0,c.getEventListenersOfAudioNode)(e),f=u=>{const c=(0,a.getNativeAudioNode)(t),l=(0,a.getNativeAudioNode)(e);if(u){const r=P(d,e,o,n);E(s,e,r,!1),(0,N.isPartOfACycle)(e)||(0,i.connectNativeAudioNodeToNativeAudioNode)(l,c,o,n),(0,A.isPassiveAudioNode)(t)&&(0,g.setInternalStateToActive)(t)}else{const i=q(s,e,o,n);w(d,n,i,!1),(0,N.isPartOfACycle)(e)||(0,r.disconnectNativeAudioNodeFromNativeAudioNode)(l,c,o,n),(0,v.isActiveAudioNode)(t)&&(0,m.setInternalStateToPassiveWhenNecessary)(t,s)}};return!!(0,p.insertElementInSet)(l,[t,o,n],e=>e[0]===t&&e[1]===o&&e[2]===n,!0)&&(h.add(f),(0,v.isActiveAudioNode)(e)?E(s,e,[o,n,f],!0):w(d,n,[e,o,f],!0),!0)},k=(e,t,o,n)=>{const{outputs:i}=(0,u.getAudioNodeConnections)(e);if((0,p.insertElementInSet)(i,[t,o,n],e=>e[0]===t&&e[1]===o&&e[2]===n,!0)){const{activeInputs:i}=(0,u.getAudioNodeConnections)(t);return E(i,e,[o,n,null],!0),!0}return!1},M=(e,t,o)=>{const{activeInputs:n,passiveInputs:i}=(0,d.getAudioParamConnections)(t),{outputs:s}=(0,u.getAudioNodeConnections)(e),r=(0,c.getEventListenersOfAudioNode)(e),h=s=>{const r=(0,a.getNativeAudioNode)(e),u=(0,l.getNativeAudioParam)(t);if(s){const t=b(i,e,o);S(n,e,t,!1),(0,N.isPartOfACycle)(e)||r.connect(u,o)}else{const t=_(n,e,o);y(i,t,!1),(0,N.isPartOfACycle)(e)||r.disconnect(u,o)}};return!!(0,p.insertElementInSet)(s,[t,o],e=>e[0]===t&&e[1]===o,!0)&&(r.add(h),(0,v.isActiveAudioNode)(e)?S(n,e,[o,h],!0):y(i,[e,o,h],!0),!0)},x=(e,t,o)=>{const{outputs:n}=(0,u.getAudioNodeConnections)(e);if((0,p.insertElementInSet)(n,[t,o],e=>e[0]===t&&e[1]===o,!0)){const{activeInputs:n}=(0,d.getAudioParamConnections)(t);return S(n,e,[o,null],!0),!0}return!1},F=(e,t,o)=>{for(const n of e)if(n[0]===t&&n[1]===o)return e.delete(n),n;return null},D=(e,t,o,n)=>{const{activeInputs:i,passiveInputs:s}=(0,u.getAudioNodeConnections)(t),r=F(i[n],e,o);if(null===r){return[P(s,e,o,n)[2],!1]}return[r[2],!0]},L=(e,t,o)=>{const{activeInputs:n,passiveInputs:i}=(0,d.getAudioParamConnections)(t),s=F(n,e,o);if(null===s){return[b(i,e,o)[1],!1]}return[s[2],!0]},R=(e,t,o,n)=>{const[i,d]=D(e,t,o,n);if(null!==i&&((0,s.deleteEventListenerOfAudioNode)(e,i),d&&!(0,N.isPartOfACycle)(e)&&(0,r.disconnectNativeAudioNodeFromNativeAudioNode)((0,a.getNativeAudioNode)(e),(0,a.getNativeAudioNode)(t),o,n)),(0,v.isActiveAudioNode)(t)){const{activeInputs:e}=(0,u.getAudioNodeConnections)(t);(0,m.setInternalStateToPassiveWhenNecessary)(t,e)}},V=(e,t,o)=>{const[n,i]=L(e,t,o);null!==n&&((0,s.deleteEventListenerOfAudioNode)(e,n),i&&!(0,N.isPartOfACycle)(e)&&(0,a.getNativeAudioNode)(e).disconnect((0,l.getNativeAudioParam)(t),o))},W=e=>{const t=(0,u.getAudioNodeConnections)(e),n=[];for(const i of t.outputs)(0,o.isAudioNodeOutputConnection)(i)?R(e,...i):V(e,...i),n.push(i[0]);return t.outputs.clear(),n},z=(e,t)=>{const n=(0,u.getAudioNodeConnections)(e),i=[];for(const s of n.outputs)s[1]===t&&((0,o.isAudioNodeOutputConnection)(s)?R(e,...s):V(e,...s),i.push(s[0]),n.outputs.delete(s));return i},G=(e,t,n,i)=>{const s=(0,u.getAudioNodeConnections)(e);return Array.from(s.outputs).filter(e=>!(e[0]!==t||void 0!==n&&e[1]!==n||void 0!==i&&e[2]!==i)).map(t=>((0,o.isAudioNodeOutputConnection)(t)?R(e,...t):V(e,...t),s.outputs.delete(t),t[0]))},K=(o,s,r,u,d,c,h,p,v,N,f,m,E,S,q)=>(class extends N{constructor(t,n,i,s){super(i),this._context=t,this._nativeAudioNode=i;const u=f(t);m(u)&&!0!==r(C.testAudioNodeDisconnectMethodSupport,()=>(0,C.testAudioNodeDisconnectMethodSupport)(u))&&(0,O.wrapAudioNodeDisconnectMethod)(i),e.AUDIO_NODE_STORE.set(this,i),e.EVENT_LISTENERS.set(this,new Set),n&&(0,g.setInternalStateToActive)(this),o(this,s,i)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(e){this._nativeAudioNode.channelCount=e}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(e){this._nativeAudioNode.channelCountMode=e}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(e){this._nativeAudioNode.channelInterpretation=e}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(e,o=0,r=0){if(o<0||o>=this._nativeAudioNode.numberOfOutputs)throw d();const p=f(this._context),N=q(p);if(E(e)||S(e))throw c();if((0,t.isAudioNode)(e)){const t=(0,a.getNativeAudioNode)(e);try{const u=(0,i.connectNativeAudioNodeToNativeAudioNode)(this._nativeAudioNode,t,o,r);if(N||(0,A.isPassiveAudioNode)(this)?this._nativeAudioNode.disconnect(...u):(0,A.isPassiveAudioNode)(e)&&(0,g.setInternalStateToActive)(e),(0,n.isAudioWorkletNode)(e)){const e=s.get(t);if(void 0===e){const e=p.createGain();e.connect(u[0],0,u[2]),s.set(t,new Map([[r,e]]))}else if(void 0===e.get(r)){const t=p.createGain();t.connect(u[0],0,u[2]),e.set(r,t)}}}catch(C){if(12===C.code)throw c();throw C}if(N?k(this,e,o,r):T(this,e,o,r)){const t=v([this],e);(0,I.visitEachAudioNodeOnce)(t,u(N))}return e}const m=(0,l.getNativeAudioParam)(e);if("playbackRate"===m.name)throw h();try{this._nativeAudioNode.connect(m,o),(N||(0,A.isPassiveAudioNode)(this))&&this._nativeAudioNode.disconnect(m,o)}catch(C){if(12===C.code)throw c();throw C}if(N?x(this,e,o):M(this,e,o)){const t=v([this],e);(0,I.visitEachAudioNodeOnce)(t,u(N))}}disconnect(e,o,n){let i;if(void 0===e)i=W(this);else if("number"==typeof e){if(e<0||e>=this.numberOfOutputs)throw d();i=z(this,e)}else{if(void 0!==o&&(o<0||o>=this.numberOfOutputs))throw d();if((0,t.isAudioNode)(e)&&void 0!==n&&(n<0||n>=e.numberOfInputs))throw d();if(0===(i=G(this,e,o,n)).length)throw c()}for(const t of i){const e=v([this],t);(0,I.visitEachAudioNodeOnce)(e,p)}}});exports.createAudioNodeConstructor=K;
},{"../globals":"xmDf","../guards/audio-node":"P17V","../guards/audio-node-output-connection":"J8k7","../guards/audio-worklet-node":"uQeN","../helpers/connect-native-audio-node-to-native-audio-node":"CtZ1","../helpers/delete-event-listeners-of-audio-node":"jiB6","../helpers/disconnect-native-audio-node-from-native-audio-node":"N32I","../helpers/get-audio-node-connections":"tryv","../helpers/get-audio-param-connections":"KCaw","../helpers/get-event-listeners-of-audio-node":"SbyG","../helpers/get-native-audio-node":"zHV8","../helpers/get-native-audio-param":"LRIZ","../helpers/get-value-for-key":"uftV","../helpers/insert-element-in-set":"eD4e","../helpers/is-active-audio-node":"M3Ad","../helpers/is-part-of-a-cycle":"JEss","../helpers/is-passive-audio-node":"a80H","../helpers/pick-element-from-set":"pc6K","../helpers/set-internal-state-to-active":"CJGF","../helpers/set-internal-state-to-passive-when-necessary":"ao9Q","../helpers/test-audio-node-disconnect-method-support":"DFzg","../helpers/visit-each-audio-node-once":"vTek","../helpers/wrap-audio-node-disconnect-method":"du0A"}],"qaSE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioParamFactory=void 0;var e=require("automation-events");const t=(t,l,a,u,n,r,i,o,m,c,s,T)=>(d,A,V,p=null,f=null)=>{const x=new e.AutomationEventList(V.defaultValue),h=A?u(x):null,v={get defaultValue(){return V.defaultValue},get maxValue(){return null===p?V.maxValue:p},get minValue(){return null===f?V.minValue:f},get value(){return V.value},set value(e){V.value=e,v.setValueAtTime(e,d.context.currentTime)},cancelAndHoldAtTime(e){if("function"==typeof V.cancelAndHoldAtTime)null===h&&x.flush(d.context.currentTime),x.add(n(e)),V.cancelAndHoldAtTime(e);else{const t=Array.from(x).pop();null===h&&x.flush(d.context.currentTime),x.add(n(e));const l=Array.from(x).pop();V.cancelScheduledValues(e),t!==l&&void 0!==l&&("exponentialRampToValue"===l.type?V.exponentialRampToValueAtTime(l.value,l.endTime):"linearRampToValue"===l.type?V.linearRampToValueAtTime(l.value,l.endTime):"setValue"===l.type?V.setValueAtTime(l.value,l.startTime):"setValueCurve"===l.type&&V.setValueCurveAtTime(l.values,l.startTime,l.duration))}return v},cancelScheduledValues:e=>(null===h&&x.flush(d.context.currentTime),x.add(r(e)),V.cancelScheduledValues(e),v),exponentialRampToValueAtTime:(e,t)=>(null===h&&x.flush(d.context.currentTime),x.add(i(e,t)),V.exponentialRampToValueAtTime(e,t),v),linearRampToValueAtTime:(e,t)=>(null===h&&x.flush(d.context.currentTime),x.add(o(e,t)),V.linearRampToValueAtTime(e,t),v),setTargetAtTime:(e,t,l)=>(null===h&&x.flush(d.context.currentTime),x.add(m(e,t,l)),V.setTargetAtTime(e,t,l),v),setValueAtTime:(e,t)=>(null===h&&x.flush(d.context.currentTime),x.add(c(e,t)),V.setValueAtTime(e,t),v),setValueCurveAtTime(e,t,l){if(null!==T&&"webkitAudioContext"===T.name){const a=t+l,u=d.context.sampleRate,n=Math.ceil(t*u),r=Math.floor(a*u),i=r-n,o=new Float32Array(i);for(let c=0;c<i;c+=1){const a=(e.length-1)/l*((n+c)/u-t),r=Math.floor(a),i=Math.ceil(a);o[c]=r===i?e[r]:(1-(a-r))*e[r]+(1-(i-a))*e[i]}null===h&&x.flush(d.context.currentTime),x.add(s(o,t,l)),V.setValueCurveAtTime(o,t,l);const m=r/u;m<a&&v.setValueAtTime(o[o.length-1],m),v.setValueAtTime(e[e.length-1],a)}else null===h&&x.flush(d.context.currentTime),x.add(s(e,t,l)),V.setValueCurveAtTime(e,t,l);return v}};return a.set(v,V),l.set(v,d),t(v,h),v};exports.createAudioParamFactory=t;
},{"automation-events":"lnwn"}],"H1iG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioParamRenderer=void 0;const e=e=>({replay(t){for(const a of e)if("exponentialRampToValue"===a.type){const{endTime:e,value:r}=a;t.exponentialRampToValueAtTime(r,e)}else if("linearRampToValue"===a.type){const{endTime:e,value:r}=a;t.linearRampToValueAtTime(r,e)}else if("setTarget"===a.type){const{startTime:e,target:r,timeConstant:o}=a;t.setTargetAtTime(r,e,o)}else if("setValue"===a.type){const{startTime:e,value:r}=a;t.setValueAtTime(r,e)}else{if("setValueCurve"!==a.type)throw new Error("Can't apply an unknown automation.");{const{duration:e,startTime:r,values:o}=a;t.setValueCurveAtTime(o,r,e)}}}});exports.createAudioParamRenderer=e;
},{}],"cySK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ReadOnlyMap=void 0;class e{constructor(e){this._map=new Map(e)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(e,t=null){return this._map.forEach((s,r)=>e.call(t,s,r,this))}get(e){return this._map.get(e)}has(e){return this._map.has(e)}keys(){return this._map.keys()}values(){return this._map.values()}}exports.ReadOnlyMap=e;
},{}],"KkyP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioWorkletNodeConstructor=void 0;var e=require("../globals"),t=require("../read-only-map");const r={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,outputChannelCount:void 0,parameterData:{},processorOptions:{}},o=e=>{const t=[];for(let r=0;r<e;r+=1)t.push(1);return t},n=e=>({...e,outputChannelCount:void 0!==e.outputChannelCount?e.outputChannelCount:1===e.numberOfInputs&&1===e.numberOfOutputs?[e.channelCount]:o(e.numberOfOutputs)}),s=(o,s,u,a,i,p,l,c,d)=>(class extends s{constructor(s,d,h=r){const _=p(s),O=l(_),C=n({...r,...h}),m=e.NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(_),v=void 0===m?void 0:m.get(d),f=i(_,O?null:s.baseLatency,c,d,v,C);super(s,!0,f,O?a(d,C,v):null);const N=[];f.parameters.forEach((e,t)=>{const r=u(this,O,e);N.push([t,r])}),this._nativeAudioWorkletNode=f,this._onprocessorerror=null,this._parameters=new t.ReadOnlyMap(N),O&&o(_,this)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(e){const t="function"==typeof e?d(this,e):null;this._nativeAudioWorkletNode.onprocessorerror=t;const r=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=null!==r&&r===t?e:r}get parameters(){return null===this._parameters?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}});exports.createAudioWorkletNodeConstructor=s;
},{"../globals":"xmDf","../read-only-map":"cySK"}],"fhv0":[function(require,module,exports) {
"use strict";function e(e,t,n,o,r){if("function"==typeof e.copyFromChannel)0===t[n].byteLength&&(t[n]=new Float32Array(128)),e.copyFromChannel(t[n],o,r);else{const a=e.getChannelData(o);if(0===t[n].byteLength)t[n]=a.slice(r,r+128);else{const e=new Float32Array(a.buffer,r*Float32Array.BYTES_PER_ELEMENT,128);t[n].set(e)}}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.copyFromChannel=e;
},{}],"usJK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.copyToChannel=void 0;const e=(e,o,t,n,p)=>{"function"==typeof e.copyToChannel?0!==o[t].byteLength&&e.copyToChannel(o[t],n,p):0!==o[t].byteLength&&e.getChannelData(n).set(o[t],p)};exports.copyToChannel=e;
},{}],"oZTy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNestedArrays=void 0;const e=(e,r)=>{const t=[];for(let s=0;s<e;s+=1){const e=[],o="number"==typeof r?r:r[s];for(let r=0;r<o;r+=1)e.push(new Float32Array(128));t.push(e)}return t};exports.createNestedArrays=e;
},{}],"Frnr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getAudioWorkletProcessor=void 0;var e=require("../globals"),o=require("./get-native-audio-node"),r=require("./get-value-for-key");const t=(t,u)=>{const s=(0,r.getValueForKey)(e.NODE_TO_PROCESSOR_MAPS,t),i=(0,o.getNativeAudioNode)(u);return(0,r.getValueForKey)(s,i)};exports.getAudioWorkletProcessor=t;
},{"../globals":"xmDf","./get-native-audio-node":"zHV8","./get-value-for-key":"uftV"}],"pQfP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioWorkletNodeRendererFactory=void 0;var e=require("../helpers/copy-from-channel"),n=require("../helpers/copy-to-channel"),t=require("../helpers/create-nested-arrays"),r=require("../helpers/get-audio-node-connections"),o=require("../helpers/get-audio-worklet-processor"),a=require("../helpers/is-owned-by-context");const u=async(a,u,l,c,s,i)=>{const p=null===u?128*Math.ceil(a.context.length/128):u.length,h=c.channelCount*c.numberOfInputs,f=c.outputChannelCount.reduce((e,n)=>e+n,0),C=0===f?null:l.createBuffer(f,p,l.sampleRate);if(void 0===s)throw new Error("Missing the processor constructor.");const d=(0,r.getAudioNodeConnections)(a),m=await(0,o.getAudioWorkletProcessor)(l,a),O=(0,t.createNestedArrays)(c.numberOfInputs,c.channelCount),b=(0,t.createNestedArrays)(c.numberOfOutputs,c.outputChannelCount),w=Array.from(a.parameters.keys()).reduce((e,n)=>({...e,[n]:new Float32Array(128)}),{});for(let t=0;t<p;t+=128){if(c.numberOfInputs>0&&null!==u)for(let n=0;n<c.numberOfInputs;n+=1)for(let r=0;r<c.channelCount;r+=1)(0,e.copyFromChannel)(u,O[n],r,r,t);void 0!==s.parameterDescriptors&&null!==u&&s.parameterDescriptors.forEach(({name:n},r)=>{(0,e.copyFromChannel)(u,w,n,h+r,t)});for(let e=0;e<c.numberOfInputs;e+=1)for(let n=0;n<c.outputChannelCount[e];n+=1)0===b[e][n].byteLength&&(b[e][n]=new Float32Array(128));try{const e=O.map((e,n)=>0===d.activeInputs[n].size?[]:e),r=i(t/l.sampleRate,l.sampleRate,()=>m.process(e,b,w));if(null!==C)for(let o=0,a=0;o<c.numberOfOutputs;o+=1){for(let e=0;e<c.outputChannelCount[o];e+=1)(0,n.copyToChannel)(C,b[o],e,a+e,t);a+=c.outputChannelCount[o]}if(!r)break}catch(y){a.dispatchEvent(new ErrorEvent("processorerror",{error:y}));break}}return C},l=(e,n,t,r,o,l,c,s,i,p,h,f,C,d,m,O)=>(b,w,y)=>{const I=new WeakMap;let M=null;return{render(g,x,v){s(x,g);const A=I.get(x);return void 0!==A?Promise.resolve(A):(async(s,g,x)=>{let v=h(s),A=null;const k=(0,a.isOwnedByContext)(v,g);if(null===f){const e=w.outputChannelCount.reduce((e,n)=>e+n,0),t=o(g,{channelCount:Math.max(1,e),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,e)}),a=[];for(let n=0;n<s.numberOfOutputs;n+=1)a.push(r(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:w.outputChannelCount[n]}));const u=c(g,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1});u.connect=n.bind(null,a),u.disconnect=i.bind(null,a),A=[t,a,u]}else k||(v=new f(g,b));if(I.set(g,null===A?v:A[2]),null!==A){if(null===M){if(void 0===y)throw new Error("Missing the processor constructor.");if(null===C)throw new Error("Missing the native OfflineAudioContext constructor.");const e=s.channelCount*s.numberOfInputs,n=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length,t=e+n,a=async()=>{const a=new C(t,128*Math.ceil(s.context.length/128),g.sampleRate),u=[],i=[];for(let e=0;e<w.numberOfInputs;e+=1)u.push(c(a,{channelCount:w.channelCount,channelCountMode:w.channelCountMode,channelInterpretation:w.channelInterpretation,gain:1})),i.push(o(a,{channelCount:w.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:w.channelCount}));const p=await Promise.all(Array.from(s.parameters.values()).map(async e=>{const n=l(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:e.value});return await d(a,e,n.offset,x),n})),h=r(a,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,e+n)});for(let e=0;e<w.numberOfInputs;e+=1){u[e].connect(i[e]);for(let n=0;n<w.channelCount;n+=1)i[e].connect(h,n,e*w.channelCount+n)}for(const[n,t]of p.entries())t.connect(h,0,e+n),t.start(0);return h.connect(a.destination),await Promise.all(u.map(e=>m(s,a,e,x))),O(a)};M=u(s,0===t?null:await a(),g,w,y,p)}const e=await M,n=t(g),[a,i,h]=A;null!==e&&(n.buffer=e,n.start(0)),n.connect(a);for(let t=0,r=0;t<s.numberOfOutputs;t+=1){const e=i[t];for(let n=0;n<w.outputChannelCount[t];n+=1)a.connect(e,r+n,n);r+=w.outputChannelCount[t]}return h}if(k)for(const[n,t]of s.parameters.entries())await e(g,t,v.parameters.get(n),x);else for(const[e,n]of s.parameters.entries())await d(g,n,v.parameters.get(e),x);return await m(s,g,v,x),v})(g,x,v)}}};exports.createAudioWorkletNodeRendererFactory=l;
},{"../helpers/copy-from-channel":"fhv0","../helpers/copy-to-channel":"usJK","../helpers/create-nested-arrays":"oZTy","../helpers/get-audio-node-connections":"tryv","../helpers/get-audio-worklet-processor":"Frnr","../helpers/is-owned-by-context":"ogqP"}],"R9gS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBaseAudioContextConstructor=void 0;const e=(e,t,r,n,a,i,o,s,u,c,h,l,d,w,f,p,C,m,v,x)=>(class extends f{constructor(t,r){super(t,r),this._nativeContext=t,this._audioWorklet=void 0===e?void 0:{addModule:(t,r)=>e(this,t,r)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new t(this)}createBiquadFilter(){return new a(this)}createBuffer(e,t,n){return new r({length:t,numberOfChannels:e,sampleRate:n})}createBufferSource(){return new n(this)}createChannelMerger(e=6){return new i(this,{numberOfInputs:e})}createChannelSplitter(e=6){return new o(this,{numberOfOutputs:e})}createConstantSource(){return new s(this)}createConvolver(){return new u(this)}createDelay(e=1){return new h(this,{maxDelayTime:e})}createDynamicsCompressor(){return new l(this)}createGain(){return new d(this)}createIIRFilter(e,t){return new w(this,{feedback:t,feedforward:e})}createOscillator(){return new p(this)}createPanner(){return new C(this)}createPeriodicWave(e,t,r={disableNormalization:!1}){return new m(this,{...r,imag:t,real:e})}createStereoPanner(){return new v(this)}createWaveShaper(){return new x(this)}decodeAudioData(e,t,r){return c(this._nativeContext,e).then(e=>("function"==typeof t&&t(e),e)).catch(e=>{throw"function"==typeof r&&r(e),e})}});exports.createBaseAudioContextConstructor=e;
},{}],"eSqS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBiquadFilterNodeConstructor=void 0;var e=require("../constants");const t={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},n=(n,r,i,s,u,a,o)=>(class extends n{constructor(n,s=t){const _=a(n),h={...t,...s},l=u(_,h),c=o(_);super(n,!1,l,c?i():null),this._Q=r(this,c,l.Q,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._detune=r(this,c,l.detune,1200*Math.log2(e.MOST_POSITIVE_SINGLE_FLOAT),-1200*Math.log2(e.MOST_POSITIVE_SINGLE_FLOAT)),this._frequency=r(this,c,l.frequency,n.sampleRate/2,0),this._gain=r(this,c,l.gain,40*Math.log10(e.MOST_POSITIVE_SINGLE_FLOAT),e.MOST_NEGATIVE_SINGLE_FLOAT),this._nativeBiquadFilterNode=l}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(e){this._nativeBiquadFilterNode.type=e}getFrequencyResponse(e,t,n){if(this._nativeBiquadFilterNode.getFrequencyResponse(e,t,n),e.length!==t.length||t.length!==n.length)throw s()}});exports.createBiquadFilterNodeConstructor=n;
},{"../constants":"Pf5U"}],"YCGP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createBiquadFilterNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const n=(n,t,a,r,i)=>()=>{const o=new WeakMap;return{render(u,c,d){const s=o.get(c);return void 0!==s?Promise.resolve(s):(async(u,c,d)=>{let s=a(u);const l=(0,e.isOwnedByContext)(s,c);if(!l){const e={Q:s.Q.value,channelCount:s.channelCount,channelCountMode:s.channelCountMode,channelInterpretation:s.channelInterpretation,detune:s.detune.value,frequency:s.frequency.value,gain:s.gain.value,type:s.type};s=t(c,e)}return o.set(c,s),l?(await n(c,u.Q,s.Q,d),await n(c,u.detune,s.detune,d),await n(c,u.frequency,s.frequency,d),await n(c,u.gain,s.gain,d)):(await r(c,u.Q,s.Q,d),await r(c,u.detune,s.detune,d),await r(c,u.frequency,s.frequency,d),await r(c,u.gain,s.gain,d)),await i(u,c,s,d),s})(u,c,d)}}};exports.createBiquadFilterNodeRendererFactory=n;
},{"../helpers/is-owned-by-context":"ogqP"}],"Xrgi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCacheTestResult=void 0;const e=(e,t)=>(s,r)=>{const c=t.get(s);if(void 0!==c)return c;const o=e.get(s);if(void 0!==o)return o;try{const c=r();return c instanceof Promise?(e.set(s,c),c.catch(()=>!1).then(r=>(e.delete(s),t.set(s,r),r))):(t.set(s,c),c)}catch{return t.set(s,!1),!1}};exports.createCacheTestResult=e;
},{}],"qLyN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createChannelMergerNodeConstructor=void 0;const e={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},t=(t,n,r,o,s)=>(class extends t{constructor(t,c=e){const u=o(t),a={...e,...c};super(t,!1,r(u,a),s(u)?n():null)}});exports.createChannelMergerNodeConstructor=t;
},{}],"xJuv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createChannelMergerNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const n=(n,r,t)=>()=>{const o=new WeakMap;return{render(a,s,c){const u=o.get(s);return void 0!==u?Promise.resolve(u):(async(a,s,c)=>{let u=r(a);if(!(0,e.isOwnedByContext)(u,s)){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfInputs:u.numberOfInputs};u=n(s,e)}return o.set(s,u),await t(a,s,u,c),u})(a,s,c)}}};exports.createChannelMergerNodeRendererFactory=n;
},{"../helpers/is-owned-by-context":"ogqP"}],"jBCe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createChannelSplitterNodeConstructor=void 0;const e={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},t=e=>({...e,channelCount:e.numberOfOutputs}),n=(n,r,o,s,c)=>(class extends n{constructor(n,u=e){const l=s(n),a=t({...e,...u});super(n,!1,o(l,a),c(l)?r():null)}});exports.createChannelSplitterNodeConstructor=n;
},{}],"wC2Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createChannelSplitterNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const t=(t,n,r)=>()=>{const o=new WeakMap;return{render(a,s,c){const u=o.get(s);return void 0!==u?Promise.resolve(u):(async(a,s,c)=>{let u=n(a);if(!(0,e.isOwnedByContext)(u,s)){const e={channelCount:u.channelCount,channelCountMode:u.channelCountMode,channelInterpretation:u.channelInterpretation,numberOfOutputs:u.numberOfOutputs};u=t(s,e)}return o.set(s,u),await r(a,s,u,c),u})(a,s,c)}}};exports.createChannelSplitterNodeRendererFactory=t;
},{"../helpers/is-owned-by-context":"ogqP"}],"qgfw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConnectAudioParam=void 0;const e=e=>(t,o,r,a)=>e(o,t,r,a);exports.createConnectAudioParam=e;
},{}],"cSMM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConnectMultipleOutputs=void 0;var e=require("../guards/native-audio-node");const t=t=>(o,r,n=0,u=0)=>{const i=o[n];if(void 0===i)throw t();return(0,e.isNativeAudioNode)(r)?i.connect(r,0,u):i.connect(r,0)};exports.createConnectMultipleOutputs=t;
},{"../guards/native-audio-node":"JgId"}],"bOV9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConnectedNativeAudioBufferSourceNodeFactory=void 0;const e=e=>(t,o)=>{const r=e(t),c=t.createBuffer(1,2,t.sampleRate);return r.buffer=c,r.loop=!0,r.connect(o),r.start(),()=>{r.stop(),r.disconnect(o)}};exports.createConnectedNativeAudioBufferSourceNodeFactory=e;
},{}],"gku0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConstantSourceNodeConstructor=void 0;var e=require("../constants"),t=require("../helpers/set-internal-state-to-active"),n=require("../helpers/set-internal-state-to-passive");const o={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},s=(s,r,a,i,d,c,u)=>(class extends s{constructor(t,n=o){const s=d(t),u={...o,...n},h=i(s,u),l=c(s),_=l?a():null;super(t,!1,h,_),this._constantSourceNodeRenderer=_,this._nativeConstantSourceNode=h,this._offset=r(this,l,h.offset,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(e){const t="function"==typeof e?u(this,e):null;this._nativeConstantSourceNode.onended=t;const n=this._nativeConstantSourceNode.onended;this._onended=null!==n&&n===t?e:n}start(e=0){if(this._nativeConstantSourceNode.start(e),null!==this._constantSourceNodeRenderer)this._constantSourceNodeRenderer.start=e;else{(0,t.setInternalStateToActive)(this);const e=()=>{this._nativeConstantSourceNode.removeEventListener("ended",e),setTimeout(()=>(0,n.setInternalStateToPassive)(this),1e3)};this._nativeConstantSourceNode.addEventListener("ended",e)}}stop(e=0){this._nativeConstantSourceNode.stop(e),null!==this._constantSourceNodeRenderer&&(this._constantSourceNodeRenderer.stop=e)}});exports.createConstantSourceNodeConstructor=s;
},{"../constants":"Pf5U","../helpers/set-internal-state-to-active":"CJGF","../helpers/set-internal-state-to-passive":"cZUl"}],"gYCK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConstantSourceNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const t=(t,n,o,r,s)=>()=>{const a=new WeakMap;let c=null,l=null;return{set start(e){c=e},set stop(e){l=e},render(u,f,i){const d=a.get(f);return void 0!==d?Promise.resolve(d):(async(u,f,i)=>{let d=o(u);const p=(0,e.isOwnedByContext)(d,f);if(!p){const e={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,offset:d.offset.value};d=n(f,e),null!==c&&d.start(c),null!==l&&d.stop(l)}return a.set(f,d),p?await t(f,u.offset,d.offset,i):await r(f,u.offset,d.offset,i),await s(u,f,d,i),d})(u,f,i)}}};exports.createConstantSourceNodeRendererFactory=t;
},{"../helpers/is-owned-by-context":"ogqP"}],"tyf0":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConvertNumberToUnsignedLong=void 0;const e=e=>o=>(e[0]=o,e[0]);exports.createConvertNumberToUnsignedLong=e;
},{}],"LWVK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConvolverNodeConstructor=void 0;const e={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},o=(o,t,r,n,i)=>(class extends o{constructor(o,l=e){const s=n(o),u={...e,...l},f=r(s,u);super(o,!1,f,i(s)?t():null),this._isBufferNullified=!1,this._nativeConvolverNode=f}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(e){if(this._nativeConvolverNode.buffer=e,null===e&&null!==this._nativeConvolverNode.buffer){const e=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=e.createBuffer(1,1,e.sampleRate),this._isBufferNullified=!0}else this._isBufferNullified=!1}get normalize(){return this._nativeConvolverNode.normalize}set normalize(e){this._nativeConvolverNode.normalize=e}});exports.createConvolverNodeConstructor=o;
},{}],"sV4G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createConvolverNodeRendererFactory=void 0;var e=require("../guards/native-audio-node-faker"),n=require("../helpers/is-owned-by-context");const r=(r,t,o)=>()=>{const a=new WeakMap;return{render(i,s,d){const c=a.get(s);return void 0!==c?Promise.resolve(c):(async(i,s,d)=>{let c=t(i);if(!(0,n.isOwnedByContext)(c,s)){const e={buffer:c.buffer,channelCount:c.channelCount,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,disableNormalization:!c.normalize};c=r(s,e)}return a.set(s,c),(0,e.isNativeAudioNodeFaker)(c)?await o(i,s,c.inputs[0],d):await o(i,s,c,d),c})(i,s,d)}}};exports.createConvolverNodeRendererFactory=r;
},{"../guards/native-audio-node-faker":"AGg2","../helpers/is-owned-by-context":"ogqP"}],"rYy4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createCreateNativeOfflineAudioContext=void 0;const e=(e,t)=>(r,o,n)=>{if(null===t)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new t(r,o,n)}catch(i){if("IndexSizeError"===i.name||"SyntaxError"===i.name)throw e();throw i}};exports.createCreateNativeOfflineAudioContext=e;
},{}],"d3p9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDataCloneError=void 0;const e=()=>{try{return new DOMException("","DataCloneError")}catch(e){return e.code=25,e.name="DataCloneError",e}};exports.createDataCloneError=e;
},{}],"ZTKV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.detachArrayBuffer=void 0;const e=e=>{const{port1:r}=new MessageChannel;r.postMessage(e,[e])};exports.detachArrayBuffer=e;
},{}],"oDi4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDecodeAudioData=void 0;var e=require("../helpers/detach-array-buffer"),t=require("../helpers/wrap-audio-buffer-get-channel-data-method");const r=(r,a,o,c,d,n,u,i,s,h,f,p,l)=>(y,D)=>{const w=u(y)?y:n(y);if(d.has(D)){const e=o();return Promise.reject(e)}try{d.add(D)}catch{}if(a(f,()=>f(w))){return("closed"===w.state&&null!==s&&i(w)?new s(1,1,w.sampleRate):w).decodeAudioData(D).catch(e=>{if(e instanceof DOMException&&"NotSupportedError"===e.name)throw new TypeError;throw e}).then(e=>(a(h,()=>h(e))||l(e),r.add(e),e))}return new Promise((a,o)=>{const d=()=>{try{(0,e.detachArrayBuffer)(D)}catch{}},n=e=>{o(e),d()};try{w.decodeAudioData(D,e=>{"function"!=typeof e.copyFromChannel&&(p(e),(0,t.wrapAudioBufferGetChannelDataMethod)(e)),r.add(e),d(),a(e)},e=>{n(null===e?c():e)})}catch(u){n(u)}})};exports.createDecodeAudioData=r;
},{"../helpers/detach-array-buffer":"ZTKV","../helpers/wrap-audio-buffer-get-channel-data-method":"kdSl"}],"dTjf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDecrementCycleCounter=void 0;var e=require("../guards/audio-node-output-connection");const t=(t,o,c,n,r,s,i,u)=>(d,l)=>{const p=o.get(d);if(void 0===p)throw new Error("Missing the expected cycle count.");const f=s(d.context),a=u(f);if(p===l){if(o.delete(d),!a&&i(d)){const o=n(d),{outputs:s}=c(d);for(const c of s)if((0,e.isAudioNodeOutputConnection)(c)){const e=n(c[0]);t(o,e,c[1],c[2])}else{const e=r(c[0]);o.connect(e,c[1])}}}else o.set(d,p-l)};exports.createDecrementCycleCounter=t;
},{"../guards/audio-node-output-connection":"J8k7"}],"jIlX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDelayNodeConstructor=void 0;const e={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},t=(t,a,o,r,s,n)=>(class extends t{constructor(t,l=e){const i=s(t),c={...e,...l},d=r(i,c),m=n(i);super(t,!1,d,m?o(c.maxDelayTime):null),this._delayTime=a(this,m,d.delayTime,c.maxDelayTime,0)}get delayTime(){return this._delayTime}});exports.createDelayNodeConstructor=t;
},{}],"lHrX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDelayNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const t=(t,n,a,r,o)=>i=>{const l=new WeakMap;return{render(c,d,s){const y=l.get(d);return void 0!==y?Promise.resolve(y):(async(c,d,s)=>{let y=a(c);const u=(0,e.isOwnedByContext)(y,d);if(!u){const e={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,delayTime:y.delayTime.value,maxDelayTime:i};y=n(d,e)}return l.set(d,y),u?await t(d,c.delayTime,y.delayTime,s):await r(d,c.delayTime,y.delayTime,s),await o(c,d,y,s),y})(c,d,s)}}};exports.createDelayNodeRendererFactory=t;
},{"../helpers/is-owned-by-context":"ogqP"}],"vixa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDeleteUnrenderedAudioWorkletNode=void 0;const e=e=>(t,r)=>{e(t).delete(r)};exports.createDeleteUnrenderedAudioWorkletNode=e;
},{}],"yfUx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDelayNode=void 0;const e=e=>"delayTime"in e;exports.isDelayNode=e;
},{}],"Bq45":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDetectCycles=void 0;var e=require("../guards/audio-node"),r=require("../guards/delay-node");const t=(t,o,u)=>(function s(c,d){const i=(0,e.isAudioNode)(d)?d:u(t,d);if((0,r.isDelayNode)(i))return[];if(c[0]===i)return[c];if(c.includes(i))return[];const{outputs:n}=o(i);return Array.from(n).map(e=>s([...c,i],e[0])).reduce((e,r)=>e.concat(r),[])});exports.createDetectCycles=t;
},{"../guards/audio-node":"P17V","../guards/delay-node":"yfUx"}],"HuI7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDisconnectMultipleOutputs=void 0;var e=require("../guards/native-audio-node");const o=(e,o,t)=>{const c=o[t];if(void 0===c)throw e();return c},t=t=>(c,i,n,s=0)=>void 0===i?c.forEach(e=>e.disconnect()):"number"==typeof i?o(t,c,i).disconnect():(0,e.isNativeAudioNode)(i)?void 0===n?c.forEach(e=>e.disconnect(i)):void 0===s?o(t,c,n).disconnect(i,0):o(t,c,n).disconnect(i,0,s):void 0===n?c.forEach(e=>e.disconnect(i)):o(t,c,n).disconnect(i,0);exports.createDisconnectMultipleOutputs=t;
},{"../guards/native-audio-node":"JgId"}],"Wg6M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDynamicsCompressorNodeConstructor=void 0;const e={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},t=(t,n,s,o,r,a,i)=>(class extends t{constructor(t,r=e){const h=a(t),c={...e,...r},u=o(h,c),d=i(h);super(t,!1,u,d?s():null),this._attack=n(this,d,u.attack,1,0),this._knee=n(this,d,u.knee,40,0),this._nativeDynamicsCompressorNode=u,this._ratio=n(this,d,u.ratio,20,1),this._release=n(this,d,u.release,1,0),this._threshold=n(this,d,u.threshold,0,-100)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(e){const t=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=e,e>2)throw this._nativeDynamicsCompressorNode.channelCount=t,r()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(e){const t=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=e,"max"===e)throw this._nativeDynamicsCompressorNode.channelCountMode=t,r()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return"number"==typeof this._nativeDynamicsCompressorNode.reduction.value?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}});exports.createDynamicsCompressorNodeConstructor=t;
},{}],"sbBI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createDynamicsCompressorNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const t=(t,a,r,n,o)=>()=>{const s=new WeakMap;return{render(i,l,c){const d=s.get(l);return void 0!==d?Promise.resolve(d):(async(i,l,c)=>{let d=r(i);const h=(0,e.isOwnedByContext)(d,l);if(!h){const e={attack:d.attack.value,channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,knee:d.knee.value,ratio:d.ratio.value,release:d.release.value,threshold:d.threshold.value};d=a(l,e)}return s.set(l,d),h?(await t(l,i.attack,d.attack,c),await t(l,i.knee,d.knee,c),await t(l,i.ratio,d.ratio,c),await t(l,i.release,d.release,c),await t(l,i.threshold,d.threshold,c)):(await n(l,i.attack,d.attack,c),await n(l,i.knee,d.knee,c),await n(l,i.ratio,d.ratio,c),await n(l,i.release,d.release,c),await n(l,i.threshold,d.threshold,c)),await o(i,l,d,c),d})(i,l,c)}}};exports.createDynamicsCompressorNodeRendererFactory=t;
},{"../helpers/is-owned-by-context":"ogqP"}],"Okym":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEncodingError=void 0;const r=()=>{try{return new DOMException("","EncodingError")}catch(r){return r.code=0,r.name="EncodingError",r}};exports.createEncodingError=r;
},{}],"r814":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEvaluateSource=void 0;const e=e=>r=>new Promise((o,t)=>{if(null===e)return void t(new SyntaxError);const n=e.document.head;if(null===n)t(new SyntaxError);else{const a=e.document.createElement("script"),c=new Blob([r],{type:"application/javascript"}),l=URL.createObjectURL(c),i=e.onerror,s=()=>{e.onerror=i,URL.revokeObjectURL(l)};e.onerror=((r,o,n,a,c)=>o===l||o===e.location.href&&1===n&&1===a?(s(),t(c),!1):null!==i?i(r,o,n,a,c):void 0),a.onerror=(()=>{s(),t(new SyntaxError)}),a.onload=(()=>{s(),o()}),a.src=l,a.type="module",n.appendChild(a)}});exports.createEvaluateSource=e;
},{}],"zIaD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createEventTargetConstructor=void 0;const e=e=>(class{constructor(e){this._nativeEventTarget=e,this._listeners=new WeakMap}addEventListener(t,n,s){if(null!==n){let r=this._listeners.get(n);void 0===r&&(r=e(this,n),"function"==typeof n&&this._listeners.set(n,r)),this._nativeEventTarget.addEventListener(t,r,s)}}dispatchEvent(e){return this._nativeEventTarget.dispatchEvent(e)}removeEventListener(e,t,n){const s=null===t?void 0:this._listeners.get(t);this._nativeEventTarget.removeEventListener(e,void 0===s?null:s,n)}});exports.createEventTargetConstructor=e;
},{}],"TF8J":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createExposeCurrentFrameAndCurrentTime=void 0;const e=e=>(r,t,n)=>{Object.defineProperties(e,{currentFrame:{configurable:!0,get:()=>Math.round(r*t)},currentTime:{configurable:!0,get:()=>r}});try{return n()}finally{null!==e&&(delete e.currentFrame,delete e.currentTime)}};exports.createExposeCurrentFrameAndCurrentTime=e;
},{}],"un3y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createFetchSource=void 0;const e=e=>async t=>{try{const e=await fetch(t);if(e.ok)return e.text()}catch{}throw e()};exports.createFetchSource=e;
},{}],"ZanO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGainNodeConstructor=void 0;var e=require("../constants");const t={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},n=(n,r,s,o,a,c)=>(class extends n{constructor(n,i=t){const u=a(n),_={...t,...i},l=o(u,_),d=c(u);super(n,!1,l,d?s():null),this._gain=r(this,d,l.gain,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT)}get gain(){return this._gain}});exports.createGainNodeConstructor=n;
},{"../constants":"Pf5U"}],"FOIQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGainNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const n=(n,t,a,r,o)=>()=>{const i=new WeakMap;return{render(c,s,d){const l=i.get(s);return void 0!==l?Promise.resolve(l):(async(c,s,d)=>{let l=a(c);const u=(0,e.isOwnedByContext)(l,s);if(!u){const e={channelCount:l.channelCount,channelCountMode:l.channelCountMode,channelInterpretation:l.channelInterpretation,gain:l.gain.value};l=t(s,e)}return i.set(s,l),u?await n(s,c.gain,l.gain,d):await r(s,c.gain,l.gain,d),await o(c,s,l,d),l})(c,s,d)}}};exports.createGainNodeRendererFactory=n;
},{"../helpers/is-owned-by-context":"ogqP"}],"vKfw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetAudioNodeRenderer=void 0;const e=e=>r=>{const o=e(r);if(null===o.renderer)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return o.renderer};exports.createGetAudioNodeRenderer=e;
},{}],"jpGg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetAudioParamRenderer=void 0;const e=e=>r=>{const t=e(r);if(null===t.renderer)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return t.renderer};exports.createGetAudioParamRenderer=e;
},{}],"Nmyx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetBackupNativeContext=void 0;var e=require("../globals");const t=(t,r,n)=>o=>{if("closed"===o.state&&null!==r&&"webkitAudioContext"!==r.name){if(!t(o)){const t=e.BACKUP_NATIVE_CONTEXT_STORE.get(o);if(void 0!==t)return t;const n=new r;return e.BACKUP_NATIVE_CONTEXT_STORE.set(o,n),n}{const t=e.BACKUP_NATIVE_CONTEXT_STORE.get(o);if(void 0!==t)return t;if(null!==n){const t=new n(1,1,44100);return e.BACKUP_NATIVE_CONTEXT_STORE.set(o,t),t}}}return null};exports.createGetBackupNativeContext=t;
},{"../globals":"xmDf"}],"BpY2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createInvalidStateError=void 0;const e=()=>{try{return new DOMException("","InvalidStateError")}catch(e){return e.code=11,e.name="InvalidStateError",e}};exports.createInvalidStateError=e;
},{}],"K5Us":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetNativeContext=void 0;var e=require("./invalid-state-error");const t=t=>r=>{const o=t.get(r);if(void 0===o)throw(0,e.createInvalidStateError)();return o};exports.createGetNativeContext=t;
},{"./invalid-state-error":"BpY2"}],"B3lM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createGetUnrenderedAudioWorkletNodes=void 0;const e=e=>o=>{const t=e.get(o);if(void 0===t)throw new Error("The context has no set of AudioWorkletNodes.");return t};exports.createGetUnrenderedAudioWorkletNodes=e;
},{}],"ChGO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createInvalidAccessError=void 0;const e=()=>{try{return new DOMException("","InvalidAccessError")}catch(e){return e.code=15,e.name="InvalidAccessError",e}};exports.createInvalidAccessError=e;
},{}],"Mdfc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapIIRFilterNodeGetFrequencyResponseMethod=void 0;var e=require("../factories/invalid-access-error");const r=r=>{r.getFrequencyResponse=(t=>(s,o,n)=>{if(s.length!==o.length||o.length!==n.length)throw(0,e.createInvalidAccessError)();return t.call(r,s,o,n)})(r.getFrequencyResponse)};exports.wrapIIRFilterNodeGetFrequencyResponseMethod=r;
},{"../factories/invalid-access-error":"ChGO"}],"lCTI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIIRFilterNodeConstructor=void 0;var e=require("../helpers/wrap-iir-filter-node-get-frequency-response-method");const t={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},r=(r,n,o,s,c)=>(class extends r{constructor(r,a){const i=s(r),l=c(i),u={...t,...a},d=n(i,l?null:r.baseLatency,u);super(r,!1,d,l?o(u.feedback,u.feedforward):null),(0,e.wrapIIRFilterNodeGetFrequencyResponseMethod)(d),this._nativeIIRFilterNode=d}getFrequencyResponse(e,t,r){return this._nativeIIRFilterNode.getFrequencyResponse(e,t,r)}});exports.createIIRFilterNodeConstructor=r;
},{"../helpers/wrap-iir-filter-node-get-frequency-response-method":"Mdfc"}],"QKPM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.filterBuffer=void 0;const e=(e,t,r,o,f,l,s,n,u,c,i)=>{const p=c.length;let d=n;for(let x=0;x<p;x+=1){let n=r[0]*c[x];for(let t=1;t<f;t+=1){const o=d-t&u-1;n+=r[t]*l[o],n-=e[t]*s[o]}for(let e=f;e<o;e+=1)n+=r[e]*l[d-e&u-1];for(let r=f;r<t;r+=1)n-=e[r]*s[d-r&u-1];l[d]=c[x],s[d]=n,d=d+1&u-1,i[x]=n}return d};exports.filterBuffer=e;
},{}],"WyQr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIIRFilterNodeRendererFactory=void 0;var e=require("../helpers/filter-buffer"),t=require("../helpers/is-owned-by-context");const n=(t,n,r,l)=>{const a=r.length,o=l.length,i=Math.min(a,o);if(1!==r[0]){for(let e=0;e<a;e+=1)l[e]/=r[0];for(let e=1;e<o;e+=1)r[e]/=r[0]}const s=new Float32Array(32),c=new Float32Array(32),u=n.createBuffer(t.numberOfChannels,t.length,t.sampleRate),f=t.numberOfChannels;for(let d=0;d<f;d+=1){const n=t.getChannelData(d),f=u.getChannelData(d);s.fill(0),c.fill(0),(0,e.filterBuffer)(r,a,l,o,i,s,c,0,32,n,f)}return u},r=(e,r,l,a,o,i)=>(s,c)=>{const u=new WeakMap;let f=null;return{render(d,h,w){const p=u.get(h);return void 0!==p?Promise.resolve(p):(async(d,h,w)=>{let p=null,y=l(d);const g=(0,t.isOwnedByContext)(y,h);if(void 0===h.createIIRFilter?p=e(h):g||(y=r(h,e=>e.createIIRFilter(c,s))),u.set(h,null===p?y:p),null!==p){if(null===f){if(null===a)throw new Error("Missing the native OfflineAudioContext constructor.");const e=new a(d.context.destination.channelCount,d.context.length,h.sampleRate);f=(async()=>{await o(d,e,e.destination,w);const t=await i(e);return n(t,h,s,c)})()}const e=await f;return p.buffer=e,p.start(0),p}return await o(d,h,y,w),y})(d,h,w)}}};exports.createIIRFilterNodeRendererFactory=r;
},{"../helpers/filter-buffer":"QKPM","../helpers/is-owned-by-context":"ogqP"}],"kY8M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIncrementCycleCounterFactory=void 0;var e=require("../guards/audio-node-output-connection");const t=(t,o,n,c,s,r)=>u=>(i,d)=>{const a=t.get(i);if(void 0===a){if(!u&&r(i)){const t=c(i),{outputs:r}=n(i);for(const n of r)if((0,e.isAudioNodeOutputConnection)(n)){const e=c(n[0]);o(t,e,n[1],n[2])}else{const e=s(n[0]);t.disconnect(e,n[1])}}t.set(i,d)}else t.set(i,a+d)};exports.createIncrementCycleCounterFactory=t;
},{"../guards/audio-node-output-connection":"J8k7"}],"yXKH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsAnyAudioContext=void 0;const e=(e,t)=>o=>{const r=e.get(o);return t(r)||t(o)};exports.createIsAnyAudioContext=e;
},{}],"BUYv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsAnyAudioNode=void 0;const e=(e,o)=>s=>e.has(s)||o(s);exports.createIsAnyAudioNode=e;
},{}],"d6lu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsAnyAudioParam=void 0;const e=(e,r)=>s=>e.has(s)||r(s);exports.createIsAnyAudioParam=e;
},{}],"lTzg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsAnyOfflineAudioContext=void 0;const e=(e,t)=>o=>{const n=e.get(o);return t(n)||t(o)};exports.createIsAnyOfflineAudioContext=e;
},{}],"N7E4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsNativeAudioContext=void 0;const e=e=>t=>null!==e&&t instanceof e;exports.createIsNativeAudioContext=e;
},{}],"kJt3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsNativeAudioNode=void 0;const e=e=>o=>null!==e&&"function"==typeof e.AudioNode&&o instanceof e.AudioNode;exports.createIsNativeAudioNode=e;
},{}],"sPik":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsNativeAudioParam=void 0;const e=e=>t=>null!==e&&"function"==typeof e.AudioParam&&t instanceof e.AudioParam;exports.createIsNativeAudioParam=e;
},{}],"yPgA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsNativeContext=void 0;const e=(e,t)=>o=>e(o)||t(o);exports.createIsNativeContext=e;
},{}],"tCMv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsNativeOfflineAudioContext=void 0;const e=e=>t=>null!==e&&t instanceof e;exports.createIsNativeOfflineAudioContext=e;
},{}],"Sbkw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsSecureContext=void 0;const e=e=>null!==e&&e.isSecureContext;exports.createIsSecureContext=e;
},{}],"o6e7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createIsSupportedPromise=void 0;const e=async(e,r,t,s,o,i,p,a,u,c,d,n,l,P)=>{if(e(r,r)&&e(t,t)&&e(o,o)&&e(i,i)&&e(a,a)&&e(u,u)&&e(c,c)&&e(d,d)&&e(n,n)){return(await Promise.all([e(s,s),e(p,p),e(l,l),e(P,P)])).every(e=>e)}return!1};exports.createIsSupportedPromise=e;
},{}],"nmKW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMediaElementAudioSourceNodeConstructor=void 0;const e=(e,t,o,i)=>(class extends e{constructor(e,d){const r=o(e),n=t(r,d);if(i(r))throw TypeError();super(e,!0,n,null),this._mediaElement=d.mediaElement,this._nativeMediaElementAudioSourceNode=n}get mediaElement(){return void 0===this._nativeMediaElementAudioSourceNode.mediaElement?this._mediaElement:this._nativeMediaElementAudioSourceNode.mediaElement}});exports.createMediaElementAudioSourceNodeConstructor=e;
},{}],"vmWI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMediaStreamAudioDestinationNodeConstructor=void 0;const e={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},t=(t,o,n,r)=>(class extends t{constructor(t,i=e){const s=n(t);if(r(s))throw new TypeError;const a={...e,...i},d=o(s,a);super(t,!1,d,null),this._nativeMediaStreamAudioDestinationNode=d}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}});exports.createMediaStreamAudioDestinationNodeConstructor=t;
},{}],"hA6v":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMediaStreamAudioSourceNodeConstructor=void 0;const e=(e,r,t,o)=>(class extends e{constructor(e,a){const d=t(e),i=r(d,a);if(o(d))throw new TypeError;super(e,!0,i,null),this._nativeMediaStreamAudioSourceNode=i}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}});exports.createMediaStreamAudioSourceNodeConstructor=e;
},{}],"cuCV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMediaStreamTrackAudioSourceNodeConstructor=void 0;const e=(e,r,o)=>(class extends e{constructor(e,t){const c=o(e);super(e,!0,r(c,t),null)}});exports.createMediaStreamTrackAudioSourceNodeConstructor=e;
},{}],"RKHh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMinimalAudioContextConstructor=void 0;var t=require("../helpers/is-valid-latency-hint");const e=(e,n,s,i,a)=>(class extends i{constructor(e={}){if(null===a)throw new Error("Missing the native AudioContext constructor.");const i=new a(e);if(null===i)throw s();if(!(0,t.isValidLatencyHint)(e.latencyHint))throw new TypeError(`The provided value '${e.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(void 0!==e.sampleRate&&i.sampleRate!==e.sampleRate)throw n();super(i,2);const{latencyHint:o}=e,{sampleRate:r}=i;if(this._baseLatency="number"==typeof i.baseLatency?i.baseLatency:"balanced"===o?512/r:"interactive"===o||void 0===o?256/r:"playback"===o?1024/r:128*Math.max(2,Math.min(128,Math.round(o*r/128)))/r,this._nativeAudioContext=i,this._state=null,"running"===i.state){this._state="suspended";const t=()=>{"suspended"===this._state&&(this._state=null),i.removeEventListener("statechange",t)};i.addEventListener("statechange",t)}}get baseLatency(){return this._baseLatency}get state(){return null!==this._state?this._state:this._nativeAudioContext.state}close(){return"closed"===this.state?this._nativeAudioContext.close().then(()=>{throw e()}):("suspended"===this._state&&(this._state=null),this._nativeAudioContext.close())}resume(){return"suspended"===this._state?new Promise((t,e)=>{const n=()=>{this._nativeAudioContext.removeEventListener("statechange",n),"running"===this._nativeAudioContext.state?t():this.resume().then(t,e)};this._nativeAudioContext.addEventListener("statechange",n)}):this._nativeAudioContext.resume().catch(t=>{if(void 0===t||15===t.code)throw e();throw t})}suspend(){return this._nativeAudioContext.suspend().catch(t=>{if(void 0===t)throw e();throw t})}});exports.createMinimalAudioContextConstructor=e;
},{"../helpers/is-valid-latency-hint":"EvFL"}],"pMWF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMinimalBaseAudioContextConstructor=void 0;var t=require("../globals");const e=(e,n,s,i,a,o)=>(class extends s{constructor(s,o){super(s),this._nativeContext=s,t.CONTEXT_STORE.set(this,s);const r=s.sampleRate;Object.defineProperty(s,"sampleRate",{get:()=>r}),i(s)&&a.set(s,new Set),this._destination=new e(this,o),this._listener=n(this,s),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(t){const e="function"==typeof t?o(this,t):null;this._nativeContext.onstatechange=e;const n=this._nativeContext.onstatechange;this._onstatechange=null!==n&&n===e?t:n}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}});exports.createMinimalBaseAudioContextConstructor=e;
},{"../globals":"xmDf"}],"PMLM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testPromiseSupport=void 0;const t=t=>{const e=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const r=t.decodeAudioData(e.buffer,()=>{});return void 0!==r&&(r.catch(()=>{}),!0)}catch{}return!1};exports.testPromiseSupport=t;
},{}],"HXqg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMinimalOfflineAudioContextConstructor=void 0;var t=require("../helpers/test-promise-support");const e={numberOfChannels:1},n=(n,i,s,o,r)=>(class extends o{constructor(i){const{length:o,numberOfChannels:r,sampleRate:a}={...e,...i},h=s(r,o,a);n(t.testPromiseSupport,()=>(0,t.testPromiseSupport)(h))||h.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(h.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(h,r),this._length=o,this._nativeOfflineAudioContext=h,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(i()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).then(t=>(this._state=null,t)).catch(t=>{throw this._state=null,t}))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}});exports.createMinimalOfflineAudioContextConstructor=n;
},{"../helpers/test-promise-support":"PMLM"}],"JjHo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createMonitorConnections=void 0;const e=(e,o)=>(t,n,c)=>{const s=new Set;return t.connect=(c=>(i,l=0,r=0)=>{const a=0===s.size;if(o(i))return c.call(t,i,l,r),e(s,[i,l,r],e=>e[0]===i&&e[1]===l&&e[2]===r,!0),a&&n(),i;c.call(t,i,l),e(s,[i,l],e=>e[0]===i&&e[1]===l,!0),a&&n()})(t.connect),t.disconnect=(e=>(n,i,l)=>{const r=s.size>0;if(void 0===n)e.apply(t),s.clear();else if("number"==typeof n){e.call(t,n);for(const e of s)e[1]===n&&s.delete(e)}else{o(n)?e.call(t,n,i,l):e.call(t,n,i);for(const e of s)e[0]!==n||void 0!==i&&e[1]!==i||void 0!==l&&e[2]!==l||s.delete(e)}const a=0===s.size;r&&a&&c()})(t.disconnect),t};exports.createMonitorConnections=e;
},{}],"v64l":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assignNativeAudioNodeOption=void 0;const e=(e,o,t)=>{const i=o[t];void 0!==i&&i!==e[t]&&(e[t]=i)};exports.assignNativeAudioNodeOption=e;
},{}],"EZSt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assignNativeAudioNodeOptions=void 0;var e=require("./assign-native-audio-node-option");const o=(o,i)=>{(0,e.assignNativeAudioNodeOption)(o,i,"channelCount"),(0,e.assignNativeAudioNodeOption)(o,i,"channelCountMode"),(0,e.assignNativeAudioNodeOption)(o,i,"channelInterpretation")};exports.assignNativeAudioNodeOptions=o;
},{"./assign-native-audio-node-option":"v64l"}],"ZMXJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testAnalyserNodeGetFloatTimeDomainDataMethodSupport=void 0;const t=t=>"function"==typeof t.getFloatTimeDomainData;exports.testAnalyserNodeGetFloatTimeDomainDataMethodSupport=t;
},{}],"GHTl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAnalyserNodeGetFloatTimeDomainDataMethod=void 0;const e=e=>{e.getFloatTimeDomainData=(t=>{const a=new Uint8Array(t.length);e.getByteTimeDomainData(a);const o=Math.max(a.length,e.fftSize);for(let e=0;e<o;e+=1)t[e]=.0078125*(a[e]-128);return t})};exports.wrapAnalyserNodeGetFloatTimeDomainDataMethod=e;
},{}],"iZpR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAnalyserNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-option"),t=require("../helpers/assign-native-audio-node-options"),o=require("../helpers/test-analyser-node-get-float-time-domain-data-method-support"),a=require("../helpers/wrap-analyser-node-get-float-time-domain-data-method");const i=(i,s,n)=>(r,d)=>{const l=n(r,e=>e.createAnalyser());if((0,t.assignNativeAudioNodeOptions)(l,d),!(d.maxDecibels>d.minDecibels))throw s();return(0,e.assignNativeAudioNodeOption)(l,d,"fftSize"),(0,e.assignNativeAudioNodeOption)(l,d,"maxDecibels"),(0,e.assignNativeAudioNodeOption)(l,d,"minDecibels"),(0,e.assignNativeAudioNodeOption)(l,d,"smoothingTimeConstant"),i(o.testAnalyserNodeGetFloatTimeDomainDataMethodSupport,()=>(0,o.testAnalyserNodeGetFloatTimeDomainDataMethodSupport)(l))||(0,a.wrapAnalyserNodeGetFloatTimeDomainDataMethod)(l),l};exports.createNativeAnalyserNodeFactory=i;
},{"../helpers/assign-native-audio-node-option":"v64l","../helpers/assign-native-audio-node-options":"EZSt","../helpers/test-analyser-node-get-float-time-domain-data-method-support":"ZMXJ","../helpers/wrap-analyser-node-get-float-time-domain-data-method":"GHTl"}],"jB08":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioBufferConstructor=void 0;const e=e=>null===e?null:e.hasOwnProperty("AudioBuffer")?e.AudioBuffer:null;exports.createNativeAudioBufferConstructor=e;
},{}],"JA6H":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assignNativeAudioNodeAudioParamValue=void 0;const e=(e,o,a)=>{const i=o[a];void 0!==i&&i!==e[a].value&&(e[a].value=i)};exports.assignNativeAudioNodeAudioParamValue=e;
},{}],"kUcJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=void 0;var e=require("../factories/invalid-state-error");const r=r=>{r.start=(t=>{let o=!1;return(a=0,s=0,i)=>{if(o)throw(0,e.createInvalidStateError)();t.call(r,a,s,i),o=!0}})(r.start)};exports.wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=r;
},{"../factories/invalid-state-error":"BpY2"}],"g4Oe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioBufferSourceNodeStartMethodDurationParameter=void 0;const e=(e,t)=>{let r=Number.POSITIVE_INFINITY,a=Number.POSITIVE_INFINITY;e.start=((o,I)=>(u=0,N=0,s=Number.POSITIVE_INFINITY)=>{if(o.call(e,u,N),s>=0&&s<Number.POSITIVE_INFINITY){const o=Math.max(u,t.currentTime),N=s/e.playbackRate.value;r=o+N,I.call(e,Math.min(r,a))}})(e.start,e.stop),e.stop=(o=>(I=0)=>{a=Math.max(I,t.currentTime),o.call(e,Math.min(r,a))})(e.stop)};exports.wrapAudioBufferSourceNodeStartMethodDurationParameter=e;
},{}],"CksU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioScheduledSourceNodeStartMethodNegativeParameters=void 0;const e=e=>{e.start=(t=>(r=0,a=0,o)=>{if("number"==typeof o&&o<0||a<0||r<0)throw new RangeError("The parameters can't be negative.");t.call(e,r,a,o)})(e.start)};exports.wrapAudioScheduledSourceNodeStartMethodNegativeParameters=e;
},{}],"xTEY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioScheduledSourceNodeStopMethodNegativeParameters=void 0;const e=e=>{e.stop=(t=>(o=0)=>{if(o<0)throw new RangeError("The parameter can't be negative.");t.call(e,o)})(e.stop)};exports.wrapAudioScheduledSourceNodeStopMethodNegativeParameters=e;
},{}],"yK6Z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioBufferSourceNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),o=require("../helpers/assign-native-audio-node-option"),r=require("../helpers/assign-native-audio-node-options"),a=require("../helpers/wrap-audio-buffer-source-node-start-method-consecutive-calls"),t=require("../helpers/wrap-audio-buffer-source-node-start-method-duration-parameter"),i=require("../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters"),d=require("../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters");const u=(u,s,n,p,c,l,N,v,h,f,S,g,A)=>(m,w={})=>{const q=n(m,e=>e.createBufferSource());return(0,r.assignNativeAudioNodeOptions)(q,w),(0,e.assignNativeAudioNodeAudioParamValue)(q,w,"playbackRate"),(0,o.assignNativeAudioNodeOption)(q,w,"buffer"),(0,o.assignNativeAudioNodeOption)(q,w,"loop"),(0,o.assignNativeAudioNodeOption)(q,w,"loopEnd"),(0,o.assignNativeAudioNodeOption)(q,w,"loopStart"),s(p,()=>p(m))||(0,a.wrapAudioBufferSourceNodeStartMethodConsecutiveCalls)(q),s(c,c)||(0,t.wrapAudioBufferSourceNodeStartMethodDurationParameter)(q,m),s(l,()=>l(m))||S(q),s(N,()=>N(m))||g(q,m),s(v,()=>v(m))||(0,i.wrapAudioScheduledSourceNodeStartMethodNegativeParameters)(q),s(h,()=>h(m))||A(q,m),s(f,()=>f(m))||(0,d.wrapAudioScheduledSourceNodeStopMethodNegativeParameters)(q),u(m,q),q};exports.createNativeAudioBufferSourceNodeFactory=u;
},{"../helpers/assign-native-audio-node-audio-param-value":"JA6H","../helpers/assign-native-audio-node-option":"v64l","../helpers/assign-native-audio-node-options":"EZSt","../helpers/wrap-audio-buffer-source-node-start-method-consecutive-calls":"kUcJ","../helpers/wrap-audio-buffer-source-node-start-method-duration-parameter":"g4Oe","../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters":"CksU","../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters":"xTEY"}],"d1jD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioContextConstructor=void 0;const t=t=>null===t?null:t.hasOwnProperty("AudioContext")?t.AudioContext:t.hasOwnProperty("webkitAudioContext")?t.webkitAudioContext:null;exports.createNativeAudioContextConstructor=t;
},{}],"HusQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioDestinationNodeFactory=void 0;const n=(n,e)=>(t,a,o)=>{const c=t.destination;if(c.channelCount!==a)try{c.channelCount=a}catch{}o&&"explicit"!==c.channelCountMode&&(c.channelCountMode="explicit"),0===c.maxChannelCount&&Object.defineProperty(c,"maxChannelCount",{value:a});const l=n(t,{channelCount:a,channelCountMode:c.channelCountMode,channelInterpretation:c.channelInterpretation,gain:1});return e(l,"channelCount",n=>()=>n.call(l),n=>e=>{n.call(l,e);try{c.channelCount=e}catch(t){if(e>c.maxChannelCount)throw t}}),e(l,"channelCountMode",n=>()=>n.call(l),n=>e=>{n.call(l,e),c.channelCountMode=e}),e(l,"channelInterpretation",n=>()=>n.call(l),n=>e=>{n.call(l,e),c.channelInterpretation=e}),Object.defineProperty(l,"maxChannelCount",{get:()=>c.maxChannelCount}),l.connect(c),l};exports.createNativeAudioDestinationNodeFactory=n;
},{}],"Q4S3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioNodeFactory=void 0;const e=e=>(t,o)=>{const r=e(t);return o(null!==r?r:t)};exports.createNativeAudioNodeFactory=e;
},{}],"CUYU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioWorkletNodeConstructor=void 0;const e=e=>null===e?null:e.hasOwnProperty("AudioWorkletNode")?e.AudioWorkletNode:null;exports.createNativeAudioWorkletNodeConstructor=e;
},{}],"u4EL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testClonabilityOfAudioWorkletNodeOptions=void 0;const e=e=>{const{port1:t}=new MessageChannel;try{t.postMessage(e)}finally{t.close()}};exports.testClonabilityOfAudioWorkletNodeOptions=e;
},{}],"FJXc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioWorkletNodeFactory=void 0;var e=require("../helpers/test-clonability-of-audio-worklet-node-options");const t=(t,o,n,r,i,c)=>(s,l,u,d,a,p)=>{if(null!==u)try{const e=o(s,e=>new u(e,d,p)),n=new Map;let l=null;if(Object.defineProperties(e,{channelCount:{get:()=>p.channelCount,set:()=>{throw t()}},channelCountMode:{get:()=>"explicit",set:()=>{throw t()}},onprocessorerror:{get:()=>l,set:t=>{"function"==typeof l&&e.removeEventListener("processorerror",l),"function"==typeof(l="function"==typeof t?t:null)&&e.addEventListener("processorerror",l)}}}),e.addEventListener=(t=>(...o)=>{if("processorerror"===o[0]){const e="function"==typeof o[1]?o[1]:"object"==typeof o[1]&&null!==o[1]&&"function"==typeof o[1].handleEvent?o[1].handleEvent:null;if(null!==e){const t=n.get(o[1]);void 0!==t?o[1]=t:(o[1]=(t=>{e(new ErrorEvent(o[0],{...t,error:new Error}))}),n.set(e,o[1]))}}return t.call(e,o[0],o[1],o[2])})(e.addEventListener),e.removeEventListener=(t=>(...o)=>{if("processorerror"===o[0]){const e=n.get(o[1]);void 0!==e&&(n.delete(o[1]),o[1]=e)}return t.call(e,o[0],o[1],o[2])})(e.removeEventListener),0!==p.numberOfOutputs){const t=r(s,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return e.connect(t).connect(t.context.destination),c(e,()=>t.disconnect(),()=>t.connect(t.context.destination))}return e}catch(f){if(11===f.code)throw i();throw f}if(void 0===a)throw i();return(0,e.testClonabilityOfAudioWorkletNodeOptions)(p),n(s,l,a,p)};exports.createNativeAudioWorkletNodeFactory=t;
},{"../helpers/test-clonability-of-audio-worklet-node-options":"u4EL"}],"Qi6j":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.computeBufferSize=void 0;const e=(e,t)=>null===e?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(e*t)))));exports.computeBufferSize=e;
},{}],"guIq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cloneAudioWorkletNodeOptions=void 0;const e=e=>new Promise((o,s)=>{const{port1:t,port2:r}=new MessageChannel;t.onmessage=(({data:e})=>{t.close(),r.close(),o(e)}),t.onmessageerror=(({data:e})=>{t.close(),r.close(),s(e)}),r.postMessage(e)});exports.cloneAudioWorkletNodeOptions=e;
},{}],"LOmE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioWorkletProcessorPromise=void 0;var e=require("./clone-audio-worklet-node-options");const o=async(o,r)=>{return new o(await(0,e.cloneAudioWorkletNodeOptions)(r))};exports.createAudioWorkletProcessorPromise=o;
},{"./clone-audio-worklet-node-options":"guIq"}],"Dtl5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioWorkletProcessor=void 0;var e=require("../globals"),r=require("./create-audio-worklet-processor-promise");const o=(o,t,s,c)=>{let i=e.NODE_TO_PROCESSOR_MAPS.get(o);void 0===i&&(i=new WeakMap,e.NODE_TO_PROCESSOR_MAPS.set(o,i));const a=(0,r.createAudioWorkletProcessorPromise)(s,c);return i.set(t,a),a};exports.createAudioWorkletProcessor=o;
},{"../globals":"xmDf","./create-audio-worklet-processor-promise":"LOmE"}],"OPvg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeAudioWorkletNodeFakerFactory=void 0;var e=require("../constants"),t=require("../helpers/compute-buffer-size"),n=require("../helpers/copy-from-channel"),r=require("../helpers/copy-to-channel"),o=require("../helpers/create-audio-worklet-processor"),u=require("../helpers/create-nested-arrays"),a=require("../read-only-map");const c=(c,s,p,l,i,f,h,d,m,C,O,v,b)=>(g,I,y,E)=>{if(0===E.numberOfInputs&&0===E.numberOfOutputs)throw C();if(void 0!==E.outputChannelCount){if(E.outputChannelCount.some(e=>e<1))throw C();if(E.outputChannelCount.length!==E.numberOfOutputs)throw p()}if("explicit"!==E.channelCountMode)throw C();const M=E.channelCount*E.numberOfInputs,x=E.outputChannelCount.reduce((e,t)=>e+t,0),L=void 0===y.parameterDescriptors?0:y.parameterDescriptors.length;if(M+L>6||x>6)throw C();const w=new MessageChannel,D=[],A=[];for(let e=0;e<E.numberOfInputs;e+=1)D.push(d(g,{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation,gain:1})),A.push(f(g,{channelCount:E.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:E.channelCount}));const F=[];if(void 0!==y.parameterDescriptors)for(const{defaultValue:t,maxValue:n,minValue:r,name:o}of y.parameterDescriptors){const u=h(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:void 0!==E.parameterData[o]?E.parameterData[o]:void 0===t?0:t});Object.defineProperties(u.offset,{defaultValue:{get:()=>void 0===t?0:t},maxValue:{get:()=>void 0===n?e.MOST_POSITIVE_SINGLE_FLOAT:n},minValue:{get:()=>void 0===r?e.MOST_NEGATIVE_SINGLE_FLOAT:r}}),F.push(u)}const k=i(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,M+L)}),N=(0,t.computeBufferSize)(I,g.sampleRate),T=m(g,N,M+L,Math.max(1,x)),V=f(g,{channelCount:Math.max(1,x),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,x)}),_=[];for(let e=0;e<E.numberOfOutputs;e+=1)_.push(i(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:E.outputChannelCount[e]}));for(let e=0;e<E.numberOfInputs;e+=1){D[e].connect(A[e]);for(let t=0;t<E.channelCount;t+=1)A[e].connect(k,t,e*E.channelCount+t)}const q=new a.ReadOnlyMap(void 0===y.parameterDescriptors?[]:y.parameterDescriptors.map(({name:e},t)=>{const n=F[t];return n.connect(k,0,M+t),n.start(0),[e,n.offset]}));k.connect(T);let S=E.channelInterpretation,P=null;const R=0===E.numberOfOutputs?[T]:_,j={get bufferSize(){return N},get channelCount(){return E.channelCount},set channelCount(e){throw l()},get channelCountMode(){return E.channelCountMode},set channelCountMode(e){throw l()},get channelInterpretation(){return S},set channelInterpretation(e){for(const t of D)t.channelInterpretation=e;S=e},get context(){return T.context},get inputs(){return D},get numberOfInputs(){return E.numberOfInputs},get numberOfOutputs(){return E.numberOfOutputs},get onprocessorerror(){return P},set onprocessorerror(e){"function"==typeof P&&j.removeEventListener("processorerror",P),"function"==typeof(P="function"==typeof e?e:null)&&j.addEventListener("processorerror",P)},get parameters(){return q},get port(){return w.port2},addEventListener:(...e)=>T.addEventListener(e[0],e[1],e[2]),connect:s.bind(null,R),disconnect:O.bind(null,R),dispatchEvent:(...e)=>T.dispatchEvent(e[0]),removeEventListener:(...e)=>T.removeEventListener(e[0],e[1],e[2])},z=new Map;w.port1.addEventListener=(e=>(...t)=>{if("message"===t[0]){const e="function"==typeof t[1]?t[1]:"object"==typeof t[1]&&null!==t[1]&&"function"==typeof t[1].handleEvent?t[1].handleEvent:null;if(null!==e){const n=z.get(t[1]);void 0!==n?t[1]=n:(t[1]=(t=>{v(g.currentTime,g.sampleRate,()=>e(t))}),z.set(e,t[1]))}}return e.call(w.port1,t[0],t[1],t[2])})(w.port1.addEventListener),w.port1.removeEventListener=(e=>(...t)=>{if("message"===t[0]){const e=z.get(t[1]);void 0!==e&&(z.delete(t[1]),t[1]=e)}return e.call(w.port1,t[0],t[1],t[2])})(w.port1.removeEventListener);let B=null;Object.defineProperty(w.port1,"onmessage",{get:()=>B,set:e=>{"function"==typeof B&&w.port1.removeEventListener("message",B),"function"==typeof(B="function"==typeof e?e:null)&&(w.port1.addEventListener("message",B),w.port1.start())}}),y.prototype.port=w.port1;let G=null;(0,o.createAudioWorkletProcessor)(g,j,y,E).then(e=>G=e);const W=(0,u.createNestedArrays)(E.numberOfInputs,E.channelCount),H=(0,u.createNestedArrays)(E.numberOfOutputs,E.outputChannelCount),J=void 0===y.parameterDescriptors?[]:y.parameterDescriptors.reduce((e,{name:t})=>({...e,[t]:new Float32Array(128)}),{});let K=!0;const Q=()=>{E.numberOfOutputs>0&&T.disconnect(V);for(let e=0,t=0;e<E.numberOfOutputs;e+=1){const n=_[e];for(let r=0;r<E.outputChannelCount[e];r+=1)V.disconnect(n,t+r,r);t+=E.outputChannelCount[e]}};T.onaudioprocess=(({inputBuffer:e,outputBuffer:t})=>{if(null!==G)for(let u=0;u<N;u+=128){for(let t=0;t<E.numberOfInputs;t+=1)for(let r=0;r<E.channelCount;r+=1)(0,n.copyFromChannel)(e,W[t],r,r,u);void 0!==y.parameterDescriptors&&y.parameterDescriptors.forEach(({name:t},r)=>{(0,n.copyFromChannel)(e,J,t,M+r,u)});for(let e=0;e<E.numberOfInputs;e+=1)for(let t=0;t<E.outputChannelCount[e];t+=1)0===H[e][t].byteLength&&(H[e][t]=new Float32Array(128));try{const e=W.map((e,t)=>{const n=c.get(j);return void 0===n||void 0===n.get(t)?[]:e}),n=v(g.currentTime+u/g.sampleRate,g.sampleRate,()=>G.process(e,H,J));K=n;for(let o=0,a=0;o<E.numberOfOutputs;o+=1){for(let e=0;e<E.outputChannelCount[o];e+=1)(0,r.copyToChannel)(t,H[o],e,a+e,u);a+=E.outputChannelCount[o]}}catch(o){K=!1,j.dispatchEvent(new ErrorEvent("processorerror",{error:o}))}if(!K){for(let e=0;e<E.numberOfInputs;e+=1){D[e].disconnect(A[e]);for(let t=0;t<E.channelCount;t+=1)A[u].disconnect(k,t,e*E.channelCount+t)}if(void 0!==y.parameterDescriptors){const e=y.parameterDescriptors.length;for(let t=0;t<e;t+=1){const e=F[t];e.disconnect(k,0,M+t),e.stop()}}k.disconnect(T),T.onaudioprocess=null,U?Q():Z();break}}});let U=!1;const X=d(g,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),Y=()=>T.connect(X).connect(X.context.destination),Z=()=>{T.disconnect(X),X.disconnect()};return Y(),b(j,()=>{if(K){Z(),E.numberOfOutputs>0&&T.connect(V);for(let e=0,t=0;e<E.numberOfOutputs;e+=1){const n=_[e];for(let r=0;r<E.outputChannelCount[e];r+=1)V.connect(n,t+r,r);t+=E.outputChannelCount[e]}}U=!0},()=>{K&&(Y(),Q()),U=!1})};exports.createNativeAudioWorkletNodeFakerFactory=c;
},{"../constants":"Pf5U","../helpers/compute-buffer-size":"Qi6j","../helpers/copy-from-channel":"fhv0","../helpers/copy-to-channel":"usJK","../helpers/create-audio-worklet-processor":"Dtl5","../helpers/create-nested-arrays":"oZTy","../read-only-map":"cySK"}],"ZH5p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeBiquadFilterNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),i=require("../helpers/assign-native-audio-node-option"),a=require("../helpers/assign-native-audio-node-options");const o=o=>(t,d)=>{const r=o(t,e=>e.createBiquadFilter());return(0,a.assignNativeAudioNodeOptions)(r,d),(0,e.assignNativeAudioNodeAudioParamValue)(r,d,"Q"),(0,e.assignNativeAudioNodeAudioParamValue)(r,d,"detune"),(0,e.assignNativeAudioNodeAudioParamValue)(r,d,"frequency"),(0,e.assignNativeAudioNodeAudioParamValue)(r,d,"gain"),(0,i.assignNativeAudioNodeOption)(r,d,"type"),r};exports.createNativeBiquadFilterNodeFactory=o;
},{"../helpers/assign-native-audio-node-audio-param-value":"JA6H","../helpers/assign-native-audio-node-option":"v64l","../helpers/assign-native-audio-node-options":"EZSt"}],"mwLt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeChannelMergerNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-options");const t=(t,n)=>(r,o)=>{const a=t(r,e=>e.createChannelMerger(o.numberOfInputs));return 1!==a.channelCount&&"explicit"!==a.channelCountMode&&n(r,a),(0,e.assignNativeAudioNodeOptions)(a,o),a};exports.createNativeChannelMergerNodeFactory=t;
},{"../helpers/assign-native-audio-node-options":"EZSt"}],"g0ez":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapChannelSplitterNode=void 0;var e=require("../factories/invalid-state-error");const t=t=>{const r=t.numberOfOutputs;Object.defineProperty(t,"channelCount",{get:()=>r,set:t=>{if(t!==r)throw(0,e.createInvalidStateError)()}}),Object.defineProperty(t,"channelCountMode",{get:()=>"explicit",set:t=>{if("explicit"!==t)throw(0,e.createInvalidStateError)()}}),Object.defineProperty(t,"channelInterpretation",{get:()=>"discrete",set:t=>{if("discrete"!==t)throw(0,e.createInvalidStateError)()}})};exports.wrapChannelSplitterNode=t;
},{"../factories/invalid-state-error":"BpY2"}],"Fe0A":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeChannelSplitterNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-options"),t=require("../helpers/wrap-channel-splitter-node");const r=r=>(n,a)=>{const o=r(n,e=>e.createChannelSplitter(a.numberOfOutputs));return(0,e.assignNativeAudioNodeOptions)(o,a),(0,t.wrapChannelSplitterNode)(o),o};exports.createNativeChannelSplitterNodeFactory=r;
},{"../helpers/assign-native-audio-node-options":"EZSt","../helpers/wrap-channel-splitter-node":"g0ez"}],"L00Q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeConstantSourceNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),o=require("../helpers/assign-native-audio-node-options"),r=require("../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters"),t=require("../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters");const a=(a,s,d,i,u,n)=>(c,p)=>{if(void 0===c.createConstantSource)return i(c,p);const v=d(c,e=>e.createConstantSource());return(0,o.assignNativeAudioNodeOptions)(v,p),(0,e.assignNativeAudioNodeAudioParamValue)(v,p,"offset"),s(u,()=>u(c))||(0,r.wrapAudioScheduledSourceNodeStartMethodNegativeParameters)(v),s(n,()=>n(c))||(0,t.wrapAudioScheduledSourceNodeStopMethodNegativeParameters)(v),a(c,v),v};exports.createNativeConstantSourceNodeFactory=a;
},{"../helpers/assign-native-audio-node-audio-param-value":"JA6H","../helpers/assign-native-audio-node-options":"EZSt","../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters":"CksU","../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters":"xTEY"}],"Nd6E":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.interceptConnections=void 0;const e=(e,n)=>(e.connect=n.connect.bind(n),e.disconnect=n.disconnect.bind(n),e);exports.interceptConnections=e;
},{}],"hSFi":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeConstantSourceNodeFakerFactory=void 0;var e=require("../helpers/intercept-connections");const t=(t,n,r,o)=>(a,{offset:c,...u})=>{const s=a.createBuffer(1,2,a.sampleRate),i=n(a),d=r(a,{...u,gain:c}),l=s.getChannelData(0);l[0]=1,l[1]=1,i.buffer=s,i.loop=!0;const p={get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(e){d.channelCount=e},get channelCountMode(){return d.channelCountMode},set channelCountMode(e){d.channelCountMode=e},get channelInterpretation(){return d.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e},get context(){return d.context},get inputs(){return[]},get numberOfInputs(){return i.numberOfInputs},get numberOfOutputs(){return d.numberOfOutputs},get offset(){return d.gain},get onended(){return i.onended},set onended(e){i.onended=e},addEventListener:(...e)=>i.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>i.dispatchEvent(e[0]),removeEventListener:(...e)=>i.removeEventListener(e[0],e[1],e[2]),start(e=0){i.start.call(i,e)},stop(e=0){i.stop.call(i,e)}};return t(a,i),o((0,e.interceptConnections)(p,d),()=>i.connect(d),()=>i.disconnect(d))};exports.createNativeConstantSourceNodeFakerFactory=t;
},{"../helpers/intercept-connections":"Nd6E"}],"ay2z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeConvolverNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-option"),o=require("../helpers/assign-native-audio-node-options");const n=(n,t,a,r)=>(i,l)=>{const s=n(i,e=>e.createConvolver());try{s.channelCount=1}catch(c){return t(i,l)}if((0,o.assignNativeAudioNodeOptions)(s,l),l.disableNormalization===s.normalize&&(s.normalize=!l.disableNormalization),(0,e.assignNativeAudioNodeOption)(s,l,"buffer"),l.channelCount>2)throw a();if(r(s,"channelCount",e=>()=>e.call(s),e=>o=>{if(o>2)throw a();return e.call(s,o)}),"max"===l.channelCountMode)throw a();return r(s,"channelCountMode",e=>()=>e.call(s),e=>o=>{if("max"===o)throw a();return e.call(s,o)}),s};exports.createNativeConvolverNodeFactory=n;
},{"../helpers/assign-native-audio-node-option":"v64l","../helpers/assign-native-audio-node-options":"EZSt"}],"zbRB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeConvolverNodeFakerFactory=void 0;var e=require("../helpers/assign-native-audio-node-options"),n=require("../helpers/intercept-connections");const t=(t,r,o)=>(a,{buffer:u,channelCount:c,channelCountMode:i,channelInterpretation:l,disableNormalization:s})=>{const h=t(a,e=>e.createConvolver());(0,e.assignNativeAudioNodeOptions)(h,{channelCount:Math.max(c,2),channelCountMode:"max"===i?i:"clamped-max",channelInterpretation:l});const d=r(a,{channelCount:c,channelCountMode:i,channelInterpretation:l,gain:1}),p={get buffer(){return h.buffer},set buffer(e){h.buffer=e},get bufferSize(){},get channelCount(){return d.channelCount},set channelCount(e){e>2&&(h.channelCount=e),d.channelCount=e},get channelCountMode(){return d.channelCountMode},set channelCountMode(e){"max"===e&&(h.channelCountMode=e),d.channelCountMode=e},get channelInterpretation(){return h.channelInterpretation},set channelInterpretation(e){h.channelInterpretation=e,d.channelInterpretation=e},get context(){return h.context},get inputs(){return[h]},get numberOfInputs(){return h.numberOfInputs},get numberOfOutputs(){return h.numberOfOutputs},get normalize(){return h.normalize},set normalize(e){h.normalize=e},addEventListener:(...e)=>h.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>h.dispatchEvent(e[0]),removeEventListener:(...e)=>h.removeEventListener(e[0],e[1],e[2])};s===p.normalize&&(p.normalize=!s),u!==p.buffer&&(p.buffer=u);return o((0,n.interceptConnections)(p,d),()=>h.connect(d),()=>h.disconnect(d))};exports.createNativeConvolverNodeFakerFactory=t;
},{"../helpers/assign-native-audio-node-options":"EZSt","../helpers/intercept-connections":"Nd6E"}],"qSYM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeDelayNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),a=require("../helpers/assign-native-audio-node-options");const i=i=>(o,t)=>{const r=i(o,e=>e.createDelay(t.maxDelayTime));return(0,a.assignNativeAudioNodeOptions)(r,t),(0,e.assignNativeAudioNodeAudioParamValue)(r,t,"delayTime"),r};exports.createNativeDelayNodeFactory=i;
},{"../helpers/assign-native-audio-node-audio-param-value":"JA6H","../helpers/assign-native-audio-node-options":"EZSt"}],"YOgJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeDynamicsCompressorNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),a=require("../helpers/assign-native-audio-node-options");const o=(o,i)=>(s,r)=>{const t=o(s,e=>e.createDynamicsCompressor());if((0,a.assignNativeAudioNodeOptions)(t,r),r.channelCount>2)throw i();if("max"===r.channelCountMode)throw i();return(0,e.assignNativeAudioNodeAudioParamValue)(t,r,"attack"),(0,e.assignNativeAudioNodeAudioParamValue)(t,r,"knee"),(0,e.assignNativeAudioNodeAudioParamValue)(t,r,"ratio"),(0,e.assignNativeAudioNodeAudioParamValue)(t,r,"release"),(0,e.assignNativeAudioNodeAudioParamValue)(t,r,"threshold"),t};exports.createNativeDynamicsCompressorNodeFactory=o;
},{"../helpers/assign-native-audio-node-audio-param-value":"JA6H","../helpers/assign-native-audio-node-options":"EZSt"}],"bC2p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeGainNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),a=require("../helpers/assign-native-audio-node-options");const i=i=>(o,t)=>{const r=i(o,e=>e.createGain());return(0,a.assignNativeAudioNodeOptions)(r,t),(0,e.assignNativeAudioNodeAudioParamValue)(r,t,"gain"),r};exports.createNativeGainNodeFactory=i;
},{"../helpers/assign-native-audio-node-audio-param-value":"JA6H","../helpers/assign-native-audio-node-options":"EZSt"}],"w5c7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeIIRFilterNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-options");const t=(t,r)=>(o,i,a)=>{if(void 0===o.createIIRFilter)return r(o,i,a);const s=t(o,e=>e.createIIRFilter(a.feedforward,a.feedback));return(0,e.assignNativeAudioNodeOptions)(s,a),s};exports.createNativeIIRFilterNodeFactory=t;
},{"../helpers/assign-native-audio-node-options":"EZSt"}],"S2pN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeIIRFilterNodeFakerFactory=void 0;var e=require("../helpers/compute-buffer-size"),t=require("../helpers/filter-buffer"),n=require("../helpers/intercept-connections");function r(e,t){const n=t[0]*t[0]+t[1]*t[1];return[(e[0]*t[0]+e[1]*t[1])/n,(e[1]*t[0]-e[0]*t[1])/n]}function o(e,t){return[e[0]*t[0]-e[1]*t[1],e[0]*t[1]+e[1]*t[0]]}function a(e,t){let n=[0,0];for(let r=e.length-1;r>=0;r-=1)(n=o(n,t))[0]+=e[r];return n}const u=(o,u,l,c)=>(h,s,{channelCount:i,channelCountMode:f,channelInterpretation:p,feedback:g,feedforward:d})=>{const C=(0,e.computeBufferSize)(s,h.sampleRate),v=g.length,I=d.length,M=Math.min(v,I);if(0===g.length||g.length>20)throw c();if(0===g[0])throw u();if(0===d.length||d.length>20)throw c();if(0===d[0])throw u();if(1!==g[0]){for(let e=0;e<I;e+=1)d[e]/=g[0];for(let e=1;e<v;e+=1)g[e]/=g[0]}const m=l(h,C,i,i);m.channelCount=i,m.channelCountMode=f,m.channelInterpretation=p;const b=[],F=[],w=[];for(let e=0;e<i;e+=1){b.push(0);const e=new Float32Array(32),t=new Float32Array(32);e.fill(0),t.fill(0),F.push(e),w.push(t)}m.onaudioprocess=(e=>{const n=e.inputBuffer,r=e.outputBuffer,o=n.numberOfChannels;for(let a=0;a<o;a+=1){const e=n.getChannelData(a),o=r.getChannelData(a);b[a]=(0,t.filterBuffer)(g,v,d,I,M,F[a],w[a],b[a],32,e,o)}});const O=h.sampleRate/2,y={get bufferSize(){return C},get channelCount(){return m.channelCount},set channelCount(e){m.channelCount=e},get channelCountMode(){return m.channelCountMode},set channelCountMode(e){m.channelCountMode=e},get channelInterpretation(){return m.channelInterpretation},set channelInterpretation(e){m.channelInterpretation=e},get context(){return m.context},get inputs(){return[m]},get numberOfInputs(){return m.numberOfInputs},get numberOfOutputs(){return m.numberOfOutputs},addEventListener:(...e)=>m.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>m.dispatchEvent(e[0]),getFrequencyResponse(e,t,n){if(e.length!==t.length||t.length!==n.length)throw o();const u=e.length;for(let o=0;o<u;o+=1){const u=-Math.PI*(e[o]/O),l=[Math.cos(u),Math.sin(u)],c=r(a(d,l),a(g,l));t[o]=Math.sqrt(c[0]*c[0]+c[1]*c[1]),n[o]=Math.atan2(c[1],c[0])}},removeEventListener:(...e)=>m.removeEventListener(e[0],e[1],e[2])};return(0,n.interceptConnections)(y,m)};exports.createNativeIIRFilterNodeFakerFactory=u;
},{"../helpers/compute-buffer-size":"Qi6j","../helpers/filter-buffer":"QKPM","../helpers/intercept-connections":"Nd6E"}],"bk1F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeMediaElementAudioSourceNodeFactory=void 0;const e=e=>(t,o)=>e(t,e=>e.createMediaElementSource(o.mediaElement));exports.createNativeMediaElementAudioSourceNodeFactory=e;
},{}],"Q1we":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeMediaStreamAudioDestinationNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-options");const t=(t,i)=>(o,a)=>{if(void 0===o.createMediaStreamDestination)throw i();const r=t(o,e=>e.createMediaStreamDestination());return(0,e.assignNativeAudioNodeOptions)(r,a),1===r.numberOfOutputs&&Object.defineProperty(r,"numberOfOutputs",{get:()=>0}),r};exports.createNativeMediaStreamAudioDestinationNodeFactory=t;
},{"../helpers/assign-native-audio-node-options":"EZSt"}],"enK5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeMediaStreamAudioSourceNodeFactory=void 0;const e=e=>(t,{mediaStream:r})=>{const a=r.getAudioTracks(),o=e(t,e=>{const t=a.sort((e,t)=>e.id<t.id?-1:e.id>t.id?1:0).slice(0,1);return e.createMediaStreamSource(new MediaStream(t))});return Object.defineProperty(o,"mediaStream",{value:r}),o};exports.createNativeMediaStreamAudioSourceNodeFactory=e;
},{}],"Gaw6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeMediaStreamTrackAudioSourceNodeFactory=void 0;const e=(e,r,a)=>(t,{mediaStreamTrack:o})=>"function"==typeof t.createMediaStreamTrackSource?r(t,e=>e.createMediaStreamTrackSource(o)):r(t,r=>{const t=new MediaStream([o]),c=r.createMediaStreamSource(t);if("audio"!==o.kind)throw e();if(a(r))throw new TypeError;return c});exports.createNativeMediaStreamTrackAudioSourceNodeFactory=e;
},{}],"I39P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeOfflineAudioContextConstructor=void 0;const e=e=>null===e?null:e.hasOwnProperty("OfflineAudioContext")?e.OfflineAudioContext:e.hasOwnProperty("webkitOfflineAudioContext")?e.webkitOfflineAudioContext:null;exports.createNativeOfflineAudioContextConstructor=e;
},{}],"FKT1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeOscillatorNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),a=require("../helpers/assign-native-audio-node-option"),o=require("../helpers/assign-native-audio-node-options"),r=require("../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters"),i=require("../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters");const t=(t,d,s,u,n,p,c)=>(v,l)=>{const N=s(v,e=>e.createOscillator());return(0,o.assignNativeAudioNodeOptions)(N,l),(0,e.assignNativeAudioNodeAudioParamValue)(N,l,"detune"),(0,e.assignNativeAudioNodeAudioParamValue)(N,l,"frequency"),void 0!==l.periodicWave?N.setPeriodicWave(l.periodicWave):(0,a.assignNativeAudioNodeOption)(N,l,"type"),d(u,()=>u(v))||(0,r.wrapAudioScheduledSourceNodeStartMethodNegativeParameters)(N),d(n,()=>n(v))||c(N,v),d(p,()=>p(v))||(0,i.wrapAudioScheduledSourceNodeStopMethodNegativeParameters)(N),t(v,N),N};exports.createNativeOscillatorNodeFactory=t;
},{"../helpers/assign-native-audio-node-audio-param-value":"JA6H","../helpers/assign-native-audio-node-option":"v64l","../helpers/assign-native-audio-node-options":"EZSt","../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters":"CksU","../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters":"xTEY"}],"AtzW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativePannerNodeFactory=void 0;var i=require("../helpers/assign-native-audio-node-audio-param-value"),e=require("../helpers/assign-native-audio-node-option"),o=require("../helpers/assign-native-audio-node-options");const a=(a,n)=>(t,s)=>{const d=a(t,i=>i.createPanner());return void 0===d.orientationX?n(t,s):((0,o.assignNativeAudioNodeOptions)(d,s),(0,i.assignNativeAudioNodeAudioParamValue)(d,s,"orientationX"),(0,i.assignNativeAudioNodeAudioParamValue)(d,s,"orientationY"),(0,i.assignNativeAudioNodeAudioParamValue)(d,s,"orientationZ"),(0,i.assignNativeAudioNodeAudioParamValue)(d,s,"positionX"),(0,i.assignNativeAudioNodeAudioParamValue)(d,s,"positionY"),(0,i.assignNativeAudioNodeAudioParamValue)(d,s,"positionZ"),(0,e.assignNativeAudioNodeOption)(d,s,"coneInnerAngle"),(0,e.assignNativeAudioNodeOption)(d,s,"coneOuterAngle"),(0,e.assignNativeAudioNodeOption)(d,s,"coneOuterGain"),(0,e.assignNativeAudioNodeOption)(d,s,"distanceModel"),(0,e.assignNativeAudioNodeOption)(d,s,"maxDistance"),(0,e.assignNativeAudioNodeOption)(d,s,"panningModel"),(0,e.assignNativeAudioNodeOption)(d,s,"refDistance"),(0,e.assignNativeAudioNodeOption)(d,s,"rolloffFactor"),d)};exports.createNativePannerNodeFactory=a;
},{"../helpers/assign-native-audio-node-audio-param-value":"JA6H","../helpers/assign-native-audio-node-option":"v64l","../helpers/assign-native-audio-node-options":"EZSt"}],"ReCR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativePannerNodeFakerFactory=void 0;var e=require("../helpers/assign-native-audio-node-options"),n=require("../helpers/intercept-connections");const t=(t,o,r,a,i,c,s,l,u,g)=>(d,{coneInnerAngle:p,coneOuterAngle:f,coneOuterGain:h,distanceModel:O,maxDistance:v,orientationX:M,orientationY:C,orientationZ:D,panningModel:m,positionX:I,positionY:A,positionZ:x,refDistance:w,rolloffFactor:F,...b})=>{const P=r(d,e=>e.createPanner());if(b.channelCount>2)throw l();if("max"===b.channelCountMode)throw l();(0,e.assignNativeAudioNodeOptions)(P,b);const y={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},E=a(d,{...y,channelInterpretation:"speakers",numberOfInputs:6}),X=i(d,{...b,gain:1}),Y=i(d,{...y,gain:1}),Z=i(d,{...y,gain:0}),G=i(d,{...y,gain:0}),j=i(d,{...y,gain:0}),N=i(d,{...y,gain:0}),V=i(d,{...y,gain:0}),L=c(d,256,6,1),R=s(d,{...y,curve:new Float32Array([1,1]),oversample:"none"});let k=[M,C,D],q=[I,A,x];L.onaudioprocess=(({inputBuffer:e})=>{const n=[e.getChannelData(0)[0],e.getChannelData(1)[0],e.getChannelData(2)[0]];n.some((e,n)=>e!==k[n])&&(P.setOrientation(...n),k=n);const t=[e.getChannelData(3)[0],e.getChannelData(4)[0],e.getChannelData(5)[0]];t.some((e,n)=>e!==q[n])&&(P.setPosition(...t),q=t)}),Object.defineProperty(Z.gain,"defaultValue",{get:()=>0}),Object.defineProperty(G.gain,"defaultValue",{get:()=>0}),Object.defineProperty(j.gain,"defaultValue",{get:()=>0}),Object.defineProperty(N.gain,"defaultValue",{get:()=>0}),Object.defineProperty(V.gain,"defaultValue",{get:()=>0});const _={get bufferSize(){},get channelCount(){return P.channelCount},set channelCount(e){if(e>2)throw l();X.channelCount=e,P.channelCount=e},get channelCountMode(){return P.channelCountMode},set channelCountMode(e){if("max"===e)throw l();X.channelCountMode=e,P.channelCountMode=e},get channelInterpretation(){return P.channelInterpretation},set channelInterpretation(e){X.channelInterpretation=e,P.channelInterpretation=e},get coneInnerAngle(){return P.coneInnerAngle},set coneInnerAngle(e){P.coneInnerAngle=e},get coneOuterAngle(){return P.coneOuterAngle},set coneOuterAngle(e){P.coneOuterAngle=e},get coneOuterGain(){return P.coneOuterGain},set coneOuterGain(e){if(e<0||e>1)throw o();P.coneOuterGain=e},get context(){return P.context},get distanceModel(){return P.distanceModel},set distanceModel(e){P.distanceModel=e},get inputs(){return[X]},get maxDistance(){return P.maxDistance},set maxDistance(e){if(e<0)throw new RangeError;P.maxDistance=e},get numberOfInputs(){return P.numberOfInputs},get numberOfOutputs(){return P.numberOfOutputs},get orientationX(){return Y.gain},get orientationY(){return Z.gain},get orientationZ(){return G.gain},get panningModel(){return P.panningModel},set panningModel(e){if(P.panningModel=e,P.panningModel!==e&&"HRTF"===e)throw l()},get positionX(){return j.gain},get positionY(){return N.gain},get positionZ(){return V.gain},get refDistance(){return P.refDistance},set refDistance(e){if(e<0)throw new RangeError;P.refDistance=e},get rolloffFactor(){return P.rolloffFactor},set rolloffFactor(e){if(e<0)throw new RangeError;P.rolloffFactor=e},addEventListener:(...e)=>X.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>X.dispatchEvent(e[0]),removeEventListener:(...e)=>X.removeEventListener(e[0],e[1],e[2])};p!==_.coneInnerAngle&&(_.coneInnerAngle=p),f!==_.coneOuterAngle&&(_.coneOuterAngle=f),h!==_.coneOuterGain&&(_.coneOuterGain=h),O!==_.distanceModel&&(_.distanceModel=O),v!==_.maxDistance&&(_.maxDistance=v),M!==_.orientationX.value&&(_.orientationX.value=M),C!==_.orientationY.value&&(_.orientationY.value=C),D!==_.orientationZ.value&&(_.orientationZ.value=D),m!==_.panningModel&&(_.panningModel=m),I!==_.positionX.value&&(_.positionX.value=I),A!==_.positionY.value&&(_.positionY.value=A),x!==_.positionZ.value&&(_.positionZ.value=x),w!==_.refDistance&&(_.refDistance=w),F!==_.rolloffFactor&&(_.rolloffFactor=F),1===k[0]&&0===k[1]&&0===k[2]||P.setOrientation(...k),0===q[0]&&0===q[1]&&0===q[2]||P.setPosition(...q);return g((0,n.interceptConnections)(_,P),()=>{X.connect(P),t(X,R,0,0),R.connect(Y).connect(E,0,0),R.connect(Z).connect(E,0,1),R.connect(G).connect(E,0,2),R.connect(j).connect(E,0,3),R.connect(N).connect(E,0,4),R.connect(V).connect(E,0,5),E.connect(L).connect(d.destination)},()=>{X.disconnect(P),u(X,R,0,0),R.disconnect(Y),Y.disconnect(E),R.disconnect(Z),Z.disconnect(E),R.disconnect(G),G.disconnect(E),R.disconnect(j),j.disconnect(E),R.disconnect(N),N.disconnect(E),R.disconnect(V),V.disconnect(E),E.disconnect(L),L.disconnect(d.destination)})};exports.createNativePannerNodeFakerFactory=t;
},{"../helpers/assign-native-audio-node-options":"EZSt","../helpers/intercept-connections":"Nd6E"}],"wGSc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativePeriodicWaveFactory=void 0;const e=e=>(a,{disableNormalization:r,imag:i,real:t})=>{const o=e(a),c=new Float32Array(i),l=new Float32Array(t);return null!==o?o.createPeriodicWave(l,c,{disableNormalization:r}):a.createPeriodicWave(l,c,{disableNormalization:r})};exports.createNativePeriodicWaveFactory=e;
},{}],"cAbK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeScriptProcessorNodeFactory=void 0;const e=e=>(r,t,o,c)=>e(r,e=>e.createScriptProcessor(t,o,c));exports.createNativeScriptProcessorNodeFactory=e;
},{}],"C1t6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeStereoPannerNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-audio-param-value"),o=require("../helpers/assign-native-audio-node-options");const t=(t,r,a)=>(n,i)=>t(n,t=>{const s=i.channelCountMode;if("clamped-max"===s)throw a();if(void 0===n.createStereoPanner)return r(n,i);const d=t.createStereoPanner();return(0,o.assignNativeAudioNodeOptions)(d,i),(0,e.assignNativeAudioNodeAudioParamValue)(d,i,"pan"),Object.defineProperty(d,"channelCountMode",{get:()=>s,set:e=>{if(e!==s)throw a()}}),d});exports.createNativeStereoPannerNodeFactory=t;
},{"../helpers/assign-native-audio-node-audio-param-value":"JA6H","../helpers/assign-native-audio-node-options":"EZSt"}],"JtRY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeStereoPannerNodeFakerFactory=void 0;var n=require("../helpers/intercept-connections");const e=(e,t,c,o,r,i)=>{const a=new Float32Array([1,1]),s=Math.PI/2,u={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},d={...u,oversample:"none"},p=(n,e,i,p,l)=>{if(1===e)return((n,e,t,r)=>{const i=new Float32Array(16385),p=new Float32Array(16385);for(let c=0;c<16385;c+=1){const n=c/16384*s;i[c]=Math.cos(n),p[c]=Math.sin(n)}const l=c(n,{...u,gain:0}),h=o(n,{...d,curve:i}),g=o(n,{...d,curve:a}),v=c(n,{...u,gain:0}),C=o(n,{...d,curve:p});return{connectGraph(){e.connect(l),e.connect(g.inputs[0]),e.connect(v),g.connect(t),t.connect(h.inputs[0]),t.connect(C.inputs[0]),h.connect(l.gain),C.connect(v.gain),l.connect(r,0,0),v.connect(r,0,1)},disconnectGraph(){e.disconnect(l),e.disconnect(g.inputs[0]),e.disconnect(v),g.disconnect(t),t.disconnect(h.inputs[0]),t.disconnect(C.inputs[0]),h.disconnect(l.gain),C.disconnect(v.gain),l.disconnect(r,0,0),v.disconnect(r,0,1)}}})(n,i,p,l);if(2===e)return((n,e,r,i)=>{const p=new Float32Array(16385),l=new Float32Array(16385),h=new Float32Array(16385),g=new Float32Array(16385),v=Math.floor(8192.5);for(let t=0;t<16385;t+=1)if(t>v){const n=(t-v)/(16384-v)*s;p[t]=Math.cos(n),l[t]=Math.sin(n),h[t]=0,g[t]=1}else{const n=t/(16384-v)*s;p[t]=1,l[t]=0,h[t]=Math.cos(n),g[t]=Math.sin(n)}const C=t(n,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),f=c(n,{...u,gain:0}),M=o(n,{...d,curve:p}),m=c(n,{...u,gain:0}),x=o(n,{...d,curve:l}),y=o(n,{...d,curve:a}),F=c(n,{...u,gain:0}),I=o(n,{...d,curve:h}),O=c(n,{...u,gain:0}),w=o(n,{...d,curve:g});return{connectGraph(){e.connect(C),e.connect(y.inputs[0]),C.connect(f,1),C.connect(m,1),C.connect(F,1),C.connect(O,1),y.connect(r),r.connect(M.inputs[0]),r.connect(x.inputs[0]),r.connect(I.inputs[0]),r.connect(w.inputs[0]),M.connect(f.gain),x.connect(m.gain),I.connect(F.gain),w.connect(O.gain),f.connect(i,0,0),F.connect(i,0,0),m.connect(i,0,1),O.connect(i,0,1)},disconnectGraph(){e.disconnect(C),e.disconnect(y.inputs[0]),C.disconnect(f,1),C.disconnect(m,1),C.disconnect(F,1),C.disconnect(O,1),y.disconnect(r),r.disconnect(M.inputs[0]),r.disconnect(x.inputs[0]),r.disconnect(I.inputs[0]),r.disconnect(w.inputs[0]),M.disconnect(f.gain),x.disconnect(m.gain),I.disconnect(F.gain),w.disconnect(O.gain),f.disconnect(i,0,0),F.disconnect(i,0,0),m.disconnect(i,0,1),O.disconnect(i,0,1)}}})(n,i,p,l);throw r()};return(t,{channelCount:o,channelCountMode:a,pan:s,...u})=>{if("max"===a)throw r();const d=e(t,{...u,channelCount:1,channelCountMode:a,numberOfInputs:2}),l=c(t,{...u,channelCount:o,channelCountMode:a,gain:1}),h=c(t,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:s});let{connectGraph:g,disconnectGraph:v}=p(t,o,l,h,d);Object.defineProperty(h.gain,"defaultValue",{get:()=>0});const C={get bufferSize(){},get channelCount(){return l.channelCount},set channelCount(n){l.channelCount!==n&&(f&&v(),({connectGraph:g,disconnectGraph:v}=p(t,n,l,h,d)),f&&g()),l.channelCount=n},get channelCountMode(){return l.channelCountMode},set channelCountMode(n){if("clamped-max"===n||"max"===n)throw r();l.channelCountMode=n},get channelInterpretation(){return l.channelInterpretation},set channelInterpretation(n){l.channelInterpretation=n},get context(){return l.context},get inputs(){return[l]},get numberOfInputs(){return l.numberOfInputs},get numberOfOutputs(){return l.numberOfOutputs},get pan(){return h.gain},addEventListener:(...n)=>l.addEventListener(n[0],n[1],n[2]),dispatchEvent:(...n)=>l.dispatchEvent(n[0]),removeEventListener:(...n)=>l.removeEventListener(n[0],n[1],n[2])};let f=!1;return i((0,n.interceptConnections)(C,d),()=>{g(),f=!0},()=>{v(),f=!1})}};exports.createNativeStereoPannerNodeFakerFactory=e;
},{"../helpers/intercept-connections":"Nd6E"}],"lZAn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeWaveShaperNodeFactory=void 0;var e=require("../helpers/assign-native-audio-node-option"),r=require("../helpers/assign-native-audio-node-options");const t=(t,a,o,n,i,l,s)=>(u,c)=>{const v=o(u,e=>e.createWaveShaper());try{return v.curve=new Float32Array([1]),n(u,c)}catch{}(0,r.assignNativeAudioNodeOptions)(v,c);const d=c.curve;if(null!==d&&d.length<2)throw a();(0,e.assignNativeAudioNodeOption)(v,c,"curve"),(0,e.assignNativeAudioNodeOption)(v,c,"oversample");let p=null,N=!1;s(v,"curve",e=>()=>e.call(v),e=>r=>(e.call(v,r),N&&(i(r)&&null===p?p=t(u,v):i(r)||null===p||(p(),p=null)),r));return l(v,()=>{N=!0,i(v.curve)&&(p=t(u,v))},()=>{N=!1,null!==p&&(p(),p=null)})};exports.createNativeWaveShaperNodeFactory=t;
},{"../helpers/assign-native-audio-node-option":"v64l","../helpers/assign-native-audio-node-options":"EZSt"}],"h8Xk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNativeWaveShaperNodeFakerFactory=void 0;var e=require("../helpers/assign-native-audio-node-options"),n=require("../helpers/intercept-connections");const t=(t,r,o,a,c,l)=>(u,{curve:s,oversample:i,...h})=>{const p=o(u,e=>e.createWaveShaper()),v=o(u,e=>e.createWaveShaper());(0,e.assignNativeAudioNodeOptions)(p,h),(0,e.assignNativeAudioNodeOptions)(v,h);const d=a(u,{...h,gain:1}),g=a(u,{...h,gain:-1}),C=a(u,{...h,gain:1}),m=a(u,{...h,gain:-1});let M=null,f=!1,I=null;const O={get bufferSize(){},get channelCount(){return p.channelCount},set channelCount(e){d.channelCount=e,g.channelCount=e,p.channelCount=e,C.channelCount=e,v.channelCount=e,m.channelCount=e},get channelCountMode(){return p.channelCountMode},set channelCountMode(e){d.channelCountMode=e,g.channelCountMode=e,p.channelCountMode=e,C.channelCountMode=e,v.channelCountMode=e,m.channelCountMode=e},get channelInterpretation(){return p.channelInterpretation},set channelInterpretation(e){d.channelInterpretation=e,g.channelInterpretation=e,p.channelInterpretation=e,C.channelInterpretation=e,v.channelInterpretation=e,m.channelInterpretation=e},get context(){return p.context},get curve(){return I},set curve(e){if(null!==s&&s.length<2)throw r();if(null===e)p.curve=e,v.curve=e;else{const n=e.length,t=new Float32Array(n+2-n%2),r=new Float32Array(n+2-n%2);t[0]=e[0],r[0]=-e[n-1];const o=Math.ceil((n+1)/2),a=(n+1)/2-1;for(let c=1;c<o;c+=1){const l=c/o*a,u=Math.floor(l),s=Math.ceil(l);t[c]=u===s?e[u]:(1-(l-u))*e[u]+(1-(s-l))*e[s],r[c]=u===s?-e[n-1-u]:-(1-(l-u))*e[n-1-u]-(1-(s-l))*e[n-1-s]}t[o]=n%2==1?e[o-1]:(e[o-2]+e[o-1])/2,p.curve=t,v.curve=r}I=e,f&&(c(I)&&null===M?M=t(u,d):null!==M&&(M(),M=null))},get inputs(){return[d]},get numberOfInputs(){return p.numberOfInputs},get numberOfOutputs(){return p.numberOfOutputs},get oversample(){return p.oversample},set oversample(e){p.oversample=e,v.oversample=e},addEventListener:(...e)=>d.addEventListener(e[0],e[1],e[2]),dispatchEvent:(...e)=>d.dispatchEvent(e[0]),removeEventListener:(...e)=>d.removeEventListener(e[0],e[1],e[2])};s!==O.curve&&(O.curve=s),i!==O.oversample&&(O.oversample=i);return l((0,n.interceptConnections)(O,C),()=>{d.connect(p).connect(C),d.connect(g).connect(v).connect(m).connect(C),f=!0,c(I)&&(M=t(u,d))},()=>{d.disconnect(p),p.disconnect(C),d.disconnect(g),g.disconnect(v),v.disconnect(m),m.disconnect(C),f=!1,null!==M&&(M(),M=null)})};exports.createNativeWaveShaperNodeFakerFactory=t;
},{"../helpers/assign-native-audio-node-options":"EZSt","../helpers/intercept-connections":"Nd6E"}],"yDdo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createNotSupportedError=void 0;const r=()=>{try{return new DOMException("","NotSupportedError")}catch(r){return r.code=9,r.name="NotSupportedError",r}};exports.createNotSupportedError=r;
},{}],"Fmb1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOfflineAudioContextConstructor=void 0;var t=require("../helpers/test-promise-support");const e={numberOfChannels:1},n=(n,i,s,o,r)=>(class extends n{constructor(n,s,r){let a;if("number"==typeof n&&void 0!==s&&void 0!==r)a={length:s,numberOfChannels:n,sampleRate:r};else{if("object"!=typeof n)throw new Error("The given parameters are not valid.");a=n}const{length:h,numberOfChannels:l,sampleRate:u}={...e,...a},f=o(l,h,u);i(t.testPromiseSupport,()=>(0,t.testPromiseSupport)(f))||f.addEventListener("statechange",(()=>{let t=0;const e=n=>{"running"===this._state&&(t>0?(f.removeEventListener("statechange",e),n.stopImmediatePropagation(),this._waitForThePromiseToSettle(n)):t+=1)};return e})()),super(f,l),this._length=h,this._nativeOfflineAudioContext=f,this._state=null}get length(){return void 0===this._nativeOfflineAudioContext.length?this._length:this._nativeOfflineAudioContext.length}get state(){return null===this._state?this._nativeOfflineAudioContext.state:this._state}startRendering(){return"running"===this._state?Promise.reject(s()):(this._state="running",r(this.destination,this._nativeOfflineAudioContext).then(t=>(this._state=null,t)).catch(t=>{throw this._state=null,t}))}_waitForThePromiseToSettle(t){null===this._state?this._nativeOfflineAudioContext.dispatchEvent(t):setTimeout(()=>this._waitForThePromiseToSettle(t))}});exports.createOfflineAudioContextConstructor=n;
},{"../helpers/test-promise-support":"PMLM"}],"Aj0U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOscillatorNodeConstructor=void 0;var e=require("../helpers/set-internal-state-to-active"),t=require("../helpers/set-internal-state-to-passive");const o={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,type:"sine"},s=(s,r,i,n,l,d,a,c)=>(class extends s{constructor(e,t=o){const s=d(e),i={...o,...t},c=n(s,i),h=a(s),u=h?l():null,_=e.sampleRate/2;super(e,!1,c,u),this._detune=r(this,h,c.detune,153600,-153600),this._frequency=r(this,h,c.frequency,_,-_),this._nativeOscillatorNode=c,this._onended=null,this._oscillatorNodeRenderer=u,null!==this._oscillatorNodeRenderer&&void 0!==i.periodicWave&&(this._oscillatorNodeRenderer.periodicWave=i.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(e){const t="function"==typeof e?c(this,e):null;this._nativeOscillatorNode.onended=t;const o=this._nativeOscillatorNode.onended;this._onended=null!==o&&o===t?e:o}get type(){return this._nativeOscillatorNode.type}set type(e){if(this._nativeOscillatorNode.type=e,"custom"===e)throw i();null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(e){this._nativeOscillatorNode.setPeriodicWave(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.periodicWave=e)}start(o=0){if(this._nativeOscillatorNode.start(o),null!==this._oscillatorNodeRenderer)this._oscillatorNodeRenderer.start=o;else{(0,e.setInternalStateToActive)(this);const o=()=>{this._nativeOscillatorNode.removeEventListener("ended",o),setTimeout(()=>(0,t.setInternalStateToPassive)(this),1e3)};this._nativeOscillatorNode.addEventListener("ended",o)}}stop(e=0){this._nativeOscillatorNode.stop(e),null!==this._oscillatorNodeRenderer&&(this._oscillatorNodeRenderer.stop=e)}});exports.createOscillatorNodeConstructor=s;
},{"../helpers/set-internal-state-to-active":"CJGF","../helpers/set-internal-state-to-passive":"cZUl"}],"exBd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createOscillatorNodeRendererFactory=void 0;var e=require("../helpers/is-owned-by-context");const t=(t,n,r,o,a)=>()=>{const u=new WeakMap;let l=null,c=null,s=null;return{set periodicWave(e){l=e},set start(e){c=e},set stop(e){s=e},render(i,d,p){const y=u.get(d);return void 0!==y?Promise.resolve(y):(async(i,d,p)=>{let y=r(i);const v=(0,e.isOwnedByContext)(y,d);if(!v){const e={channelCount:y.channelCount,channelCountMode:y.channelCountMode,channelInterpretation:y.channelInterpretation,detune:y.detune.value,frequency:y.frequency.value,periodicWave:null===l?void 0:l,type:y.type};y=n(d,e),null!==c&&y.start(c),null!==s&&y.stop(s)}return u.set(d,y),v?(await t(d,i.detune,y.detune,p),await t(d,i.frequency,y.frequency,p)):(await o(d,i.detune,y.detune,p),await o(d,i.frequency,y.frequency,p)),await a(i,d,y,p),y})(i,d,p)}}};exports.createOscillatorNodeRendererFactory=t;
},{"../helpers/is-owned-by-context":"ogqP"}],"aszg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPannerNodeConstructor=void 0;var e=require("../constants");const n={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},t=(t,i,o,r,a,s)=>(class extends t{constructor(t,_=n){const c=a(t),O={...n,..._},d=o(c,O),l=s(c);super(t,!1,d,l?r():null),this._nativePannerNode=d,this._orientationX=i(this,l,d.orientationX,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._orientationY=i(this,l,d.orientationY,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._orientationZ=i(this,l,d.orientationZ,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._positionX=i(this,l,d.positionX,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._positionY=i(this,l,d.positionY,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT),this._positionZ=i(this,l,d.positionZ,e.MOST_POSITIVE_SINGLE_FLOAT,e.MOST_NEGATIVE_SINGLE_FLOAT)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(e){this._nativePannerNode.coneInnerAngle=e}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(e){this._nativePannerNode.coneOuterAngle=e}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(e){this._nativePannerNode.coneOuterGain=e}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(e){this._nativePannerNode.distanceModel=e}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(e){this._nativePannerNode.maxDistance=e}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(e){this._nativePannerNode.panningModel=e}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(e){this._nativePannerNode.refDistance=e}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(e){this._nativePannerNode.rolloffFactor=e}});exports.createPannerNodeConstructor=t;
},{"../constants":"Pf5U"}],"nOxE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPannerNodeRendererFactory=void 0;var n=require("../guards/native-audio-node-faker"),t=require("../helpers/is-owned-by-context");const o=(o,e,i,a,r,s,c,l,p,u)=>()=>{const d=new WeakMap;let f=null;return{render(w,h,g){const X=d.get(h);return void 0!==X?Promise.resolve(X):(async(w,h,g)=>{let X=null,Y=s(w);const Z={channelCount:Y.channelCount,channelCountMode:Y.channelCountMode,channelInterpretation:Y.channelInterpretation},v={...Z,coneInnerAngle:Y.coneInnerAngle,coneOuterAngle:Y.coneOuterAngle,coneOuterGain:Y.coneOuterGain,distanceModel:Y.distanceModel,maxDistance:Y.maxDistance,panningModel:Y.panningModel,refDistance:Y.refDistance,rolloffFactor:Y.rolloffFactor},m=(0,t.isOwnedByContext)(Y,h);if("bufferSize"in Y)X=a(h,{...Z,gain:1});else if(!m){const n={...v,orientationX:Y.orientationX.value,orientationY:Y.orientationY.value,orientationZ:Y.orientationZ.value,positionX:Y.positionX.value,positionY:Y.positionY.value,positionZ:Y.positionZ.value};Y=r(h,n)}if(d.set(h,null===X?Y:X),null!==X){if(null===f){if(null===c)throw new Error("Missing the native OfflineAudioContext constructor.");const n=new c(6,w.context.length,h.sampleRate),t=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});t.connect(n.destination),f=(async()=>{const o=await Promise.all([w.orientationX,w.orientationY,w.orientationZ,w.positionX,w.positionY,w.positionZ].map(async(t,o)=>{const e=i(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:0===o?1:0});return await l(n,t,e.offset,g),e}));for(let n=0;n<6;n+=1)o[n].connect(t,0,n),o[n].start(0);return u(n)})()}const n=await f,t=a(h,{...Z,gain:1});await p(w,h,t,g);const o=[];for(let e=0;e<n.numberOfChannels;e+=1)o.push(n.getChannelData(e));let s=[o[0][0],o[1][0],o[2][0]],d=[o[3][0],o[4][0],o[5][0]],Y=a(h,{...Z,gain:1}),m=r(h,{...v,orientationX:s[0],orientationY:s[1],orientationZ:s[2],positionX:d[0],positionY:d[1],positionZ:d[2]});t.connect(Y).connect(m.inputs[0]),m.connect(X);for(let e=128;e<n.length;e+=128){const n=[o[0][e],o[1][e],o[2][e]],i=[o[3][e],o[4][e],o[5][e]];if(n.some((n,t)=>n!==s[t])||i.some((n,t)=>n!==d[t])){s=n,d=i;const o=e/h.sampleRate;Y.gain.setValueAtTime(0,o),Y=a(h,{...Z,gain:0}),m=r(h,{...v,orientationX:s[0],orientationY:s[1],orientationZ:s[2],positionX:d[0],positionY:d[1],positionZ:d[2]}),Y.gain.setValueAtTime(1,o),t.connect(Y).connect(m.inputs[0]),m.connect(X)}}return X}return m?(await o(h,w.orientationX,Y.orientationX,g),await o(h,w.orientationY,Y.orientationY,g),await o(h,w.orientationZ,Y.orientationZ,g),await o(h,w.positionX,Y.positionX,g),await o(h,w.positionY,Y.positionY,g),await o(h,w.positionZ,Y.positionZ,g)):(await l(h,w.orientationX,Y.orientationX,g),await l(h,w.orientationY,Y.orientationY,g),await l(h,w.orientationZ,Y.orientationZ,g),await l(h,w.positionX,Y.positionX,g),await l(h,w.positionY,Y.positionY,g),await l(h,w.positionZ,Y.positionZ,g)),(0,n.isNativeAudioNodeFaker)(Y)?await p(w,h,Y.inputs[0],g):await p(w,h,Y,g),Y})(w,h,g)}}};exports.createPannerNodeRendererFactory=o;
},{"../guards/native-audio-node-faker":"AGg2","../helpers/is-owned-by-context":"ogqP"}],"ZNz9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createPeriodicWaveConstructor=void 0;const t={disableNormalization:!1},e=(e,o,r)=>(class s{constructor(s,c){const a=o(s),n={...t,...c},i=e(a,n);return r.add(i),i}static[Symbol.hasInstance](t){return null!==t&&"object"==typeof t&&Object.getPrototypeOf(t)===s.prototype||r.has(t)}});exports.createPeriodicWaveConstructor=e;
},{}],"VBtQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRenderAutomation=void 0;const e=(e,t)=>(r,o,n,s)=>{return e(o).replay(n),t(o,r,n,s)};exports.createRenderAutomation=e;
},{}],"Oa6I":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRenderInputsOfAudioNode=void 0;const e=(e,t,n)=>async(o,r,s,a)=>{const c=e(o),d=[...a,o];await Promise.all(c.activeInputs.map((e,a)=>Array.from(e).filter(([e])=>!d.includes(e)).map(async([e,c])=>{const i=t(e),u=await i.render(e,r,d),p=o.context.destination;n(e)||o===p&&n(o)||u.connect(s,c,a)})).reduce((e,t)=>[...e,...t],[]))};exports.createRenderInputsOfAudioNode=e;
},{}],"gmlP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRenderInputsOfAudioParam=void 0;const e=(e,t,r)=>async(a,s,n,o)=>{const c=t(a);await Promise.all(Array.from(c.activeInputs).map(async([t,a])=>{const c=e(t),i=await c.render(t,s,o);r(t)||i.connect(n,a)}))};exports.createRenderInputsOfAudioParam=e;
},{}],"mihs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createRenderNativeOfflineAudioContext=void 0;var e=require("../helpers/test-promise-support");const t=(t,n,o,r)=>i=>t(e.testPromiseSupport,()=>(0,e.testPromiseSupport)(i))?Promise.resolve(t(r,r)).then(e=>{if(!e){const e=o(i,512,0,1);i.oncomplete=(()=>{e.onaudioprocess=null,e.disconnect()}),e.onaudioprocess=(()=>i.currentTime),e.connect(i.destination)}return i.startRendering()}):new Promise(e=>{const t=n(i,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});i.oncomplete=(n=>{t.disconnect(),e(n.renderedBuffer)}),t.connect(i.destination),i.startRendering()});exports.createRenderNativeOfflineAudioContext=t;
},{"../helpers/test-promise-support":"PMLM"}],"gM0S":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStartRendering=void 0;var e=require("../helpers/wrap-audio-buffer-get-channel-data-method");const r=(r,t,n,a,o,d,i,p)=>{const s=[];return(u,c)=>n(u).render(u,c,s).then(()=>Promise.all(Array.from(a(c)).map(e=>n(e).render(e,c,s)))).then(()=>o(c)).then(n=>("function"!=typeof n.copyFromChannel?(i(n),(0,e.wrapAudioBufferGetChannelDataMethod)(n)):t(d,()=>d(n))||p(n),r.add(n),n))};exports.createStartRendering=r;
},{"../helpers/wrap-audio-buffer-get-channel-data-method":"kdSl"}],"zZNf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStereoPannerNodeConstructor=void 0;const e={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},t=(t,n,r,o,s,a)=>(class extends t{constructor(t,c=e){const p=s(t),u={...e,...c},i=r(p,u),l=a(p);super(t,!1,i,l?o():null),this._pan=n(this,l,i.pan,1,-1)}get pan(){return this._pan}});exports.createStereoPannerNodeConstructor=t;
},{}],"yxux":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createStereoPannerNodeRendererFactory=void 0;var e=require("../guards/native-audio-node-faker"),n=require("../helpers/is-owned-by-context");const t=(t,r,a,o,i)=>()=>{const s=new WeakMap;return{render(c,d,u){const p=s.get(d);return void 0!==p?Promise.resolve(p):(async(c,d,u)=>{let p=a(c);const l=(0,n.isOwnedByContext)(p,d);if(!l){const e={channelCount:p.channelCount,channelCountMode:p.channelCountMode,channelInterpretation:p.channelInterpretation,pan:p.pan.value};p=r(d,e)}return s.set(d,p),l?await t(d,c.pan,p.pan,u):await o(d,c.pan,p.pan,u),(0,e.isNativeAudioNodeFaker)(p)?await i(c,d,p.inputs[0],u):await i(c,d,p,u),p})(c,d,u)}}};exports.createStereoPannerNodeRendererFactory=t;
},{"../guards/native-audio-node-faker":"AGg2","../helpers/is-owned-by-context":"ogqP"}],"VRTf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioBufferConstructorSupport=void 0;const e=e=>()=>{if(null===e)return!1;try{new e({length:1,sampleRate:44100})}catch{return!1}return!0};exports.createTestAudioBufferConstructorSupport=e;
},{}],"OWIt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioBufferCopyChannelMethodsSubarraySupport=void 0;const e=e=>()=>{if(null===e)return!1;const r=new e(1,1,44100).createBuffer(1,1,44100);if(void 0===r.copyToChannel)return!0;const t=new Float32Array(2);try{r.copyFromChannel(t,0,0)}catch{return!1}return!0};exports.createTestAudioBufferCopyChannelMethodsSubarraySupport=e;
},{}],"TwZP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=void 0;const e=e=>t=>{const r=e(t,e=>e.createBufferSource());r.start();try{r.start()}catch{return!0}return!1};exports.createTestAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=e;
},{}],"q8Ha":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioBufferSourceNodeStartMethodDurationParameterSupport=void 0;const e=e=>()=>{if(null===e)return Promise.resolve(!1);const t=new e(1,1,44100),r=t.createBuffer(1,1,t.sampleRate),o=t.createBufferSource();return r.getChannelData(0)[0]=1,o.buffer=r,o.start(0,0,0),o.connect(t.destination),new Promise(e=>{t.oncomplete=(({renderedBuffer:t})=>{e(0===t.getChannelData(0)[0])}),t.startRendering()})};exports.createTestAudioBufferSourceNodeStartMethodDurationParameterSupport=e;
},{}],"C089":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioBufferSourceNodeStartMethodOffsetClampingSupport=void 0;const e=e=>t=>{const r=e(t,e=>e.createBufferSource()),o=t.createBuffer(1,1,44100);r.buffer=o;try{r.start(0,1)}catch{return!1}return!0};exports.createTestAudioBufferSourceNodeStartMethodOffsetClampingSupport=e;
},{}],"lzqJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioBufferSourceNodeStopMethodNullifiedBufferSupport=void 0;const e=e=>t=>{const r=e(t,e=>e.createBufferSource());r.start();try{r.stop()}catch{return!1}return!0};exports.createTestAudioBufferSourceNodeStopMethodNullifiedBufferSupport=e;
},{}],"gSwb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioContextCloseMethodSupport=void 0;const e=e=>()=>{if(null===e)return!1;if(void 0!==e.prototype&&void 0!==e.prototype.close)return!0;const t=new e,o=void 0!==t.close;try{t.close()}catch{}return o};exports.createTestAudioContextCloseMethodSupport=e;
},{}],"m4t9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioContextDecodeAudioDataMethodTypeErrorSupport=void 0;const e=e=>()=>{if(null===e)return Promise.resolve(!1);const t=new e(1,1,44100);return new Promise(e=>{let o=!0;const r=r=>{o&&(o=!1,t.startRendering(),e(r instanceof TypeError))};let d;try{d=t.decodeAudioData(null,()=>{},r)}catch(n){r(n)}void 0!==d&&d.catch(r)})};exports.createTestAudioContextDecodeAudioDataMethodTypeErrorSupport=e;
},{}],"XWjD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioContextOptionsSupport=void 0;const t=t=>()=>{if(null===t)return!1;let e;try{e=new t({latencyHint:"balanced"})}catch{return!1}return e.close(),!0};exports.createTestAudioContextOptionsSupport=t;
},{}],"PvzL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioNodeConnectMethodSupport=void 0;const e=e=>()=>{if(null===e)return!1;const t=new e(1,1,44100).createGain(),o=t.connect(t)===t;return t.disconnect(t),o};exports.createTestAudioNodeConnectMethodSupport=e;
},{}],"dYKx":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioScheduledSourceNodeStartMethodNegativeParametersSupport=void 0;const e=e=>t=>{const r=e(t,e=>e.createOscillator());try{r.start(-1)}catch(o){return o instanceof RangeError}return!1};exports.createTestAudioScheduledSourceNodeStartMethodNegativeParametersSupport=e;
},{}],"G63M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=void 0;const e=e=>t=>{const o=t.createBuffer(1,1,44100),r=e(t,e=>e.createBufferSource());r.buffer=o,r.start(),r.stop();try{return r.stop(),!0}catch{return!1}};exports.createTestAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=e;
},{}],"CdrG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioScheduledSourceNodeStopMethodNegativeParametersSupport=void 0;const e=e=>t=>{const r=e(t,e=>e.createOscillator());try{r.stop(-1)}catch(o){return o instanceof RangeError}return!1};exports.createTestAudioScheduledSourceNodeStopMethodNegativeParametersSupport=e;
},{}],"rYmm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestAudioWorkletProcessorNoOutputsSupport=void 0;const e=(e,t)=>async()=>{if(null===e)return!0;if(null===t)return!1;const r=new Blob(['class A extends AudioWorkletProcessor{process(){this.port.postMessage(0)}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),o=new t(1,128,3200),s=URL.createObjectURL(r);let a=!1;try{await o.audioWorklet.addModule(s);const t=o.createGain(),r=new e(o,"a",{numberOfOutputs:0});r.port.onmessage=(()=>a=!0),t.connect(r),await o.startRendering()}catch{}finally{URL.revokeObjectURL(s)}return a};exports.createTestAudioWorkletProcessorNoOutputsSupport=e;
},{}],"nKUo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestChannelMergerNodeChannelCountSupport=void 0;const e=(e,r)=>()=>{if(null===r)return!1;const t=new r(1,1,44100),n=e(t,e=>e.createChannelMerger());try{n.channelCount=2}catch{return!0}return!1};exports.createTestChannelMergerNodeChannelCountSupport=e;
},{}],"joZr":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestConstantSourceNodeAccurateSchedulingSupport=void 0;const e=(e,t)=>()=>{if(null===t)return!1;const r=new t(1,1,44100);return void 0===r.createConstantSource||e(r,e=>e.createConstantSource()).offset.maxValue!==Number.POSITIVE_INFINITY};exports.createTestConstantSourceNodeAccurateSchedulingSupport=e;
},{}],"gqEZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestConvolverNodeBufferReassignabilitySupport=void 0;const e=e=>()=>{if(null===e)return!1;const r=new e(1,1,44100),t=r.createConvolver();t.buffer=r.createBuffer(1,1,r.sampleRate);try{t.buffer=r.createBuffer(1,1,r.sampleRate)}catch{return!1}return!0};exports.createTestConvolverNodeBufferReassignabilitySupport=e;
},{}],"Ym5F":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestIsSecureContextSupport=void 0;const e=e=>()=>null!==e&&e.hasOwnProperty("isSecureContext");exports.createTestIsSecureContextSupport=e;
},{}],"PsOL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport=void 0;const e=e=>()=>{if(null===e)return!1;const t=new e;try{return t.createMediaStreamSource(new MediaStream),!1}catch(r){return!0}};exports.createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport=e;
},{}],"fYx1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestOfflineAudioContextCurrentTimeSupport=void 0;const e=(e,t)=>()=>{if(null===t)return Promise.resolve(!1);const n=new t(1,1,44100),r=e(n,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(e=>{n.oncomplete=(()=>{r.disconnect(),e(0!==n.currentTime)}),n.startRendering()})};exports.createTestOfflineAudioContextCurrentTimeSupport=e;
},{}],"Y9bB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createTestStereoPannerNodeDefaultValueSupport=void 0;const e=e=>()=>{if(null===e)return Promise.resolve(!1);const t=new e(1,1,44100);if(void 0===t.createStereoPanner)return Promise.resolve(!0);if(void 0===t.createConstantSource)return Promise.resolve(!0);const r=t.createConstantSource(),n=t.createStereoPanner();return r.channelCount=1,r.offset.value=1,n.channelCount=1,r.start(),r.connect(n).connect(t.destination),t.startRendering().then(e=>1!==e.getChannelData(0)[0])};exports.createTestStereoPannerNodeDefaultValueSupport=e;
},{}],"jksn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createUnknownError=void 0;const r=()=>{try{return new DOMException("","UnknownError")}catch(r){return r.name="UnknownError",r}};exports.createUnknownError=r;
},{}],"lvCH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWaveShaperNodeConstructor=void 0;const e={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},r=(r,t,a,s,i,o)=>(class extends r{constructor(r,t=e){const n=i(r),v={...e,...t},l=a(n,v);super(r,!0,l,o(n)?s():null),this._isCurveNullified=!1,this._nativeWaveShaperNode=l}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(e){if(null===e)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(e.length<2)throw t();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=e}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(e){this._nativeWaveShaperNode.oversample=e}});exports.createWaveShaperNodeConstructor=r;
},{}],"RK7x":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWaveShaperNodeRendererFactory=void 0;var e=require("../guards/native-audio-node-faker"),r=require("../helpers/is-owned-by-context");const n=(n,t,o)=>()=>{const a=new WeakMap;return{render(s,c,i){const d=a.get(c);return void 0!==d?Promise.resolve(d):(async(s,c,i)=>{let d=t(s);if(!(0,r.isOwnedByContext)(d,c)){const e={channelCount:d.channelCount,channelCountMode:d.channelCountMode,channelInterpretation:d.channelInterpretation,curve:d.curve,oversample:d.oversample};d=n(c,e)}return a.set(c,d),(0,e.isNativeAudioNodeFaker)(d)?await o(s,c,d.inputs[0],i):await o(s,c,d,i),d})(s,c,i)}}};exports.createWaveShaperNodeRendererFactory=n;
},{"../guards/native-audio-node-faker":"AGg2","../helpers/is-owned-by-context":"ogqP"}],"muD2":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWindow=void 0;const e=()=>"undefined"==typeof window?null:window;exports.createWindow=e;
},{}],"cOfP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWrapAudioBufferCopyChannelMethods=void 0;const e=(e,n)=>t=>{t.copyFromChannel=((o,r,a=0)=>{const h=e(a),l=e(r);if(l>=t.numberOfChannels)throw n();const s=t.length,c=t.getChannelData(l),f=o.length;for(let e=h<0?-h:0;e+h<s&&e<f;e+=1)o[e]=c[e+h]}),t.copyToChannel=((o,r,a=0)=>{const h=e(a),l=e(r);if(l>=t.numberOfChannels)throw n();const s=t.length,c=t.getChannelData(l),f=o.length;for(let e=h<0?-h:0;e+h<s&&e<f;e+=1)c[e+h]=o[e]})};exports.createWrapAudioBufferCopyChannelMethods=e;
},{}],"AKxm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWrapAudioBufferCopyChannelMethodsOutOfBounds=void 0;const e=e=>o=>{o.copyFromChannel=(n=>(t,r,l=0)=>{const a=e(l),c=e(r);if(a<o.length)return n.call(o,t,c,a)})(o.copyFromChannel),o.copyToChannel=(n=>(t,r,l=0)=>{const a=e(l),c=e(r);if(a<o.length)return n.call(o,t,c,a)})(o.copyToChannel)};exports.createWrapAudioBufferCopyChannelMethodsOutOfBounds=e;
},{}],"kTzv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=void 0;const e=e=>(r,u)=>{const f=u.createBuffer(1,1,u.sampleRate);null===r.buffer&&(r.buffer=f),e(r,"buffer",e=>()=>{const u=e.call(r);return u===f?null:u},e=>u=>e.call(r,null===u?f:u))};exports.createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=e;
},{}],"oN1i":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=void 0;var e=require("../helpers/intercept-connections");const t=t=>(o,c)=>{const n=t(c,e=>e.createGain());o.connect(n);const r=(e=>()=>{e.call(o,n),o.removeEventListener("ended",r)})(o.disconnect);o.addEventListener("ended",r),(0,e.interceptConnections)(o,n),o.stop=(e=>{let t=!1;return(c=0)=>{if(t)try{e.call(o,c)}catch{n.gain.setValueAtTime(0,c)}else e.call(o,c),t=!0}})(o.stop)};exports.createWrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=t;
},{"../helpers/intercept-connections":"Nd6E"}],"o1A7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createWrapChannelMergerNode=void 0;const e=(e,t,n)=>(o,r)=>{r.channelCount=1,r.channelCountMode="explicit",Object.defineProperty(r,"channelCount",{get:()=>1,set:()=>{throw e()}}),Object.defineProperty(r,"channelCountMode",{get:()=>"explicit",set:()=>{throw e()}});const c=t(o,e=>e.createBufferSource());n(r,()=>{const e=r.numberOfInputs;for(let t=0;t<e;t+=1)c.connect(r,0,t)},()=>c.disconnect(r))};exports.createWrapChannelMergerNode=e;
},{}],"pK7V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isDCCurve=void 0;const e=e=>{if(null===e)return!1;const r=e.length;return r%2!=0?0!==e[Math.floor(r/2)]:e[r/2-1]+e[r/2]!==0};exports.isDCCurve=e;
},{}],"GMWE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.overwriteAccessors=void 0;const e=(e,t,r,o)=>{let s=Object.getPrototypeOf(e);for(;!s.hasOwnProperty(t);)s=Object.getPrototypeOf(s);const{get:c,set:p}=Object.getOwnPropertyDescriptor(s,t);Object.defineProperty(e,t,{get:r(c),set:o(p)})};exports.overwriteAccessors=e;
},{}],"BQIB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.testTransferablesSupport=void 0;const e=()=>new Promise(e=>{const s=new ArrayBuffer(0),{port1:t,port2:r}=new MessageChannel;t.onmessage=(({data:s})=>e(null!==s)),r.postMessage(s,[s])});exports.testTransferablesSupport=e;
},{}],"RvmV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapAudioBufferSourceNodeStartMethodOffsetClamping=void 0;const t=t=>{t.start=(e=>(o=0,r=0,a)=>{const u=t.buffer,l=null===u?r:Math.min(u.duration,r);null!==u&&l>u.duration-.5/t.context.sampleRate?e.call(t,o,0,0):e.call(t,o,l,a)})(t.start)};exports.wrapAudioBufferSourceNodeStartMethodOffsetClamping=t;
},{}],"Owgm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.wrapEventListener=void 0;const e=(e,t)=>r=>{const n={value:e};return Object.defineProperties(r,{currentTarget:n,target:n}),"function"==typeof t?t.call(e,r):t.handleEvent.call(e,r)};exports.wrapEventListener=e;
},{}],"AQGI":[function(require,module,exports) {

},{}],"g6s3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./analyser-node");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./analyser-options");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./audio-buffer");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var n=require("./audio-buffer-options");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var o=require("./audio-buffer-source-node");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var u=require("./audio-buffer-source-node-renderer");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var c=require("./audio-buffer-source-options");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}})});var i=require("./audio-context");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})});var a=require("./audio-context-options");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}})});var f=require("./audio-destination-node");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}})});var d=require("./audio-listener");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}})});var s=require("./audio-node");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}})});var l=require("./audio-node-options");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}})});var b=require("./audio-node-renderer");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}})});var p=require("./audio-param");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}})});var y=require("./audio-param-descriptor");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return y[e]}})});var _=require("./audio-param-renderer");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _[e]}})});var j=require("./audio-scheduled-source-node");Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return j[e]}})});var O=require("./audio-scheduled-source-node-event-map");Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return O[e]}})});var m=require("./audio-worklet");Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return m[e]}})});var v=require("./audio-worklet-node");Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return v[e]}})});var k=require("./audio-worklet-node-event-map");Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return k[e]}})});var x=require("./audio-worklet-node-options");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return x[e]}})});var h=require("./audio-worklet-processor");Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return h[e]}})});var g=require("./audio-worklet-processor-constructor");Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return g[e]}})});var q=require("./automation");Object.keys(q).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return q[e]}})});var M=require("./base-audio-context");Object.keys(M).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return M[e]}})});var P=require("./biquad-filter-node");Object.keys(P).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return P[e]}})});var E=require("./biquad-filter-options");Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return E[e]}})});var w=require("./channel-merger-options");Object.keys(w).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return w[e]}})});var z=require("./channel-splitter-options");Object.keys(z).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return z[e]}})});var A=require("./common-audio-context");Object.keys(A).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return A[e]}})});var B=require("./common-offline-audio-context");Object.keys(B).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return B[e]}})});var C=require("./constant-source-node");Object.keys(C).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return C[e]}})});var D=require("./constant-source-node-renderer");Object.keys(D).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return D[e]}})});var F=require("./constant-source-options");Object.keys(F).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return F[e]}})});var G=require("./convolver-node");Object.keys(G).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return G[e]}})});var H=require("./convolver-options");Object.keys(H).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return H[e]}})});var I=require("./delay-node");Object.keys(I).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return I[e]}})});var J=require("./delay-options");Object.keys(J).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return J[e]}})});var K=require("./dynamics-compressor-node");Object.keys(K).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return K[e]}})});var L=require("./dynamics-compressor-options");Object.keys(L).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return L[e]}})});var N=require("./gain-node");Object.keys(N).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return N[e]}})});var Q=require("./gain-options");Object.keys(Q).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Q[e]}})});var R=require("./iir-filter-node");Object.keys(R).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return R[e]}})});var S=require("./iir-filter-options");Object.keys(S).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return S[e]}})});var T=require("./media-element-audio-source-node");Object.keys(T).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return T[e]}})});var U=require("./media-element-audio-source-options");Object.keys(U).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return U[e]}})});var V=require("./media-stream-audio-destination-node");Object.keys(V).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return V[e]}})});var W=require("./media-stream-audio-source-node");Object.keys(W).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return W[e]}})});var X=require("./media-stream-audio-source-options");Object.keys(X).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return X[e]}})});var Y=require("./media-stream-track-audio-source-node");Object.keys(Y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Y[e]}})});var Z=require("./media-stream-track-audio-source-options");Object.keys(Z).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Z[e]}})});var $=require("./minimal-audio-context");Object.keys($).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $[e]}})});var ee=require("./minimal-base-audio-context");Object.keys(ee).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ee[e]}})});var re=require("./minimal-base-audio-context-event-map");Object.keys(re).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return re[e]}})});var te=require("./minimal-offline-audio-context");Object.keys(te).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return te[e]}})});var ne=require("./native-audio-node-faker");Object.keys(ne).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ne[e]}})});var oe=require("./native-audio-worklet-node-faker");Object.keys(oe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return oe[e]}})});var ue=require("./native-constant-source-node-faker");Object.keys(ue).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ue[e]}})});var ce=require("./native-convolver-node-faker");Object.keys(ce).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ce[e]}})});var ie=require("./native-iir-filter-node-faker");Object.keys(ie).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ie[e]}})});var ae=require("./native-panner-node-faker");Object.keys(ae).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ae[e]}})});var fe=require("./native-stereo-panner-node-faker");Object.keys(fe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fe[e]}})});var de=require("./native-wave-shaper-node-faker");Object.keys(de).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return de[e]}})});var se=require("./offline-audio-completion-event");Object.keys(se).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return se[e]}})});var le=require("./offline-audio-context");Object.keys(le).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return le[e]}})});var be=require("./offline-audio-context-constructor");Object.keys(be).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return be[e]}})});var pe=require("./offline-audio-context-options");Object.keys(pe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pe[e]}})});var ye=require("./oscillator-node");Object.keys(ye).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ye[e]}})});var _e=require("./oscillator-node-renderer");Object.keys(_e).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _e[e]}})});var je=require("./oscillator-options");Object.keys(je).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return je[e]}})});var Oe=require("./panner-node");Object.keys(Oe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Oe[e]}})});var me=require("./panner-options");Object.keys(me).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return me[e]}})});var ve=require("./periodic-wave");Object.keys(ve).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ve[e]}})});var ke=require("./periodic-wave-constraints");Object.keys(ke).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ke[e]}})});var xe=require("./periodic-wave-options");Object.keys(xe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xe[e]}})});var he=require("./read-only-map");Object.keys(he).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return he[e]}})});var ge=require("./stereo-panner-node");Object.keys(ge).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ge[e]}})});var qe=require("./stereo-panner-options");Object.keys(qe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qe[e]}})});var Me=require("./wave-shaper-node");Object.keys(Me).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Me[e]}})});var Pe=require("./wave-shaper-options");Object.keys(Pe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Pe[e]}})});var Ee=require("./worklet-options");Object.keys(Ee).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ee[e]}})});
},{"./analyser-node":"AQGI","./analyser-options":"AQGI","./audio-buffer":"AQGI","./audio-buffer-options":"AQGI","./audio-buffer-source-node":"AQGI","./audio-buffer-source-node-renderer":"AQGI","./audio-buffer-source-options":"AQGI","./audio-context":"AQGI","./audio-context-options":"AQGI","./audio-destination-node":"AQGI","./audio-listener":"AQGI","./audio-node":"AQGI","./audio-node-options":"AQGI","./audio-node-renderer":"AQGI","./audio-param":"AQGI","./audio-param-descriptor":"AQGI","./audio-param-renderer":"AQGI","./audio-scheduled-source-node":"AQGI","./audio-scheduled-source-node-event-map":"AQGI","./audio-worklet":"AQGI","./audio-worklet-node":"AQGI","./audio-worklet-node-event-map":"AQGI","./audio-worklet-node-options":"AQGI","./audio-worklet-processor":"AQGI","./audio-worklet-processor-constructor":"AQGI","./automation":"AQGI","./base-audio-context":"AQGI","./biquad-filter-node":"AQGI","./biquad-filter-options":"AQGI","./channel-merger-options":"AQGI","./channel-splitter-options":"AQGI","./common-audio-context":"AQGI","./common-offline-audio-context":"AQGI","./constant-source-node":"AQGI","./constant-source-node-renderer":"AQGI","./constant-source-options":"AQGI","./convolver-node":"AQGI","./convolver-options":"AQGI","./delay-node":"AQGI","./delay-options":"AQGI","./dynamics-compressor-node":"AQGI","./dynamics-compressor-options":"AQGI","./gain-node":"AQGI","./gain-options":"AQGI","./iir-filter-node":"AQGI","./iir-filter-options":"AQGI","./media-element-audio-source-node":"AQGI","./media-element-audio-source-options":"AQGI","./media-stream-audio-destination-node":"AQGI","./media-stream-audio-source-node":"AQGI","./media-stream-audio-source-options":"AQGI","./media-stream-track-audio-source-node":"AQGI","./media-stream-track-audio-source-options":"AQGI","./minimal-audio-context":"AQGI","./minimal-base-audio-context":"AQGI","./minimal-base-audio-context-event-map":"AQGI","./minimal-offline-audio-context":"AQGI","./native-audio-node-faker":"AQGI","./native-audio-worklet-node-faker":"AQGI","./native-constant-source-node-faker":"AQGI","./native-convolver-node-faker":"AQGI","./native-iir-filter-node-faker":"AQGI","./native-panner-node-faker":"AQGI","./native-stereo-panner-node-faker":"AQGI","./native-wave-shaper-node-faker":"AQGI","./offline-audio-completion-event":"AQGI","./offline-audio-context":"AQGI","./offline-audio-context-constructor":"AQGI","./offline-audio-context-options":"AQGI","./oscillator-node":"AQGI","./oscillator-node-renderer":"AQGI","./oscillator-options":"AQGI","./panner-node":"AQGI","./panner-options":"AQGI","./periodic-wave":"AQGI","./periodic-wave-constraints":"AQGI","./periodic-wave-options":"AQGI","./read-only-map":"AQGI","./stereo-panner-node":"AQGI","./stereo-panner-options":"AQGI","./wave-shaper-node":"AQGI","./wave-shaper-options":"AQGI","./worklet-options":"AQGI"}],"tTgw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./abort-error-factory");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./active-input-connection");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./add-audio-node-connections-factory");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var n=require("./add-audio-node-connections-function");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var o=require("./add-audio-param-connections-factory");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var u=require("./add-audio-param-connections-function");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var c=require("./add-audio-worklet-module-factory");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}})});var a=require("./add-audio-worklet-module-function");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}})});var f=require("./add-silent-connection-factory");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}})});var i=require("./add-silent-connection-function");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})});var d=require("./add-unrendered-audio-worklet-node-factory");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}})});var s=require("./add-unrendered-audio-worklet-node-function");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}})});var l=require("./analyser-node-constructor");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}})});var b=require("./analyser-node-constructor-factory");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}})});var y=require("./analyser-node-renderer-factory");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return y[e]}})});var p=require("./analyser-node-renderer-factory-factory");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}})});var _=require("./any-audio-buffer");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _[e]}})});var j=require("./any-context");Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return j[e]}})});var O=require("./audio-buffer-constructor");Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return O[e]}})});var v=require("./audio-buffer-constructor-factory");Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return v[e]}})});var m=require("./audio-buffer-source-node-constructor");Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return m[e]}})});var h=require("./audio-buffer-source-node-constructor-factory");Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return h[e]}})});var x=require("./audio-buffer-source-node-renderer");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return x[e]}})});var g=require("./audio-buffer-source-node-renderer-factory");Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return g[e]}})});var k=require("./audio-buffer-source-node-renderer-factory-factory");Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return k[e]}})});var q=require("./audio-buffer-store");Object.keys(q).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return q[e]}})});var M=require("./audio-context-constructor");Object.keys(M).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return M[e]}})});var P=require("./audio-context-constructor-factory");Object.keys(P).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return P[e]}})});var E=require("./audio-context-latency-category");Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return E[e]}})});var w=require("./audio-context-state");Object.keys(w).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return w[e]}})});var z=require("./audio-destination-node-constructor");Object.keys(z).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return z[e]}})});var A=require("./audio-destination-node-constructor-factory");Object.keys(A).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return A[e]}})});var B=require("./audio-destination-node-renderer-factory");Object.keys(B).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return B[e]}})});var C=require("./audio-listener-factory");Object.keys(C).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return C[e]}})});var D=require("./audio-listener-factory-factory");Object.keys(D).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return D[e]}})});var F=require("./audio-node-connections");Object.keys(F).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return F[e]}})});var G=require("./audio-node-connections-store");Object.keys(G).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return G[e]}})});var H=require("./audio-node-constructor");Object.keys(H).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return H[e]}})});var I=require("./audio-node-constructor-factory");Object.keys(I).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return I[e]}})});var J=require("./audio-node-output-connection");Object.keys(J).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return J[e]}})});var K=require("./audio-node-renderer");Object.keys(K).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return K[e]}})});var L=require("./audio-node-store");Object.keys(L).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return L[e]}})});var N=require("./audio-param-audio-node-store");Object.keys(N).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return N[e]}})});var Q=require("./audio-param-connections");Object.keys(Q).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Q[e]}})});var R=require("./audio-param-connections-store");Object.keys(R).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return R[e]}})});var S=require("./audio-param-factory");Object.keys(S).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return S[e]}})});var T=require("./audio-param-factory-factory");Object.keys(T).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return T[e]}})});var U=require("./audio-param-map");Object.keys(U).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return U[e]}})});var V=require("./audio-param-output-connection");Object.keys(V).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return V[e]}})});var W=require("./audio-param-renderer-factory");Object.keys(W).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return W[e]}})});var X=require("./audio-param-store");Object.keys(X).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return X[e]}})});var Y=require("./audio-worklet-node-constructor");Object.keys(Y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Y[e]}})});var Z=require("./audio-worklet-node-constructor-factory");Object.keys(Z).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Z[e]}})});var $=require("./audio-worklet-node-renderer-factory");Object.keys($).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $[e]}})});var ee=require("./audio-worklet-node-renderer-factory-factory");Object.keys(ee).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ee[e]}})});var re=require("./auxiliary-gain-node-store");Object.keys(re).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return re[e]}})});var te=require("./base-audio-context-constructor");Object.keys(te).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return te[e]}})});var ne=require("./base-audio-context-constructor-factory");Object.keys(ne).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ne[e]}})});var oe=require("./biquad-filter-node-constructor");Object.keys(oe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return oe[e]}})});var ue=require("./biquad-filter-node-constructor-factory");Object.keys(ue).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ue[e]}})});var ce=require("./biquad-filter-node-renderer-factory");Object.keys(ce).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ce[e]}})});var ae=require("./biquad-filter-node-renderer-factory-factory");Object.keys(ae).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ae[e]}})});var fe=require("./biquad-filter-type");Object.keys(fe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fe[e]}})});var ie=require("./channel-count-mode");Object.keys(ie).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ie[e]}})});var de=require("./channel-interpretation");Object.keys(de).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return de[e]}})});var se=require("./channel-merger-node-constructor");Object.keys(se).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return se[e]}})});var le=require("./channel-merger-node-constructor-factory");Object.keys(le).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return le[e]}})});var be=require("./channel-merger-node-renderer-factory");Object.keys(be).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return be[e]}})});var ye=require("./channel-merger-node-renderer-factory-factory");Object.keys(ye).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ye[e]}})});var pe=require("./channel-splitter-node-constructor");Object.keys(pe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pe[e]}})});var _e=require("./channel-splitter-node-constructor-factory");Object.keys(_e).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _e[e]}})});var je=require("./channel-splitter-node-renderer-factory");Object.keys(je).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return je[e]}})});var Oe=require("./channel-splitter-node-renderer-factory-factory");Object.keys(Oe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Oe[e]}})});var ve=require("./cache-test-result-factory");Object.keys(ve).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ve[e]}})});var me=require("./cache-test-result-function");Object.keys(me).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return me[e]}})});var he=require("./connect-audio-param-factory");Object.keys(he).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return he[e]}})});var xe=require("./connect-audio-param-function");Object.keys(xe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xe[e]}})});var ge=require("./connect-multiple-outputs-factory");Object.keys(ge).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ge[e]}})});var ke=require("./connect-multiple-outputs-function");Object.keys(ke).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ke[e]}})});var qe=require("./connect-native-audio-node-to-native-audio-node-function");Object.keys(qe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qe[e]}})});var Me=require("./connected-native-audio-buffer-source-node-factory");Object.keys(Me).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Me[e]}})});var Pe=require("./connected-native-audio-buffer-source-node-factory-factory");Object.keys(Pe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Pe[e]}})});var Ee=require("./constant-source-node-constructor");Object.keys(Ee).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ee[e]}})});var we=require("./constant-source-node-constructor-factory");Object.keys(we).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return we[e]}})});var ze=require("./constant-source-node-renderer");Object.keys(ze).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ze[e]}})});var Ae=require("./constant-source-node-renderer-factory");Object.keys(Ae).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ae[e]}})});var Be=require("./constant-source-node-renderer-factory-factory");Object.keys(Be).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Be[e]}})});var Ce=require("./constructor");Object.keys(Ce).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ce[e]}})});var De=require("./context");Object.keys(De).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return De[e]}})});var Fe=require("./context-store");Object.keys(Fe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Fe[e]}})});var Ge=require("./convert-number-to-unsigned-long-factory");Object.keys(Ge).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ge[e]}})});var He=require("./convert-number-to-unsigned-long-function");Object.keys(He).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return He[e]}})});var Ie=require("./convolver-node-constructor");Object.keys(Ie).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ie[e]}})});var Je=require("./convolver-node-constructor-factory");Object.keys(Je).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Je[e]}})});var Ke=require("./convolver-node-renderer-factory");Object.keys(Ke).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ke[e]}})});var Le=require("./convolver-node-renderer-factory-factory");Object.keys(Le).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Le[e]}})});var Ne=require("./create-native-offline-audio-context-factory");Object.keys(Ne).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ne[e]}})});var Qe=require("./create-native-offline-audio-context-function");Object.keys(Qe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Qe[e]}})});var Re=require("./cycle-counters");Object.keys(Re).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Re[e]}})});var Se=require("./data-clone-error-factory");Object.keys(Se).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Se[e]}})});var Te=require("./decode-audio-data-factory");Object.keys(Te).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Te[e]}})});var Ue=require("./decode-audio-data-function");Object.keys(Ue).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ue[e]}})});var Ve=require("./decode-error-callback");Object.keys(Ve).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ve[e]}})});var We=require("./decode-success-callback");Object.keys(We).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return We[e]}})});var Xe=require("./decrement-cycle-counter-factory");Object.keys(Xe).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Xe[e]}})});var Ye=require("./decrement-cycle-counter-function");Object.keys(Ye).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ye[e]}})});var Ze=require("./delay-node-constructor");Object.keys(Ze).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ze[e]}})});var $e=require("./delay-node-constructor-factory");Object.keys($e).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $e[e]}})});var er=require("./delay-node-renderer-factory");Object.keys(er).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return er[e]}})});var rr=require("./delay-node-renderer-factory-factory");Object.keys(rr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return rr[e]}})});var tr=require("./delete-unrendered-audio-worklet-node-factory");Object.keys(tr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return tr[e]}})});var nr=require("./delete-unrendered-audio-worklet-node-function");Object.keys(nr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return nr[e]}})});var or=require("./detect-cycles-factory");Object.keys(or).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return or[e]}})});var ur=require("./detect-cycles-function");Object.keys(ur).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ur[e]}})});var cr=require("./disconnect-multiple-outputs-factory");Object.keys(cr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return cr[e]}})});var ar=require("./disconnect-multiple-outputs-function");Object.keys(ar).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ar[e]}})});var fr=require("./disconnect-native-audio-node-from-native-audio-node-function");Object.keys(fr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fr[e]}})});var ir=require("./distance-model-type");Object.keys(ir).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ir[e]}})});var dr=require("./dynamics-compressor-node-constructor");Object.keys(dr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return dr[e]}})});var sr=require("./dynamics-compressor-node-constructor-factory");Object.keys(sr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return sr[e]}})});var lr=require("./dynamics-compressor-node-renderer-factory");Object.keys(lr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return lr[e]}})});var br=require("./dynamics-compressor-node-renderer-factory-factory");Object.keys(br).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return br[e]}})});var yr=require("./encoding-error-factory");Object.keys(yr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return yr[e]}})});var pr=require("./error-event-handler");Object.keys(pr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pr[e]}})});var _r=require("./evaluate-audio-worklet-global-scope-function");Object.keys(_r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _r[e]}})});var jr=require("./evaluate-source-factory");Object.keys(jr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return jr[e]}})});var Or=require("./evaluate-source-function");Object.keys(Or).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Or[e]}})});var vr=require("./event-handler");Object.keys(vr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return vr[e]}})});var mr=require("./event-target-constructor");Object.keys(mr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return mr[e]}})});var hr=require("./event-target-constructor-factory");Object.keys(hr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return hr[e]}})});var xr=require("./expose-current-frame-and-current-time-factory");Object.keys(xr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xr[e]}})});var gr=require("./expose-current-frame-and-current-time-function");Object.keys(gr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return gr[e]}})});var kr=require("./fetch-source-factory");Object.keys(kr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return kr[e]}})});var qr=require("./fetch-source-function");Object.keys(qr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qr[e]}})});var Mr=require("./gain-node-constructor");Object.keys(Mr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Mr[e]}})});var Pr=require("./gain-node-constructor-factory");Object.keys(Pr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Pr[e]}})});var Er=require("./gain-node-renderer-factory");Object.keys(Er).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Er[e]}})});var wr=require("./gain-node-renderer-factory-factory");Object.keys(wr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return wr[e]}})});var zr=require("./get-audio-node-connections-function");Object.keys(zr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return zr[e]}})});var Ar=require("./get-audio-node-renderer-factory");Object.keys(Ar).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ar[e]}})});var Br=require("./get-audio-node-renderer-function");Object.keys(Br).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Br[e]}})});var Cr=require("./get-audio-param-connections-function");Object.keys(Cr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Cr[e]}})});var Dr=require("./get-audio-param-renderer-factory");Object.keys(Dr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Dr[e]}})});var Fr=require("./get-audio-param-renderer-function");Object.keys(Fr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Fr[e]}})});var Gr=require("./get-backup-native-context-factory");Object.keys(Gr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Gr[e]}})});var Hr=require("./get-backup-native-context-function");Object.keys(Hr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Hr[e]}})});var Ir=require("./get-native-audio-node-function");Object.keys(Ir).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ir[e]}})});var Jr=require("./get-native-audio-param-function");Object.keys(Jr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Jr[e]}})});var Kr=require("./get-native-context-function");Object.keys(Kr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Kr[e]}})});var Lr=require("./get-native-context-factory");Object.keys(Lr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Lr[e]}})});var Nr=require("./get-unrendered-audio-worklet-nodes-factory");Object.keys(Nr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Nr[e]}})});var Qr=require("./get-unrendered-audio-worklet-nodes-function");Object.keys(Qr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Qr[e]}})});var Rr=require("./get-value-for-key-function");Object.keys(Rr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Rr[e]}})});var Sr=require("./iir-filter-node-constructor");Object.keys(Sr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Sr[e]}})});var Tr=require("./iir-filter-node-constructor-factory");Object.keys(Tr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Tr[e]}})});var Ur=require("./iir-filter-node-renderer-factory");Object.keys(Ur).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ur[e]}})});var Vr=require("./iir-filter-node-renderer-factory-factory");Object.keys(Vr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Vr[e]}})});var Wr=require("./increment-cycle-counter-factory");Object.keys(Wr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Wr[e]}})});var Xr=require("./increment-cycle-counter-factory-factory");Object.keys(Xr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Xr[e]}})});var Yr=require("./increment-cycle-counter-function");Object.keys(Yr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Yr[e]}})});var Zr=require("./index-size-error-factory");Object.keys(Zr).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Zr[e]}})});var $r=require("./insert-element-in-set-function");Object.keys($r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $r[e]}})});var et=require("./internal-state-event-listener");Object.keys(et).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return et[e]}})});var rt=require("./invalid-access-error-factory");Object.keys(rt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return rt[e]}})});var tt=require("./invalid-state-error-factory");Object.keys(tt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return tt[e]}})});var nt=require("./is-active-audio-node-function");Object.keys(nt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return nt[e]}})});var ot=require("./is-any-audio-context-factory");Object.keys(ot).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ot[e]}})});var ut=require("./is-any-audio-context-function");Object.keys(ut).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ut[e]}})});var ct=require("./is-any-audio-node-factory");Object.keys(ct).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ct[e]}})});var at=require("./is-any-audio-node-function");Object.keys(at).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return at[e]}})});var ft=require("./is-any-audio-param-factory");Object.keys(ft).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ft[e]}})});var it=require("./is-any-audio-param-function");Object.keys(it).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return it[e]}})});var dt=require("./is-any-offline-audio-context-factory");Object.keys(dt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return dt[e]}})});var st=require("./is-any-offline-audio-context-function");Object.keys(st).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return st[e]}})});var lt=require("./is-dc-curve-function");Object.keys(lt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return lt[e]}})});var bt=require("./is-native-audio-context-factory");Object.keys(bt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return bt[e]}})});var yt=require("./is-native-audio-context-function");Object.keys(yt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return yt[e]}})});var pt=require("./is-native-audio-node-factory");Object.keys(pt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pt[e]}})});var _t=require("./is-native-audio-node-function");Object.keys(_t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _t[e]}})});var jt=require("./is-native-audio-param-factory");Object.keys(jt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return jt[e]}})});var Ot=require("./is-native-audio-param-function");Object.keys(Ot).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ot[e]}})});var vt=require("./is-native-context-factory");Object.keys(vt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return vt[e]}})});var mt=require("./is-native-context-function");Object.keys(mt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return mt[e]}})});var ht=require("./is-native-offline-audio-context-factory");Object.keys(ht).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ht[e]}})});var xt=require("./is-native-offline-audio-context-function");Object.keys(xt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xt[e]}})});var gt=require("./is-part-of-a-cycle-function");Object.keys(gt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return gt[e]}})});var kt=require("./is-secure-context-factory");Object.keys(kt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return kt[e]}})});var qt=require("./is-supported-promise-factory");Object.keys(qt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qt[e]}})});var Mt=require("./media-element-audio-source-node-constructor");Object.keys(Mt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Mt[e]}})});var Pt=require("./media-element-audio-source-node-constructor-factory");Object.keys(Pt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Pt[e]}})});var Et=require("./media-stream-audio-destination-node-constructor");Object.keys(Et).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Et[e]}})});var wt=require("./media-stream-audio-destination-node-constructor-factory");Object.keys(wt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return wt[e]}})});var zt=require("./media-stream-audio-source-node-constructor");Object.keys(zt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return zt[e]}})});var At=require("./media-stream-audio-source-node-constructor-factory");Object.keys(At).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return At[e]}})});var Bt=require("./media-stream-track-audio-source-node-constructor");Object.keys(Bt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Bt[e]}})});var Ct=require("./media-stream-track-audio-source-node-constructor-factory");Object.keys(Ct).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ct[e]}})});var Dt=require("./minimal-audio-context-constructor");Object.keys(Dt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Dt[e]}})});var Ft=require("./minimal-audio-context-constructor-factory");Object.keys(Ft).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ft[e]}})});var Gt=require("./minimal-base-audio-context-constructor");Object.keys(Gt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Gt[e]}})});var Ht=require("./minimal-base-audio-context-constructor-factory");Object.keys(Ht).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ht[e]}})});var It=require("./minimal-offline-audio-context-constructor");Object.keys(It).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return It[e]}})});var Jt=require("./minimal-offline-audio-context-constructor-factory");Object.keys(Jt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Jt[e]}})});var Kt=require("./monitor-connections-factory");Object.keys(Kt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Kt[e]}})});var Lt=require("./monitor-connections-function");Object.keys(Lt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Lt[e]}})});var Nt=require("./native-analyser-node");Object.keys(Nt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Nt[e]}})});var Qt=require("./native-analyser-node-factory");Object.keys(Qt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Qt[e]}})});var Rt=require("./native-analyser-node-factory-factory");Object.keys(Rt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Rt[e]}})});var St=require("./native-audio-buffer");Object.keys(St).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return St[e]}})});var Tt=require("./native-audio-buffer-constructor");Object.keys(Tt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Tt[e]}})});var Ut=require("./native-audio-buffer-constructor-factory");Object.keys(Ut).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ut[e]}})});var Vt=require("./native-audio-buffer-source-node");Object.keys(Vt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Vt[e]}})});var Wt=require("./native-audio-buffer-source-node-factory");Object.keys(Wt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Wt[e]}})});var Xt=require("./native-audio-buffer-source-node-factory-factory");Object.keys(Xt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Xt[e]}})});var Yt=require("./native-audio-context");Object.keys(Yt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Yt[e]}})});var Zt=require("./native-audio-context-constructor");Object.keys(Zt).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Zt[e]}})});var $t=require("./native-audio-context-constructor-factory");Object.keys($t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $t[e]}})});var en=require("./native-audio-destination-node");Object.keys(en).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return en[e]}})});var rn=require("./native-audio-destination-node-factory");Object.keys(rn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return rn[e]}})});var tn=require("./native-audio-destination-node-factory-factory");Object.keys(tn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return tn[e]}})});var nn=require("./native-audio-listener");Object.keys(nn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return nn[e]}})});var on=require("./native-audio-node");Object.keys(on).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return on[e]}})});var un=require("./native-audio-node-factory");Object.keys(un).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return un[e]}})});var cn=require("./native-audio-node-factory-factory");Object.keys(cn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return cn[e]}})});var an=require("./native-audio-param");Object.keys(an).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return an[e]}})});var fn=require("./native-audio-param-map");Object.keys(fn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fn[e]}})});var dn=require("./native-audio-worklet");Object.keys(dn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return dn[e]}})});var sn=require("./native-audio-worklet-node");Object.keys(sn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return sn[e]}})});var ln=require("./native-audio-worklet-node-constructor");Object.keys(ln).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ln[e]}})});var bn=require("./native-audio-worklet-node-constructor-factory");Object.keys(bn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return bn[e]}})});var yn=require("./native-audio-worklet-node-factory");Object.keys(yn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return yn[e]}})});var pn=require("./native-audio-worklet-node-factory-factory");Object.keys(pn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pn[e]}})});var _n=require("./native-audio-worklet-node-faker-factory");Object.keys(_n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _n[e]}})});var jn=require("./native-audio-worklet-node-faker-factory-factory");Object.keys(jn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return jn[e]}})});var On=require("./native-audio-worklet-node-options");Object.keys(On).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return On[e]}})});var vn=require("./native-biquad-filter-node");Object.keys(vn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return vn[e]}})});var mn=require("./native-biquad-filter-node-factory");Object.keys(mn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return mn[e]}})});var hn=require("./native-biquad-filter-node-factory-factory");Object.keys(hn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return hn[e]}})});var xn=require("./native-channel-merger-node");Object.keys(xn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xn[e]}})});var gn=require("./native-channel-merger-node-factory");Object.keys(gn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return gn[e]}})});var kn=require("./native-channel-merger-node-factory-factory");Object.keys(kn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return kn[e]}})});var qn=require("./native-channel-splitter-node");Object.keys(qn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qn[e]}})});var Mn=require("./native-channel-splitter-node-factory");Object.keys(Mn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Mn[e]}})});var Pn=require("./native-channel-splitter-node-factory-factory");Object.keys(Pn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Pn[e]}})});var En=require("./native-constant-source-node");Object.keys(En).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return En[e]}})});var wn=require("./native-constant-source-node-factory");Object.keys(wn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return wn[e]}})});var zn=require("./native-constant-source-node-factory-factory");Object.keys(zn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return zn[e]}})});var An=require("./native-constant-source-node-faker-factory");Object.keys(An).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return An[e]}})});var Bn=require("./native-constant-source-node-faker-factory-factory");Object.keys(Bn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Bn[e]}})});var Cn=require("./native-context");Object.keys(Cn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Cn[e]}})});var Dn=require("./native-convolver-node");Object.keys(Dn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Dn[e]}})});var Fn=require("./native-convolver-node-factory");Object.keys(Fn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Fn[e]}})});var Gn=require("./native-convolver-node-factory-factory");Object.keys(Gn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Gn[e]}})});var Hn=require("./native-convolver-node-faker-factory");Object.keys(Hn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Hn[e]}})});var In=require("./native-convolver-node-faker-factory-factory");Object.keys(In).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return In[e]}})});var Jn=require("./native-delay-node-factory");Object.keys(Jn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Jn[e]}})});var Kn=require("./native-delay-node-factory-factory");Object.keys(Kn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Kn[e]}})});var Ln=require("./native-delay-node");Object.keys(Ln).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ln[e]}})});var Nn=require("./native-dynamics-compressor-node");Object.keys(Nn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Nn[e]}})});var Qn=require("./native-dynamics-compressor-node-factory");Object.keys(Qn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Qn[e]}})});var Rn=require("./native-dynamics-compressor-node-factory-factory");Object.keys(Rn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Rn[e]}})});var Sn=require("./native-event-target");Object.keys(Sn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Sn[e]}})});var Tn=require("./native-gain-node");Object.keys(Tn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Tn[e]}})});var Un=require("./native-gain-node-factory");Object.keys(Un).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Un[e]}})});var Vn=require("./native-gain-node-factory-factory");Object.keys(Vn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Vn[e]}})});var Wn=require("./native-iir-filter-node");Object.keys(Wn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Wn[e]}})});var Xn=require("./native-iir-filter-node-factory");Object.keys(Xn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Xn[e]}})});var Yn=require("./native-iir-filter-node-factory-factory");Object.keys(Yn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Yn[e]}})});var Zn=require("./native-iir-filter-node-faker-factory");Object.keys(Zn).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Zn[e]}})});var $n=require("./native-iir-filter-node-faker-factory-factory");Object.keys($n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $n[e]}})});var eo=require("./native-media-element-audio-source-node");Object.keys(eo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return eo[e]}})});var ro=require("./native-media-element-audio-source-node-factory");Object.keys(ro).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ro[e]}})});var to=require("./native-media-element-audio-source-node-factory-factory");Object.keys(to).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return to[e]}})});var no=require("./native-media-stream-audio-destination-node");Object.keys(no).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return no[e]}})});var oo=require("./native-media-stream-audio-destination-node-factory");Object.keys(oo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return oo[e]}})});var uo=require("./native-media-stream-audio-destination-node-factory-factory");Object.keys(uo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return uo[e]}})});var co=require("./native-media-stream-audio-source-node");Object.keys(co).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return co[e]}})});var ao=require("./native-media-stream-audio-source-node-factory");Object.keys(ao).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ao[e]}})});var fo=require("./native-media-stream-audio-source-node-factory-factory");Object.keys(fo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fo[e]}})});var io=require("./native-media-stream-track-audio-source-node");Object.keys(io).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return io[e]}})});var so=require("./native-media-stream-track-audio-source-node-factory");Object.keys(so).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return so[e]}})});var lo=require("./native-media-stream-track-audio-source-node-factory-factory");Object.keys(lo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return lo[e]}})});var bo=require("./native-offline-audio-context");Object.keys(bo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return bo[e]}})});var yo=require("./native-offline-audio-context-constructor");Object.keys(yo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return yo[e]}})});var po=require("./native-offline-audio-context-constructor-factory");Object.keys(po).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return po[e]}})});var _o=require("./native-oscillator-node");Object.keys(_o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _o[e]}})});var jo=require("./native-oscillator-node-factory");Object.keys(jo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return jo[e]}})});var Oo=require("./native-oscillator-node-factory-factory");Object.keys(Oo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Oo[e]}})});var vo=require("./native-panner-node");Object.keys(vo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return vo[e]}})});var mo=require("./native-panner-node-factory");Object.keys(mo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return mo[e]}})});var ho=require("./native-panner-node-factory-factory");Object.keys(ho).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ho[e]}})});var xo=require("./native-panner-node-faker-factory");Object.keys(xo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xo[e]}})});var go=require("./native-panner-node-faker-factory-factory");Object.keys(go).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return go[e]}})});var ko=require("./native-periodic-wave");Object.keys(ko).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ko[e]}})});var qo=require("./native-periodic-wave-factory");Object.keys(qo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qo[e]}})});var Mo=require("./native-periodic-wave-factory-factory");Object.keys(Mo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Mo[e]}})});var Po=require("./native-script-processor-node");Object.keys(Po).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Po[e]}})});var Eo=require("./native-script-processor-node-factory");Object.keys(Eo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Eo[e]}})});var wo=require("./native-script-processor-node-factory-factory");Object.keys(wo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return wo[e]}})});var zo=require("./native-stereo-panner-node");Object.keys(zo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return zo[e]}})});var Ao=require("./native-stereo-panner-node-factory");Object.keys(Ao).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ao[e]}})});var Bo=require("./native-stereo-panner-node-factory-factory");Object.keys(Bo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Bo[e]}})});var Co=require("./native-stereo-panner-node-faker-factory");Object.keys(Co).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Co[e]}})});var Do=require("./native-stereo-panner-node-faker-factory-factory");Object.keys(Do).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Do[e]}})});var Fo=require("./native-wave-shaper-node");Object.keys(Fo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Fo[e]}})});var Go=require("./native-wave-shaper-node-factory");Object.keys(Go).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Go[e]}})});var Ho=require("./native-wave-shaper-node-factory-factory");Object.keys(Ho).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ho[e]}})});var Io=require("./native-wave-shaper-node-faker-factory");Object.keys(Io).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Io[e]}})});var Jo=require("./native-wave-shaper-node-faker-factory-factory");Object.keys(Jo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Jo[e]}})});var Ko=require("./not-supported-error-factory");Object.keys(Ko).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ko[e]}})});var Lo=require("./offline-audio-context-constructor-factory");Object.keys(Lo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Lo[e]}})});var No=require("./oscillator-node-constructor");Object.keys(No).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return No[e]}})});var Qo=require("./oscillator-node-constructor-factory");Object.keys(Qo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Qo[e]}})});var Ro=require("./oscillator-node-renderer");Object.keys(Ro).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ro[e]}})});var So=require("./oscillator-node-renderer-factory");Object.keys(So).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return So[e]}})});var To=require("./oscillator-node-renderer-factory-factory");Object.keys(To).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return To[e]}})});var Uo=require("./oscillator-type");Object.keys(Uo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Uo[e]}})});var Vo=require("./output-connection");Object.keys(Vo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Vo[e]}})});var Wo=require("./over-sample-type");Object.keys(Wo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Wo[e]}})});var Xo=require("./overwrite-accessors-function");Object.keys(Xo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Xo[e]}})});var Yo=require("./panner-node-constructor");Object.keys(Yo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Yo[e]}})});var Zo=require("./panner-node-constructor-factory");Object.keys(Zo).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Zo[e]}})});var $o=require("./panner-node-renderer-factory");Object.keys($o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $o[e]}})});var eu=require("./panner-node-renderer-factory-factory");Object.keys(eu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return eu[e]}})});var ru=require("./panning-model-type");Object.keys(ru).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ru[e]}})});var tu=require("./passive-audio-node-input-connection");Object.keys(tu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return tu[e]}})});var nu=require("./passive-audio-param-input-connection");Object.keys(nu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return nu[e]}})});var ou=require("./periodic-wave-constructor");Object.keys(ou).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ou[e]}})});var uu=require("./periodic-wave-constructor-factory");Object.keys(uu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return uu[e]}})});var cu=require("./render-automation-factory");Object.keys(cu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return cu[e]}})});var au=require("./render-automation-function");Object.keys(au).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return au[e]}})});var fu=require("./render-inputs-of-audio-node-factory");Object.keys(fu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return fu[e]}})});var iu=require("./render-inputs-of-audio-node-function");Object.keys(iu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return iu[e]}})});var du=require("./render-inputs-of-audio-param-factory");Object.keys(du).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return du[e]}})});var su=require("./render-inputs-of-audio-param-function");Object.keys(su).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return su[e]}})});var lu=require("./render-native-offline-audio-context-factory");Object.keys(lu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return lu[e]}})});var bu=require("./render-native-offline-audio-context-function");Object.keys(bu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return bu[e]}})});var yu=require("./start-rendering-factory");Object.keys(yu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return yu[e]}})});var pu=require("./start-rendering-function");Object.keys(pu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return pu[e]}})});var _u=require("./stereo-panner-node-constructor");Object.keys(_u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _u[e]}})});var ju=require("./stereo-panner-node-constructor-factory");Object.keys(ju).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ju[e]}})});var Ou=require("./stereo-panner-node-renderer-factory-factory");Object.keys(Ou).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ou[e]}})});var vu=require("./stereo-panner-node-renderer-factory");Object.keys(vu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return vu[e]}})});var mu=require("./test-audio-buffer-copy-channel-methods-subarray-support-factory");Object.keys(mu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return mu[e]}})});var hu=require("./test-audio-buffer-constructor-support-factory");Object.keys(hu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return hu[e]}})});var xu=require("./test-audio-buffer-source-node-start-method-consecutive-calls-support-factory");Object.keys(xu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return xu[e]}})});var gu=require("./test-audio-buffer-source-node-start-method-duration-parameter-support-factory");Object.keys(gu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return gu[e]}})});var ku=require("./test-audio-buffer-source-node-start-method-offset-clamping-support-factory");Object.keys(ku).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ku[e]}})});var qu=require("./test-audio-buffer-source-node-stop-method-nullified-buffer-support-factory");Object.keys(qu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return qu[e]}})});var Mu=require("./test-audio-context-close-method-support-factory");Object.keys(Mu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Mu[e]}})});var Pu=require("./test-audio-context-decode-audio-data-method-type-error-support-factory");Object.keys(Pu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Pu[e]}})});var Eu=require("./test-audio-context-options-support-factory");Object.keys(Eu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Eu[e]}})});var wu=require("./test-audio-node-connect-method-support-factory");Object.keys(wu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return wu[e]}})});var zu=require("./test-audio-scheduled-source-node-start-method-consecutive-calls-support-factory");Object.keys(zu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return zu[e]}})});var Au=require("./test-audio-scheduled-source-node-stop-method-consecutive-calls-support-factory");Object.keys(Au).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Au[e]}})});var Bu=require("./test-audio-scheduled-source-node-stop-method-negative-parameters-support-factory");Object.keys(Bu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Bu[e]}})});var Cu=require("./test-audio-worklet-processor-no-outputs-support-factory");Object.keys(Cu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Cu[e]}})});var Du=require("./test-channel-merger-node-channel-count-support-factory");Object.keys(Du).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Du[e]}})});var Fu=require("./test-constant-source-node-accurate-scheduling-support-factory");Object.keys(Fu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Fu[e]}})});var Gu=require("./test-convolver-node-buffer-reassignability-support-factory");Object.keys(Gu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Gu[e]}})});var Hu=require("./test-is-secure-context-support-factory");Object.keys(Hu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Hu[e]}})});var Iu=require("./test-media-stream-audio-source-node-media-stream-without-audio-track-support");Object.keys(Iu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Iu[e]}})});var Ju=require("./test-offline-audio-context-current-time-support-factory");Object.keys(Ju).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ju[e]}})});var Ku=require("./test-stereo-panner-node-default-value-support-factory");Object.keys(Ku).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ku[e]}})});var Lu=require("./typed-array");Object.keys(Lu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Lu[e]}})});var Nu=require("./unknown-error-factory");Object.keys(Nu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Nu[e]}})});var Qu=require("./unrendered-audio-worklet-node-store");Object.keys(Qu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Qu[e]}})});var Ru=require("./unrendered-audio-worklet-nodes");Object.keys(Ru).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Ru[e]}})});var Su=require("./wave-shaper-node-constructor");Object.keys(Su).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Su[e]}})});var Tu=require("./wave-shaper-node-constructor-factory");Object.keys(Tu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Tu[e]}})});var Uu=require("./wave-shaper-node-renderer-factory-factory");Object.keys(Uu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Uu[e]}})});var Vu=require("./wave-shaper-node-renderer-factory");Object.keys(Vu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Vu[e]}})});var Wu=require("./window-factory");Object.keys(Wu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Wu[e]}})});var Xu=require("./wrap-audio-buffer-copy-channel-methods-factory");Object.keys(Xu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Xu[e]}})});var Yu=require("./wrap-audio-buffer-copy-channel-methods-function");Object.keys(Yu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Yu[e]}})});var Zu=require("./wrap-audio-buffer-copy-channel-methods-out-of-bounds-factory");Object.keys(Zu).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return Zu[e]}})});var $u=require("./wrap-audio-buffer-copy-channel-methods-out-of-bounds-function");Object.keys($u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return $u[e]}})});var ec=require("./wrap-audio-buffer-source-node-start-method-offset-clamping-function");Object.keys(ec).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ec[e]}})});var rc=require("./wrap-audio-buffer-source-node-stop-method-nullified-buffer-factory");Object.keys(rc).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return rc[e]}})});var tc=require("./wrap-audio-buffer-source-node-stop-method-nullified-buffer-function");Object.keys(tc).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return tc[e]}})});var nc=require("./wrap-audio-scheduled-source-node-stop-method-consecutive-calls-factory");Object.keys(nc).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return nc[e]}})});var oc=require("./wrap-audio-scheduled-source-node-stop-method-consecutive-calls-function");Object.keys(oc).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return oc[e]}})});var uc=require("./wrap-channel-merger-node-factory");Object.keys(uc).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return uc[e]}})});var cc=require("./wrap-channel-merger-node-function");Object.keys(cc).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return cc[e]}})});var ac=require("./wrap-event-listener-function");Object.keys(ac).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return ac[e]}})});
},{"./abort-error-factory":"AQGI","./active-input-connection":"AQGI","./add-audio-node-connections-factory":"AQGI","./add-audio-node-connections-function":"AQGI","./add-audio-param-connections-factory":"AQGI","./add-audio-param-connections-function":"AQGI","./add-audio-worklet-module-factory":"AQGI","./add-audio-worklet-module-function":"AQGI","./add-silent-connection-factory":"AQGI","./add-silent-connection-function":"AQGI","./add-unrendered-audio-worklet-node-factory":"AQGI","./add-unrendered-audio-worklet-node-function":"AQGI","./analyser-node-constructor":"AQGI","./analyser-node-constructor-factory":"AQGI","./analyser-node-renderer-factory":"AQGI","./analyser-node-renderer-factory-factory":"AQGI","./any-audio-buffer":"AQGI","./any-context":"AQGI","./audio-buffer-constructor":"AQGI","./audio-buffer-constructor-factory":"AQGI","./audio-buffer-source-node-constructor":"AQGI","./audio-buffer-source-node-constructor-factory":"AQGI","./audio-buffer-source-node-renderer":"AQGI","./audio-buffer-source-node-renderer-factory":"AQGI","./audio-buffer-source-node-renderer-factory-factory":"AQGI","./audio-buffer-store":"AQGI","./audio-context-constructor":"AQGI","./audio-context-constructor-factory":"AQGI","./audio-context-latency-category":"AQGI","./audio-context-state":"AQGI","./audio-destination-node-constructor":"AQGI","./audio-destination-node-constructor-factory":"AQGI","./audio-destination-node-renderer-factory":"AQGI","./audio-listener-factory":"AQGI","./audio-listener-factory-factory":"AQGI","./audio-node-connections":"AQGI","./audio-node-connections-store":"AQGI","./audio-node-constructor":"AQGI","./audio-node-constructor-factory":"AQGI","./audio-node-output-connection":"AQGI","./audio-node-renderer":"AQGI","./audio-node-store":"AQGI","./audio-param-audio-node-store":"AQGI","./audio-param-connections":"AQGI","./audio-param-connections-store":"AQGI","./audio-param-factory":"AQGI","./audio-param-factory-factory":"AQGI","./audio-param-map":"AQGI","./audio-param-output-connection":"AQGI","./audio-param-renderer-factory":"AQGI","./audio-param-store":"AQGI","./audio-worklet-node-constructor":"AQGI","./audio-worklet-node-constructor-factory":"AQGI","./audio-worklet-node-renderer-factory":"AQGI","./audio-worklet-node-renderer-factory-factory":"AQGI","./auxiliary-gain-node-store":"AQGI","./base-audio-context-constructor":"AQGI","./base-audio-context-constructor-factory":"AQGI","./biquad-filter-node-constructor":"AQGI","./biquad-filter-node-constructor-factory":"AQGI","./biquad-filter-node-renderer-factory":"AQGI","./biquad-filter-node-renderer-factory-factory":"AQGI","./biquad-filter-type":"AQGI","./channel-count-mode":"AQGI","./channel-interpretation":"AQGI","./channel-merger-node-constructor":"AQGI","./channel-merger-node-constructor-factory":"AQGI","./channel-merger-node-renderer-factory":"AQGI","./channel-merger-node-renderer-factory-factory":"AQGI","./channel-splitter-node-constructor":"AQGI","./channel-splitter-node-constructor-factory":"AQGI","./channel-splitter-node-renderer-factory":"AQGI","./channel-splitter-node-renderer-factory-factory":"AQGI","./cache-test-result-factory":"AQGI","./cache-test-result-function":"AQGI","./connect-audio-param-factory":"AQGI","./connect-audio-param-function":"AQGI","./connect-multiple-outputs-factory":"AQGI","./connect-multiple-outputs-function":"AQGI","./connect-native-audio-node-to-native-audio-node-function":"AQGI","./connected-native-audio-buffer-source-node-factory":"AQGI","./connected-native-audio-buffer-source-node-factory-factory":"AQGI","./constant-source-node-constructor":"AQGI","./constant-source-node-constructor-factory":"AQGI","./constant-source-node-renderer":"AQGI","./constant-source-node-renderer-factory":"AQGI","./constant-source-node-renderer-factory-factory":"AQGI","./constructor":"AQGI","./context":"AQGI","./context-store":"AQGI","./convert-number-to-unsigned-long-factory":"AQGI","./convert-number-to-unsigned-long-function":"AQGI","./convolver-node-constructor":"AQGI","./convolver-node-constructor-factory":"AQGI","./convolver-node-renderer-factory":"AQGI","./convolver-node-renderer-factory-factory":"AQGI","./create-native-offline-audio-context-factory":"AQGI","./create-native-offline-audio-context-function":"AQGI","./cycle-counters":"AQGI","./data-clone-error-factory":"AQGI","./decode-audio-data-factory":"AQGI","./decode-audio-data-function":"AQGI","./decode-error-callback":"AQGI","./decode-success-callback":"AQGI","./decrement-cycle-counter-factory":"AQGI","./decrement-cycle-counter-function":"AQGI","./delay-node-constructor":"AQGI","./delay-node-constructor-factory":"AQGI","./delay-node-renderer-factory":"AQGI","./delay-node-renderer-factory-factory":"AQGI","./delete-unrendered-audio-worklet-node-factory":"AQGI","./delete-unrendered-audio-worklet-node-function":"AQGI","./detect-cycles-factory":"AQGI","./detect-cycles-function":"AQGI","./disconnect-multiple-outputs-factory":"AQGI","./disconnect-multiple-outputs-function":"AQGI","./disconnect-native-audio-node-from-native-audio-node-function":"AQGI","./distance-model-type":"AQGI","./dynamics-compressor-node-constructor":"AQGI","./dynamics-compressor-node-constructor-factory":"AQGI","./dynamics-compressor-node-renderer-factory":"AQGI","./dynamics-compressor-node-renderer-factory-factory":"AQGI","./encoding-error-factory":"AQGI","./error-event-handler":"AQGI","./evaluate-audio-worklet-global-scope-function":"AQGI","./evaluate-source-factory":"AQGI","./evaluate-source-function":"AQGI","./event-handler":"AQGI","./event-target-constructor":"AQGI","./event-target-constructor-factory":"AQGI","./expose-current-frame-and-current-time-factory":"AQGI","./expose-current-frame-and-current-time-function":"AQGI","./fetch-source-factory":"AQGI","./fetch-source-function":"AQGI","./gain-node-constructor":"AQGI","./gain-node-constructor-factory":"AQGI","./gain-node-renderer-factory":"AQGI","./gain-node-renderer-factory-factory":"AQGI","./get-audio-node-connections-function":"AQGI","./get-audio-node-renderer-factory":"AQGI","./get-audio-node-renderer-function":"AQGI","./get-audio-param-connections-function":"AQGI","./get-audio-param-renderer-factory":"AQGI","./get-audio-param-renderer-function":"AQGI","./get-backup-native-context-factory":"AQGI","./get-backup-native-context-function":"AQGI","./get-native-audio-node-function":"AQGI","./get-native-audio-param-function":"AQGI","./get-native-context-function":"AQGI","./get-native-context-factory":"AQGI","./get-unrendered-audio-worklet-nodes-factory":"AQGI","./get-unrendered-audio-worklet-nodes-function":"AQGI","./get-value-for-key-function":"AQGI","./iir-filter-node-constructor":"AQGI","./iir-filter-node-constructor-factory":"AQGI","./iir-filter-node-renderer-factory":"AQGI","./iir-filter-node-renderer-factory-factory":"AQGI","./increment-cycle-counter-factory":"AQGI","./increment-cycle-counter-factory-factory":"AQGI","./increment-cycle-counter-function":"AQGI","./index-size-error-factory":"AQGI","./insert-element-in-set-function":"AQGI","./internal-state-event-listener":"AQGI","./invalid-access-error-factory":"AQGI","./invalid-state-error-factory":"AQGI","./is-active-audio-node-function":"AQGI","./is-any-audio-context-factory":"AQGI","./is-any-audio-context-function":"AQGI","./is-any-audio-node-factory":"AQGI","./is-any-audio-node-function":"AQGI","./is-any-audio-param-factory":"AQGI","./is-any-audio-param-function":"AQGI","./is-any-offline-audio-context-factory":"AQGI","./is-any-offline-audio-context-function":"AQGI","./is-dc-curve-function":"AQGI","./is-native-audio-context-factory":"AQGI","./is-native-audio-context-function":"AQGI","./is-native-audio-node-factory":"AQGI","./is-native-audio-node-function":"AQGI","./is-native-audio-param-factory":"AQGI","./is-native-audio-param-function":"AQGI","./is-native-context-factory":"AQGI","./is-native-context-function":"AQGI","./is-native-offline-audio-context-factory":"AQGI","./is-native-offline-audio-context-function":"AQGI","./is-part-of-a-cycle-function":"AQGI","./is-secure-context-factory":"AQGI","./is-supported-promise-factory":"AQGI","./media-element-audio-source-node-constructor":"AQGI","./media-element-audio-source-node-constructor-factory":"AQGI","./media-stream-audio-destination-node-constructor":"AQGI","./media-stream-audio-destination-node-constructor-factory":"AQGI","./media-stream-audio-source-node-constructor":"AQGI","./media-stream-audio-source-node-constructor-factory":"AQGI","./media-stream-track-audio-source-node-constructor":"AQGI","./media-stream-track-audio-source-node-constructor-factory":"AQGI","./minimal-audio-context-constructor":"AQGI","./minimal-audio-context-constructor-factory":"AQGI","./minimal-base-audio-context-constructor":"AQGI","./minimal-base-audio-context-constructor-factory":"AQGI","./minimal-offline-audio-context-constructor":"AQGI","./minimal-offline-audio-context-constructor-factory":"AQGI","./monitor-connections-factory":"AQGI","./monitor-connections-function":"AQGI","./native-analyser-node":"AQGI","./native-analyser-node-factory":"AQGI","./native-analyser-node-factory-factory":"AQGI","./native-audio-buffer":"AQGI","./native-audio-buffer-constructor":"AQGI","./native-audio-buffer-constructor-factory":"AQGI","./native-audio-buffer-source-node":"AQGI","./native-audio-buffer-source-node-factory":"AQGI","./native-audio-buffer-source-node-factory-factory":"AQGI","./native-audio-context":"AQGI","./native-audio-context-constructor":"AQGI","./native-audio-context-constructor-factory":"AQGI","./native-audio-destination-node":"AQGI","./native-audio-destination-node-factory":"AQGI","./native-audio-destination-node-factory-factory":"AQGI","./native-audio-listener":"AQGI","./native-audio-node":"AQGI","./native-audio-node-factory":"AQGI","./native-audio-node-factory-factory":"AQGI","./native-audio-param":"AQGI","./native-audio-param-map":"AQGI","./native-audio-worklet":"AQGI","./native-audio-worklet-node":"AQGI","./native-audio-worklet-node-constructor":"AQGI","./native-audio-worklet-node-constructor-factory":"AQGI","./native-audio-worklet-node-factory":"AQGI","./native-audio-worklet-node-factory-factory":"AQGI","./native-audio-worklet-node-faker-factory":"AQGI","./native-audio-worklet-node-faker-factory-factory":"AQGI","./native-audio-worklet-node-options":"AQGI","./native-biquad-filter-node":"AQGI","./native-biquad-filter-node-factory":"AQGI","./native-biquad-filter-node-factory-factory":"AQGI","./native-channel-merger-node":"AQGI","./native-channel-merger-node-factory":"AQGI","./native-channel-merger-node-factory-factory":"AQGI","./native-channel-splitter-node":"AQGI","./native-channel-splitter-node-factory":"AQGI","./native-channel-splitter-node-factory-factory":"AQGI","./native-constant-source-node":"AQGI","./native-constant-source-node-factory":"AQGI","./native-constant-source-node-factory-factory":"AQGI","./native-constant-source-node-faker-factory":"AQGI","./native-constant-source-node-faker-factory-factory":"AQGI","./native-context":"AQGI","./native-convolver-node":"AQGI","./native-convolver-node-factory":"AQGI","./native-convolver-node-factory-factory":"AQGI","./native-convolver-node-faker-factory":"AQGI","./native-convolver-node-faker-factory-factory":"AQGI","./native-delay-node-factory":"AQGI","./native-delay-node-factory-factory":"AQGI","./native-delay-node":"AQGI","./native-dynamics-compressor-node":"AQGI","./native-dynamics-compressor-node-factory":"AQGI","./native-dynamics-compressor-node-factory-factory":"AQGI","./native-event-target":"AQGI","./native-gain-node":"AQGI","./native-gain-node-factory":"AQGI","./native-gain-node-factory-factory":"AQGI","./native-iir-filter-node":"AQGI","./native-iir-filter-node-factory":"AQGI","./native-iir-filter-node-factory-factory":"AQGI","./native-iir-filter-node-faker-factory":"AQGI","./native-iir-filter-node-faker-factory-factory":"AQGI","./native-media-element-audio-source-node":"AQGI","./native-media-element-audio-source-node-factory":"AQGI","./native-media-element-audio-source-node-factory-factory":"AQGI","./native-media-stream-audio-destination-node":"AQGI","./native-media-stream-audio-destination-node-factory":"AQGI","./native-media-stream-audio-destination-node-factory-factory":"AQGI","./native-media-stream-audio-source-node":"AQGI","./native-media-stream-audio-source-node-factory":"AQGI","./native-media-stream-audio-source-node-factory-factory":"AQGI","./native-media-stream-track-audio-source-node":"AQGI","./native-media-stream-track-audio-source-node-factory":"AQGI","./native-media-stream-track-audio-source-node-factory-factory":"AQGI","./native-offline-audio-context":"AQGI","./native-offline-audio-context-constructor":"AQGI","./native-offline-audio-context-constructor-factory":"AQGI","./native-oscillator-node":"AQGI","./native-oscillator-node-factory":"AQGI","./native-oscillator-node-factory-factory":"AQGI","./native-panner-node":"AQGI","./native-panner-node-factory":"AQGI","./native-panner-node-factory-factory":"AQGI","./native-panner-node-faker-factory":"AQGI","./native-panner-node-faker-factory-factory":"AQGI","./native-periodic-wave":"AQGI","./native-periodic-wave-factory":"AQGI","./native-periodic-wave-factory-factory":"AQGI","./native-script-processor-node":"AQGI","./native-script-processor-node-factory":"AQGI","./native-script-processor-node-factory-factory":"AQGI","./native-stereo-panner-node":"AQGI","./native-stereo-panner-node-factory":"AQGI","./native-stereo-panner-node-factory-factory":"AQGI","./native-stereo-panner-node-faker-factory":"AQGI","./native-stereo-panner-node-faker-factory-factory":"AQGI","./native-wave-shaper-node":"AQGI","./native-wave-shaper-node-factory":"AQGI","./native-wave-shaper-node-factory-factory":"AQGI","./native-wave-shaper-node-faker-factory":"AQGI","./native-wave-shaper-node-faker-factory-factory":"AQGI","./not-supported-error-factory":"AQGI","./offline-audio-context-constructor-factory":"AQGI","./oscillator-node-constructor":"AQGI","./oscillator-node-constructor-factory":"AQGI","./oscillator-node-renderer":"AQGI","./oscillator-node-renderer-factory":"AQGI","./oscillator-node-renderer-factory-factory":"AQGI","./oscillator-type":"AQGI","./output-connection":"AQGI","./over-sample-type":"AQGI","./overwrite-accessors-function":"AQGI","./panner-node-constructor":"AQGI","./panner-node-constructor-factory":"AQGI","./panner-node-renderer-factory":"AQGI","./panner-node-renderer-factory-factory":"AQGI","./panning-model-type":"AQGI","./passive-audio-node-input-connection":"AQGI","./passive-audio-param-input-connection":"AQGI","./periodic-wave-constructor":"AQGI","./periodic-wave-constructor-factory":"AQGI","./render-automation-factory":"AQGI","./render-automation-function":"AQGI","./render-inputs-of-audio-node-factory":"AQGI","./render-inputs-of-audio-node-function":"AQGI","./render-inputs-of-audio-param-factory":"AQGI","./render-inputs-of-audio-param-function":"AQGI","./render-native-offline-audio-context-factory":"AQGI","./render-native-offline-audio-context-function":"AQGI","./start-rendering-factory":"AQGI","./start-rendering-function":"AQGI","./stereo-panner-node-constructor":"AQGI","./stereo-panner-node-constructor-factory":"AQGI","./stereo-panner-node-renderer-factory-factory":"AQGI","./stereo-panner-node-renderer-factory":"AQGI","./test-audio-buffer-copy-channel-methods-subarray-support-factory":"AQGI","./test-audio-buffer-constructor-support-factory":"AQGI","./test-audio-buffer-source-node-start-method-consecutive-calls-support-factory":"AQGI","./test-audio-buffer-source-node-start-method-duration-parameter-support-factory":"AQGI","./test-audio-buffer-source-node-start-method-offset-clamping-support-factory":"AQGI","./test-audio-buffer-source-node-stop-method-nullified-buffer-support-factory":"AQGI","./test-audio-context-close-method-support-factory":"AQGI","./test-audio-context-decode-audio-data-method-type-error-support-factory":"AQGI","./test-audio-context-options-support-factory":"AQGI","./test-audio-node-connect-method-support-factory":"AQGI","./test-audio-scheduled-source-node-start-method-consecutive-calls-support-factory":"AQGI","./test-audio-scheduled-source-node-stop-method-consecutive-calls-support-factory":"AQGI","./test-audio-scheduled-source-node-stop-method-negative-parameters-support-factory":"AQGI","./test-audio-worklet-processor-no-outputs-support-factory":"AQGI","./test-channel-merger-node-channel-count-support-factory":"AQGI","./test-constant-source-node-accurate-scheduling-support-factory":"AQGI","./test-convolver-node-buffer-reassignability-support-factory":"AQGI","./test-is-secure-context-support-factory":"AQGI","./test-media-stream-audio-source-node-media-stream-without-audio-track-support":"AQGI","./test-offline-audio-context-current-time-support-factory":"AQGI","./test-stereo-panner-node-default-value-support-factory":"AQGI","./typed-array":"AQGI","./unknown-error-factory":"AQGI","./unrendered-audio-worklet-node-store":"AQGI","./unrendered-audio-worklet-nodes":"AQGI","./wave-shaper-node-constructor":"AQGI","./wave-shaper-node-constructor-factory":"AQGI","./wave-shaper-node-renderer-factory-factory":"AQGI","./wave-shaper-node-renderer-factory":"AQGI","./window-factory":"AQGI","./wrap-audio-buffer-copy-channel-methods-factory":"AQGI","./wrap-audio-buffer-copy-channel-methods-function":"AQGI","./wrap-audio-buffer-copy-channel-methods-out-of-bounds-factory":"AQGI","./wrap-audio-buffer-copy-channel-methods-out-of-bounds-function":"AQGI","./wrap-audio-buffer-source-node-start-method-offset-clamping-function":"AQGI","./wrap-audio-buffer-source-node-stop-method-nullified-buffer-factory":"AQGI","./wrap-audio-buffer-source-node-stop-method-nullified-buffer-function":"AQGI","./wrap-audio-scheduled-source-node-stop-method-consecutive-calls-factory":"AQGI","./wrap-audio-scheduled-source-node-stop-method-consecutive-calls-function":"AQGI","./wrap-channel-merger-node-factory":"AQGI","./wrap-channel-merger-node-function":"AQGI","./wrap-event-listener-function":"AQGI"}],"ZIs7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={AnalyserNode:!0,AudioBuffer:!0,AudioBufferSourceNode:!0,addAudioWorkletModule:!0,decodeAudioData:!0,AudioContext:!0,AudioWorkletNode:!0,BiquadFilterNode:!0,ChannelMergerNode:!0,ChannelSplitterNode:!0,ConvolverNode:!0,ConstantSourceNode:!0,DelayNode:!0,DynamicsCompressorNode:!0,GainNode:!0,IIRFilterNode:!0,MediaElementAudioSourceNode:!0,MediaStreamAudioDestinationNode:!0,MediaStreamAudioSourceNode:!0,MediaStreamTrackAudioSourceNode:!0,MinimalAudioContext:!0,MinimalOfflineAudioContext:!0,OfflineAudioContext:!0,OscillatorNode:!0,PannerNode:!0,PeriodicWave:!0,StereoPannerNode:!0,WaveShaperNode:!0,isAnyAudioContext:!0,isAnyAudioNode:!0,isAnyAudioParam:!0,isAnyOfflineAudioContext:!0,isSupported:!0};exports.isSupported=exports.isAnyOfflineAudioContext=exports.isAnyAudioParam=exports.isAnyAudioNode=exports.isAnyAudioContext=exports.WaveShaperNode=exports.StereoPannerNode=exports.PeriodicWave=exports.PannerNode=exports.OscillatorNode=exports.OfflineAudioContext=exports.MinimalOfflineAudioContext=exports.MinimalAudioContext=exports.MediaStreamTrackAudioSourceNode=exports.MediaStreamAudioSourceNode=exports.MediaStreamAudioDestinationNode=exports.MediaElementAudioSourceNode=exports.IIRFilterNode=exports.GainNode=exports.DynamicsCompressorNode=exports.DelayNode=exports.ConstantSourceNode=exports.ConvolverNode=exports.ChannelSplitterNode=exports.ChannelMergerNode=exports.BiquadFilterNode=exports.AudioWorkletNode=exports.AudioContext=exports.decodeAudioData=exports.addAudioWorkletModule=exports.AudioBufferSourceNode=exports.AudioBuffer=exports.AnalyserNode=void 0;var r=require("automation-events"),o=require("./factories/abort-error"),t=require("./factories/add-audio-node-connections"),a=require("./factories/add-audio-param-connections"),i=require("./factories/add-audio-worklet-module"),c=require("./factories/add-silent-connection"),n=require("./factories/add-unrendered-audio-worklet-node"),d=require("./factories/analyser-node-constructor"),u=require("./factories/analyser-node-renderer-factory"),s=require("./factories/audio-buffer-constructor"),f=require("./factories/audio-buffer-source-node-constructor"),p=require("./factories/audio-buffer-source-node-renderer-factory"),l=require("./factories/audio-context-constructor"),N=require("./factories/audio-destination-node-constructor"),v=require("./factories/audio-destination-node-renderer-factory"),A=require("./factories/audio-listener-factory"),q=require("./factories/audio-node-constructor"),S=require("./factories/audio-param-factory"),y=require("./factories/audio-param-renderer"),C=require("./factories/audio-worklet-node-constructor"),m=require("./factories/audio-worklet-node-renderer-factory"),x=require("./factories/base-audio-context-constructor"),h=require("./factories/biquad-filter-node-constructor"),E=require("./factories/biquad-filter-node-renderer-factory"),g=require("./factories/cache-test-result"),M=require("./factories/channel-merger-node-constructor"),F=require("./factories/channel-merger-node-renderer-factory"),O=require("./factories/channel-splitter-node-constructor"),k=require("./factories/channel-splitter-node-renderer-factory"),I=require("./factories/connect-audio-param"),T=require("./factories/connect-multiple-outputs"),w=require("./factories/connected-native-audio-buffer-source-node-factory"),P=require("./factories/constant-source-node-constructor"),R=require("./factories/constant-source-node-renderer-factory"),b=require("./factories/convert-number-to-unsigned-long"),W=require("./factories/convolver-node-constructor"),D=require("./factories/convolver-node-renderer-factory"),B=require("./factories/create-native-offline-audio-context"),_=require("./factories/data-clone-error"),U=require("./factories/decode-audio-data"),G=require("./factories/decrement-cycle-counter"),L=require("./factories/delay-node-constructor"),z=require("./factories/delay-node-renderer-factory"),j=require("./factories/delete-unrendered-audio-worklet-node"),V=require("./factories/detect-cycles"),X=require("./factories/disconnect-multiple-outputs"),Y=require("./factories/dynamics-compressor-node-constructor"),H=require("./factories/dynamics-compressor-node-renderer-factory"),K=require("./factories/encoding-error"),J=require("./factories/evaluate-source"),Q=require("./factories/event-target-constructor"),Z=require("./factories/expose-current-frame-and-current-time"),$=require("./factories/fetch-source"),ee=require("./factories/gain-node-constructor"),re=require("./factories/gain-node-renderer-factory"),oe=require("./factories/get-audio-node-renderer"),te=require("./factories/get-audio-param-renderer"),ae=require("./factories/get-backup-native-context"),ie=require("./factories/get-native-context"),ce=require("./factories/get-unrendered-audio-worklet-nodes"),ne=require("./factories/iir-filter-node-constructor"),de=require("./factories/iir-filter-node-renderer-factory"),ue=require("./factories/increment-cycle-counter-factory"),se=require("./factories/index-size-error"),fe=require("./factories/invalid-access-error"),pe=require("./factories/invalid-state-error"),le=require("./factories/is-any-audio-context"),Ne=require("./factories/is-any-audio-node"),ve=require("./factories/is-any-audio-param"),Ae=require("./factories/is-any-offline-audio-context"),qe=require("./factories/is-native-audio-context"),Se=require("./factories/is-native-audio-node"),ye=require("./factories/is-native-audio-param"),Ce=require("./factories/is-native-context"),me=require("./factories/is-native-offline-audio-context"),xe=require("./factories/is-secure-context"),he=require("./factories/is-supported-promise"),Ee=require("./factories/media-element-audio-source-node-constructor"),ge=require("./factories/media-stream-audio-destination-node-constructor"),Me=require("./factories/media-stream-audio-source-node-constructor"),Fe=require("./factories/media-stream-track-audio-source-node-constructor"),Oe=require("./factories/minimal-audio-context-constructor"),ke=require("./factories/minimal-base-audio-context-constructor"),Ie=require("./factories/minimal-offline-audio-context-constructor"),Te=require("./factories/monitor-connections"),we=require("./factories/native-analyser-node-factory"),Pe=require("./factories/native-audio-buffer-constructor"),Re=require("./factories/native-audio-buffer-source-node-factory"),be=require("./factories/native-audio-context-constructor"),We=require("./factories/native-audio-destination-node"),De=require("./factories/native-audio-node-factory"),Be=require("./factories/native-audio-worklet-node-constructor"),_e=require("./factories/native-audio-worklet-node-factory"),Ue=require("./factories/native-audio-worklet-node-faker-factory"),Ge=require("./factories/native-biquad-filter-node-factory"),Le=require("./factories/native-channel-merger-node-factory"),ze=require("./factories/native-channel-splitter-node-factory"),je=require("./factories/native-constant-source-node-factory"),Ve=require("./factories/native-constant-source-node-faker-factory"),Xe=require("./factories/native-convolver-node-factory"),Ye=require("./factories/native-convolver-node-faker-factory"),He=require("./factories/native-delay-node-factory"),Ke=require("./factories/native-dynamics-compressor-node-factory"),Je=require("./factories/native-gain-node-factory"),Qe=require("./factories/native-iir-filter-node-factory"),Ze=require("./factories/native-iir-filter-node-faker-factory"),$e=require("./factories/native-media-element-audio-source-node-factory"),er=require("./factories/native-media-stream-audio-destination-node-factory"),rr=require("./factories/native-media-stream-audio-source-node-factory"),or=require("./factories/native-media-stream-track-audio-source-node-factory"),tr=require("./factories/native-offline-audio-context-constructor"),ar=require("./factories/native-oscillator-node-factory"),ir=require("./factories/native-panner-node-factory"),cr=require("./factories/native-panner-node-faker-factory"),nr=require("./factories/native-periodic-wave-factory"),dr=require("./factories/native-script-processor-node-factory"),ur=require("./factories/native-stereo-panner-node-factory"),sr=require("./factories/native-stereo-panner-node-faker-factory"),fr=require("./factories/native-wave-shaper-node-factory"),pr=require("./factories/native-wave-shaper-node-faker-factory"),lr=require("./factories/not-supported-error"),Nr=require("./factories/offline-audio-context-constructor"),vr=require("./factories/oscillator-node-constructor"),Ar=require("./factories/oscillator-node-renderer-factory"),qr=require("./factories/panner-node-constructor"),Sr=require("./factories/panner-node-renderer-factory"),yr=require("./factories/periodic-wave-constructor"),Cr=require("./factories/render-automation"),mr=require("./factories/render-inputs-of-audio-node"),xr=require("./factories/render-inputs-of-audio-param"),hr=require("./factories/render-native-offline-audio-context"),Er=require("./factories/start-rendering"),gr=require("./factories/stereo-panner-node-constructor"),Mr=require("./factories/stereo-panner-node-renderer-factory"),Fr=require("./factories/test-audio-buffer-constructor-support"),Or=require("./factories/test-audio-buffer-copy-channel-methods-subarray-support"),kr=require("./factories/test-audio-buffer-source-node-start-method-consecutive-calls-support"),Ir=require("./factories/test-audio-buffer-source-node-start-method-duration-parameter-support"),Tr=require("./factories/test-audio-buffer-source-node-start-method-offset-clamping-support"),wr=require("./factories/test-audio-buffer-source-node-stop-method-nullified-buffer-support"),Pr=require("./factories/test-audio-context-close-method-support"),Rr=require("./factories/test-audio-context-decode-audio-data-method-type-error-support"),br=require("./factories/test-audio-context-options-support"),Wr=require("./factories/test-audio-node-connect-method-support"),Dr=require("./factories/test-audio-scheduled-source-node-start-method-negative-parameters-support"),Br=require("./factories/test-audio-scheduled-source-node-stop-method-consecutive-calls-support"),_r=require("./factories/test-audio-scheduled-source-node-stop-method-negative-parameters-support"),Ur=require("./factories/test-audio-worklet-processor-no-outputs-support"),Gr=require("./factories/test-channel-merger-node-channel-count-support"),Lr=require("./factories/test-constant-source-node-accurate-scheduling-support"),zr=require("./factories/test-convolver-node-buffer-reassignability-support"),jr=require("./factories/test-is-secure-context-support"),Vr=require("./factories/test-media-stream-audio-source-node-media-stream-without-audio-track-support"),Xr=require("./factories/test-offline-audio-context-current-time-support"),Yr=require("./factories/test-stereo-panner-node-default-value-support"),Hr=require("./factories/unknown-error"),Kr=require("./factories/wave-shaper-node-constructor"),Jr=require("./factories/wave-shaper-node-renderer-factory"),Qr=require("./factories/window"),Zr=require("./factories/wrap-audio-buffer-copy-channel-methods"),$r=require("./factories/wrap-audio-buffer-copy-channel-methods-out-of-bounds"),eo=require("./factories/wrap-audio-buffer-source-node-stop-method-nullified-buffer"),ro=require("./factories/wrap-audio-scheduled-source-node-stop-method-consecutive-calls"),oo=require("./factories/wrap-channel-merger-node"),to=require("./globals"),ao=require("./helpers/connect-native-audio-node-to-native-audio-node"),io=require("./helpers/disconnect-native-audio-node-from-native-audio-node"),co=require("./helpers/get-audio-node-connections"),no=require("./helpers/get-audio-param-connections"),uo=require("./helpers/get-native-audio-node"),so=require("./helpers/get-native-audio-param"),fo=require("./helpers/get-value-for-key"),po=require("./helpers/insert-element-in-set"),lo=require("./helpers/is-active-audio-node"),No=require("./helpers/is-dc-curve"),vo=require("./helpers/is-part-of-a-cycle"),Ao=require("./helpers/overwrite-accessors"),qo=require("./helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support"),So=require("./helpers/test-promise-support"),yo=require("./helpers/test-transferables-support"),Co=require("./helpers/wrap-audio-buffer-source-node-start-method-offset-clamping"),mo=require("./helpers/wrap-event-listener"),xo=require("./interfaces/index");Object.keys(xo).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return xo[r]}}))});var ho=require("./types/index");Object.keys(ho).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return ho[r]}}))});const Eo=(0,g.createCacheTestResult)(new Map,new WeakMap),go=(0,Qr.createWindow)(),Mo=(0,tr.createNativeOfflineAudioContextConstructor)(go),Fo=(0,me.createIsNativeOfflineAudioContext)(Mo),Oo=(0,be.createNativeAudioContextConstructor)(go),ko=(0,ae.createGetBackupNativeContext)(Fo,Oo,Mo),Io=(0,De.createNativeAudioNodeFactory)(ko),To=(0,we.createNativeAnalyserNodeFactory)(Eo,se.createIndexSizeError,Io),wo=(0,oe.createGetAudioNodeRenderer)(co.getAudioNodeConnections),Po=(0,mr.createRenderInputsOfAudioNode)(co.getAudioNodeConnections,wo,vo.isPartOfACycle),Ro=(0,u.createAnalyserNodeRendererFactory)(To,uo.getNativeAudioNode,Po),bo=new WeakMap,Wo=(0,ie.createGetNativeContext)(to.CONTEXT_STORE),Do=new WeakMap,Bo=(0,Q.createEventTargetConstructor)(mo.wrapEventListener),_o=(0,qe.createIsNativeAudioContext)(Oo),Uo=(0,Se.createIsNativeAudioNode)(go),Go=(0,ye.createIsNativeAudioParam)(go),Lo=(0,q.createAudioNodeConstructor)((0,t.createAddAudioNodeConnections)(to.AUDIO_NODE_CONNECTIONS_STORE),bo,Eo,(0,ue.createIncrementCycleCounterFactory)(to.CYCLE_COUNTERS,io.disconnectNativeAudioNodeFromNativeAudioNode,co.getAudioNodeConnections,uo.getNativeAudioNode,so.getNativeAudioParam,lo.isActiveAudioNode),se.createIndexSizeError,fe.createInvalidAccessError,lr.createNotSupportedError,(0,G.createDecrementCycleCounter)(ao.connectNativeAudioNodeToNativeAudioNode,to.CYCLE_COUNTERS,co.getAudioNodeConnections,uo.getNativeAudioNode,so.getNativeAudioParam,Wo,lo.isActiveAudioNode,Fo),(0,V.createDetectCycles)(Do,co.getAudioNodeConnections,fo.getValueForKey),Bo,Wo,_o,Uo,Go,Fo),zo=(0,d.createAnalyserNodeConstructor)(Lo,Ro,se.createIndexSizeError,To,Wo,Fo);exports.AnalyserNode=zo;const jo=new WeakSet,Vo=(0,Pe.createNativeAudioBufferConstructor)(go),Xo=(0,b.createConvertNumberToUnsignedLong)(new Uint32Array(1)),Yo=(0,Zr.createWrapAudioBufferCopyChannelMethods)(Xo,se.createIndexSizeError),Ho=(0,$r.createWrapAudioBufferCopyChannelMethodsOutOfBounds)(Xo),Ko=(0,s.createAudioBufferConstructor)(jo,Eo,lr.createNotSupportedError,Vo,Mo,(0,Fr.createTestAudioBufferConstructorSupport)(Vo),Yo,Ho);exports.AudioBuffer=Ko;const Jo=(0,Je.createNativeGainNodeFactory)(Io),Qo=(0,c.createAddSilentConnection)(Jo),Zo=(0,Dr.createTestAudioScheduledSourceNodeStartMethodNegativeParametersSupport)(Io),$o=(0,Br.createTestAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport)(Io),et=(0,_r.createTestAudioScheduledSourceNodeStopMethodNegativeParametersSupport)(Io),rt=(0,ro.createWrapAudioScheduledSourceNodeStopMethodConsecutiveCalls)(Io),ot=(0,xr.createRenderInputsOfAudioParam)(wo,no.getAudioParamConnections,vo.isPartOfACycle),tt=(0,I.createConnectAudioParam)(ot),at=(0,Re.createNativeAudioBufferSourceNodeFactory)(Qo,Eo,Io,(0,kr.createTestAudioBufferSourceNodeStartMethodConsecutiveCallsSupport)(Io),(0,Ir.createTestAudioBufferSourceNodeStartMethodDurationParameterSupport)(Mo),(0,Tr.createTestAudioBufferSourceNodeStartMethodOffsetClampingSupport)(Io),(0,wr.createTestAudioBufferSourceNodeStopMethodNullifiedBufferSupport)(Io),Zo,$o,et,Co.wrapAudioBufferSourceNodeStartMethodOffsetClamping,(0,eo.createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer)(Ao.overwriteAccessors),rt),it=(0,Cr.createRenderAutomation)((0,te.createGetAudioParamRenderer)(no.getAudioParamConnections),ot),ct=(0,p.createAudioBufferSourceNodeRendererFactory)(tt,at,uo.getNativeAudioNode,it,Po),nt=(0,S.createAudioParamFactory)((0,a.createAddAudioParamConnections)(to.AUDIO_PARAM_CONNECTIONS_STORE),Do,to.AUDIO_PARAM_STORE,y.createAudioParamRenderer,r.createCancelAndHoldAutomationEvent,r.createCancelScheduledValuesAutomationEvent,r.createExponentialRampToValueAutomationEvent,r.createLinearRampToValueAutomationEvent,r.createSetTargetAutomationEvent,r.createSetValueAutomationEvent,r.createSetValueCurveAutomationEvent,Oo),dt=(0,f.createAudioBufferSourceNodeConstructor)(Lo,ct,nt,pe.createInvalidStateError,at,Wo,Fo,mo.wrapEventListener);exports.AudioBufferSourceNode=dt;const ut=(0,N.createAudioDestinationNodeConstructor)(Lo,v.createAudioDestinationNodeRenderer,se.createIndexSizeError,pe.createInvalidStateError,(0,We.createNativeAudioDestinationNodeFactory)(Jo,Ao.overwriteAccessors),Wo,Fo,Po),st=(0,Ge.createNativeBiquadFilterNodeFactory)(Io),ft=(0,E.createBiquadFilterNodeRendererFactory)(tt,st,uo.getNativeAudioNode,it,Po),pt=(0,h.createBiquadFilterNodeConstructor)(Lo,nt,ft,fe.createInvalidAccessError,st,Wo,Fo);exports.BiquadFilterNode=pt;const lt=(0,Te.createMonitorConnections)(po.insertElementInSet,Uo),Nt=(0,oo.createWrapChannelMergerNode)(pe.createInvalidStateError,Io,lt),vt=(0,Le.createNativeChannelMergerNodeFactory)(Io,Nt),At=(0,F.createChannelMergerNodeRendererFactory)(vt,uo.getNativeAudioNode,Po),qt=(0,M.createChannelMergerNodeConstructor)(Lo,At,vt,Wo,Fo);exports.ChannelMergerNode=qt;const St=(0,ze.createNativeChannelSplitterNodeFactory)(Io),yt=(0,k.createChannelSplitterNodeRendererFactory)(St,uo.getNativeAudioNode,Po),Ct=(0,O.createChannelSplitterNodeConstructor)(Lo,yt,St,Wo,Fo);exports.ChannelSplitterNode=Ct;const mt=(0,Ve.createNativeConstantSourceNodeFakerFactory)(Qo,at,Jo,lt),xt=(0,je.createNativeConstantSourceNodeFactory)(Qo,Eo,Io,mt,Zo,et),ht=(0,R.createConstantSourceNodeRendererFactory)(tt,xt,uo.getNativeAudioNode,it,Po),Et=(0,P.createConstantSourceNodeConstructor)(Lo,nt,ht,xt,Wo,Fo,mo.wrapEventListener);exports.ConstantSourceNode=Et;const gt=(0,Ye.createNativeConvolverNodeFakerFactory)(Io,Jo,lt),Mt=(0,Xe.createNativeConvolverNodeFactory)(Io,gt,lr.createNotSupportedError,Ao.overwriteAccessors),Ft=(0,D.createConvolverNodeRendererFactory)(Mt,uo.getNativeAudioNode,Po),Ot=(0,W.createConvolverNodeConstructor)(Lo,Ft,Mt,Wo,Fo);exports.ConvolverNode=Ot;const kt=(0,He.createNativeDelayNodeFactory)(Io),It=(0,z.createDelayNodeRendererFactory)(tt,kt,uo.getNativeAudioNode,it,Po),Tt=(0,L.createDelayNodeConstructor)(Lo,nt,It,kt,Wo,Fo);exports.DelayNode=Tt;const wt=(0,Ke.createNativeDynamicsCompressorNodeFactory)(Io,lr.createNotSupportedError),Pt=(0,H.createDynamicsCompressorNodeRendererFactory)(tt,wt,uo.getNativeAudioNode,it,Po),Rt=(0,Y.createDynamicsCompressorNodeConstructor)(Lo,nt,Pt,wt,lr.createNotSupportedError,Wo,Fo);exports.DynamicsCompressorNode=Rt;const bt=(0,re.createGainNodeRendererFactory)(tt,Jo,uo.getNativeAudioNode,it,Po),Wt=(0,ee.createGainNodeConstructor)(Lo,nt,bt,Jo,Wo,Fo);exports.GainNode=Wt;const Dt=(0,dr.createNativeScriptProcessorNodeFactory)(Io),Bt=(0,Ze.createNativeIIRFilterNodeFakerFactory)(fe.createInvalidAccessError,pe.createInvalidStateError,Dt,lr.createNotSupportedError),_t=(0,hr.createRenderNativeOfflineAudioContext)(Eo,Jo,Dt,(0,Xr.createTestOfflineAudioContextCurrentTimeSupport)(Jo,Mo)),Ut=(0,de.createIIRFilterNodeRendererFactory)(at,Io,uo.getNativeAudioNode,Mo,Po,_t),Gt=(0,Qe.createNativeIIRFilterNodeFactory)(Io,Bt),Lt=(0,ne.createIIRFilterNodeConstructor)(Lo,Gt,Ut,Wo,Fo);exports.IIRFilterNode=Lt;const zt=(0,A.createAudioListenerFactory)(nt,vt,xt,Dt,Fo),jt=new WeakMap,Vt=(0,ke.createMinimalBaseAudioContextConstructor)(ut,zt,Bo,Fo,jt,mo.wrapEventListener),Xt=(0,ar.createNativeOscillatorNodeFactory)(Qo,Eo,Io,Zo,$o,et,rt),Yt=(0,Ar.createOscillatorNodeRendererFactory)(tt,Xt,uo.getNativeAudioNode,it,Po),Ht=(0,vr.createOscillatorNodeConstructor)(Lo,nt,pe.createInvalidStateError,Xt,Yt,Wo,Fo,mo.wrapEventListener);exports.OscillatorNode=Ht;const Kt=(0,w.createConnectedNativeAudioBufferSourceNodeFactory)(at),Jt=(0,pr.createNativeWaveShaperNodeFakerFactory)(Kt,pe.createInvalidStateError,Io,Jo,No.isDCCurve,lt),Qt=(0,fr.createNativeWaveShaperNodeFactory)(Kt,pe.createInvalidStateError,Io,Jt,No.isDCCurve,lt,Ao.overwriteAccessors),Zt=(0,cr.createNativePannerNodeFakerFactory)(ao.connectNativeAudioNodeToNativeAudioNode,pe.createInvalidStateError,Io,vt,Jo,Dt,Qt,lr.createNotSupportedError,io.disconnectNativeAudioNodeFromNativeAudioNode,lt),$t=(0,ir.createNativePannerNodeFactory)(Io,Zt),ea=(0,Sr.createPannerNodeRendererFactory)(tt,vt,xt,Jo,$t,uo.getNativeAudioNode,Mo,it,Po,_t),ra=(0,qr.createPannerNodeConstructor)(Lo,nt,$t,ea,Wo,Fo);exports.PannerNode=ra;const oa=(0,nr.createNativePeriodicWaveFactory)(ko),ta=(0,yr.createPeriodicWaveConstructor)(oa,Wo,new WeakSet);exports.PeriodicWave=ta;const aa=(0,sr.createNativeStereoPannerNodeFakerFactory)(vt,St,Jo,Qt,lr.createNotSupportedError,lt),ia=(0,ur.createNativeStereoPannerNodeFactory)(Io,aa,lr.createNotSupportedError),ca=(0,Mr.createStereoPannerNodeRendererFactory)(tt,ia,uo.getNativeAudioNode,it,Po),na=(0,gr.createStereoPannerNodeConstructor)(Lo,nt,ia,ca,Wo,Fo);exports.StereoPannerNode=na;const da=(0,Jr.createWaveShaperNodeRendererFactory)(Qt,uo.getNativeAudioNode,Po),ua=(0,Kr.createWaveShaperNodeConstructor)(Lo,pe.createInvalidStateError,Qt,da,Wo,Fo);exports.WaveShaperNode=ua;const sa=(0,xe.createIsSecureContext)(go),fa=(0,Z.createExposeCurrentFrameAndCurrentTime)(go),pa=sa?(0,i.createAddAudioWorkletModule)(lr.createNotSupportedError,(0,J.createEvaluateSource)(go),fa,(0,$.createFetchSource)(o.createAbortError),ko,Wo,new WeakMap,new WeakMap,go):void 0;exports.addAudioWorkletModule=pa;const la=(0,Ce.createIsNativeContext)(_o,Fo),Na=(0,U.createDecodeAudioData)(jo,Eo,_.createDataCloneError,K.createEncodingError,new WeakSet,Wo,la,Fo,Mo,qo.testAudioBufferCopyChannelMethodsOutOfBoundsSupport,So.testPromiseSupport,Yo,Ho);exports.decodeAudioData=Na;const va=(0,x.createBaseAudioContextConstructor)(pa,zo,Ko,dt,pt,qt,Ct,Et,Ot,Na,Tt,Rt,Wt,Lt,Vt,Ht,ra,ta,na,ua),Aa=(0,$e.createNativeMediaElementAudioSourceNodeFactory)(Io),qa=(0,Ee.createMediaElementAudioSourceNodeConstructor)(Lo,Aa,Wo,Fo);exports.MediaElementAudioSourceNode=qa;const Sa=(0,er.createNativeMediaStreamAudioDestinationNodeFactory)(Io,lr.createNotSupportedError),ya=(0,ge.createMediaStreamAudioDestinationNodeConstructor)(Lo,Sa,Wo,Fo);exports.MediaStreamAudioDestinationNode=ya;const Ca=(0,rr.createNativeMediaStreamAudioSourceNodeFactory)(Io),ma=(0,Me.createMediaStreamAudioSourceNodeConstructor)(Lo,Ca,Wo,Fo);exports.MediaStreamAudioSourceNode=ma;const xa=(0,or.createNativeMediaStreamTrackAudioSourceNodeFactory)(pe.createInvalidStateError,Io,Fo),ha=(0,Fe.createMediaStreamTrackAudioSourceNodeConstructor)(Lo,xa,Wo);exports.MediaStreamTrackAudioSourceNode=ha;const Ea=(0,l.createAudioContextConstructor)(va,pe.createInvalidStateError,lr.createNotSupportedError,Hr.createUnknownError,qa,ya,ma,ha,Oo);exports.AudioContext=Ea;const ga=(0,ce.createGetUnrenderedAudioWorkletNodes)(jt),Ma=(0,n.createAddUnrenderedAudioWorkletNode)(ga),Fa=(0,T.createConnectMultipleOutputs)(se.createIndexSizeError),Oa=(0,j.createDeleteUnrenderedAudioWorkletNode)(ga),ka=(0,X.createDisconnectMultipleOutputs)(se.createIndexSizeError),Ia=(0,Ue.createNativeAudioWorkletNodeFakerFactory)(bo,Fa,se.createIndexSizeError,pe.createInvalidStateError,vt,St,xt,Jo,Dt,lr.createNotSupportedError,ka,fa,lt),Ta=(0,_e.createNativeAudioWorkletNodeFactory)(pe.createInvalidStateError,Io,Ia,Jo,lr.createNotSupportedError,lt),wa=(0,Be.createNativeAudioWorkletNodeConstructor)(go),Pa=(0,m.createAudioWorkletNodeRendererFactory)(tt,Fa,at,vt,St,xt,Jo,Oa,ka,fa,uo.getNativeAudioNode,wa,Mo,it,Po,_t),Ra=sa?(0,C.createAudioWorkletNodeConstructor)(Ma,Lo,nt,Pa,Ta,Wo,Fo,wa,mo.wrapEventListener):void 0;exports.AudioWorkletNode=Ra;const ba=(0,Oe.createMinimalAudioContextConstructor)(pe.createInvalidStateError,lr.createNotSupportedError,Hr.createUnknownError,Vt,Oo);exports.MinimalAudioContext=ba;const Wa=(0,B.createCreateNativeOfflineAudioContext)(lr.createNotSupportedError,Mo),Da=(0,Er.createStartRendering)(jo,Eo,wo,ga,_t,qo.testAudioBufferCopyChannelMethodsOutOfBoundsSupport,Yo,Ho),Ba=(0,Ie.createMinimalOfflineAudioContextConstructor)(Eo,pe.createInvalidStateError,Wa,Vt,Da);exports.MinimalOfflineAudioContext=Ba;const _a=(0,Nr.createOfflineAudioContextConstructor)(va,Eo,pe.createInvalidStateError,Wa,Da);exports.OfflineAudioContext=_a;const Ua=(0,le.createIsAnyAudioContext)(to.CONTEXT_STORE,_o);exports.isAnyAudioContext=Ua;const Ga=(0,Ne.createIsAnyAudioNode)(to.AUDIO_NODE_STORE,Uo);exports.isAnyAudioNode=Ga;const La=(0,ve.createIsAnyAudioParam)(to.AUDIO_PARAM_STORE,Go);exports.isAnyAudioParam=La;const za=(0,Ae.createIsAnyOfflineAudioContext)(to.CONTEXT_STORE,Fo);exports.isAnyOfflineAudioContext=za;const ja=()=>(0,he.createIsSupportedPromise)(Eo,(0,Or.createTestAudioBufferCopyChannelMethodsSubarraySupport)(Mo),(0,Pr.createTestAudioContextCloseMethodSupport)(Oo),(0,Rr.createTestAudioContextDecodeAudioDataMethodTypeErrorSupport)(Mo),(0,br.createTestAudioContextOptionsSupport)(Oo),(0,Wr.createTestAudioNodeConnectMethodSupport)(Mo),(0,Ur.createTestAudioWorkletProcessorNoOutputsSupport)(wa,Mo),(0,Gr.createTestChannelMergerNodeChannelCountSupport)(Io,Mo),(0,Lr.createTestConstantSourceNodeAccurateSchedulingSupport)(Io,Mo),(0,zr.createTestConvolverNodeBufferReassignabilitySupport)(Mo),(0,jr.createTestIsSecureContextSupport)(go),(0,Vr.createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport)(Oo),(0,Yr.createTestStereoPannerNodeDefaultValueSupport)(Mo),yo.testTransferablesSupport);exports.isSupported=ja;
},{"automation-events":"lnwn","./factories/abort-error":"EBr0","./factories/add-audio-node-connections":"kcKd","./factories/add-audio-param-connections":"h06o","./factories/add-audio-worklet-module":"Rhwl","./factories/add-silent-connection":"vgiY","./factories/add-unrendered-audio-worklet-node":"VYaX","./factories/analyser-node-constructor":"EGFv","./factories/analyser-node-renderer-factory":"UUnX","./factories/audio-buffer-constructor":"MHKk","./factories/audio-buffer-source-node-constructor":"hw4i","./factories/audio-buffer-source-node-renderer-factory":"JLaf","./factories/audio-context-constructor":"KCtY","./factories/audio-destination-node-constructor":"YAVu","./factories/audio-destination-node-renderer-factory":"rdEV","./factories/audio-listener-factory":"UHbp","./factories/audio-node-constructor":"d7ck","./factories/audio-param-factory":"qaSE","./factories/audio-param-renderer":"H1iG","./factories/audio-worklet-node-constructor":"KkyP","./factories/audio-worklet-node-renderer-factory":"pQfP","./factories/base-audio-context-constructor":"R9gS","./factories/biquad-filter-node-constructor":"eSqS","./factories/biquad-filter-node-renderer-factory":"YCGP","./factories/cache-test-result":"Xrgi","./factories/channel-merger-node-constructor":"qLyN","./factories/channel-merger-node-renderer-factory":"xJuv","./factories/channel-splitter-node-constructor":"jBCe","./factories/channel-splitter-node-renderer-factory":"wC2Q","./factories/connect-audio-param":"qgfw","./factories/connect-multiple-outputs":"cSMM","./factories/connected-native-audio-buffer-source-node-factory":"bOV9","./factories/constant-source-node-constructor":"gku0","./factories/constant-source-node-renderer-factory":"gYCK","./factories/convert-number-to-unsigned-long":"tyf0","./factories/convolver-node-constructor":"LWVK","./factories/convolver-node-renderer-factory":"sV4G","./factories/create-native-offline-audio-context":"rYy4","./factories/data-clone-error":"d3p9","./factories/decode-audio-data":"oDi4","./factories/decrement-cycle-counter":"dTjf","./factories/delay-node-constructor":"jIlX","./factories/delay-node-renderer-factory":"lHrX","./factories/delete-unrendered-audio-worklet-node":"vixa","./factories/detect-cycles":"Bq45","./factories/disconnect-multiple-outputs":"HuI7","./factories/dynamics-compressor-node-constructor":"Wg6M","./factories/dynamics-compressor-node-renderer-factory":"sbBI","./factories/encoding-error":"Okym","./factories/evaluate-source":"r814","./factories/event-target-constructor":"zIaD","./factories/expose-current-frame-and-current-time":"TF8J","./factories/fetch-source":"un3y","./factories/gain-node-constructor":"ZanO","./factories/gain-node-renderer-factory":"FOIQ","./factories/get-audio-node-renderer":"vKfw","./factories/get-audio-param-renderer":"jpGg","./factories/get-backup-native-context":"Nmyx","./factories/get-native-context":"K5Us","./factories/get-unrendered-audio-worklet-nodes":"B3lM","./factories/iir-filter-node-constructor":"lCTI","./factories/iir-filter-node-renderer-factory":"WyQr","./factories/increment-cycle-counter-factory":"kY8M","./factories/index-size-error":"Mtiz","./factories/invalid-access-error":"ChGO","./factories/invalid-state-error":"BpY2","./factories/is-any-audio-context":"yXKH","./factories/is-any-audio-node":"BUYv","./factories/is-any-audio-param":"d6lu","./factories/is-any-offline-audio-context":"lTzg","./factories/is-native-audio-context":"N7E4","./factories/is-native-audio-node":"kJt3","./factories/is-native-audio-param":"sPik","./factories/is-native-context":"yPgA","./factories/is-native-offline-audio-context":"tCMv","./factories/is-secure-context":"Sbkw","./factories/is-supported-promise":"o6e7","./factories/media-element-audio-source-node-constructor":"nmKW","./factories/media-stream-audio-destination-node-constructor":"vmWI","./factories/media-stream-audio-source-node-constructor":"hA6v","./factories/media-stream-track-audio-source-node-constructor":"cuCV","./factories/minimal-audio-context-constructor":"RKHh","./factories/minimal-base-audio-context-constructor":"pMWF","./factories/minimal-offline-audio-context-constructor":"HXqg","./factories/monitor-connections":"JjHo","./factories/native-analyser-node-factory":"iZpR","./factories/native-audio-buffer-constructor":"jB08","./factories/native-audio-buffer-source-node-factory":"yK6Z","./factories/native-audio-context-constructor":"d1jD","./factories/native-audio-destination-node":"HusQ","./factories/native-audio-node-factory":"Q4S3","./factories/native-audio-worklet-node-constructor":"CUYU","./factories/native-audio-worklet-node-factory":"FJXc","./factories/native-audio-worklet-node-faker-factory":"OPvg","./factories/native-biquad-filter-node-factory":"ZH5p","./factories/native-channel-merger-node-factory":"mwLt","./factories/native-channel-splitter-node-factory":"Fe0A","./factories/native-constant-source-node-factory":"L00Q","./factories/native-constant-source-node-faker-factory":"hSFi","./factories/native-convolver-node-factory":"ay2z","./factories/native-convolver-node-faker-factory":"zbRB","./factories/native-delay-node-factory":"qSYM","./factories/native-dynamics-compressor-node-factory":"YOgJ","./factories/native-gain-node-factory":"bC2p","./factories/native-iir-filter-node-factory":"w5c7","./factories/native-iir-filter-node-faker-factory":"S2pN","./factories/native-media-element-audio-source-node-factory":"bk1F","./factories/native-media-stream-audio-destination-node-factory":"Q1we","./factories/native-media-stream-audio-source-node-factory":"enK5","./factories/native-media-stream-track-audio-source-node-factory":"Gaw6","./factories/native-offline-audio-context-constructor":"I39P","./factories/native-oscillator-node-factory":"FKT1","./factories/native-panner-node-factory":"AtzW","./factories/native-panner-node-faker-factory":"ReCR","./factories/native-periodic-wave-factory":"wGSc","./factories/native-script-processor-node-factory":"cAbK","./factories/native-stereo-panner-node-factory":"C1t6","./factories/native-stereo-panner-node-faker-factory":"JtRY","./factories/native-wave-shaper-node-factory":"lZAn","./factories/native-wave-shaper-node-faker-factory":"h8Xk","./factories/not-supported-error":"yDdo","./factories/offline-audio-context-constructor":"Fmb1","./factories/oscillator-node-constructor":"Aj0U","./factories/oscillator-node-renderer-factory":"exBd","./factories/panner-node-constructor":"aszg","./factories/panner-node-renderer-factory":"nOxE","./factories/periodic-wave-constructor":"ZNz9","./factories/render-automation":"VBtQ","./factories/render-inputs-of-audio-node":"Oa6I","./factories/render-inputs-of-audio-param":"gmlP","./factories/render-native-offline-audio-context":"mihs","./factories/start-rendering":"gM0S","./factories/stereo-panner-node-constructor":"zZNf","./factories/stereo-panner-node-renderer-factory":"yxux","./factories/test-audio-buffer-constructor-support":"VRTf","./factories/test-audio-buffer-copy-channel-methods-subarray-support":"OWIt","./factories/test-audio-buffer-source-node-start-method-consecutive-calls-support":"TwZP","./factories/test-audio-buffer-source-node-start-method-duration-parameter-support":"q8Ha","./factories/test-audio-buffer-source-node-start-method-offset-clamping-support":"C089","./factories/test-audio-buffer-source-node-stop-method-nullified-buffer-support":"lzqJ","./factories/test-audio-context-close-method-support":"gSwb","./factories/test-audio-context-decode-audio-data-method-type-error-support":"m4t9","./factories/test-audio-context-options-support":"XWjD","./factories/test-audio-node-connect-method-support":"PvzL","./factories/test-audio-scheduled-source-node-start-method-negative-parameters-support":"dYKx","./factories/test-audio-scheduled-source-node-stop-method-consecutive-calls-support":"G63M","./factories/test-audio-scheduled-source-node-stop-method-negative-parameters-support":"CdrG","./factories/test-audio-worklet-processor-no-outputs-support":"rYmm","./factories/test-channel-merger-node-channel-count-support":"nKUo","./factories/test-constant-source-node-accurate-scheduling-support":"joZr","./factories/test-convolver-node-buffer-reassignability-support":"gqEZ","./factories/test-is-secure-context-support":"Ym5F","./factories/test-media-stream-audio-source-node-media-stream-without-audio-track-support":"PsOL","./factories/test-offline-audio-context-current-time-support":"fYx1","./factories/test-stereo-panner-node-default-value-support":"Y9bB","./factories/unknown-error":"jksn","./factories/wave-shaper-node-constructor":"lvCH","./factories/wave-shaper-node-renderer-factory":"RK7x","./factories/window":"muD2","./factories/wrap-audio-buffer-copy-channel-methods":"cOfP","./factories/wrap-audio-buffer-copy-channel-methods-out-of-bounds":"AKxm","./factories/wrap-audio-buffer-source-node-stop-method-nullified-buffer":"kTzv","./factories/wrap-audio-scheduled-source-node-stop-method-consecutive-calls":"oN1i","./factories/wrap-channel-merger-node":"o1A7","./globals":"xmDf","./helpers/connect-native-audio-node-to-native-audio-node":"CtZ1","./helpers/disconnect-native-audio-node-from-native-audio-node":"N32I","./helpers/get-audio-node-connections":"tryv","./helpers/get-audio-param-connections":"KCaw","./helpers/get-native-audio-node":"zHV8","./helpers/get-native-audio-param":"LRIZ","./helpers/get-value-for-key":"uftV","./helpers/insert-element-in-set":"eD4e","./helpers/is-active-audio-node":"M3Ad","./helpers/is-dc-curve":"pK7V","./helpers/is-part-of-a-cycle":"JEss","./helpers/overwrite-accessors":"GMWE","./helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support":"dlQz","./helpers/test-promise-support":"PMLM","./helpers/test-transferables-support":"BQIB","./helpers/wrap-audio-buffer-source-node-start-method-offset-clamping":"RvmV","./helpers/wrap-event-listener":"Owgm","./interfaces/index":"g6s3","./types/index":"tTgw"}],"vCxL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.__extends=e,exports.__rest=n,exports.__decorate=o,exports.__param=a,exports.__metadata=i,exports.__awaiter=u,exports.__generator=c,exports.__exportStar=f,exports.__values=l,exports.__read=s,exports.__spread=p,exports.__spreadArrays=y,exports.__await=_,exports.__asyncGenerator=h,exports.__asyncDelegator=v,exports.__asyncValues=b,exports.__makeTemplateObject=d,exports.__importStar=w,exports.__importDefault=x,exports.__classPrivateFieldGet=m,exports.__classPrivateFieldSet=O,exports.__assign=void 0;var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};function e(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}var r=function(){return exports.__assign=r=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},r.apply(this,arguments)};function n(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(t);o<n.length;o++)e.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(t,n[o])&&(r[n[o]]=t[n[o]])}return r}function o(t,e,r,n){var o,a=arguments.length,i=a<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(t,e,r,n);else for(var u=t.length-1;u>=0;u--)(o=t[u])&&(i=(a<3?o(i):a>3?o(e,r,i):o(e,r))||i);return a>3&&i&&Object.defineProperty(e,r,i),i}function a(t,e){return function(r,n){e(r,n,t)}}function i(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,r,n){return new(r||(r=Promise))(function(o,a){function i(t){try{c(n.next(t))}catch(e){a(e)}}function u(t){try{c(n.throw(t))}catch(e){a(e)}}function c(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(i,u)}c((n=n.apply(t,e||[])).next())})}function c(t,e){var r,n,o,a,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:u(0),throw:u(1),return:u(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function u(a){return function(u){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&a[0]?n.return:a[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,a[1])).done)return o;switch(n=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,n=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===a[0]||2===a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=e.call(t,i)}catch(u){a=[6,u],n=0}finally{r=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,u])}}}function f(t,e){for(var r in t)e.hasOwnProperty(r)||(e[r]=t[r])}function l(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var r="function"==typeof Symbol&&t[Symbol.iterator];if(!r)return t;var n,o,a=r.call(t),i=[];try{for(;(void 0===e||e-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(u){o={error:u}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(o)throw o.error}}return i}function p(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}function y(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<r;e++)for(var a=arguments[e],i=0,u=a.length;i<u;i++,o++)n[o]=a[i];return n}function _(t){return this instanceof _?(this.v=t,this):new _(t)}function h(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),a=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){a.push([t,e,r,n])>1||u(t,e)})})}function u(t,e){try{(r=o[t](e)).value instanceof _?Promise.resolve(r.value.v).then(c,f):l(a[0][2],r)}catch(n){l(a[0][3],n)}var r}function c(t){u("next",t)}function f(t){u("throw",t)}function l(t,e){t(e),a.shift(),a.length&&u(a[0][0],a[0][1])}}function v(t){var e,r;return e={},n("next"),n("throw",function(t){throw t}),n("return"),e[Symbol.iterator]=function(){return this},e;function n(n,o){e[n]=t[n]?function(e){return(r=!r)?{value:_(t[n](e)),done:"return"===n}:o?o(e):e}:o}}function b(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,r=t[Symbol.asyncIterator];return r?r.call(t):(t="function"==typeof l?l(t):t[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(r){e[r]=t[r]&&function(e){return new Promise(function(n,o){(function(t,e,r,n){Promise.resolve(n).then(function(e){t({value:e,done:r})},e)})(n,o,(e=t[r](e)).done,e.value)})}}}function d(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}function m(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function O(t,e,r){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,r),r}exports.__assign=r;
},{}],"wPdo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.assert=t,exports.assertRange=r,exports.assertContextRunning=o,exports.setLogger=s,exports.log=a,exports.warn=i;var e=require("tslib");function t(e,t){if(!e)throw new Error(t)}function r(e,t,r){if(void 0===r&&(r=1/0),!(t<=e&&e<=r))throw new RangeError("Value must be within ["+t+", "+r+"], got: "+e)}function o(e){e.isOffline||"running"===e.state||i('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}var n=console;function s(e){n=e}function a(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n.log.apply(n,(0,e.__spread)(t))}function i(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];n.warn.apply(n,(0,e.__spread)(t))}
},{"tslib":"vCxL"}],"Mk3b":[function(require,module,exports) {
"use strict";function t(t){return void 0===t}function e(e){return!t(e)}function r(t){return"function"==typeof t}function n(t){return"number"==typeof t}function o(t){return"[object Object]"===Object.prototype.toString.call(t)&&t.constructor===Object}function i(t){return"boolean"==typeof t}function s(t){return Array.isArray(t)}function u(t){return"string"==typeof t}function c(t){return u(t)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(t)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.isUndef=t,exports.isDefined=e,exports.isFunction=r,exports.isNumber=n,exports.isObject=o,exports.isBoolean=i,exports.isArray=s,exports.isString=u,exports.isNote=c;
},{}],"Hgem":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.createAudioContext=r,exports.createOfflineAudioContext=n,exports.createAudioWorkletNode=s,Object.defineProperty(exports,"supported",{enumerable:!0,get:function(){return e.isSupported}}),exports.hasAudioContext=exports.theWindow=void 0;var e=require("standardized-audio-context"),t=require("../util/Debug"),o=require("../util/TypeCheck");function r(){return new e.AudioContext}function n(t,o,r){return new e.OfflineAudioContext(t,o,r)}var i="object"==typeof self?self:null;exports.theWindow=i;var u=i&&(i.hasOwnProperty("AudioContext")||i.hasOwnProperty("webkitAudioContext"));function s(r,n,i){return(0,t.assert)((0,o.isDefined)(e.AudioWorkletNode),"This node only works in a secure context (https or localhost)"),new e.AudioWorkletNode(r,n,i)}exports.hasAudioContext=u;
},{"standardized-audio-context":"ZIs7","../util/Debug":"wPdo","../util/TypeCheck":"Mk3b"}],"Eggn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Ticker=void 0;var t=function(){function t(t,e,i){this._callback=t,this._type=e,this._updateInterval=i,this._createClock()}return t.prototype._createWorker=function(){var t=new Blob(["\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  "+(1e3*this._updateInterval).toFixed(1)+";\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t"],{type:"text/javascript"}),e=URL.createObjectURL(t),i=new Worker(e);i.onmessage=this._callback.bind(this),this._worker=i},t.prototype._createTimeout=function(){var t=this;this._timeout=setTimeout(function(){t._createTimeout(),t._callback()},1e3*this._updateInterval)},t.prototype._createClock=function(){if("worker"===this._type)try{this._createWorker()}catch(t){this._type="timeout",this._createClock()}else"timeout"===this._type&&this._createTimeout()},t.prototype._disposeClock=function(){this._timeout&&(clearTimeout(this._timeout),this._timeout=0),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)},Object.defineProperty(t.prototype,"updateInterval",{get:function(){return this._updateInterval},set:function(t){this._updateInterval=Math.max(t,128/44100),"worker"===this._type&&this._worker.postMessage(Math.max(1e3*t,1))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"type",{get:function(){return this._type},set:function(t){this._disposeClock(),this._type=t,this._createClock()},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this._disposeClock()},t}();exports.Ticker=t;
},{}],"hdCa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.isAudioParam=i,exports.isAudioNode=o,exports.isOfflineAudioContext=t,exports.isAudioContext=n,exports.isAudioBuffer=r;var e=require("standardized-audio-context");function i(i){return(0,e.isAnyAudioParam)(i)}function o(i){return(0,e.isAnyAudioNode)(i)}function t(i){return(0,e.isAnyOfflineAudioContext)(i)}function n(i){return(0,e.isAnyAudioContext)(i)}function r(e){return e instanceof AudioBuffer}
},{"standardized-audio-context":"ZIs7"}],"gf59":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.deepMerge=i,exports.deepEquals=s,exports.optionsFromArguments=o,exports.getDefaultsFromInstance=u,exports.defaultArg=c,exports.omitFromObject=f;var e=require("tslib"),t=require("./AdvancedTypeCheck"),r=require("./TypeCheck");function n(e,r){return"value"===e||(0,t.isAudioParam)(r)||(0,t.isAudioNode)(r)||(0,t.isAudioBuffer)(r)}function i(t){for(var s,o,u=[],c=1;c<arguments.length;c++)u[c-1]=arguments[c];if(!u.length)return t;var f=u.shift();if((0,r.isObject)(t)&&(0,r.isObject)(f))for(var a in f)n(a,f[a])?t[a]=f[a]:(0,r.isObject)(f[a])?(t[a]||Object.assign(t,((s={})[a]={},s)),i(t[a],f[a])):Object.assign(t,((o={})[a]=f[a],o));return i.apply(void 0,(0,e.__spread)([t],u))}function s(e,t){return e.length===t.length&&e.every(function(e,r){return t[r]===e})}function o(e,t,n,s){var o;void 0===n&&(n=[]);var u={},c=Array.from(t);(0,r.isObject)(c[0])&&s&&!Reflect.has(c[0],s)&&(Object.keys(c[0]).some(function(t){return Reflect.has(e,t)})||(i(u,((o={})[s]=c[0],o)),n.splice(n.indexOf(s),1),c.shift()));if(1===c.length&&(0,r.isObject)(c[0]))i(u,c[0]);else for(var f=0;f<n.length;f++)(0,r.isDefined)(c[f])&&(u[n[f]]=c[f]);return i(e,u)}function u(e){return e.constructor.getDefaults()}function c(e,t){return(0,r.isUndef)(e)?t:e}function f(e,t){return t.forEach(function(t){Reflect.has(e,t)&&delete e[t]}),e}
},{"tslib":"vCxL","./AdvancedTypeCheck":"hdCa","./TypeCheck":"Mk3b"}],"I8Cv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tone=void 0;var e=require("tslib"),t=require("../version"),o=require("./context/AudioContext"),i=require("./util/Debug"),r=function(){function r(){this.debug=!1,this._wasDisposed=!1}return r.getDefaults=function(){return{}},r.prototype.log=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];(this.debug||o.theWindow&&this.toString()===o.theWindow.TONE_DEBUG_CLASS)&&i.log.apply(void 0,(0,e.__spread)([this],t))},r.prototype.dispose=function(){return this._wasDisposed=!0,this},Object.defineProperty(r.prototype,"disposed",{get:function(){return this._wasDisposed},enumerable:!0,configurable:!0}),r.prototype.toString=function(){return this.name},r.version=t.version,r}();exports.Tone=r;
},{"tslib":"vCxL","../version":"UR5M","./context/AudioContext":"Hgem","./util/Debug":"wPdo"}],"MP8q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GT=e,exports.GTE=r,exports.LT=n,exports.EQ=o,exports.clamp=u;var t=1e-6;function e(e,r){return e>r+t}function r(t,r){return e(t,r)||o(t,r)}function n(e,r){return e+t<r}function o(e,r){return Math.abs(e-r)<t}function u(t,e,r){return Math.max(Math.min(t,r),e)}
},{}],"Monw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Timeline=void 0;var e=require("tslib"),t=require("../Tone"),i=require("./Defaults"),r=require("./Debug"),n=require("./Math"),s=function(t){function s(){var e=t.call(this)||this;e.name="Timeline",e._timeline=[];var r=(0,i.optionsFromArguments)(s.getDefaults(),arguments,["memory"]);return e.memory=r.memory,e.increasing=r.increasing,e}return(0,e.__extends)(s,t),s.getDefaults=function(){return{memory:1/0,increasing:!1}},Object.defineProperty(s.prototype,"length",{get:function(){return this._timeline.length},enumerable:!0,configurable:!0}),s.prototype.add=function(e){if((0,r.assert)(Reflect.has(e,"time"),"Timeline: events must have a time attribute"),e.time=e.time.valueOf(),this.increasing&&this.length){var t=this._timeline[this.length-1];(0,r.assert)((0,n.GTE)(e.time,t.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(e)}else{var i=this._search(e.time);this._timeline.splice(i+1,0,e)}if(this.length>this.memory){var s=this.length-this.memory;this._timeline.splice(0,s)}return this},s.prototype.remove=function(e){var t=this._timeline.indexOf(e);return-1!==t&&this._timeline.splice(t,1),this},s.prototype.get=function(e,t){void 0===t&&(t="time");var i=this._search(e,t);return-1!==i?this._timeline[i]:null},s.prototype.peek=function(){return this._timeline[0]},s.prototype.shift=function(){return this._timeline.shift()},s.prototype.getAfter=function(e,t){void 0===t&&(t="time");var i=this._search(e,t);return i+1<this._timeline.length?this._timeline[i+1]:null},s.prototype.getBefore=function(e){var t=this._timeline.length;if(t>0&&this._timeline[t-1].time<e)return this._timeline[t-1];var i=this._search(e);return i-1>=0?this._timeline[i-1]:null},s.prototype.cancel=function(e){if(this._timeline.length>1){var t=this._search(e);if(t>=0)if((0,n.EQ)(this._timeline[t].time,e)){for(var i=t;i>=0&&(0,n.EQ)(this._timeline[i].time,e);i--)t=i;this._timeline=this._timeline.slice(0,t)}else this._timeline=this._timeline.slice(0,t+1);else this._timeline=[]}else 1===this._timeline.length&&(0,n.GTE)(this._timeline[0].time,e)&&(this._timeline=[]);return this},s.prototype.cancelBefore=function(e){var t=this._search(e);return t>=0&&(this._timeline=this._timeline.slice(t+1)),this},s.prototype.previousEvent=function(e){var t=this._timeline.indexOf(e);return t>0?this._timeline[t-1]:null},s.prototype._search=function(e,t){if(void 0===t&&(t="time"),0===this._timeline.length)return-1;var i=0,r=this._timeline.length,s=r;if(r>0&&this._timeline[r-1][t]<=e)return r-1;for(;i<s;){var h=Math.floor(i+(s-i)/2),o=this._timeline[h],l=this._timeline[h+1];if((0,n.EQ)(o[t],e)){for(var m=h;m<this._timeline.length;m++){var a=this._timeline[m];if(!(0,n.EQ)(a[t],e))break;h=m}return h}if((0,n.LT)(o[t],e)&&(0,n.GT)(l[t],e))return h;(0,n.GT)(o[t],e)?s=h:i=h+1}return-1},s.prototype._iterate=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=this._timeline.length-1),this._timeline.slice(t,i+1).forEach(e)},s.prototype.forEach=function(e){return this._iterate(e),this},s.prototype.forEachBefore=function(e,t){var i=this._search(e);return-1!==i&&this._iterate(t,0,i),this},s.prototype.forEachAfter=function(e,t){var i=this._search(e);return this._iterate(t,i+1),this},s.prototype.forEachBetween=function(e,t,i){var r=this._search(e),n=this._search(t);return-1!==r&&-1!==n?(this._timeline[r].time!==e&&(r+=1),this._timeline[n].time===t&&(n-=1),this._iterate(i,r,n)):-1===r&&this._iterate(i,0,n),this},s.prototype.forEachFrom=function(e,t){for(var i=this._search(e);i>=0&&this._timeline[i].time>=e;)i--;return this._iterate(t,i+1),this},s.prototype.forEachAtTime=function(e,t){var i=this._search(e);if(-1!==i&&(0,n.EQ)(this._timeline[i].time,e)){for(var r=i,s=i;s>=0&&(0,n.EQ)(this._timeline[s].time,e);s--)r=s;this._iterate(function(e){t(e)},r,i)}return this},s.prototype.dispose=function(){return t.prototype.dispose.call(this),this._timeline=[],this},s}(t.Tone);exports.Timeline=s;
},{"tslib":"vCxL","../Tone":"I8Cv","./Defaults":"gf59","./Debug":"wPdo","./Math":"MP8q"}],"aMdC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.onContextInit=n,exports.initializeContext=o,exports.onContextClose=r,exports.closeContext=i;var t=[];function n(n){t.push(n)}function o(n){t.forEach(function(t){return t(n)})}var e=[];function r(t){e.push(t)}function i(t){e.forEach(function(n){return n(t)})}
},{}],"UTdO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Emitter=void 0;var e=require("tslib"),t=require("../Tone"),n=require("./TypeCheck"),r=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Emitter",e}return(0,e.__extends)(r,t),r.prototype.on=function(e,t){var r=this;return e.split(/\W+/).forEach(function(e){(0,n.isUndef)(r._events)&&(r._events={}),r._events.hasOwnProperty(e)||(r._events[e]=[]),r._events[e].push(t)}),this},r.prototype.once=function(t,n){var r=this,o=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];n.apply(void 0,(0,e.__spread)(i)),r.off(t,o)};return this.on(t,o),this},r.prototype.off=function(e,t){var r=this;return e.split(/\W+/).forEach(function(o){if((0,n.isUndef)(r._events)&&(r._events={}),r._events.hasOwnProperty(e))if((0,n.isUndef)(t))r._events[e]=[];else for(var i=r._events[e],s=0;s<i.length;s++)i[s]===t&&i.splice(s,1)}),this},r.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this._events&&this._events.hasOwnProperty(e))for(var r=this._events[e].slice(0),o=0,i=r.length;o<i;o++)r[o].apply(this,t);return this},r.mixin=function(e){["on","once","off","emit"].forEach(function(t){var n=Object.getOwnPropertyDescriptor(r.prototype,t);Object.defineProperty(e.prototype,t,n)})},r.prototype.dispose=function(){return t.prototype.dispose.call(this),this._events=void 0,this},r}(t.Tone);exports.Emitter=r;
},{"tslib":"vCxL","../Tone":"I8Cv","./TypeCheck":"Mk3b"}],"t54P":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BaseContext=void 0;var e=require("tslib"),t=require("../util/Emitter"),r=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.isOffline=!1,e}return(0,e.__extends)(r,t),r}(t.Emitter);exports.BaseContext=r;
},{"tslib":"vCxL","../util/Emitter":"UTdO"}],"JkIR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Context=void 0;var t=require("tslib"),e=require("../clock/Ticker"),n=require("../util/AdvancedTypeCheck"),i=require("../util/Defaults"),r=require("../util/Timeline"),o=require("../util/TypeCheck"),a=require("./AudioContext"),c=require("./ContextInitialization"),s=require("./BaseContext"),u=require("../util/Debug"),l=function(s){function l(){var t=s.call(this)||this;t.name="Context",t._constants=new Map,t._timeouts=new r.Timeline,t._timeoutIds=0,t._initialized=!1,t.isOffline=!1,t._workletModules=new Map;var n=(0,i.optionsFromArguments)(l.getDefaults(),arguments,["context"]);return n.context?t._context=n.context:t._context=(0,a.createAudioContext)(),t._latencyHint=n.latencyHint,t.lookAhead=n.lookAhead,t._ticker=new e.Ticker(t.emit.bind(t,"tick"),n.clockSource,n.updateInterval),t.on("tick",t._timeoutLoop.bind(t)),t._context.onstatechange=function(){t.emit("statechange",t.state)},t}return(0,t.__extends)(l,s),l.getDefaults=function(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}},l.prototype.initialize=function(){return this._initialized||((0,c.initializeContext)(this),this._initialized=!0),this},l.prototype.createAnalyser=function(){return this._context.createAnalyser()},l.prototype.createOscillator=function(){return this._context.createOscillator()},l.prototype.createBufferSource=function(){return this._context.createBufferSource()},l.prototype.createBiquadFilter=function(){return this._context.createBiquadFilter()},l.prototype.createBuffer=function(t,e,n){return this._context.createBuffer(t,e,n)},l.prototype.createChannelMerger=function(t){return this._context.createChannelMerger(t)},l.prototype.createChannelSplitter=function(t){return this._context.createChannelSplitter(t)},l.prototype.createConstantSource=function(){return this._context.createConstantSource()},l.prototype.createConvolver=function(){return this._context.createConvolver()},l.prototype.createDelay=function(t){return this._context.createDelay(t)},l.prototype.createDynamicsCompressor=function(){return this._context.createDynamicsCompressor()},l.prototype.createGain=function(){return this._context.createGain()},l.prototype.createIIRFilter=function(t,e){return this._context.createIIRFilter(t,e)},l.prototype.createPanner=function(){return this._context.createPanner()},l.prototype.createPeriodicWave=function(t,e,n){return this._context.createPeriodicWave(t,e,n)},l.prototype.createStereoPanner=function(){return this._context.createStereoPanner()},l.prototype.createWaveShaper=function(){return this._context.createWaveShaper()},l.prototype.createMediaStreamSource=function(t){return(0,u.assert)((0,n.isAudioContext)(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(t)},l.prototype.createMediaStreamDestination=function(){return(0,u.assert)((0,n.isAudioContext)(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()},l.prototype.decodeAudioData=function(t){return this._context.decodeAudioData(t)},Object.defineProperty(l.prototype,"currentTime",{get:function(){return this._context.currentTime},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"state",{get:function(){return this._context.state},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"sampleRate",{get:function(){return this._context.sampleRate},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"listener",{get:function(){return this.initialize(),this._listener},set:function(t){(0,u.assert)(!this._initialized,"The listener cannot be set after initialization."),this._listener=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"transport",{get:function(){return this.initialize(),this._transport},set:function(t){(0,u.assert)(!this._initialized,"The transport cannot be set after initialization."),this._transport=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"draw",{get:function(){return this.initialize(),this._draw},set:function(t){(0,u.assert)(!this._initialized,"Draw cannot be set after initialization."),this._draw=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"destination",{get:function(){return this.initialize(),this._destination},set:function(t){(0,u.assert)(!this._initialized,"The destination cannot be set after initialization."),this._destination=t},enumerable:!0,configurable:!0}),l.prototype.createAudioWorkletNode=function(t,e){return(0,a.createAudioWorkletNode)(this.rawContext,t,e)},l.prototype.addAudioWorkletModule=function(e,n){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(t){switch(t.label){case 0:return(0,u.assert)((0,o.isDefined)(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletModules.has(n)||this._workletModules.set(n,this.rawContext.audioWorklet.addModule(e)),[4,this._workletModules.get(n)];case 1:return t.sent(),[2]}})})},l.prototype.workletsAreReady=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){var e;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return e=[],this._workletModules.forEach(function(t){return e.push(t)}),[4,Promise.all(e)];case 1:return t.sent(),[2]}})})},Object.defineProperty(l.prototype,"updateInterval",{get:function(){return this._ticker.updateInterval},set:function(t){this._ticker.updateInterval=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"clockSource",{get:function(){return this._ticker.type},set:function(t){this._ticker.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"latencyHint",{get:function(){return this._latencyHint},set:function(t){var e=0;if(this._latencyHint=t,(0,o.isString)(t))switch(t){case"interactive":e=.1;break;case"playback":e=.8;break;case"balanced":e=.25;break;case"fastest":e=.01}this.lookAhead=e,this.updateInterval=e/2},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"rawContext",{get:function(){return this._context},enumerable:!0,configurable:!0}),l.prototype.now=function(){return this._context.currentTime+this.lookAhead},l.prototype.immediate=function(){return this._context.currentTime},l.prototype.resume=function(){return"suspended"===this._context.state&&(0,n.isAudioContext)(this._context)?this._context.resume():Promise.resolve()},l.prototype.close=function(){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(t){switch(t.label){case 0:return(0,n.isAudioContext)(this._context)?[4,this._context.close()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._initialized&&(0,c.closeContext)(this),[2]}})})},l.prototype.getConstant=function(t){if(this._constants.has(t))return this._constants.get(t);for(var e=this._context.createBuffer(1,128,this._context.sampleRate),n=e.getChannelData(0),i=0;i<n.length;i++)n[i]=t;var r=this._context.createBufferSource();return r.channelCount=1,r.channelCountMode="explicit",r.buffer=e,r.loop=!0,r.start(0),this._constants.set(t,r),r},l.prototype.dispose=function(){var t=this;return s.prototype.dispose.call(this),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(function(e){return t._constants[e].disconnect()}),this},l.prototype._timeoutLoop=function(){for(var t=this.now(),e=this._timeouts.peek();this._timeouts.length&&e&&e.time<=t;)e.callback(),this._timeouts.shift(),e=this._timeouts.peek()},l.prototype.setTimeout=function(t,e){this._timeoutIds++;var n=this.now();return this._timeouts.add({callback:t,id:this._timeoutIds,time:n+e}),this._timeoutIds},l.prototype.clearTimeout=function(t){var e=this;return this._timeouts.forEach(function(n){n.id===t&&e._timeouts.remove(n)}),this},l.prototype.clearInterval=function(t){return this.clearTimeout(t)},l.prototype.setInterval=function(t,e){var n=this,i=++this._timeoutIds,r=function(){var o=n.now();n._timeouts.add({callback:function(){t(),r()},id:i,time:o+e})};return r(),i},l}(s.BaseContext);exports.Context=l;
},{"tslib":"vCxL","../clock/Ticker":"Eggn","../util/AdvancedTypeCheck":"hdCa","../util/Defaults":"gf59","../util/Timeline":"Monw","../util/TypeCheck":"Mk3b","./AudioContext":"Hgem","./ContextInitialization":"aMdC","./BaseContext":"t54P","../util/Debug":"wPdo"}],"nWbE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DummyContext=void 0;var e=require("tslib"),t=require("./BaseContext"),r=function(t){function r(){var e=null!==t&&t.apply(this,arguments)||this;return e.lookAhead=0,e.latencyHint=0,e.isOffline=!1,e}return(0,e.__extends)(r,t),r.prototype.createAnalyser=function(){return{}},r.prototype.createOscillator=function(){return{}},r.prototype.createBufferSource=function(){return{}},r.prototype.createBiquadFilter=function(){return{}},r.prototype.createBuffer=function(e,t,r){return{}},r.prototype.createChannelMerger=function(e){return{}},r.prototype.createChannelSplitter=function(e){return{}},r.prototype.createConstantSource=function(){return{}},r.prototype.createConvolver=function(){return{}},r.prototype.createDelay=function(e){return{}},r.prototype.createDynamicsCompressor=function(){return{}},r.prototype.createGain=function(){return{}},r.prototype.createIIRFilter=function(e,t){return{}},r.prototype.createPanner=function(){return{}},r.prototype.createPeriodicWave=function(e,t,r){return{}},r.prototype.createStereoPanner=function(){return{}},r.prototype.createWaveShaper=function(){return{}},r.prototype.createMediaStreamSource=function(e){return{}},r.prototype.createMediaStreamDestination=function(){return{}},r.prototype.decodeAudioData=function(e){return Promise.resolve({})},r.prototype.createAudioWorkletNode=function(e,t){return{}},Object.defineProperty(r.prototype,"rawContext",{get:function(){return{}},enumerable:!0,configurable:!0}),r.prototype.addAudioWorkletModule=function(t,r){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return[2,Promise.resolve()]})})},r.prototype.resume=function(){return Promise.resolve()},r.prototype.setTimeout=function(e,t){return 0},r.prototype.clearTimeout=function(e){return this},r.prototype.setInterval=function(e,t){return 0},r.prototype.clearInterval=function(e){return this},r.prototype.getConstant=function(e){return{}},Object.defineProperty(r.prototype,"currentTime",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"state",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"sampleRate",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"listener",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"transport",{get:function(){return{}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"draw",{get:function(){return{}},set:function(e){},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"destination",{get:function(){return{}},set:function(e){},enumerable:!0,configurable:!0}),r.prototype.now=function(){return 0},r.prototype.immediate=function(){return 0},r}(t.BaseContext);exports.DummyContext=r;
},{"tslib":"vCxL","./BaseContext":"t54P"}],"x3aV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.readOnly=r,exports.writable=t,exports.noOp=void 0;var e=require("./TypeCheck");function r(t,n){(0,e.isArray)(n)?n.forEach(function(e){return r(t,e)}):Object.defineProperty(t,n,{enumerable:!0,writable:!1})}function t(r,n){(0,e.isArray)(n)?n.forEach(function(e){return t(r,e)}):Object.defineProperty(r,n,{writable:!0})}var n=function(){};exports.noOp=n;
},{"./TypeCheck":"Mk3b"}],"GLhX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneAudioBuffer=void 0;var e=require("tslib"),r=require("../Global"),t=require("../Tone"),n=require("../util/AdvancedTypeCheck"),o=require("../util/Defaults"),a=require("../util/Interface"),i=require("../util/TypeCheck"),s=require("../util/Debug"),u=function(t){function u(){var e=t.call(this)||this;e.name="ToneAudioBuffer",e.onload=a.noOp;var r=(0,o.optionsFromArguments)(u.getDefaults(),arguments,["url","onload","onerror"]);return e.reverse=r.reverse,e.onload=r.onload,r.url&&(0,n.isAudioBuffer)(r.url)||r.url instanceof u?e.set(r.url):(0,i.isString)(r.url)&&e.load(r.url).catch(r.onerror),e}return(0,e.__extends)(u,t),u.getDefaults=function(){return{onerror:a.noOp,onload:a.noOp,reverse:!1}},Object.defineProperty(u.prototype,"sampleRate",{get:function(){return this._buffer?this._buffer.sampleRate:(0,r.getContext)().sampleRate},enumerable:!0,configurable:!0}),u.prototype.set=function(e){var r=this;return e instanceof u?e.loaded?this._buffer=e.get():e.onload=function(){r.set(e),r.onload(r)}:this._buffer=e,this._reversed&&this._reverse(),this},u.prototype.get=function(){return this._buffer},u.prototype.load=function(r){return(0,e.__awaiter)(this,void 0,void 0,function(){var t,n,o=this;return(0,e.__generator)(this,function(e){switch(e.label){case 0:t=u.load(r).then(function(e){o.set(e),o.onload(o)}),u.downloads.push(t),e.label=1;case 1:return e.trys.push([1,,3,4]),[4,t];case 2:return e.sent(),[3,4];case 3:return n=u.downloads.indexOf(t),u.downloads.splice(n,1),[7];case 4:return[2,this]}})})},u.prototype.dispose=function(){return t.prototype.dispose.call(this),this._buffer=void 0,this},u.prototype.fromArray=function(e){for(var t=(0,i.isArray)(e)&&e[0].length>0,n=t?e.length:1,o=t?e[0].length:e.length,a=(0,r.getContext)(),s=a.createBuffer(n,o,a.sampleRate),u=t||1!==n?e:[e],l=0;l<n;l++)s.copyToChannel(u[l],l);return this._buffer=s,this},u.prototype.toMono=function(e){if((0,i.isNumber)(e))this.fromArray(this.toArray(e));else{for(var r=new Float32Array(this.length),t=this.numberOfChannels,n=0;n<t;n++)for(var o=this.toArray(n),a=0;a<o.length;a++)r[a]+=o[a];r=r.map(function(e){return e/t}),this.fromArray(r)}return this},u.prototype.toArray=function(e){if((0,i.isNumber)(e))return this.getChannelData(e);if(1===this.numberOfChannels)return this.toArray(0);for(var r=[],t=0;t<this.numberOfChannels;t++)r[t]=this.getChannelData(t);return r},u.prototype.getChannelData=function(e){return this._buffer?this._buffer.getChannelData(e):new Float32Array(0)},u.prototype.slice=function(e,t){void 0===t&&(t=this.duration);var n=Math.floor(e*this.sampleRate),o=Math.floor(t*this.sampleRate);(0,s.assert)(n<o,"The start time must be less than the end time");for(var a=o-n,i=(0,r.getContext)().createBuffer(this.numberOfChannels,a,this.sampleRate),l=0;l<this.numberOfChannels;l++)i.copyToChannel(this.getChannelData(l).subarray(n,o),l);return new u(i)},u.prototype._reverse=function(){if(this.loaded)for(var e=0;e<this.numberOfChannels;e++)this.getChannelData(e).reverse();return this},Object.defineProperty(u.prototype,"loaded",{get:function(){return this.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"duration",{get:function(){return this._buffer?this._buffer.duration:0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"length",{get:function(){return this._buffer?this._buffer.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"numberOfChannels",{get:function(){return this._buffer?this._buffer.numberOfChannels:0},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"reverse",{get:function(){return this._reversed},set:function(e){this._reversed!==e&&(this._reversed=e,this._reverse())},enumerable:!0,configurable:!0}),u.fromArray=function(e){return(new u).fromArray(e)},u.fromUrl=function(r){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,(new u).load(r)];case 1:return[2,e.sent()]}})})},u.load=function(t){return(0,e.__awaiter)(this,void 0,void 0,function(){var n,o,a,i,s,l,f,h,c,d,p;return(0,e.__generator)(this,function(b){switch(b.label){case 0:if(n=t.match(/\[(.+\|?)+\]$/)){o=n[1].split("|"),a=o[0];try{for(i=(0,e.__values)(o),s=i.next();!s.done;s=i.next())if(l=s.value,u.supportsType(l)){a=l;break}}catch(y){d={error:y}}finally{try{s&&!s.done&&(p=i.return)&&p.call(i)}finally{if(d)throw d.error}}t=t.replace(n[0],a)}return f=""===u.baseUrl||u.baseUrl.endsWith("/")?u.baseUrl:u.baseUrl+"/",[4,fetch(f+t)];case 1:if(!(h=b.sent()).ok)throw new Error("could not load url: "+t);return[4,h.arrayBuffer()];case 2:return c=b.sent(),[4,(0,r.getContext)().decodeAudioData(c)];case 3:return[2,b.sent()]}})})},u.supportsType=function(e){var r=e.split("."),t=r[r.length-1];return""!==document.createElement("audio").canPlayType("audio/"+t)},u.loaded=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,Promise.resolve()];case 1:e.sent(),e.label=2;case 2:return u.downloads.length?[4,u.downloads[0]]:[3,4];case 3:return e.sent(),[3,2];case 4:return[2]}})})},u.baseUrl="",u.downloads=[],u}(t.Tone);exports.ToneAudioBuffer=u;
},{"tslib":"vCxL","../Global":"k68Y","../Tone":"I8Cv","../util/AdvancedTypeCheck":"hdCa","../util/Defaults":"gf59","../util/Interface":"x3aV","../util/TypeCheck":"Mk3b","../util/Debug":"wPdo"}],"IbG8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OfflineContext=void 0;var e=require("tslib"),t=require("../context/AudioContext"),r=require("../context/Context"),n=require("../util/AdvancedTypeCheck"),i=require("./ToneAudioBuffer"),o=function(r){function o(){var e=r.call(this,{clockSource:"offline",context:(0,n.isOfflineAudioContext)(arguments[0])?arguments[0]:(0,t.createOfflineAudioContext)(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:(0,n.isOfflineAudioContext)(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]})||this;return e.name="OfflineContext",e._currentTime=0,e.isOffline=!0,e._duration=(0,n.isOfflineAudioContext)(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1],e}return(0,e.__extends)(o,r),o.prototype.now=function(){return this._currentTime},Object.defineProperty(o.prototype,"currentTime",{get:function(){return this._currentTime},enumerable:!0,configurable:!0}),o.prototype._renderClock=function(t){return(0,e.__awaiter)(this,void 0,void 0,function(){var r,n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:r=0,e.label=1;case 1:return this._duration-this._currentTime>=0?(this.emit("tick"),this._currentTime+=128/this.sampleRate,r++,n=Math.floor(this.sampleRate/128),t&&r%n==0?[4,new Promise(function(e){return setTimeout(e,1)})]:[3,3]):[3,4];case 2:e.sent(),e.label=3;case 3:return[3,1];case 4:return[2]}})})},o.prototype.render=function(t){return void 0===t&&(t=!0),(0,e.__awaiter)(this,void 0,void 0,function(){var r;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,this.workletsAreReady()];case 1:return e.sent(),[4,this._renderClock(t)];case 2:return e.sent(),[4,this._context.startRendering()];case 3:return r=e.sent(),[2,new i.ToneAudioBuffer(r)]}})})},o.prototype.close=function(){return Promise.resolve()},o}(r.Context);exports.OfflineContext=o;
},{"tslib":"vCxL","../context/AudioContext":"Hgem","../context/Context":"JkIR","../util/AdvancedTypeCheck":"hdCa","./ToneAudioBuffer":"GLhX"}],"k68Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getContext=s,exports.setContext=c,exports.start=C;var e=require("../version"),t=require("./context/AudioContext"),n=require("./context/Context"),o=require("./context/DummyContext"),r=require("./context/OfflineContext"),i=require("./util/AdvancedTypeCheck"),u=new o.DummyContext,x=u;function s(){return x===u&&t.hasAudioContext&&c(new n.Context),x}function c(e){x=(0,i.isAudioContext)(e)?new n.Context(e):(0,i.isOfflineAudioContext)(e)?new r.OfflineContext(e):e}function C(){return x.resume()}if(t.theWindow&&!t.theWindow.TONE_SILENCE_LOGGING){var f="v";"dev"===e.version&&(f="");var d=" * Tone.js "+f+e.version+" * ";console.log("%c"+d,"background: #000; color: #fff")}
},{"../version":"UR5M","./context/AudioContext":"Hgem","./context/Context":"JkIR","./context/DummyContext":"nWbE","./context/OfflineContext":"IbG8","./util/AdvancedTypeCheck":"hdCa"}],"o1kW":[function(require,module,exports) {
"use strict";function t(t){var o=.5*Math.PI;return Math.sin(t*o)}function o(t){return Math.pow(10,t/20)}function r(t){return Math.log(t)/Math.LN10*20}function e(t){return Math.pow(2,t/12)}Object.defineProperty(exports,"__esModule",{value:!0}),exports.equalPowerScale=t,exports.dbToGain=o,exports.gainToDb=r,exports.intervalToFrequencyRatio=e,exports.getA4=u,exports.setA4=a,exports.ftom=i,exports.ftomf=s,exports.mtof=f;var n=440;function u(){return n}function a(t){n=t}function i(t){return Math.round(s(t))}function s(t){return 69+12*Math.log2(t/n)}function f(t){return n*Math.pow(2,(t-69)/12)}
},{}],"x9JK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TimeBaseClass=void 0;var t=require("tslib"),e=require("../Tone"),s=require("../util/TypeCheck"),i=function(e){function i(t,s,i){var n=e.call(this)||this;return n.defaultUnits="s",n._val=s,n._units=i,n.context=t,n._expressions=n._getExpressions(),n}return(0,t.__extends)(i,e),i.prototype._getExpressions=function(){var t=this;return{hz:{method:function(e){return t._frequencyToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:function(e){return t._ticksToUnits(parseInt(e,10))},regexp:/^(\d+)i$/i},m:{method:function(e){return t._beatsToUnits(parseInt(e,10)*t._getTimeSignature())},regexp:/^(\d+)m$/i},n:{method:function(e,s){var i=parseInt(e,10),n="."===s?1.5:1;return 1===i?t._beatsToUnits(t._getTimeSignature())*n:t._beatsToUnits(4/i)*n},regexp:/^(\d+)n(\.?)$/i},number:{method:function(e){return t._expressions[t.defaultUnits].method.call(t,e)},regexp:/^(\d+(?:\.\d+)?)$/},s:{method:function(e){return t._secondsToUnits(parseFloat(e))},regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:function(e){return parseInt(e,10)/t.context.sampleRate},regexp:/^(\d+)samples$/},t:{method:function(e){var s=parseInt(e,10);return t._beatsToUnits(8/(3*Math.floor(s)))},regexp:/^(\d+)t$/i},tr:{method:function(e,s,i){var n=0;return e&&"0"!==e&&(n+=t._beatsToUnits(t._getTimeSignature()*parseFloat(e))),s&&"0"!==s&&(n+=t._beatsToUnits(parseFloat(s))),i&&"0"!==i&&(n+=t._beatsToUnits(parseFloat(i)/4)),n},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}},i.prototype.valueOf=function(){if(this._val instanceof i&&this.fromType(this._val),(0,s.isUndef)(this._val))return this._noArg();if((0,s.isString)(this._val)&&(0,s.isUndef)(this._units)){for(var t in this._expressions)if(this._expressions[t].regexp.test(this._val.trim())){this._units=t;break}}else if((0,s.isObject)(this._val)){var e=0;for(var n in this._val)if((0,s.isDefined)(this._val[n])){var r=this._val[n];e+=new this.constructor(this.context,n).valueOf()*r}return e}if((0,s.isDefined)(this._units)){var o=this._expressions[this._units],a=this._val.toString().trim().match(o.regexp);return a?o.method.apply(this,a.slice(1)):o.method.call(this,this._val)}return(0,s.isString)(this._val)?parseFloat(this._val):this._val},i.prototype._frequencyToUnits=function(t){return 1/t},i.prototype._beatsToUnits=function(t){return 60/this._getBpm()*t},i.prototype._secondsToUnits=function(t){return t},i.prototype._ticksToUnits=function(t){return t*this._beatsToUnits(1)/this._getPPQ()},i.prototype._noArg=function(){return this._now()},i.prototype._getBpm=function(){return this.context.transport.bpm.value},i.prototype._getTimeSignature=function(){return this.context.transport.timeSignature},i.prototype._getPPQ=function(){return this.context.transport.PPQ},i.prototype.fromType=function(t){switch(this._units=void 0,this.defaultUnits){case"s":this._val=t.toSeconds();break;case"i":this._val=t.toTicks();break;case"hz":this._val=t.toFrequency();break;case"midi":this._val=t.toMidi()}return this},i.prototype.toFrequency=function(){return 1/this.toSeconds()},i.prototype.toSamples=function(){return this.toSeconds()*this.context.sampleRate},i.prototype.toMilliseconds=function(){return 1e3*this.toSeconds()},i}(e.Tone);exports.TimeBaseClass=i;
},{"tslib":"vCxL","../Tone":"I8Cv","../util/TypeCheck":"Mk3b"}],"jmTw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Time=s,exports.TimeClass=void 0;var t=require("tslib"),e=require("../Global"),o=require("./Conversions"),n=require("./TimeBase"),r=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="TimeClass",t}return(0,t.__extends)(n,e),n.prototype._getExpressions=function(){var t=this;return Object.assign(e.prototype._getExpressions.call(this),{now:{method:function(e){return t._now()+new t.constructor(t.context,e).valueOf()},regexp:/^\+(.+)/},quantize:{method:function(e){var o=new n(t.context,e).valueOf();return t._secondsToUnits(t.context.transport.nextSubdivision(o))},regexp:/^@(.+)/}})},n.prototype.quantize=function(t,e){void 0===e&&(e=1);var o=new this.constructor(this.context,t).valueOf(),n=this.valueOf();return n+(Math.round(n/o)*o-n)*e},n.prototype.toNotation=function(){for(var t=this,e=this.toSeconds(),o=["1m"],r=1;r<9;r++){var s=Math.pow(2,r);o.push(s+"n."),o.push(s+"n"),o.push(s+"t")}o.push("0");var i=o[0],a=new n(this.context,o[0]).toSeconds();return o.forEach(function(o){var r=new n(t.context,o).toSeconds();Math.abs(r-e)<Math.abs(a-e)&&(i=o,a=r)}),i},n.prototype.toBarsBeatsSixteenths=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;e=parseFloat(e.toFixed(4));var o=Math.floor(e/this._getTimeSignature()),n=e%1*4;e=Math.floor(e)%this._getTimeSignature();var r=n.toString();return r.length>3&&(n=parseFloat(parseFloat(r).toFixed(3))),[o,e,n].join(":")},n.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.round(e*this._getPPQ())},n.prototype.toSeconds=function(){return this.valueOf()},n.prototype.toMidi=function(){return(0,o.ftom)(this.toFrequency())},n.prototype._now=function(){return this.context.now()},n}(n.TimeBaseClass);function s(t,o){return new r((0,e.getContext)(),t,o)}exports.TimeClass=r;
},{"tslib":"vCxL","../Global":"k68Y","./Conversions":"o1kW","./TimeBase":"x9JK"}],"wJLn":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Frequency=u,exports.FrequencyClass=void 0;var t=require("tslib"),e=require("../Global"),o=require("./Conversions"),n=require("./Time"),r=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="Frequency",t.defaultUnits="hz",t}return(0,t.__extends)(n,e),Object.defineProperty(n,"A4",{get:function(){return(0,o.getA4)()},set:function(t){(0,o.setA4)(t)},enumerable:!0,configurable:!0}),n.prototype._getExpressions=function(){return Object.assign({},e.prototype._getExpressions.call(this),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method:function(t){return"midi"===this.defaultUnits?t:n.mtof(t)}},note:{regexp:/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i,method:function(t,e){var o=i[t.toLowerCase()]+12*(parseInt(e,10)+1);return"midi"===this.defaultUnits?o:n.mtof(o)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method:function(t,e,o){var n=1;return t&&"0"!==t&&(n*=this._beatsToUnits(this._getTimeSignature()*parseFloat(t))),e&&"0"!==e&&(n*=this._beatsToUnits(parseFloat(e))),o&&"0"!==o&&(n*=this._beatsToUnits(parseFloat(o)/4)),n}}})},n.prototype.transpose=function(t){return new n(this.context,this.valueOf()*(0,o.intervalToFrequencyRatio)(t))},n.prototype.harmonize=function(t){var e=this;return t.map(function(t){return e.transpose(t)})},n.prototype.toMidi=function(){return(0,o.ftom)(this.valueOf())},n.prototype.toNote=function(){var t=this.toFrequency(),e=Math.log2(t/n.A4),o=Math.round(12*e)+57,r=Math.floor(o/12);return r<0&&(o+=-12*r),s[o%12]+r.toString()},n.prototype.toSeconds=function(){return 1/e.prototype.toSeconds.call(this)},n.prototype.toTicks=function(){var t=this._beatsToUnits(1),e=this.valueOf()/t;return Math.floor(e*this._getPPQ())},n.prototype._noArg=function(){return 0},n.prototype._frequencyToUnits=function(t){return t},n.prototype._ticksToUnits=function(t){return 1/(60*t/(this._getBpm()*this._getPPQ()))},n.prototype._beatsToUnits=function(t){return 1/e.prototype._beatsToUnits.call(this,t)},n.prototype._secondsToUnits=function(t){return 1/t},n.mtof=function(t){return(0,o.mtof)(t)},n.ftom=function(t){return(0,o.ftom)(t)},n}(n.TimeClass);exports.FrequencyClass=r;var i={cbb:-2,cb:-1,c:0,"c#":1,cx:2,dbb:0,db:1,d:2,"d#":3,dx:4,ebb:2,eb:3,e:4,"e#":5,ex:6,fbb:3,fb:4,f:5,"f#":6,fx:7,gbb:5,gb:6,g:7,"g#":8,gx:9,abb:7,ab:8,a:9,"a#":10,ax:11,bbb:9,bb:10,b:11,"b#":12,bx:13},s=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];function u(t,o){return new r((0,e.getContext)(),t,o)}
},{"tslib":"vCxL","../Global":"k68Y","./Conversions":"o1kW","./Time":"jmTw"}],"PZqX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransportTime=s,exports.TransportTimeClass=void 0;var e=require("tslib"),r=require("../Global"),t=require("./Time"),n=function(r){function t(){var e=null!==r&&r.apply(this,arguments)||this;return e.name="TransportTime",e}return(0,e.__extends)(t,r),t.prototype._now=function(){return this.context.transport.seconds},t}(t.TimeClass);function s(e,t){return new n((0,r.getContext)(),e,t)}exports.TransportTimeClass=n;
},{"tslib":"vCxL","../Global":"k68Y","./Time":"jmTw"}],"u8pw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneWithContext=void 0;var e=require("tslib"),t=require("../Global"),n=require("../Tone"),r=require("../type/Frequency"),o=require("../type/Time"),i=require("../type/TransportTime"),s=require("../util/Defaults"),u=require("../util/TypeCheck"),c=function(n){function c(){var e=n.call(this)||this,t=(0,s.optionsFromArguments)(c.getDefaults(),arguments,["context"]);return e.defaultContext?e.context=e.defaultContext:e.context=t.context,e}return(0,e.__extends)(c,n),c.getDefaults=function(){return{context:(0,t.getContext)()}},c.prototype.now=function(){return this.context.currentTime+this.context.lookAhead},c.prototype.immediate=function(){return this.context.currentTime},Object.defineProperty(c.prototype,"sampleTime",{get:function(){return 1/this.context.sampleRate},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"blockTime",{get:function(){return 128/this.context.sampleRate},enumerable:!0,configurable:!0}),c.prototype.toSeconds=function(e){return new o.TimeClass(this.context,e).toSeconds()},c.prototype.toFrequency=function(e){return new r.FrequencyClass(this.context,e).toFrequency()},c.prototype.toTicks=function(e){return new i.TransportTimeClass(this.context,e).toTicks()},c.prototype._getPartialProperties=function(e){var t=this.get();return Object.keys(t).forEach(function(n){(0,u.isUndef)(e[n])&&delete t[n]}),t},c.prototype.get=function(){var e=this,t=(0,s.getDefaultsFromInstance)(this);return Object.keys(t).forEach(function(n){if(Reflect.has(e,n)){var r=e[n];(0,u.isDefined)(r)&&(0,u.isDefined)(r.value)&&(0,u.isDefined)(r.setValueAtTime)?t[n]=r.value:r instanceof c?t[n]=r._getPartialProperties(t[n]):(0,u.isArray)(r)||(0,u.isNumber)(r)||(0,u.isString)(r)||(0,u.isBoolean)(r)?t[n]=r:delete t[n]}}),t},c.prototype.set=function(e){var t=this;return Object.keys(e).forEach(function(n){Reflect.has(t,n)&&(0,u.isDefined)(t[n])&&(t[n]&&(0,u.isDefined)(t[n].value)&&(0,u.isDefined)(t[n].setValueAtTime)?t[n].value!==e[n]&&(t[n].value=e[n]):t[n]instanceof c?t[n].set(e[n]):t[n]=e[n])}),this},c}(n.Tone);exports.ToneWithContext=c;
},{"tslib":"vCxL","../Global":"k68Y","../Tone":"I8Cv","../type/Frequency":"wJLn","../type/Time":"jmTw","../type/TransportTime":"PZqX","../util/Defaults":"gf59","../util/TypeCheck":"Mk3b"}],"cTDo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StateTimeline=void 0;var t=require("tslib"),e=require("./Timeline"),i=require("./Debug"),r=function(e){function r(t){void 0===t&&(t="stopped");var i=e.call(this)||this;return i.name="StateTimeline",i._initial=t,i.setStateAtTime(i._initial,0),i}return(0,t.__extends)(r,e),r.prototype.getValueAtTime=function(t){var e=this.get(t);return null!==e?e.state:this._initial},r.prototype.setStateAtTime=function(t,e,r){return(0,i.assertRange)(e,0),this.add(Object.assign({},r,{state:t,time:e})),this},r.prototype.getLastState=function(t,e){for(var i=this._search(e);i>=0;i--){var r=this._timeline[i];if(r.state===t)return r}},r.prototype.getNextState=function(t,e){var i=this._search(e);if(-1!==i)for(var r=i;r<this._timeline.length;r++){var n=this._timeline[r];if(n.state===t)return n}},r}(e.Timeline);exports.StateTimeline=r;
},{"tslib":"vCxL","./Timeline":"Monw","./Debug":"wPdo"}],"SJab":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Param=void 0;var t=require("tslib"),e=require("../type/Conversions"),i=require("../util/AdvancedTypeCheck"),a=require("../util/Defaults"),s=require("../util/Timeline"),n=require("../util/TypeCheck"),r=require("./ToneWithContext"),o=require("../util/Math"),u=require("../util/Debug"),l=function(l){function p(){var t=l.call(this,(0,a.optionsFromArguments)(p.getDefaults(),arguments,["param","units","convert"]))||this;t.name="Param",t.overridden=!1,t._minOutput=1e-7;var e=(0,a.optionsFromArguments)(p.getDefaults(),arguments,["param","units","convert"]);for((0,u.assert)((0,n.isDefined)(e.param)&&((0,i.isAudioParam)(e.param)||e.param instanceof p),"param must be an AudioParam");!(0,i.isAudioParam)(e.param);)e.param=e.param._param;return t._swappable=!!(0,n.isDefined)(e.swappable)&&e.swappable,t._swappable?(t.input=t.context.createGain(),t._param=e.param,t.input.connect(t._param)):t._param=t.input=e.param,t._events=new s.Timeline(1e3),t._initialValue=t._param.defaultValue,t.units=e.units,t.convert=e.convert,t._minValue=e.minValue,t._maxValue=e.maxValue,(0,n.isDefined)(e.value)&&e.value!==t._toType(t._initialValue)&&t.setValueAtTime(e.value,0),t}return(0,t.__extends)(p,l),p.getDefaults=function(){return Object.assign(r.ToneWithContext.getDefaults(),{convert:!0,units:"number"})},Object.defineProperty(p.prototype,"value",{get:function(){var t=this.now();return this.getValueAtTime(t)},set:function(t){this.cancelScheduledValues(this.now()),this.setValueAtTime(t,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"minValue",{get:function(){return(0,n.isDefined)(this._minValue)?this._minValue:"time"===this.units||"frequency"===this.units||"normalRange"===this.units||"positive"===this.units||"transportTime"===this.units||"ticks"===this.units||"bpm"===this.units||"hertz"===this.units||"samples"===this.units?0:"audioRange"===this.units?-1:"decibels"===this.units?-1/0:this._param.minValue},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"maxValue",{get:function(){return(0,n.isDefined)(this._maxValue)?this._maxValue:"normalRange"===this.units||"audioRange"===this.units?1:this._param.maxValue},enumerable:!0,configurable:!0}),p.prototype._is=function(t,e){return this.units===e},p.prototype._assertRange=function(t){return(0,n.isDefined)(this.maxValue)&&(0,n.isDefined)(this.minValue)&&(0,u.assertRange)(t,this._fromType(this.minValue),this._fromType(this.maxValue)),t},p.prototype._fromType=function(t){return this.convert&&!this.overridden?this._is(t,"time")?this.toSeconds(t):this._is(t,"decibels")?(0,e.dbToGain)(t):this._is(t,"frequency")?this.toFrequency(t):t:this.overridden?0:t},p.prototype._toType=function(t){return this.convert&&"decibels"===this.units?(0,e.gainToDb)(t):t},p.prototype.setValueAtTime=function(t,e){var i=this.toSeconds(e),a=this._fromType(t);return(0,u.assert)(isFinite(a)&&isFinite(i),"Invalid argument(s) to setValueAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._assertRange(a),this.log(this.units,"setValueAtTime",t,i),this._events.add({time:i,type:"setValueAtTime",value:a}),this._param.setValueAtTime(a,i),this},p.prototype.getValueAtTime=function(t){var e=Math.max(this.toSeconds(t),0),i=this._events.getAfter(e),a=this._events.get(e),s=this._initialValue;if(null===a)s=this._initialValue;else if("setTargetAtTime"!==a.type||null!==i&&"setValueAtTime"!==i.type)if(null===i)s=a.value;else if("linearRampToValueAtTime"===i.type||"exponentialRampToValueAtTime"===i.type){var n=a.value;if("setTargetAtTime"===a.type)n=null===(r=this._events.getBefore(a.time))?this._initialValue:r.value;s="linearRampToValueAtTime"===i.type?this._linearInterpolate(a.time,n,i.time,i.value,e):this._exponentialInterpolate(a.time,n,i.time,i.value,e)}else s=a.value;else{var r,o=void 0;o=null===(r=this._events.getBefore(a.time))?this._initialValue:r.value,"setTargetAtTime"===a.type&&(s=this._exponentialApproach(a.time,o,a.value,a.constant,e))}return this._toType(s)},p.prototype.setRampPoint=function(t){t=this.toSeconds(t);var e=this.getValueAtTime(t);return this.cancelAndHoldAtTime(t),0===this._fromType(e)&&(e=this._toType(this._minOutput)),this.setValueAtTime(e,t),this},p.prototype.linearRampToValueAtTime=function(t,e){var i=this._fromType(t),a=this.toSeconds(e);return(0,u.assert)(isFinite(i)&&isFinite(a),"Invalid argument(s) to linearRampToValueAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._assertRange(i),this._events.add({time:a,type:"linearRampToValueAtTime",value:i}),this.log(this.units,"linearRampToValueAtTime",t,a),this._param.linearRampToValueAtTime(i,a),this},p.prototype.exponentialRampToValueAtTime=function(t,e){var i=this._fromType(t);i=Math.max(this._minOutput,i),this._assertRange(i);var a=this.toSeconds(e);return(0,u.assert)(isFinite(i)&&isFinite(a),"Invalid argument(s) to exponentialRampToValueAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._events.add({time:a,type:"exponentialRampToValueAtTime",value:i}),this.log(this.units,"exponentialRampToValueAtTime",t,a),this._param.exponentialRampToValueAtTime(i,a),this},p.prototype.exponentialRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialRampToValueAtTime(t,i+this.toSeconds(e)),this},p.prototype.linearRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.linearRampToValueAtTime(t,i+this.toSeconds(e)),this},p.prototype.targetRampTo=function(t,e,i){return i=this.toSeconds(i),this.setRampPoint(i),this.exponentialApproachValueAtTime(t,i,e),this},p.prototype.exponentialApproachValueAtTime=function(t,e,i){e=this.toSeconds(e),i=this.toSeconds(i);var a=Math.log(i+1)/Math.log(200);return this.setTargetAtTime(t,e,a),this.cancelAndHoldAtTime(e+.9*i),this.linearRampToValueAtTime(t,e+i),this},p.prototype.setTargetAtTime=function(t,e,i){var a=this._fromType(t);(0,u.assert)(isFinite(i)&&i>0,"timeConstant must be a number greater than 0");var s=this.toSeconds(e);return this._assertRange(a),(0,u.assert)(isFinite(a)&&isFinite(s),"Invalid argument(s) to setTargetAtTime: "+JSON.stringify(t)+", "+JSON.stringify(e)),this._events.add({constant:i,time:s,type:"setTargetAtTime",value:a}),this.log(this.units,"setTargetAtTime",t,s,i),this._param.setTargetAtTime(a,s,i),this},p.prototype.setValueCurveAtTime=function(t,e,i,a){void 0===a&&(a=1),i=this.toSeconds(i),e=this.toSeconds(e);var s=this._fromType(t[0])*a;this.setValueAtTime(this._toType(s),e);for(var n=i/(t.length-1),r=1;r<t.length;r++){var o=this._fromType(t[r])*a;this.linearRampToValueAtTime(this._toType(o),e+r*n)}return this},p.prototype.cancelScheduledValues=function(t){var e=this.toSeconds(t);return(0,u.assert)(isFinite(e),"Invalid argument to cancelScheduledValues: "+JSON.stringify(t)),this._events.cancel(e),this._param.cancelScheduledValues(e),this.log(this.units,"cancelScheduledValues",e),this},p.prototype.cancelAndHoldAtTime=function(t){var e=this.toSeconds(t),i=this._fromType(this.getValueAtTime(e));(0,u.assert)(isFinite(e),"Invalid argument to cancelAndHoldAtTime: "+JSON.stringify(t)),this.log(this.units,"cancelAndHoldAtTime",e,"value="+i);var a=this._events.get(e),s=this._events.getAfter(e);return a&&(0,o.EQ)(a.time,e)?s?(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time)):(this._param.cancelAndHoldAtTime(e),this._events.cancel(e+this.sampleTime)):s&&(this._param.cancelScheduledValues(s.time),this._events.cancel(s.time),"linearRampToValueAtTime"===s.type?this.linearRampToValueAtTime(this._toType(i),e):"exponentialRampToValueAtTime"===s.type&&this.exponentialRampToValueAtTime(this._toType(i),e)),this._events.add({time:e,type:"setValueAtTime",value:i}),this._param.setValueAtTime(i,e),this},p.prototype.rampTo=function(t,e,i){return void 0===e&&(e=.1),"frequency"===this.units||"bpm"===this.units||"decibels"===this.units?this.exponentialRampTo(t,e,i):this.linearRampTo(t,e,i),this},p.prototype.apply=function(t){var e=this.context.currentTime;t.setValueAtTime(this.getValueAtTime(e),e);var i=this._events.get(e);if(i&&"setTargetAtTime"===i.type)for(var a=this._events.getAfter(i.time),s=a?a.time:e+2,n=(s-e)/10,r=e;r<s;r+=n)t.linearRampToValueAtTime(this.getValueAtTime(r),r);return this._events.forEachAfter(this.context.currentTime,function(e){"cancelScheduledValues"===e.type?t.cancelScheduledValues(e.time):"setTargetAtTime"===e.type?t.setTargetAtTime(e.value,e.time,e.constant):t[e.type](e.value,e.time)}),this},p.prototype.setParam=function(t){(0,u.assert)(this._swappable,"The Param must be assigned as 'swappable' in the constructor");var e=this.input;return e.disconnect(this._param),this.apply(t),this._param=t,e.connect(this._param),this},p.prototype.dispose=function(){return l.prototype.dispose.call(this),this._events.dispose(),this},Object.defineProperty(p.prototype,"defaultValue",{get:function(){return this._toType(this._param.defaultValue)},enumerable:!0,configurable:!0}),p.prototype._exponentialApproach=function(t,e,i,a,s){return i+(e-i)*Math.exp(-(s-t)/a)},p.prototype._linearInterpolate=function(t,e,i,a,s){return e+(s-t)/(i-t)*(a-e)},p.prototype._exponentialInterpolate=function(t,e,i,a,s){return e*Math.pow(a/e,(s-t)/(i-t))},p}(r.ToneWithContext);exports.Param=l;
},{"tslib":"vCxL","../type/Conversions":"o1kW","../util/AdvancedTypeCheck":"hdCa","../util/Defaults":"gf59","../util/Timeline":"Monw","../util/TypeCheck":"Mk3b","./ToneWithContext":"u8pw","../util/Math":"MP8q","../util/Debug":"wPdo"}],"lGdl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connectSeries=u,exports.connect=a,exports.disconnect=c,exports.ToneAudioNode=void 0;var t=require("tslib"),n=require("../util/AdvancedTypeCheck"),e=require("../util/TypeCheck"),o=require("./Param"),i=require("./ToneWithContext"),r=require("../util/Debug"),s=function(i){function s(){var t=null!==i&&i.apply(this,arguments)||this;return t.name="ToneAudioNode",t._internalChannels=[],t}return(0,t.__extends)(s,i),Object.defineProperty(s.prototype,"numberOfInputs",{get:function(){return(0,e.isDefined)(this.input)?(0,n.isAudioParam)(this.input)||this.input instanceof o.Param?1:this.input.numberOfInputs:0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"numberOfOutputs",{get:function(){return(0,e.isDefined)(this.output)?this.output.numberOfOutputs:0},enumerable:!0,configurable:!0}),s.prototype._isAudioNode=function(t){return(0,e.isDefined)(t)&&(t instanceof s||(0,n.isAudioNode)(t))},s.prototype._getInternalNodes=function(){var t=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&t.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&t.push(this.output),t},s.prototype._setChannelProperties=function(t){this._getInternalNodes().forEach(function(n){n.channelCount=t.channelCount,n.channelCountMode=t.channelCountMode,n.channelInterpretation=t.channelInterpretation})},s.prototype._getChannelProperties=function(){var t=this._getInternalNodes();(0,r.assert)(t.length>0,"ToneAudioNode does not have any internal nodes");var n=t[0];return{channelCount:n.channelCount,channelCountMode:n.channelCountMode,channelInterpretation:n.channelInterpretation}},Object.defineProperty(s.prototype,"channelCount",{get:function(){return this._getChannelProperties().channelCount},set:function(t){var n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCount:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"channelCountMode",{get:function(){return this._getChannelProperties().channelCountMode},set:function(t){var n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelCountMode:t}))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"channelInterpretation",{get:function(){return this._getChannelProperties().channelInterpretation},set:function(t){var n=this._getChannelProperties();this._setChannelProperties(Object.assign(n,{channelInterpretation:t}))},enumerable:!0,configurable:!0}),s.prototype.connect=function(t,n,e){return void 0===n&&(n=0),void 0===e&&(e=0),a(this,t,n,e),this},s.prototype.toDestination=function(){return this.connect(this.context.destination),this},s.prototype.toMaster=function(){return(0,r.warn)("toMaster() has been renamed toDestination()"),this.toDestination()},s.prototype.disconnect=function(t,n,e){return void 0===n&&(n=0),void 0===e&&(e=0),c(this,t,n,e),this},s.prototype.chain=function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return u.apply(void 0,(0,t.__spread)([this],n)),this},s.prototype.fan=function(){for(var t=this,n=[],e=0;e<arguments.length;e++)n[e]=arguments[e];return n.forEach(function(n){return t.connect(n)}),this},s.prototype.dispose=function(){return i.prototype.dispose.call(this),(0,e.isDefined)(this.input)&&(this.input instanceof s?this.input.dispose():(0,n.isAudioNode)(this.input)&&this.input.disconnect()),(0,e.isDefined)(this.output)&&(this.output instanceof s?this.output.dispose():(0,n.isAudioNode)(this.output)&&this.output.disconnect()),this._internalChannels=[],this},s}(i.ToneWithContext);function u(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var o=t.shift();t.reduce(function(t,e){return t instanceof s?t.connect(e):(0,n.isAudioNode)(t)&&a(t,e),e},o)}function a(t,i,u,a){for(void 0===u&&(u=0),void 0===a&&(a=0),(0,r.assert)((0,e.isDefined)(t),"Cannot connect from undefined node"),(0,r.assert)((0,e.isDefined)(i),"Cannot connect to undefined node"),(i instanceof s||(0,n.isAudioNode)(i))&&(0,r.assert)(i.numberOfInputs>0,"Cannot connect to node with no inputs"),(0,r.assert)(t.numberOfOutputs>0,"Cannot connect from node with no outputs");i instanceof s||i instanceof o.Param;)(0,e.isDefined)(i.input)&&(i=i.input);for(;t instanceof s;)(0,e.isDefined)(t.output)&&(t=t.output);(0,n.isAudioParam)(i)?t.connect(i,u):t.connect(i,u,a)}function c(t,o,i,r){if(void 0===i&&(i=0),void 0===r&&(r=0),(0,e.isDefined)(o))for(;o instanceof s;)o=o.input;for(;!(0,n.isAudioNode)(t);)(0,e.isDefined)(t.output)&&(t=t.output);(0,n.isAudioParam)(o)?t.disconnect(o,i):(0,n.isAudioNode)(o)?t.disconnect(o,i,r):t.disconnect()}exports.ToneAudioNode=s;
},{"tslib":"vCxL","../util/AdvancedTypeCheck":"hdCa","../util/TypeCheck":"Mk3b","./Param":"SJab","./ToneWithContext":"u8pw","../util/Debug":"wPdo"}],"EfHt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Gain=void 0;var e=require("tslib"),t=require("../context/Param"),n=require("../util/Defaults"),i=require("../util/Interface"),a=require("./ToneAudioNode"),o=function(o){function r(){var e=o.call(this,(0,n.optionsFromArguments)(r.getDefaults(),arguments,["gain","units"]))||this;e.name="Gain",e._gainNode=e.context.createGain(),e.input=e._gainNode,e.output=e._gainNode;var a=(0,n.optionsFromArguments)(r.getDefaults(),arguments,["gain","units"]);return e.gain=new t.Param({context:e.context,convert:a.convert,param:e._gainNode.gain,units:a.units,value:a.gain,minValue:a.minValue,maxValue:a.maxValue}),(0,i.readOnly)(e,"gain"),e}return(0,e.__extends)(r,o),r.getDefaults=function(){return Object.assign(a.ToneAudioNode.getDefaults(),{convert:!0,gain:1,units:"gain"})},r.prototype.dispose=function(){return o.prototype.dispose.call(this),this._gainNode.disconnect(),this.gain.dispose(),this},r}(a.ToneAudioNode);exports.Gain=o;
},{"tslib":"vCxL","../context/Param":"SJab","../util/Defaults":"gf59","../util/Interface":"x3aV","./ToneAudioNode":"lGdl"}],"p4sk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OneShotSource=void 0;var t=require("tslib"),e=require("../core/context/Gain"),i=require("../core/context/ToneAudioNode"),o=require("../core/util/Interface"),n=require("../core/util/Debug"),s=function(s){function r(t){var i=s.call(this,t)||this;return i.onended=o.noOp,i._startTime=-1,i._stopTime=-1,i._timeout=-1,i.output=new e.Gain({context:i.context,gain:0}),i._gainNode=i.output,i.getStateAtTime=function(t){var e=this.toSeconds(t);return-1!==this._startTime&&e>=this._startTime&&(-1===this._stopTime||e<=this._stopTime)?"started":"stopped"},i._fadeIn=t.fadeIn,i._fadeOut=t.fadeOut,i._curve=t.curve,i.onended=t.onended,i}return(0,t.__extends)(r,s),r.getDefaults=function(){return Object.assign(i.ToneAudioNode.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:o.noOp})},r.prototype._startGain=function(t,e){void 0===e&&(e=1),(0,n.assert)(-1===this._startTime,"Source cannot be started more than once");var i=this.toSeconds(this._fadeIn);return this._startTime=t+i,this._startTime=Math.max(this._startTime,this.context.currentTime),i>0?(this._gainNode.gain.setValueAtTime(0,t),"linear"===this._curve?this._gainNode.gain.linearRampToValueAtTime(e,t+i):this._gainNode.gain.exponentialApproachValueAtTime(e,t,i)):this._gainNode.gain.setValueAtTime(e,t),this},r.prototype.stop=function(t){return this.log("stop",t),this._stopGain(this.toSeconds(t)),this},r.prototype._stopGain=function(t){var e=this;(0,n.assert)(-1!==this._startTime,"'start' must be called before 'stop'"),this.cancelStop();var i=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(t)+i,this._stopTime=Math.max(this._stopTime,this.context.currentTime),i>0?"linear"===this._curve?this._gainNode.gain.linearRampTo(0,i,t):this._gainNode.gain.targetRampTo(0,i,t):(this._gainNode.gain.cancelAndHoldAtTime(t),this._gainNode.gain.setValueAtTime(0,t)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(function(){var t="exponential"===e._curve?2*i:0;e._stopSource(e.now()+t),e._onended()},this._stopTime-this.context.currentTime),this},r.prototype._onended=function(){var t=this;this.onended!==o.noOp&&(this.onended(this),this.onended=o.noOp,this.context.isOffline||setTimeout(function(){return t.dispose()},1e3))},Object.defineProperty(r.prototype,"state",{get:function(){return this.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),r.prototype.cancelStop=function(){return this.log("cancelStop"),(0,n.assert)(-1!==this._startTime,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this},r.prototype.dispose=function(){return s.prototype.dispose.call(this),this._gainNode.disconnect(),this},r}(i.ToneAudioNode);exports.OneShotSource=s;
},{"tslib":"vCxL","../core/context/Gain":"EfHt","../core/context/ToneAudioNode":"lGdl","../core/util/Interface":"x3aV","../core/util/Debug":"wPdo"}],"tmPc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneConstantSource=void 0;var t=require("tslib"),e=require("../core/context/ToneAudioNode"),o=require("../core/context/Param"),s=require("../core/util/Defaults"),r=require("../source/OneShotSource"),n=function(n){function u(){var t=n.call(this,(0,s.optionsFromArguments)(u.getDefaults(),arguments,["offset"]))||this;t.name="ToneConstantSource",t._source=t.context.createConstantSource();var r=(0,s.optionsFromArguments)(u.getDefaults(),arguments,["offset"]);return(0,e.connect)(t._source,t._gainNode),t.offset=new o.Param({context:t.context,convert:r.convert,param:t._source.offset,units:r.units,value:r.offset,minValue:r.minValue,maxValue:r.maxValue}),t}return(0,t.__extends)(u,n),u.getDefaults=function(){return Object.assign(r.OneShotSource.getDefaults(),{convert:!0,offset:1,units:"number"})},u.prototype.start=function(t){var e=this.toSeconds(t);return this.log("start",e),this._startGain(e),this._source.start(e),this},u.prototype._stopSource=function(t){this._source.stop(t)},u.prototype.dispose=function(){return n.prototype.dispose.call(this),"started"===this.state&&this.stop(),this._source.disconnect(),this.offset.dispose(),this},u}(r.OneShotSource);exports.ToneConstantSource=n;
},{"tslib":"vCxL","../core/context/ToneAudioNode":"lGdl","../core/context/Param":"SJab","../core/util/Defaults":"gf59","../source/OneShotSource":"p4sk"}],"u9T1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.connectSignal=u,exports.Signal=void 0;var e=require("tslib"),t=require("../core/context/Param"),n=require("../core/context/ToneAudioNode"),r=require("../core/util/AdvancedTypeCheck"),o=require("../core/util/Defaults"),a=require("./ToneConstantSource"),i=function(t){function r(){var e=t.call(this,(0,o.optionsFromArguments)(r.getDefaults(),arguments,["value","units"]))||this;e.name="Signal",e.override=!0;var n=(0,o.optionsFromArguments)(r.getDefaults(),arguments,["value","units"]);return e.output=e._constantSource=new a.ToneConstantSource({context:e.context,convert:n.convert,offset:n.value,units:n.units,minValue:n.minValue,maxValue:n.maxValue}),e._constantSource.start(0),e.input=e._param=e._constantSource.offset,e}return(0,e.__extends)(r,t),r.getDefaults=function(){return Object.assign(n.ToneAudioNode.getDefaults(),{convert:!0,units:"number",value:0})},r.prototype.connect=function(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=0),u(this,e,t,n),this},r.prototype.dispose=function(){return t.prototype.dispose.call(this),this._param.dispose(),this._constantSource.dispose(),this},r.prototype.setValueAtTime=function(e,t){return this._param.setValueAtTime(e,t),this},r.prototype.getValueAtTime=function(e){return this._param.getValueAtTime(e)},r.prototype.setRampPoint=function(e){return this._param.setRampPoint(e),this},r.prototype.linearRampToValueAtTime=function(e,t){return this._param.linearRampToValueAtTime(e,t),this},r.prototype.exponentialRampToValueAtTime=function(e,t){return this._param.exponentialRampToValueAtTime(e,t),this},r.prototype.exponentialRampTo=function(e,t,n){return this._param.exponentialRampTo(e,t,n),this},r.prototype.linearRampTo=function(e,t,n){return this._param.linearRampTo(e,t,n),this},r.prototype.targetRampTo=function(e,t,n){return this._param.targetRampTo(e,t,n),this},r.prototype.exponentialApproachValueAtTime=function(e,t,n){return this._param.exponentialApproachValueAtTime(e,t,n),this},r.prototype.setTargetAtTime=function(e,t,n){return this._param.setTargetAtTime(e,t,n),this},r.prototype.setValueCurveAtTime=function(e,t,n,r){return this._param.setValueCurveAtTime(e,t,n,r),this},r.prototype.cancelScheduledValues=function(e){return this._param.cancelScheduledValues(e),this},r.prototype.cancelAndHoldAtTime=function(e){return this._param.cancelAndHoldAtTime(e),this},r.prototype.rampTo=function(e,t,n){return this._param.rampTo(e,t,n),this},Object.defineProperty(r.prototype,"value",{get:function(){return this._param.value},set:function(e){this._param.value=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"convert",{get:function(){return this._param.convert},set:function(e){this._param.convert=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"units",{get:function(){return this._param.units},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"overridden",{get:function(){return this._param.overridden},set:function(e){this._param.overridden=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxValue",{get:function(){return this._param.maxValue},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minValue",{get:function(){return this._param.minValue},enumerable:!0,configurable:!0}),r.prototype.apply=function(e){return this._param.apply(e),this},r}(n.ToneAudioNode);function u(e,o,a,u){(o instanceof t.Param||(0,r.isAudioParam)(o)||o instanceof i&&o.override)&&(o.cancelScheduledValues(0),o.setValueAtTime(0,0),o instanceof i&&(o.overridden=!0)),(0,n.connect)(e,o,a,u)}exports.Signal=i;
},{"tslib":"vCxL","../core/context/Param":"SJab","../core/context/ToneAudioNode":"lGdl","../core/util/AdvancedTypeCheck":"hdCa","../core/util/Defaults":"gf59","./ToneConstantSource":"tmPc"}],"UvJN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TickParam=void 0;var t=require("tslib"),e=require("../context/Param"),i=require("../util/Defaults"),s=require("../util/Timeline"),r=require("../util/TypeCheck"),n=function(n){function o(){var t=n.call(this,(0,i.optionsFromArguments)(o.getDefaults(),arguments,["value"]))||this;t.name="TickParam",t._events=new s.Timeline(1/0),t._multiplier=1;var e=(0,i.optionsFromArguments)(o.getDefaults(),arguments,["value"]);return t._multiplier=e.multiplier,t._events.cancel(0),t._events.add({ticks:0,time:0,type:"setValueAtTime",value:t._fromType(e.value)}),t.setValueAtTime(e.value,0),t}return(0,t.__extends)(o,n),o.getDefaults=function(){return Object.assign(e.Param.getDefaults(),{multiplier:1,units:"hertz",value:1})},o.prototype.setTargetAtTime=function(t,e,i){e=this.toSeconds(e),this.setRampPoint(e);for(var s=this._fromType(t),r=this._events.get(e),n=Math.round(Math.max(1/i,1)),o=0;o<=n;o++){var a=i*o+e,u=this._exponentialApproach(r.time,r.value,s,i,a);this.linearRampToValueAtTime(this._toType(u),a)}return this},o.prototype.setValueAtTime=function(t,e){var i=this.toSeconds(e);n.prototype.setValueAtTime.call(this,t,e);var s=this._events.get(i),r=this._events.previousEvent(s),o=this._getTicksUntilEvent(r,i);return s.ticks=Math.max(o,0),this},o.prototype.linearRampToValueAtTime=function(t,e){var i=this.toSeconds(e);n.prototype.linearRampToValueAtTime.call(this,t,e);var s=this._events.get(i),r=this._events.previousEvent(s),o=this._getTicksUntilEvent(r,i);return s.ticks=Math.max(o,0),this},o.prototype.exponentialRampToValueAtTime=function(t,e){e=this.toSeconds(e);for(var i=this._fromType(t),s=this._events.get(e),r=Math.round(Math.max(10*(e-s.time),1)),n=(e-s.time)/r,o=0;o<=r;o++){var a=n*o+s.time,u=this._exponentialInterpolate(s.time,s.value,e,i,a);this.linearRampToValueAtTime(this._toType(u),a)}return this},o.prototype._getTicksUntilEvent=function(t,e){if(null===t)t={ticks:0,time:0,type:"setValueAtTime",value:0};else if((0,r.isUndef)(t.ticks)){var i=this._events.previousEvent(t);t.ticks=this._getTicksUntilEvent(i,t.time)}var s=this._fromType(this.getValueAtTime(t.time)),n=this._fromType(this.getValueAtTime(e)),o=this._events.get(e);return o&&o.time===e&&"setValueAtTime"===o.type&&(n=this._fromType(this.getValueAtTime(e-this.sampleTime))),.5*(e-t.time)*(s+n)+t.ticks},o.prototype.getTicksAtTime=function(t){var e=this.toSeconds(t),i=this._events.get(e);return Math.max(this._getTicksUntilEvent(i,e),0)},o.prototype.getDurationOfTicks=function(t,e){var i=this.toSeconds(e),s=this.getTicksAtTime(e);return this.getTimeOfTick(s+t)-i},o.prototype.getTimeOfTick=function(t){var e=this._events.get(t,"ticks"),i=this._events.getAfter(t,"ticks");if(e&&e.ticks===t)return e.time;if(e&&i&&"linearRampToValueAtTime"===i.type&&e.value!==i.value){var s=this._fromType(this.getValueAtTime(e.time)),r=(this._fromType(this.getValueAtTime(i.time))-s)/(i.time-e.time),n=Math.sqrt(Math.pow(s,2)-2*r*(e.ticks-t)),o=(-s+n)/r;return(o>0?o:(-s-n)/r)+e.time}return e?0===e.value?1/0:e.time+(t-e.ticks)/e.value:t/this._initialValue},o.prototype.ticksToTime=function(t,e){return this.getDurationOfTicks(t,e)},o.prototype.timeToTicks=function(t,e){var i=this.toSeconds(e),s=this.toSeconds(t),r=this.getTicksAtTime(i);return this.getTicksAtTime(i+s)-r},o.prototype._fromType=function(t){return"bpm"===this.units&&this.multiplier?1/(60/t/this.multiplier):n.prototype._fromType.call(this,t)},o.prototype._toType=function(t){return"bpm"===this.units&&this.multiplier?t/this.multiplier*60:n.prototype._toType.call(this,t)},Object.defineProperty(o.prototype,"multiplier",{get:function(){return this._multiplier},set:function(t){var e=this.value;this._multiplier=t,this.cancelScheduledValues(0),this.setValueAtTime(e,0)},enumerable:!0,configurable:!0}),o}(e.Param);exports.TickParam=n;
},{"tslib":"vCxL","../context/Param":"SJab","../util/Defaults":"gf59","../util/Timeline":"Monw","../util/TypeCheck":"Mk3b"}],"vMNw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TickSignal=void 0;var t=require("tslib"),e=require("../../signal/Signal"),i=require("../util/Defaults"),r=require("./TickParam"),n=function(n){function o(){var t=n.call(this,(0,i.optionsFromArguments)(o.getDefaults(),arguments,["value"]))||this;t.name="TickSignal";var e=(0,i.optionsFromArguments)(o.getDefaults(),arguments,["value"]);return t.input=t._param=new r.TickParam({context:t.context,convert:e.convert,multiplier:e.multiplier,param:t._constantSource.offset,units:e.units,value:e.value}),t}return(0,t.__extends)(o,n),o.getDefaults=function(){return Object.assign(e.Signal.getDefaults(),{multiplier:1,units:"hertz",value:1})},o.prototype.ticksToTime=function(t,e){return this._param.ticksToTime(t,e)},o.prototype.timeToTicks=function(t,e){return this._param.timeToTicks(t,e)},o.prototype.getTimeOfTick=function(t){return this._param.getTimeOfTick(t)},o.prototype.getDurationOfTicks=function(t,e){return this._param.getDurationOfTicks(t,e)},o.prototype.getTicksAtTime=function(t){return this._param.getTicksAtTime(t)},Object.defineProperty(o.prototype,"multiplier",{get:function(){return this._param.multiplier},set:function(t){this._param.multiplier=t},enumerable:!0,configurable:!0}),o.prototype.dispose=function(){return n.prototype.dispose.call(this),this._param.dispose(),this},o}(e.Signal);exports.TickSignal=n;
},{"tslib":"vCxL","../../signal/Signal":"u9T1","../util/Defaults":"gf59","./TickParam":"UvJN"}],"s1cz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TickSource=void 0;var t=require("tslib"),e=require("../context/ToneWithContext"),i=require("../util/Defaults"),s=require("../util/Interface"),r=require("../util/StateTimeline"),n=require("../util/Timeline"),a=require("../util/TypeCheck"),o=require("./TickSignal"),c=require("../util/Math"),u=function(u){function h(){var t=u.call(this,(0,i.optionsFromArguments)(h.getDefaults(),arguments,["frequency"]))||this;t.name="TickSource",t._state=new r.StateTimeline,t._tickOffset=new n.Timeline;var e=(0,i.optionsFromArguments)(h.getDefaults(),arguments,["frequency"]);return t.frequency=new o.TickSignal({context:t.context,units:e.units,value:e.frequency}),(0,s.readOnly)(t,"frequency"),t._state.setStateAtTime("stopped",0),t.setTicksAtTime(0,0),t}return(0,t.__extends)(h,u),h.getDefaults=function(){return Object.assign({frequency:1,units:"hertz"},e.ToneWithContext.getDefaults())},Object.defineProperty(h.prototype,"state",{get:function(){return this.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),h.prototype.start=function(t,e){var i=this.toSeconds(t);return"started"!==this._state.getValueAtTime(i)&&(this._state.setStateAtTime("started",i),(0,a.isDefined)(e)&&this.setTicksAtTime(e,i)),this},h.prototype.stop=function(t){var e=this.toSeconds(t);if("stopped"===this._state.getValueAtTime(e)){var i=this._state.get(e);i&&i.time>0&&(this._tickOffset.cancel(i.time),this._state.cancel(i.time))}return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this.setTicksAtTime(0,e),this},h.prototype.pause=function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&this._state.setStateAtTime("paused",e),this},h.prototype.cancel=function(t){return t=this.toSeconds(t),this._state.cancel(t),this._tickOffset.cancel(t),this},h.prototype.getTicksAtTime=function(t){var e=this,i=this.toSeconds(t),s=this._state.getLastState("stopped",i),r={state:"paused",time:i};this._state.add(r);var n=s,a=0;return this._state.forEachBetween(s.time,i+this.sampleTime,function(t){var i=n.time,s=e._tickOffset.get(t.time);s&&s.time>=n.time&&(a=s.ticks,i=s.time),"started"===n.state&&"started"!==t.state&&(a+=e.frequency.getTicksAtTime(t.time)-e.frequency.getTicksAtTime(i)),n=t}),this._state.remove(r),a},Object.defineProperty(h.prototype,"ticks",{get:function(){return this.getTicksAtTime(this.now())},set:function(t){this.setTicksAtTime(t,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(h.prototype,"seconds",{get:function(){return this.getSecondsAtTime(this.now())},set:function(t){var e=this.now(),i=this.frequency.timeToTicks(t,e);this.setTicksAtTime(i,e)},enumerable:!0,configurable:!0}),h.prototype.getSecondsAtTime=function(t){var e=this;t=this.toSeconds(t);var i=this._state.getLastState("stopped",t),s={state:"paused",time:t};this._state.add(s);var r=i,n=0;return this._state.forEachBetween(i.time,t+this.sampleTime,function(t){var i=r.time,s=e._tickOffset.get(t.time);s&&s.time>=r.time&&(n=s.seconds,i=s.time),"started"===r.state&&"started"!==t.state&&(n+=t.time-i),r=t}),this._state.remove(s),n},h.prototype.setTicksAtTime=function(t,e){return e=this.toSeconds(e),this._tickOffset.cancel(e),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(t,e),ticks:t,time:e}),this},h.prototype.getStateAtTime=function(t){return t=this.toSeconds(t),this._state.getValueAtTime(t)},h.prototype.getTimeOfTick=function(t,e){void 0===e&&(e=this.now());var i=this._tickOffset.get(e),s=this._state.get(e),r=Math.max(i.time,s.time),n=this.frequency.getTicksAtTime(r)+t-i.ticks;return this.frequency.getTimeOfTick(n)},h.prototype.forEachTickBetween=function(t,e,i){var s=this,r=this._state.get(t);this._state.forEachBetween(t,e,function(e){r&&"started"===r.state&&"started"!==e.state&&s.forEachTickBetween(Math.max(r.time,t),e.time-s.sampleTime,i),r=e});var n=null;if(r&&"started"===r.state){var a=Math.max(r.time,t),o=this.frequency.getTicksAtTime(a),u=o-this.frequency.getTicksAtTime(r.time),h=Math.ceil(u)-u;h=(0,c.EQ)(h,1)?0:h;for(var f=this.frequency.getTimeOfTick(o+h);f<e;){try{i(f,Math.round(this.getTicksAtTime(f)))}catch(m){n=m;break}f+=this.frequency.getDurationOfTicks(1,f)}}if(n)throw n;return this},h.prototype.dispose=function(){return u.prototype.dispose.call(this),this._state.dispose(),this._tickOffset.dispose(),this.frequency.dispose(),this},h}(e.ToneWithContext);exports.TickSource=u;
},{"tslib":"vCxL","../context/ToneWithContext":"u8pw","../util/Defaults":"gf59","../util/Interface":"x3aV","../util/StateTimeline":"cTDo","../util/Timeline":"Monw","../util/TypeCheck":"Mk3b","./TickSignal":"vMNw","../util/Math":"MP8q"}],"w1LD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Clock=void 0;var t=require("tslib"),e=require("../context/ToneWithContext"),i=require("../util/Defaults"),s=require("../util/Emitter"),o=require("../util/Interface"),r=require("../util/StateTimeline"),c=require("./TickSource"),n=require("../util/Debug"),u=function(s){function u(){var t=s.call(this,(0,i.optionsFromArguments)(u.getDefaults(),arguments,["callback","frequency"]))||this;t.name="Clock",t.callback=o.noOp,t._lastUpdate=0,t._state=new r.StateTimeline("stopped"),t._boundLoop=t._loop.bind(t);var e=(0,i.optionsFromArguments)(u.getDefaults(),arguments,["callback","frequency"]);return t.callback=e.callback,t._tickSource=new c.TickSource({context:t.context,frequency:e.frequency,units:e.units}),t._lastUpdate=0,t.frequency=t._tickSource.frequency,(0,o.readOnly)(t,"frequency"),t._state.setStateAtTime("stopped",0),t.context.on("tick",t._boundLoop),t}return(0,t.__extends)(u,s),u.getDefaults=function(){return Object.assign(e.ToneWithContext.getDefaults(),{callback:o.noOp,frequency:1,units:"hertz"})},Object.defineProperty(u.prototype,"state",{get:function(){return this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),u.prototype.start=function(t,e){(0,n.assertContextRunning)(this.context);var i=this.toSeconds(t);return this.log("start",i),"started"!==this._state.getValueAtTime(i)&&(this._state.setStateAtTime("started",i),this._tickSource.start(i,e),i<this._lastUpdate&&this.emit("start",i,e)),this},u.prototype.stop=function(t){var e=this.toSeconds(t);return this.log("stop",e),this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._tickSource.stop(e),e<this._lastUpdate&&this.emit("stop",e),this},u.prototype.pause=function(t){var e=this.toSeconds(t);return"started"===this._state.getValueAtTime(e)&&(this._state.setStateAtTime("paused",e),this._tickSource.pause(e),e<this._lastUpdate&&this.emit("pause",e)),this},Object.defineProperty(u.prototype,"ticks",{get:function(){return Math.ceil(this.getTicksAtTime(this.now()))},set:function(t){this._tickSource.ticks=t},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"seconds",{get:function(){return this._tickSource.seconds},set:function(t){this._tickSource.seconds=t},enumerable:!0,configurable:!0}),u.prototype.getSecondsAtTime=function(t){return this._tickSource.getSecondsAtTime(t)},u.prototype.setTicksAtTime=function(t,e){return this._tickSource.setTicksAtTime(t,e),this},u.prototype.getTimeOfTick=function(t,e){return void 0===e&&(e=this.now()),this._tickSource.getTimeOfTick(t,e)},u.prototype.getTicksAtTime=function(t){return this._tickSource.getTicksAtTime(t)},u.prototype.nextTickTime=function(t,e){var i=this.toSeconds(e),s=this.getTicksAtTime(i);return this._tickSource.getTimeOfTick(s+t,i)},u.prototype._loop=function(){var t=this,e=this._lastUpdate,i=this.now();this._lastUpdate=i,this.log("loop",e,i),e!==i&&(this._state.forEachBetween(e,i,function(e){switch(e.state){case"started":var i=t._tickSource.getTicksAtTime(e.time);t.emit("start",e.time,i);break;case"stopped":0!==e.time&&t.emit("stop",e.time);break;case"paused":t.emit("pause",e.time)}}),this._tickSource.forEachTickBetween(e,i,function(e,i){t.callback(e,i)}))},u.prototype.getStateAtTime=function(t){var e=this.toSeconds(t);return this._state.getValueAtTime(e)},u.prototype.dispose=function(){return s.prototype.dispose.call(this),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this},u}(e.ToneWithContext);exports.Clock=u,s.Emitter.mixin(u);
},{"tslib":"vCxL","../context/ToneWithContext":"u8pw","../util/Defaults":"gf59","../util/Emitter":"UTdO","../util/Interface":"x3aV","../util/StateTimeline":"cTDo","./TickSource":"s1cz","../util/Debug":"wPdo"}],"sQFe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TimelineValue=void 0;var e=require("tslib"),i=require("./Timeline"),t=require("../Tone"),n=function(t){function n(e){var n=t.call(this)||this;return n.name="TimelineValue",n._timeline=new i.Timeline({memory:10}),n._initialValue=e,n}return(0,e.__extends)(n,t),n.prototype.set=function(e,i){return this._timeline.add({value:e,time:i}),this},n.prototype.get=function(e){var i=this._timeline.get(e);return i?i.value:this._initialValue},n}(t.Tone);exports.TimelineValue=n;
},{"tslib":"vCxL","./Timeline":"Monw","../Tone":"I8Cv"}],"H1v9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Ticks=o,exports.TicksClass=void 0;var t=require("tslib"),e=require("../Global"),r=require("./TransportTime"),n=function(e){function r(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="Ticks",t.defaultUnits="i",t}return(0,t.__extends)(r,e),r.prototype._now=function(){return this.context.transport.ticks},r.prototype._beatsToUnits=function(t){return this._getPPQ()*t},r.prototype._secondsToUnits=function(t){return Math.floor(t/(60/this._getBpm())*this._getPPQ())},r.prototype._ticksToUnits=function(t){return t},r.prototype.toTicks=function(){return this.valueOf()},r.prototype.toSeconds=function(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())},r}(r.TransportTimeClass);function o(t,r){return new n((0,e.getContext)(),t,r)}exports.TicksClass=n;
},{"tslib":"vCxL","../Global":"k68Y","./TransportTime":"PZqX"}],"UjfT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.IntervalTimeline=void 0;var t=require("tslib"),e=require("../Tone"),i=require("./TypeCheck"),r=require("./Debug"),h=function(e){function h(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="IntervalTimeline",t._root=null,t._length=0,t}return(0,t.__extends)(h,e),h.prototype.add=function(t){(0,r.assert)((0,i.isDefined)(t.time),"Events must have a time property"),(0,r.assert)((0,i.isDefined)(t.duration),"Events must have a duration parameter"),t.time=t.time.valueOf();var e=new n(t.time,t.time+t.duration,t);for(null===this._root?this._root=e:this._root.insert(e),this._length++;null!==e;)e.updateHeight(),e.updateMax(),this._rebalance(e),e=e.parent;return this},h.prototype.remove=function(e){var i,r;if(null!==this._root){var h=[];this._root.search(e.time,h);try{for(var n=(0,t.__values)(h),l=n.next();!l.done;l=n.next()){var o=l.value;if(o.event===e){this._removeNode(o),this._length--;break}}}catch(s){i={error:s}}finally{try{l&&!l.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}}return this},Object.defineProperty(h.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),h.prototype.cancel=function(t){var e=this;return this.forEachFrom(t,function(t){return e.remove(t)}),this},h.prototype._setRoot=function(t){this._root=t,null!==this._root&&(this._root.parent=null)},h.prototype._replaceNodeInParent=function(t,e){null!==t.parent?(t.isLeftChild()?t.parent.left=e:t.parent.right=e,this._rebalance(t.parent)):this._setRoot(e)},h.prototype._removeNode=function(t){if(null===t.left&&null===t.right)this._replaceNodeInParent(t,null);else if(null===t.right)this._replaceNodeInParent(t,t.left);else if(null===t.left)this._replaceNodeInParent(t,t.right);else{var e=void 0,i=null;if(t.getBalance()>0)if(null===t.left.right)(e=t.left).right=t.right,i=e;else{for(e=t.left.right;null!==e.right;)e=e.right;e.parent&&(e.parent.right=e.left,i=e.parent,e.left=t.left,e.right=t.right)}else if(null===t.right.left)(e=t.right).left=t.left,i=e;else{for(e=t.right.left;null!==e.left;)e=e.left;e.parent&&(e.parent.left=e.right,i=e.parent,e.left=t.left,e.right=t.right)}null!==t.parent?t.isLeftChild()?t.parent.left=e:t.parent.right=e:this._setRoot(e),i&&this._rebalance(i)}t.dispose()},h.prototype._rotateLeft=function(t){var e=t.parent,i=t.isLeftChild(),r=t.right;r&&(t.right=r.left,r.left=t),null!==e?i?e.left=r:e.right=r:this._setRoot(r)},h.prototype._rotateRight=function(t){var e=t.parent,i=t.isLeftChild(),r=t.left;r&&(t.left=r.right,r.right=t),null!==e?i?e.left=r:e.right=r:this._setRoot(r)},h.prototype._rebalance=function(t){var e=t.getBalance();e>1&&t.left?t.left.getBalance()<0?this._rotateLeft(t.left):this._rotateRight(t):e<-1&&t.right&&(t.right.getBalance()>0?this._rotateRight(t.right):this._rotateLeft(t))},h.prototype.get=function(t){if(null!==this._root){var e=[];if(this._root.search(t,e),e.length>0){for(var i=e[0],r=1;r<e.length;r++)e[r].low>i.low&&(i=e[r]);return i.event}}return null},h.prototype.forEach=function(t){if(null!==this._root){var e=[];this._root.traverse(function(t){return e.push(t)}),e.forEach(function(e){e.event&&t(e.event)})}return this},h.prototype.forEachAtTime=function(t,e){if(null!==this._root){var i=[];this._root.search(t,i),i.forEach(function(t){t.event&&e(t.event)})}return this},h.prototype.forEachFrom=function(t,e){if(null!==this._root){var i=[];this._root.searchAfter(t,i),i.forEach(function(t){t.event&&e(t.event)})}return this},h.prototype.dispose=function(){return e.prototype.dispose.call(this),null!==this._root&&this._root.traverse(function(t){return t.dispose()}),this._root=null,this},h}(e.Tone);exports.IntervalTimeline=h;var n=function(){function t(t,e,i){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=i,this.low=t,this.high=e,this.max=this.high}return t.prototype.insert=function(t){t.low<=this.low?null===this.left?this.left=t:this.left.insert(t):null===this.right?this.right=t:this.right.insert(t)},t.prototype.search=function(t,e){t>this.max||(null!==this.left&&this.left.search(t,e),this.low<=t&&this.high>t&&e.push(this),this.low>t||null!==this.right&&this.right.search(t,e))},t.prototype.searchAfter=function(t,e){this.low>=t&&(e.push(this),null!==this.left&&this.left.searchAfter(t,e)),null!==this.right&&this.right.searchAfter(t,e)},t.prototype.traverse=function(t){t(this),null!==this.left&&this.left.traverse(t),null!==this.right&&this.right.traverse(t)},t.prototype.updateHeight=function(){null!==this.left&&null!==this.right?this.height=Math.max(this.left.height,this.right.height)+1:null!==this.right?this.height=this.right.height+1:null!==this.left?this.height=this.left.height+1:this.height=0},t.prototype.updateMax=function(){this.max=this.high,null!==this.left&&(this.max=Math.max(this.max,this.left.max)),null!==this.right&&(this.max=Math.max(this.max,this.right.max))},t.prototype.getBalance=function(){var t=0;return null!==this.left&&null!==this.right?t=this.left.height-this.right.height:null!==this.left?t=this.left.height+1:null!==this.right&&(t=-(this.right.height+1)),t},t.prototype.isLeftChild=function(){return null!==this.parent&&this.parent.left===this},Object.defineProperty(t.prototype,"left",{get:function(){return this._left},set:function(t){this._left=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this._right},set:function(t){this._right=t,null!==t&&(t.parent=this),this.updateHeight(),this.updateMax()},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.parent=null,this._left=null,this._right=null,this.event=null},t}();
},{"tslib":"vCxL","../Tone":"I8Cv","./TypeCheck":"Mk3b","./Debug":"wPdo"}],"iCRH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransportEvent=void 0;var t=require("../util/Interface"),e=function(){function e(t,i){this.id=e._eventId++;var n=Object.assign(e.getDefaults(),i);this.transport=t,this.callback=n.callback,this._once=n.once,this.time=n.time}return e.getDefaults=function(){return{callback:t.noOp,once:!1,time:0}},e.prototype.invoke=function(t){this.callback&&(this.callback(t),this._once&&this.transport.clear(this.id))},e.prototype.dispose=function(){return this.callback=void 0,this},e._eventId=0,e}();exports.TransportEvent=e;
},{"../util/Interface":"x3aV"}],"REJY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.TransportRepeatEvent=void 0;var t=require("tslib"),e=require("../type/Ticks"),s=require("./TransportEvent"),i=function(i){function n(t,s){var r=i.call(this,t,s)||this;r._currentId=-1,r._nextId=-1,r._nextTick=r.time,r._boundRestart=r._restart.bind(r);var o=Object.assign(n.getDefaults(),s);return r.duration=new e.TicksClass(t.context,o.duration).valueOf(),r._interval=new e.TicksClass(t.context,o.interval).valueOf(),r._nextTick=o.time,r.transport.on("start",r._boundRestart),r.transport.on("loopStart",r._boundRestart),r.context=r.transport.context,r._restart(),r}return(0,t.__extends)(n,i),n.getDefaults=function(){return Object.assign({},s.TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})},n.prototype.invoke=function(t){this._createEvents(t),i.prototype.invoke.call(this,t)},n.prototype._createEvents=function(t){var s=this.transport.getTicksAtTime(t);s>=this.time&&s>=this._nextTick&&this._nextTick+this._interval<this.time+this.duration&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new e.TicksClass(this.context,this._nextTick).toSeconds()))},n.prototype._restart=function(t){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.time;var s=this.transport.getTicksAtTime(t);s>this.time&&(this._nextTick=this.time+Math.ceil((s-this.time)/this._interval)*this._interval),this._currentId=this.transport.scheduleOnce(this.invoke.bind(this),new e.TicksClass(this.context,this._nextTick).toSeconds()),this._nextTick+=this._interval,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new e.TicksClass(this.context,this._nextTick).toSeconds())},n.prototype.dispose=function(){return i.prototype.dispose.call(this),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this},n}(s.TransportEvent);exports.TransportRepeatEvent=i;
},{"tslib":"vCxL","../type/Ticks":"H1v9","./TransportEvent":"iCRH"}],"Vktw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Transport=void 0;var t=require("tslib"),e=require("../../core/type/Time"),i=require("../../core/util/TimelineValue"),n=require("../context/ContextInitialization"),o=require("../context/Gain"),s=require("../context/ToneWithContext"),r=require("../type/Ticks"),c=require("../type/TransportTime"),u=require("../util/Defaults"),a=require("../util/Emitter"),l=require("../util/Interface"),p=require("../util/IntervalTimeline"),h=require("../util/Timeline"),m=require("../util/TypeCheck"),f=require("./Clock"),d=require("./TransportEvent"),_=require("./TransportRepeatEvent"),T=function(n){function a(){var t=n.call(this,(0,u.optionsFromArguments)(a.getDefaults(),arguments))||this;t.name="Transport",t._loop=new i.TimelineValue(!1),t._loopStart=0,t._loopEnd=0,t._scheduledEvents={},t._timeline=new h.Timeline,t._repeatedEvents=new p.IntervalTimeline,t._syncedSignals=[],t._swingAmount=0;var e=(0,u.optionsFromArguments)(a.getDefaults(),arguments);return t._ppq=e.ppq,t._clock=new f.Clock({callback:t._processTick.bind(t),context:t.context,frequency:0,units:"bpm"}),t._bindClockEvents(),t.bpm=t._clock.frequency,t._clock.frequency.multiplier=e.ppq,t.bpm.setValueAtTime(e.bpm,0),(0,l.readOnly)(t,"bpm"),t._timeSignature=e.timeSignature,t._swingTicks=e.ppq/2,t}return(0,t.__extends)(a,n),a.getDefaults=function(){return Object.assign(s.ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})},a.prototype._processTick=function(t,e){if(this._swingAmount>0&&e%this._ppq!=0&&e%(2*this._swingTicks)!=0){var i=e%(2*this._swingTicks)/(2*this._swingTicks),n=Math.sin(i*Math.PI)*this._swingAmount;t+=new r.TicksClass(this.context,2*this._swingTicks/3).toSeconds()*n}this._loop.get(t)&&e>=this._loopEnd&&(this.emit("loopEnd",t),this._clock.setTicksAtTime(this._loopStart,t),e=this._loopStart,this.emit("loopStart",t,this._clock.getSecondsAtTime(t)),this.emit("loop",t)),this._timeline.forEachAtTime(e,function(e){return e.invoke(t)})},a.prototype.schedule=function(t,e){var i=new d.TransportEvent(this,{callback:t,time:new c.TransportTimeClass(this.context,e).toTicks()});return this._addEvent(i,this._timeline)},a.prototype.scheduleRepeat=function(t,i,n,o){void 0===o&&(o=1/0);var s=new _.TransportRepeatEvent(this,{callback:t,duration:new e.TimeClass(this.context,o).toTicks(),interval:new e.TimeClass(this.context,i).toTicks(),time:new c.TransportTimeClass(this.context,n).toTicks()});return this._addEvent(s,this._repeatedEvents)},a.prototype.scheduleOnce=function(t,e){var i=new d.TransportEvent(this,{callback:t,once:!0,time:new c.TransportTimeClass(this.context,e).toTicks()});return this._addEvent(i,this._timeline)},a.prototype.clear=function(t){if(this._scheduledEvents.hasOwnProperty(t)){var e=this._scheduledEvents[t.toString()];e.timeline.remove(e.event),e.event.dispose(),delete this._scheduledEvents[t.toString()]}return this},a.prototype._addEvent=function(t,e){return this._scheduledEvents[t.id.toString()]={event:t,timeline:e},e.add(t),t.id},a.prototype.cancel=function(t){var e=this;void 0===t&&(t=0);var i=this.toTicks(t);return this._timeline.forEachFrom(i,function(t){return e.clear(t.id)}),this._repeatedEvents.forEachFrom(i,function(t){return e.clear(t.id)}),this},a.prototype._bindClockEvents=function(){var t=this;this._clock.on("start",function(e,i){i=new r.TicksClass(t.context,i).toSeconds(),t.emit("start",e,i)}),this._clock.on("stop",function(e){t.emit("stop",e)}),this._clock.on("pause",function(e){t.emit("pause",e)})},Object.defineProperty(a.prototype,"state",{get:function(){return this._clock.getStateAtTime(this.now())},enumerable:!0,configurable:!0}),a.prototype.start=function(t,e){var i;return(0,m.isDefined)(e)&&(i=this.toTicks(e)),this._clock.start(t,i),this},a.prototype.stop=function(t){return this._clock.stop(t),this},a.prototype.pause=function(t){return this._clock.pause(t),this},a.prototype.toggle=function(t){return t=this.toSeconds(t),"started"!==this._clock.getStateAtTime(t)?this.start(t):this.stop(t),this},Object.defineProperty(a.prototype,"timeSignature",{get:function(){return this._timeSignature},set:function(t){(0,m.isArray)(t)&&(t=t[0]/t[1]*4),this._timeSignature=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"loopStart",{get:function(){return new e.TimeClass(this.context,this._loopStart,"i").toSeconds()},set:function(t){this._loopStart=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"loopEnd",{get:function(){return new e.TimeClass(this.context,this._loopEnd,"i").toSeconds()},set:function(t){this._loopEnd=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"loop",{get:function(){return this._loop.get(this.now())},set:function(t){this._loop.set(t,this.now())},enumerable:!0,configurable:!0}),a.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(a.prototype,"swing",{get:function(){return this._swingAmount},set:function(t){this._swingAmount=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"swingSubdivision",{get:function(){return new r.TicksClass(this.context,this._swingTicks).toNotation()},set:function(t){this._swingTicks=this.toTicks(t)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"position",{get:function(){var t=this.now(),e=this._clock.getTicksAtTime(t);return new r.TicksClass(this.context,e).toBarsBeatsSixteenths()},set:function(t){var e=this.toTicks(t);this.ticks=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"seconds",{get:function(){return this._clock.seconds},set:function(t){var e=this.now(),i=this._clock.frequency.timeToTicks(t,e);this.ticks=i},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"progress",{get:function(){if(this.loop){var t=this.now();return(this._clock.getTicksAtTime(t)-this._loopStart)/(this._loopEnd-this._loopStart)}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"ticks",{get:function(){return this._clock.ticks},set:function(t){if(this._clock.ticks!==t){var e=this.now();if("started"===this.state){var i=this._clock.getTicksAtTime(e),n=this._clock.getTimeOfTick(Math.ceil(i));this.emit("stop",n),this._clock.setTicksAtTime(t,n),this.emit("start",n,this._clock.getSecondsAtTime(n))}else this._clock.setTicksAtTime(t,e)}},enumerable:!0,configurable:!0}),a.prototype.getTicksAtTime=function(t){return Math.round(this._clock.getTicksAtTime(t))},a.prototype.getSecondsAtTime=function(t){return this._clock.getSecondsAtTime(t)},Object.defineProperty(a.prototype,"PPQ",{get:function(){return this._clock.frequency.multiplier},set:function(t){this._clock.frequency.multiplier=t},enumerable:!0,configurable:!0}),a.prototype.nextSubdivision=function(t){if(t=this.toTicks(t),"started"!==this.state)return 0;var e=this.now(),i=t-this.getTicksAtTime(e)%t;return this._clock.nextTickTime(i,e)},a.prototype.syncSignal=function(t,e){if(!e){var i=this.now();if(0!==t.getValueAtTime(i)){var n=1/(60/this.bpm.getValueAtTime(i)/this.PPQ);e=t.getValueAtTime(i)/n}else e=0}var s=new o.Gain(e);return this.bpm.connect(s),s.connect(t._param),this._syncedSignals.push({initial:t.value,ratio:s,signal:t}),t.value=0,this},a.prototype.unsyncSignal=function(t){for(var e=this._syncedSignals.length-1;e>=0;e--){var i=this._syncedSignals[e];i.signal===t&&(i.ratio.dispose(),i.signal.value=i.initial,this._syncedSignals.splice(e,1))}return this},a.prototype.dispose=function(){return n.prototype.dispose.call(this),this._clock.dispose(),(0,l.writable)(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this},a}(s.ToneWithContext);exports.Transport=T,a.Emitter.mixin(T),(0,n.onContextInit)(function(t){t.transport=new T({context:t})}),(0,n.onContextClose)(function(t){t.transport.dispose()});
},{"tslib":"vCxL","../../core/type/Time":"jmTw","../../core/util/TimelineValue":"sQFe","../context/ContextInitialization":"aMdC","../context/Gain":"EfHt","../context/ToneWithContext":"u8pw","../type/Ticks":"H1v9","../type/TransportTime":"PZqX","../util/Defaults":"gf59","../util/Emitter":"UTdO","../util/Interface":"x3aV","../util/IntervalTimeline":"UjfT","../util/Timeline":"Monw","../util/TypeCheck":"Mk3b","./Clock":"w1LD","./TransportEvent":"iCRH","./TransportRepeatEvent":"REJY"}],"Rg3p":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Delay=void 0;var e=require("tslib"),t=require("../context/Param"),a=require("../util/Defaults"),o=require("../util/Interface"),i=require("./ToneAudioNode"),r=function(r){function l(){var e=r.call(this,(0,a.optionsFromArguments)(l.getDefaults(),arguments,["delayTime","maxDelay"]))||this;e.name="Delay";var i=(0,a.optionsFromArguments)(l.getDefaults(),arguments,["delayTime","maxDelay"]),n=e.toSeconds(i.maxDelay);return e._maxDelay=Math.max(n,e.toSeconds(i.delayTime)),e._delayNode=e.input=e.output=e.context.createDelay(n),e.delayTime=new t.Param({context:e.context,param:e._delayNode.delayTime,units:"time",value:i.delayTime,minValue:0,maxValue:e.maxDelay}),(0,o.readOnly)(e,"delayTime"),e}return(0,e.__extends)(l,r),l.getDefaults=function(){return Object.assign(i.ToneAudioNode.getDefaults(),{delayTime:0,maxDelay:1})},Object.defineProperty(l.prototype,"maxDelay",{get:function(){return this._maxDelay},enumerable:!0,configurable:!0}),l.prototype.dispose=function(){return r.prototype.dispose.call(this),this._delayNode.disconnect(),this.delayTime.dispose(),this},l}(i.ToneAudioNode);exports.Delay=r;
},{"tslib":"vCxL","../context/Param":"SJab","../util/Defaults":"gf59","../util/Interface":"x3aV","./ToneAudioNode":"lGdl"}],"a0V7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Volume=void 0;var e=require("tslib"),t=require("../../core/context/Gain"),u=require("../../core/context/ToneAudioNode"),o=require("../../core/util/Defaults"),i=require("../../core/util/Interface"),n=function(n){function r(){var e=n.call(this,(0,o.optionsFromArguments)(r.getDefaults(),arguments,["volume"]))||this;e.name="Volume";var u=(0,o.optionsFromArguments)(r.getDefaults(),arguments,["volume"]);return e.input=e.output=new t.Gain({context:e.context,gain:u.volume,units:"decibels"}),e.volume=e.output.gain,(0,i.readOnly)(e,"volume"),e._unmutedVolume=u.volume,e.mute=u.mute,e}return(0,e.__extends)(r,n),r.getDefaults=function(){return Object.assign(u.ToneAudioNode.getDefaults(),{mute:!1,volume:0})},Object.defineProperty(r.prototype,"mute",{get:function(){return this.volume.value===-1/0},set:function(e){!this.mute&&e?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!e&&(this.volume.value=this._unmutedVolume)},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){return n.prototype.dispose.call(this),this.input.dispose(),this.volume.dispose(),this},r}(u.ToneAudioNode);exports.Volume=n;
},{"tslib":"vCxL","../../core/context/Gain":"EfHt","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV"}],"yAqd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Destination=void 0;var t=require("tslib"),e=require("../../component/channel/Volume"),n=require("../util/Defaults"),o=require("./ContextInitialization"),i=require("./Gain"),u=require("./ToneAudioNode"),r=function(o){function r(){var t=o.call(this,(0,n.optionsFromArguments)(r.getDefaults(),arguments))||this;t.name="Destination",t.input=new e.Volume({context:t.context}),t.output=new i.Gain({context:t.context}),t.volume=t.input.volume;var s=(0,n.optionsFromArguments)(r.getDefaults(),arguments);return(0,u.connectSeries)(t.input,t.output,t.context.rawContext.destination),t.mute=s.mute,t._internalChannels=[t.input,t.context.rawContext.destination,t.output],t}return(0,t.__extends)(r,o),r.getDefaults=function(){return Object.assign(u.ToneAudioNode.getDefaults(),{mute:!1,volume:0})},Object.defineProperty(r.prototype,"mute",{get:function(){return this.input.mute},set:function(t){this.input.mute=t},enumerable:!0,configurable:!0}),r.prototype.chain=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this.input.disconnect(),e.unshift(this.input),e.push(this.output),u.connectSeries.apply(void 0,(0,t.__spread)(e)),this},Object.defineProperty(r.prototype,"maxChannelCount",{get:function(){return this.context.rawContext.destination.maxChannelCount},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){return o.prototype.dispose.call(this),this.volume.dispose(),this},r}(u.ToneAudioNode);exports.Destination=r,(0,o.onContextInit)(function(t){t.destination=new r({context:t})}),(0,o.onContextClose)(function(t){t.destination.dispose()});
},{"tslib":"vCxL","../../component/channel/Volume":"a0V7","../util/Defaults":"gf59","./ContextInitialization":"aMdC","./Gain":"EfHt","./ToneAudioNode":"lGdl"}],"QWSZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Offline=i;var e=require("tslib"),t=require("../Global"),r=require("./OfflineContext"),n=require("./ToneAudioBuffer");function i(i,o,u,s){return void 0===u&&(u=2),void 0===s&&(s=(0,t.getContext)().sampleRate),(0,e.__awaiter)(this,void 0,void 0,function(){var f,a,l,c;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return f=(0,t.getContext)(),a=new r.OfflineContext(u,o,s),(0,t.setContext)(a),[4,i(a)];case 1:return e.sent(),l=a.render(),(0,t.setContext)(f),[4,l];case 2:return c=e.sent(),[2,new n.ToneAudioBuffer(c)]}})})}
},{"tslib":"vCxL","../Global":"k68Y","./OfflineContext":"IbG8","./ToneAudioBuffer":"GLhX"}],"Ehuq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneAudioBuffers=void 0;var e=require("tslib"),r=require("../Tone"),t=require("../util/Defaults"),o=require("../util/Interface"),n=require("../util/TypeCheck"),u=require("./ToneAudioBuffer"),i=require("../util/Debug"),s=function(r){function s(){var e=r.call(this)||this;e.name="ToneAudioBuffers",e._buffers=new Map,e._loadingCount=0;var o=(0,t.optionsFromArguments)(s.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");return e.baseUrl=o.baseUrl,Object.keys(o.urls).forEach(function(r){e._loadingCount++;var t=o.urls[r];e.add(r,t,e._bufferLoaded.bind(e,o.onload),o.onerror)}),e}return(0,e.__extends)(s,r),s.getDefaults=function(){return{baseUrl:"",onerror:o.noOp,onload:o.noOp,urls:{}}},s.prototype.has=function(e){return this._buffers.has(e.toString())},s.prototype.get=function(e){return(0,i.assert)(this.has(e),"ToneAudioBuffers has no buffer named: "+e),this._buffers.get(e.toString())},s.prototype._bufferLoaded=function(e){this._loadingCount--,0===this._loadingCount&&e&&e()},Object.defineProperty(s.prototype,"loaded",{get:function(){return Array.from(this._buffers).every(function(r){var t=(0,e.__read)(r,2);t[0];return t[1].loaded})},enumerable:!0,configurable:!0}),s.prototype.add=function(e,r,t,i){return void 0===t&&(t=o.noOp),void 0===i&&(i=o.noOp),(0,n.isString)(r)?this._buffers.set(e.toString(),new u.ToneAudioBuffer(this.baseUrl+r,t,i)):this._buffers.set(e.toString(),new u.ToneAudioBuffer(r,t,i)),this},s.prototype.dispose=function(){return r.prototype.dispose.call(this),this._buffers.forEach(function(e){return e.dispose()}),this._buffers.clear(),this},s}(r.Tone);exports.ToneAudioBuffers=s;
},{"tslib":"vCxL","../Tone":"I8Cv","../util/Defaults":"gf59","../util/Interface":"x3aV","../util/TypeCheck":"Mk3b","./ToneAudioBuffer":"GLhX","../util/Debug":"wPdo"}],"ntgo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Midi=r,exports.MidiClass=void 0;var t=require("tslib"),e=require("../Global"),o=require("./Conversions"),n=require("./Frequency"),i=function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="MidiClass",t.defaultUnits="midi",t}return(0,t.__extends)(n,e),n.prototype._frequencyToUnits=function(t){return(0,o.ftom)(e.prototype._frequencyToUnits.call(this,t))},n.prototype._ticksToUnits=function(t){return(0,o.ftom)(e.prototype._ticksToUnits.call(this,t))},n.prototype._beatsToUnits=function(t){return(0,o.ftom)(e.prototype._beatsToUnits.call(this,t))},n.prototype._secondsToUnits=function(t){return(0,o.ftom)(e.prototype._secondsToUnits.call(this,t))},n.prototype.toMidi=function(){return this.valueOf()},n.prototype.toFrequency=function(){return(0,o.mtof)(this.toMidi())},n.prototype.transpose=function(t){return new n(this.context,this.toMidi()+t)},n}(n.FrequencyClass);function r(t,o){return new i((0,e.getContext)(),t,o)}exports.MidiClass=i;
},{"tslib":"vCxL","../Global":"k68Y","./Conversions":"o1kW","./Frequency":"wJLn"}],"v6lz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Draw=void 0;var t=require("tslib"),e=require("../context/ToneWithContext"),n=require("./Timeline"),i=require("../context/ContextInitialization"),o=function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="Draw",t.expiration=.25,t.anticipation=.008,t._events=new n.Timeline,t._boundDrawLoop=t._drawLoop.bind(t),t._animationFrame=-1,t}return(0,t.__extends)(i,e),i.prototype.schedule=function(t,e){return this._events.add({callback:t,time:this.toSeconds(e)}),1===this._events.length&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this},i.prototype.cancel=function(t){return this._events.cancel(this.toSeconds(t)),this},i.prototype._drawLoop=function(){for(var t=this.context.currentTime;this._events.length&&this._events.peek().time-this.anticipation<=t;){var e=this._events.shift();e&&t-e.time<=this.expiration&&e.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))},i.prototype.dispose=function(){return e.prototype.dispose.call(this),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this},i}(e.ToneWithContext);exports.Draw=o,(0,i.onContextInit)(function(t){t.draw=new o({context:t})}),(0,i.onContextClose)(function(t){t.draw.dispose()});
},{"tslib":"vCxL","../context/ToneWithContext":"u8pw","./Timeline":"Monw","../context/ContextInitialization":"aMdC"}],"wQRE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={dbToGain:!0,gainToDb:!0,intervalToFrequencyRatio:!0,ftom:!0,mtof:!0,optionsFromArguments:!0,defaultArg:!0,Unit:!0,debug:!0};Object.defineProperty(exports,"dbToGain",{enumerable:!0,get:function(){return q.dbToGain}}),Object.defineProperty(exports,"gainToDb",{enumerable:!0,get:function(){return q.gainToDb}}),Object.defineProperty(exports,"intervalToFrequencyRatio",{enumerable:!0,get:function(){return q.intervalToFrequencyRatio}}),Object.defineProperty(exports,"ftom",{enumerable:!0,get:function(){return q.ftom}}),Object.defineProperty(exports,"mtof",{enumerable:!0,get:function(){return q.mtof}}),Object.defineProperty(exports,"optionsFromArguments",{enumerable:!0,get:function(){return k.optionsFromArguments}}),Object.defineProperty(exports,"defaultArg",{enumerable:!0,get:function(){return k.defaultArg}}),exports.debug=exports.Unit=void 0;var t=require("./clock/Clock");Object.keys(t).forEach(function(r){"default"!==r&&"__esModule"!==r&&(Object.prototype.hasOwnProperty.call(e,r)||Object.defineProperty(exports,r,{enumerable:!0,get:function(){return t[r]}}))});var r=require("./clock/Transport");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var o=require("./context/Context");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return o[t]}}))});var n=require("./context/BaseContext");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return n[t]}}))});var u=require("./context/Delay");Object.keys(u).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return u[t]}}))});var c=require("./context/Destination");Object.keys(c).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return c[t]}}))});var a=require("./context/Gain");Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return a[t]}}))});var i=require("./context/Offline");Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return i[t]}}))});var f=require("./context/OfflineContext");Object.keys(f).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return f[t]}}))});var p=require("./context/Param");Object.keys(p).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return p[t]}}))});var l=require("./context/ToneAudioBuffer");Object.keys(l).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return l[t]}}))});var s=require("./context/ToneAudioBuffers");Object.keys(s).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return s[t]}}))});var b=require("./context/ToneAudioNode");Object.keys(b).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return b[t]}}))});var y=require("./type/Frequency");Object.keys(y).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return y[t]}}))});var O=require("./type/Midi");Object.keys(O).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return O[t]}}))});var d=require("./type/Time");Object.keys(d).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return d[t]}}))});var j=require("./type/Ticks");Object.keys(j).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return j[t]}}))});var P=require("./type/TransportTime");Object.keys(P).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return P[t]}}))});var _=require("./util/Draw");Object.keys(_).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return _[t]}}))});var h=require("./util/Emitter");Object.keys(h).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return h[t]}}))});var m=require("./util/IntervalTimeline");Object.keys(m).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return m[t]}}))});var x=require("./util/StateTimeline");Object.keys(x).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return x[t]}}))});var g=require("./util/Timeline");Object.keys(g).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return g[t]}}))});var v=require("./util/TypeCheck");Object.keys(v).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return v[t]}}))});var q=require("./type/Conversions"),k=require("./util/Defaults"),w=T(require("./type/Units"));exports.Unit=w;var M=T(require("./util/Debug"));function E(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return E=function(){return e},e}function T(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=E();if(t&&t.has(e))return t.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var u=o?Object.getOwnPropertyDescriptor(e,n):null;u&&(u.get||u.set)?Object.defineProperty(r,n,u):r[n]=e[n]}return r.default=e,t&&t.set(e,r),r}exports.debug=M;
},{"./clock/Clock":"w1LD","./clock/Transport":"Vktw","./context/Context":"JkIR","./context/BaseContext":"t54P","./context/Delay":"Rg3p","./context/Destination":"yAqd","./context/Gain":"EfHt","./context/Offline":"QWSZ","./context/OfflineContext":"IbG8","./context/Param":"SJab","./context/ToneAudioBuffer":"GLhX","./context/ToneAudioBuffers":"Ehuq","./context/ToneAudioNode":"lGdl","./type/Frequency":"wJLn","./type/Midi":"ntgo","./type/Time":"jmTw","./type/Ticks":"H1v9","./type/TransportTime":"PZqX","./util/Draw":"v6lz","./util/Emitter":"UTdO","./util/IntervalTimeline":"UjfT","./util/StateTimeline":"cTDo","./util/Timeline":"Monw","./util/TypeCheck":"Mk3b","./type/Conversions":"o1kW","./util/Defaults":"gf59","./type/Units":"AQGI","./util/Debug":"wPdo"}],"RA2T":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Source=void 0;var t=require("tslib"),e=require("../component/channel/Volume");require("../core/context/Destination"),require("../core/clock/Transport");var s=require("../core/context/ToneAudioNode"),o=require("../core/util/Defaults"),n=require("../core/util/Interface"),i=require("../core/util/StateTimeline"),r=require("../core/util/TypeCheck"),a=require("../core/util/Debug"),c=require("../core/util/Math"),h=function(h){function u(t){var s=h.call(this,t)||this;return s.input=void 0,s._state=new i.StateTimeline("stopped"),s._synced=!1,s._scheduled=[],s._syncedStart=n.noOp,s._syncedStop=n.noOp,s._state.memory=100,s._state.increasing=!0,s._volume=s.output=new e.Volume({context:s.context,mute:t.mute,volume:t.volume}),s.volume=s._volume.volume,(0,n.readOnly)(s,"volume"),s.onstop=t.onstop,s}return(0,t.__extends)(u,h),u.getDefaults=function(){return Object.assign(s.ToneAudioNode.getDefaults(),{mute:!1,onstop:n.noOp,volume:0})},Object.defineProperty(u.prototype,"state",{get:function(){return this._synced?"started"===this.context.transport.state?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"mute",{get:function(){return this._volume.mute},set:function(t){this._volume.mute=t},enumerable:!0,configurable:!0}),u.prototype._clampToCurrentTime=function(t){return this._synced?t:Math.max(t,this.context.currentTime)},u.prototype.start=function(t,e,s){var n=this,i=(0,r.isUndef)(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(i=this._clampToCurrentTime(i),this._synced||"started"!==this._state.getValueAtTime(i)){if(this.log("start",i),this._state.setStateAtTime("started",i),this._synced){var h=this._state.get(i);h&&(h.offset=this.toSeconds((0,o.defaultArg)(e,0)),h.duration=s?this.toSeconds(s):void 0);var u=this.context.transport.schedule(function(t){n._start(t,e,s)},i);this._scheduled.push(u),"started"===this.context.transport.state&&this._syncedStart(this.now(),this.context.transport.seconds)}else this._start(i,e,s);(0,a.assertContextRunning)(this.context)}else(0,a.assert)((0,c.GT)(i,this._state.get(i).time),"Start time must be strictly greater than previous start time"),this._state.cancel(i),this._state.setStateAtTime("started",i),this.log("restart",i),this.restart(i,e,s);return this},u.prototype.stop=function(t){var e=(0,r.isUndef)(t)&&this._synced?this.context.transport.seconds:this.toSeconds(t);if(e=this._clampToCurrentTime(e),"started"===this._state.getValueAtTime(e)||(0,r.isDefined)(this._state.getNextState("started",e))){if(this.log("stop",e),this._synced){var s=this.context.transport.schedule(this._stop.bind(this),e);this._scheduled.push(s)}else this._stop(e);this._state.cancel(e),this._state.setStateAtTime("stopped",e)}return this},u.prototype.restart=function(t,e,s){return t=this.toSeconds(t),"started"===this._state.getValueAtTime(t)&&(this._state.cancel(t),this._restart(t,e,s)),this},u.prototype.sync=function(){var t=this;return this._synced||(this._synced=!0,this._syncedStart=function(e,s){if(s>0){var o=t._state.get(s);if(o&&"started"===o.state&&o.time!==s){var n=s-t.toSeconds(o.time),i=void 0;o.duration&&(i=t.toSeconds(o.duration)-n),t._start(e,t.toSeconds(o.offset)+n,i)}}},this._syncedStop=function(e){var s=t.context.transport.getSecondsAtTime(Math.max(e-t.sampleTime,0));"started"===t._state.getValueAtTime(s)&&t._stop(e)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this},u.prototype.unsync=function(){var t=this;return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(function(e){return t.context.transport.clear(e)}),this._scheduled=[],this._state.cancel(0),this},u.prototype.dispose=function(){return h.prototype.dispose.call(this),this.onstop=n.noOp,this.unsync(),this._volume.dispose(),this._state.dispose(),this},u}(s.ToneAudioNode);exports.Source=h;
},{"tslib":"vCxL","../component/channel/Volume":"a0V7","../core/context/Destination":"yAqd","../core/clock/Transport":"Vktw","../core/context/ToneAudioNode":"lGdl","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV","../core/util/StateTimeline":"cTDo","../core/util/TypeCheck":"Mk3b","../core/util/Debug":"wPdo","../core/util/Math":"MP8q"}],"WVku":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneBufferSource=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),o=require("../../core/context/Param"),r=require("../../core/context/ToneAudioBuffer"),n=require("../../core/util/Defaults"),u=require("../../core/util/Interface"),s=require("../../core/util/TypeCheck"),i=require("../../core/util/Debug"),c=require("../OneShotSource"),a=require("../../core/util/Math"),f=function(f){function p(){var e=f.call(this,(0,n.optionsFromArguments)(p.getDefaults(),arguments,["url","onload"]))||this;e.name="ToneBufferSource",e._source=e.context.createBufferSource(),e._internalChannels=[e._source],e._sourceStarted=!1,e._sourceStopped=!1;var u=(0,n.optionsFromArguments)(p.getDefaults(),arguments,["url","onload"]);return(0,t.connect)(e._source,e._gainNode),e._source.onended=function(){return e._stopSource()},e.playbackRate=new o.Param({context:e.context,param:e._source.playbackRate,units:"positive",value:u.playbackRate}),e.loop=u.loop,e.loopStart=u.loopStart,e.loopEnd=u.loopEnd,e._buffer=new r.ToneAudioBuffer(u.url,u.onload,u.onerror),e._internalChannels.push(e._source),e}return(0,e.__extends)(p,f),p.getDefaults=function(){return Object.assign(c.OneShotSource.getDefaults(),{url:new r.ToneAudioBuffer,loop:!1,loopEnd:0,loopStart:0,onload:u.noOp,onerror:u.noOp,playbackRate:1})},Object.defineProperty(p.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(e){this._fadeIn=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(e){this._fadeOut=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"curve",{get:function(){return this._curve},set:function(e){this._curve=e},enumerable:!0,configurable:!0}),p.prototype.start=function(e,t,o,r){void 0===r&&(r=1),(0,i.assert)(this.buffer.loaded,"buffer is either not set or not loaded");var u=this.toSeconds(e);this._startGain(u,r),t=this.loop?(0,n.defaultArg)(t,this.loopStart):(0,n.defaultArg)(t,0);var c=Math.max(this.toSeconds(t),0);if(this.loop){var f=this.toSeconds(this.loopEnd)||this.buffer.duration,p=this.toSeconds(this.loopStart),l=f-p;(0,a.GTE)(c,f)&&(c=(c-p)%l+p),(0,a.EQ)(c,this.buffer.duration)&&(c=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,(0,a.LT)(c,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(u,c)),(0,s.isDefined)(o)){var d=this.toSeconds(o);d=Math.max(d,0),this.stop(u+d)}return this},p.prototype._stopSource=function(e){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(e)),this._onended())},Object.defineProperty(p.prototype,"loopStart",{get:function(){return this._source.loopStart},set:function(e){this._source.loopStart=this.toSeconds(e)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"loopEnd",{get:function(){return this._source.loopEnd},set:function(e){this._source.loopEnd=this.toSeconds(e)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"buffer",{get:function(){return this._buffer},set:function(e){this._buffer.set(e)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"loop",{get:function(){return this._source.loop},set:function(e){this._source.loop=e,this._sourceStarted&&this.cancelStop()},enumerable:!0,configurable:!0}),p.prototype.dispose=function(){return f.prototype.dispose.call(this),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this},p}(c.OneShotSource);exports.ToneBufferSource=f;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/context/Param":"SJab","../../core/context/ToneAudioBuffer":"GLhX","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../core/util/TypeCheck":"Mk3b","../../core/util/Debug":"wPdo","../OneShotSource":"p4sk","../../core/util/Math":"MP8q"}],"TDl3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Noise=void 0;var e=require("tslib"),t=require("../core/context/ToneAudioBuffer"),r=require("../core/util/Defaults"),o=require("../core/util/Debug"),n=require("../source/Source"),i=require("./buffer/ToneBufferSource"),a=function(t){function a(){var e=t.call(this,(0,r.optionsFromArguments)(a.getDefaults(),arguments,["type"]))||this;e.name="Noise",e._source=null;var o=(0,r.optionsFromArguments)(a.getDefaults(),arguments,["type"]);return e._playbackRate=o.playbackRate,e.type=o.type,e._fadeIn=o.fadeIn,e._fadeOut=o.fadeOut,e}return(0,e.__extends)(a,t),a.getDefaults=function(){return Object.assign(n.Source.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})},Object.defineProperty(a.prototype,"type",{get:function(){return this._type},set:function(e){if((0,o.assert)(e in c,"Noise: invalid type: "+e),this._type!==e&&(this._type=e,"started"===this.state)){var t=this.now();this._stop(t),this._start(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(e){this._playbackRate=e,this._source&&(this._source.playbackRate.value=e)},enumerable:!0,configurable:!0}),a.prototype._start=function(e){var t=this,r=c[this._type];this._source=new i.ToneBufferSource({url:r,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:function(){return t.onstop(t)},playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(e),Math.random()*(r.duration-.001))},a.prototype._stop=function(e){this._source&&(this._source.stop(this.toSeconds(e)),this._source=null)},Object.defineProperty(a.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(e){this._fadeIn=e,this._source&&(this._source.fadeIn=this._fadeIn)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(e){this._fadeOut=e,this._source&&(this._source.fadeOut=this._fadeOut)},enumerable:!0,configurable:!0}),a.prototype._restart=function(e){this._stop(e),this._start(e)},a.prototype.dispose=function(){return t.prototype.dispose.call(this),this._source&&this._source.disconnect(),this},a}(n.Source);exports.Noise=a;var s=220500,u=2,f={brown:null,pink:null,white:null},c={get brown(){if(!f.brown){for(var e=[],r=0;r<u;r++){var o=new Float32Array(s);e[r]=o;for(var n=0,i=0;i<s;i++){var a=2*Math.random()-1;o[i]=(n+.02*a)/1.02,n=o[i],o[i]*=3.5}}f.brown=(new t.ToneAudioBuffer).fromArray(e)}return f.brown},get pink(){if(!f.pink){for(var e=[],r=0;r<u;r++){var o=new Float32Array(s);e[r]=o;var n=void 0,i=void 0,a=void 0,c=void 0,p=void 0,d=void 0,h=void 0;n=i=a=c=p=d=h=0;for(var l=0;l<s;l++){var _=2*Math.random()-1;n=.99886*n+.0555179*_,i=.99332*i+.0750759*_,a=.969*a+.153852*_,c=.8665*c+.3104856*_,p=.55*p+.5329522*_,d=-.7616*d-.016898*_,o[l]=n+i+a+c+p+d+h+.5362*_,o[l]*=.11,h=.115926*_}}f.pink=(new t.ToneAudioBuffer).fromArray(e)}return f.pink},get white(){if(!f.white){for(var e=[],r=0;r<u;r++){var o=new Float32Array(s);e[r]=o;for(var n=0;n<s;n++)o[n]=2*Math.random()-1}f.white=(new t.ToneAudioBuffer).fromArray(e)}return f.white}};
},{"tslib":"vCxL","../core/context/ToneAudioBuffer":"GLhX","../core/util/Defaults":"gf59","../core/util/Debug":"wPdo","../source/Source":"RA2T","./buffer/ToneBufferSource":"WVku"}],"zL1f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.UserMedia=void 0;var e=require("tslib"),t=require("../core/context/ToneAudioNode"),i=require("../component/channel/Volume"),r=require("../core/util/Defaults"),o=require("../core/util/Debug"),n=require("../core/util/Interface"),s=require("../core/util/TypeCheck"),u=function(u){function a(){var e=u.call(this,(0,r.optionsFromArguments)(a.getDefaults(),arguments,["volume"]))||this;e.name="UserMedia";var t=(0,r.optionsFromArguments)(a.getDefaults(),arguments,["volume"]);return e._volume=e.output=new i.Volume({context:e.context,volume:t.volume}),e.volume=e._volume.volume,(0,n.readOnly)(e,"volume"),e.mute=t.mute,e}return(0,e.__extends)(a,u),a.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{mute:!1,volume:0})},a.prototype.open=function(i){return(0,e.__awaiter)(this,void 0,void 0,function(){var r,n,u,c;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return(0,o.assert)(a.supported,"UserMedia is not supported"),"started"===this.state&&this.close(),[4,a.enumerateDevices()];case 1:return r=e.sent(),(0,s.isNumber)(i)?this._device=r[i]:(this._device=r.find(function(e){return e.label===i||e.deviceId===i}),!this._device&&r.length>0&&(this._device=r[0]),(0,o.assert)((0,s.isDefined)(this._device),"No matching device "+i)),n={audio:{echoCancellation:!1,sampleRate:this.context.sampleRate,noiseSuppression:!1,mozNoiseSuppression:!1}},this._device&&(n.audio.deviceId=this._device.deviceId),[4,navigator.mediaDevices.getUserMedia(n)];case 2:return u=e.sent(),this._stream||(this._stream=u,c=this.context.createMediaStreamSource(u),(0,t.connect)(c,this.output),this._mediaStream=c),[2,this]}})})},a.prototype.close=function(){return this._stream&&this._mediaStream&&(this._stream.getAudioTracks().forEach(function(e){e.stop()}),this._stream=void 0,this._mediaStream.disconnect(),this._mediaStream=void 0),this._device=void 0,this},a.enumerateDevices=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){switch(e.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:return[2,e.sent().filter(function(e){return"audioinput"===e.kind})]}})})},Object.defineProperty(a.prototype,"state",{get:function(){return this._stream&&this._stream.active?"started":"stopped"},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"deviceId",{get:function(){return this._device?this._device.deviceId:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"groupId",{get:function(){return this._device?this._device.groupId:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"label",{get:function(){return this._device?this._device.label:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mute",{get:function(){return this._volume.mute},set:function(e){this._volume.mute=e},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){return u.prototype.dispose.call(this),this.close(),this._volume.dispose(),this.volume.dispose(),this},Object.defineProperty(a,"supported",{get:function(){return(0,s.isDefined)(navigator.mediaDevices)&&(0,s.isDefined)(navigator.mediaDevices.getUserMedia)},enumerable:!0,configurable:!0}),a}(t.ToneAudioNode);exports.UserMedia=u;
},{"tslib":"vCxL","../core/context/ToneAudioNode":"lGdl","../component/channel/Volume":"a0V7","../core/util/Defaults":"gf59","../core/util/Debug":"wPdo","../core/util/Interface":"x3aV","../core/util/TypeCheck":"Mk3b"}],"koxT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.generateWaveform=n;var e=require("tslib"),t=require("../../core/context/OfflineContext");function n(n,r){return(0,e.__awaiter)(this,void 0,void 0,function(){var o,a;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return o=r/n.context.sampleRate,a=new t.OfflineContext(1,o,n.context.sampleRate),new n.constructor(Object.assign(n.get(),{frequency:2/o,detune:0,context:a})).toDestination().start(0),[4,a.render()];case 1:return[2,e.sent().getChannelData(0)]}})})}
},{"tslib":"vCxL","../../core/context/OfflineContext":"IbG8"}],"fE8z":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneOscillatorNode=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),o=require("../../core/context/Param"),r=require("../../core/util/Defaults"),n=require("../OneShotSource"),s=require("../../core/util/Interface"),i=function(i){function c(){var e=i.call(this,(0,r.optionsFromArguments)(c.getDefaults(),arguments,["frequency","type"]))||this;e.name="ToneOscillatorNode",e._oscillator=e.context.createOscillator(),e._internalChannels=[e._oscillator];var n=(0,r.optionsFromArguments)(c.getDefaults(),arguments,["frequency","type"]);return(0,t.connect)(e._oscillator,e._gainNode),e.type=n.type,e.frequency=new o.Param({context:e.context,param:e._oscillator.frequency,units:"frequency",value:n.frequency}),e.detune=new o.Param({context:e.context,param:e._oscillator.detune,units:"cents",value:n.detune}),(0,s.readOnly)(e,["frequency","detune"]),e}return(0,e.__extends)(c,i),c.getDefaults=function(){return Object.assign(n.OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})},c.prototype.start=function(e){var t=this.toSeconds(e);return this.log("start",t),this._startGain(t),this._oscillator.start(t),this},c.prototype._stopSource=function(e){this._oscillator.stop(e)},c.prototype.setPeriodicWave=function(e){return this._oscillator.setPeriodicWave(e),this},Object.defineProperty(c.prototype,"type",{get:function(){return this._oscillator.type},set:function(e){this._oscillator.type=e},enumerable:!0,configurable:!0}),c.prototype.dispose=function(){return i.prototype.dispose.call(this),"started"===this.state&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this},c}(n.OneShotSource);exports.ToneOscillatorNode=i;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/context/Param":"SJab","../../core/util/Defaults":"gf59","../OneShotSource":"p4sk","../../core/util/Interface":"x3aV"}],"wURk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Oscillator=void 0;var t=require("tslib"),e=require("../../core/util/Defaults"),i=require("../../core/util/Interface"),r=require("../../core/util/TypeCheck"),a=require("../../signal/Signal"),s=require("../Source"),o=require("./OscillatorInterface"),n=require("./ToneOscillatorNode"),l=require("../../core/util/Debug"),c=require("../../core/util/Math"),h=function(h){function p(){var t=h.call(this,(0,e.optionsFromArguments)(p.getDefaults(),arguments,["frequency","type"]))||this;t.name="Oscillator",t._oscillator=null;var r=(0,e.optionsFromArguments)(p.getDefaults(),arguments,["frequency","type"]);return t.frequency=new a.Signal({context:t.context,units:"frequency",value:r.frequency}),(0,i.readOnly)(t,"frequency"),t.detune=new a.Signal({context:t.context,units:"cents",value:r.detune}),(0,i.readOnly)(t,"detune"),t._partials=r.partials,t._partialCount=r.partialCount,t._type=r.type,r.partialCount&&"custom"!==r.type&&(t._type=t.baseType+r.partialCount.toString()),t.phase=r.phase,t}return(0,t.__extends)(p,h),p.getDefaults=function(){return Object.assign(s.Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})},p.prototype._start=function(t){var e=this,i=this.toSeconds(t),r=new n.ToneOscillatorNode({context:this.context,onended:function(){return e.onstop(e)}});this._oscillator=r,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(i)},p.prototype._stop=function(t){var e=this.toSeconds(t);this._oscillator&&this._oscillator.stop(e)},p.prototype._restart=function(t){var e=this.toSeconds(t);return this.log("restart",e),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(e),this},p.prototype.syncFrequency=function(){return this.context.transport.syncSignal(this.frequency),this},p.prototype.unsyncFrequency=function(){return this.context.transport.unsyncSignal(this.frequency),this},p.prototype._getCachedPeriodicWave=function(){var t=this;if("custom"===this._type)return i=p._periodicWaveCache.find(function(i){return i.phase===t._phase&&(0,e.deepEquals)(i.partials,t._partials)});var i=p._periodicWaveCache.find(function(e){return e.type===t._type&&e.phase===t._phase});return this._partialCount=i?i.partialCount:this._partialCount,i},Object.defineProperty(p.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e;var i=-1!==["sine","square","sawtooth","triangle"].indexOf(e);if(0===this._phase&&i)this._wave=void 0,this._partialCount=0,null!==this._oscillator&&(this._oscillator.type=e);else{var a=this._getCachedPeriodicWave();if((0,r.isDefined)(a)){var s=a.partials,o=a.wave;this._wave=o,this._partials=s,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave)}else{var n=(0,t.__read)(this._getRealImaginary(e,this._phase),2),l=n[0],c=n[1],h=this.context.createPeriodicWave(l,c);this._wave=h,null!==this._oscillator&&this._oscillator.setPeriodicWave(this._wave),p._periodicWaveCache.push({imag:c,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:l,type:this._type,wave:this._wave}),p._periodicWaveCache.length>100&&p._periodicWaveCache.shift()}}},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"baseType",{get:function(){return this._type.replace(this.partialCount.toString(),"")},set:function(t){this.partialCount&&"custom"!==this._type&&"custom"!==t?this.type=t+this.partialCount:this.type=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"partialCount",{get:function(){return this._partialCount},set:function(t){(0,l.assertRange)(t,0);var e=this._type,i=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(i&&(e=i[1]),"custom"!==this._type)this.type=0===t?e:e+t.toString();else{var r=new Float32Array(t);this._partials.forEach(function(t,e){return r[e]=t}),this._partials=Array.from(r),this.type=this._type}},enumerable:!0,configurable:!0}),p.prototype._getRealImaginary=function(t,e){var i=2048,r=new Float32Array(i),a=new Float32Array(i),s=1;if("custom"===t){if(s=this._partials.length+1,this._partialCount=this._partials.length,i=s,0===this._partials.length)return[r,a]}else{var o=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(t);o?(s=parseInt(o[2],10)+1,this._partialCount=parseInt(o[2],10),t=o[1],i=s=Math.max(s,2)):this._partialCount=0,this._partials=[]}for(var n=1;n<i;++n){var l=2/(n*Math.PI),c=void 0;switch(t){case"sine":c=n<=s?1:0,this._partials[n-1]=c;break;case"square":c=1&n?2*l:0,this._partials[n-1]=c;break;case"sawtooth":c=l*(1&n?1:-1),this._partials[n-1]=c;break;case"triangle":c=1&n?l*l*2*(n-1>>1&1?-1:1):0,this._partials[n-1]=c;break;case"custom":c=this._partials[n-1];break;default:throw new TypeError("Oscillator: invalid type: "+t)}0!==c?(r[n]=-c*Math.sin(e*n),a[n]=c*Math.cos(e*n)):(r[n]=0,a[n]=0)}return[r,a]},p.prototype._inverseFFT=function(t,e,i){for(var r=0,a=t.length,s=0;s<a;s++)r+=t[s]*Math.cos(s*i)+e[s]*Math.sin(s*i);return r},p.prototype.getInitialValue=function(){for(var e=(0,t.__read)(this._getRealImaginary(this._type,0),2),i=e[0],r=e[1],a=0,s=2*Math.PI,o=0;o<32;o++)a=Math.max(this._inverseFFT(i,r,o/32*s),a);return(0,c.clamp)(-this._inverseFFT(i,r,this._phase)/a,-1,1)},Object.defineProperty(p.prototype,"partials",{get:function(){return this._partials.slice(0,this.partialCount)},set:function(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this.type="custom")},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"phase",{get:function(){return this._phase*(180/Math.PI)},set:function(t){this._phase=t*Math.PI/180,this.type=this._type},enumerable:!0,configurable:!0}),p.prototype.asArray=function(e){return void 0===e&&(e=1024),(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(t){return[2,(0,o.generateWaveform)(this,e)]})})},p.prototype.dispose=function(){return h.prototype.dispose.call(this),null!==this._oscillator&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this},p._periodicWaveCache=[],p}(s.Source);exports.Oscillator=h;
},{"tslib":"vCxL","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../core/util/TypeCheck":"Mk3b","../../signal/Signal":"u9T1","../Source":"RA2T","./OscillatorInterface":"koxT","./ToneOscillatorNode":"fE8z","../../core/util/Debug":"wPdo","../../core/util/Math":"MP8q"}],"vlBR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SignalOperator=void 0;var e=require("tslib"),t=require("../core/util/Defaults"),o=require("../core/context/ToneAudioNode"),r=require("./Signal"),i=function(o){function i(){return o.call(this,Object.assign((0,t.optionsFromArguments)(i.getDefaults(),arguments,["context"])))||this}return(0,e.__extends)(i,o),i.prototype.connect=function(e,t,o){return void 0===t&&(t=0),void 0===o&&(o=0),(0,r.connectSignal)(this,e,t,o),this},i}(o.ToneAudioNode);exports.SignalOperator=i;
},{"tslib":"vCxL","../core/util/Defaults":"gf59","../core/context/ToneAudioNode":"lGdl","./Signal":"u9T1"}],"jY3Y":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WaveShaper=void 0;var e=require("tslib"),r=require("../core/util/Defaults"),t=require("../core/util/TypeCheck"),n=require("../core/util/Debug"),a=require("./Signal"),i=require("./SignalOperator"),o=function(i){function o(){var e=i.call(this,Object.assign((0,r.optionsFromArguments)(o.getDefaults(),arguments,["mapping","length"])))||this;e.name="WaveShaper",e._shaper=e.context.createWaveShaper(),e.input=e._shaper,e.output=e._shaper;var n=(0,r.optionsFromArguments)(o.getDefaults(),arguments,["mapping","length"]);return(0,t.isArray)(n.mapping)||n.mapping instanceof Float32Array?e.curve=Float32Array.from(n.mapping):(0,t.isFunction)(n.mapping)&&e.setMap(n.mapping,n.length),e}return(0,e.__extends)(o,i),o.getDefaults=function(){return Object.assign(a.Signal.getDefaults(),{length:1024})},o.prototype.setMap=function(e,r){void 0===r&&(r=1024);for(var t=new Float32Array(r),n=0,a=r;n<a;n++){var i=n/(a-1)*2-1;t[n]=e(i,n)}return this.curve=t,this},Object.defineProperty(o.prototype,"curve",{get:function(){return this._shaper.curve},set:function(e){this._shaper.curve=e},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(e){var r=["none","2x","4x"].some(function(r){return r.includes(e)});(0,n.assert)(r,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=e},enumerable:!0,configurable:!0}),o.prototype.dispose=function(){return i.prototype.dispose.call(this),this._shaper.disconnect(),this},o}(i.SignalOperator);exports.WaveShaper=o;
},{"tslib":"vCxL","../core/util/Defaults":"gf59","../core/util/TypeCheck":"Mk3b","../core/util/Debug":"wPdo","./Signal":"u9T1","./SignalOperator":"vlBR"}],"faOy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AudioToGain=void 0;var e=require("tslib"),t=require("./SignalOperator"),r=require("./WaveShaper"),o=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="AudioToGain",e._norm=new r.WaveShaper({context:e.context,mapping:function(e){return(e+1)/2}}),e.input=e._norm,e.output=e._norm,e}return(0,e.__extends)(o,t),o.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this},o}(t.SignalOperator);exports.AudioToGain=o;
},{"tslib":"vCxL","./SignalOperator":"vlBR","./WaveShaper":"jY3Y"}],"uJ9R":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Multiply=void 0;var e=require("tslib"),t=require("../core/context/Gain"),u=require("../core/util/Defaults"),i=require("./Signal"),r=function(r){function a(){var e=r.call(this,Object.assign((0,u.optionsFromArguments)(a.getDefaults(),arguments,["value"])))||this;e.name="Multiply",e.override=!1;var i=(0,u.optionsFromArguments)(a.getDefaults(),arguments,["value"]);return e._mult=e.input=e.output=new t.Gain({context:e.context,minValue:i.minValue,maxValue:i.maxValue}),e.factor=e._param=e._mult.gain,e.factor.setValueAtTime(i.value,0),e}return(0,e.__extends)(a,r),a.getDefaults=function(){return Object.assign(i.Signal.getDefaults(),{value:0})},a.prototype.dispose=function(){return r.prototype.dispose.call(this),this._mult.dispose(),this},a}(i.Signal);exports.Multiply=r;
},{"tslib":"vCxL","../core/context/Gain":"EfHt","../core/util/Defaults":"gf59","./Signal":"u9T1"}],"Rg7m":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AMOscillator=void 0;var e=require("tslib"),t=require("../../core/context/Gain"),r=require("../../core/util/Defaults"),o=require("../../core/util/Interface"),i=require("../../signal/AudioToGain"),n=require("../../signal/Multiply"),a=require("../Source"),u=require("./Oscillator"),s=require("./OscillatorInterface"),c=function(a){function c(){var e=a.call(this,(0,r.optionsFromArguments)(c.getDefaults(),arguments,["frequency","type","modulationType"]))||this;e.name="AMOscillator",e._modulationScale=new i.AudioToGain({context:e.context}),e._modulationNode=new t.Gain({context:e.context});var s=(0,r.optionsFromArguments)(c.getDefaults(),arguments,["frequency","type","modulationType"]);return e._carrier=new u.Oscillator({context:e.context,detune:s.detune,frequency:s.frequency,onstop:function(){return e.onstop(e)},phase:s.phase,type:s.type}),e.frequency=e._carrier.frequency,e.detune=e._carrier.detune,e._modulator=new u.Oscillator({context:e.context,phase:s.phase,type:s.modulationType}),e.harmonicity=new n.Multiply({context:e.context,units:"positive",value:s.harmonicity}),e.frequency.chain(e.harmonicity,e._modulator.frequency),e._modulator.chain(e._modulationScale,e._modulationNode.gain),e._carrier.chain(e._modulationNode,e.output),(0,o.readOnly)(e,["frequency","detune","harmonicity"]),e}return(0,e.__extends)(c,a),c.getDefaults=function(){return Object.assign(u.Oscillator.getDefaults(),{harmonicity:1,modulationType:"square"})},c.prototype._start=function(e){this._modulator.start(e),this._carrier.start(e)},c.prototype._stop=function(e){this._modulator.stop(e),this._carrier.stop(e)},c.prototype._restart=function(e){this._modulator.restart(e),this._carrier.restart(e)},Object.defineProperty(c.prototype,"type",{get:function(){return this._carrier.type},set:function(e){this._carrier.type=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(e){this._carrier.baseType=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(e){this._carrier.partialCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(e){this._modulator.type=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"phase",{get:function(){return this._carrier.phase},set:function(e){this._carrier.phase=e,this._modulator.phase=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"partials",{get:function(){return this._carrier.partials},set:function(e){this._carrier.partials=e},enumerable:!0,configurable:!0}),c.prototype.asArray=function(t){return void 0===t&&(t=1024),(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return[2,(0,s.generateWaveform)(this,t)]})})},c.prototype.dispose=function(){return a.prototype.dispose.call(this),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this},c}(a.Source);exports.AMOscillator=c;
},{"tslib":"vCxL","../../core/context/Gain":"EfHt","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../signal/AudioToGain":"faOy","../../signal/Multiply":"uJ9R","../Source":"RA2T","./Oscillator":"wURk","./OscillatorInterface":"koxT"}],"wdyw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FMOscillator=void 0;var e=require("tslib"),t=require("../../core/context/Gain"),r=require("../../core/util/Defaults"),o=require("../../core/util/Interface"),n=require("../../signal/Multiply"),i=require("../../signal/Signal"),a=require("../Source"),u=require("./Oscillator"),c=require("./OscillatorInterface"),s=function(a){function s(){var e=a.call(this,(0,r.optionsFromArguments)(s.getDefaults(),arguments,["frequency","type","modulationType"]))||this;e.name="FMOscillator",e._modulationNode=new t.Gain({context:e.context,gain:0});var c=(0,r.optionsFromArguments)(s.getDefaults(),arguments,["frequency","type","modulationType"]);return e._carrier=new u.Oscillator({context:e.context,detune:c.detune,frequency:0,onstop:function(){return e.onstop(e)},phase:c.phase,type:c.type}),e.detune=e._carrier.detune,e.frequency=new i.Signal({context:e.context,units:"frequency",value:c.frequency}),e._modulator=new u.Oscillator({context:e.context,phase:c.phase,type:c.modulationType}),e.harmonicity=new n.Multiply({context:e.context,units:"positive",value:c.harmonicity}),e.modulationIndex=new n.Multiply({context:e.context,units:"positive",value:c.modulationIndex}),e.frequency.connect(e._carrier.frequency),e.frequency.chain(e.harmonicity,e._modulator.frequency),e.frequency.chain(e.modulationIndex,e._modulationNode),e._modulator.connect(e._modulationNode.gain),e._modulationNode.connect(e._carrier.frequency),e._carrier.connect(e.output),e.detune.connect(e._modulator.detune),(0,o.readOnly)(e,["modulationIndex","frequency","detune","harmonicity"]),e}return(0,e.__extends)(s,a),s.getDefaults=function(){return Object.assign(u.Oscillator.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})},s.prototype._start=function(e){this._modulator.start(e),this._carrier.start(e)},s.prototype._stop=function(e){this._modulator.stop(e),this._carrier.stop(e)},s.prototype._restart=function(e){return this._modulator.restart(e),this._carrier.restart(e),this},Object.defineProperty(s.prototype,"type",{get:function(){return this._carrier.type},set:function(e){this._carrier.type=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"baseType",{get:function(){return this._carrier.baseType},set:function(e){this._carrier.baseType=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"partialCount",{get:function(){return this._carrier.partialCount},set:function(e){this._carrier.partialCount=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"modulationType",{get:function(){return this._modulator.type},set:function(e){this._modulator.type=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"phase",{get:function(){return this._carrier.phase},set:function(e){this._carrier.phase=e,this._modulator.phase=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"partials",{get:function(){return this._carrier.partials},set:function(e){this._carrier.partials=e},enumerable:!0,configurable:!0}),s.prototype.asArray=function(t){return void 0===t&&(t=1024),(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return[2,(0,c.generateWaveform)(this,t)]})})},s.prototype.dispose=function(){return a.prototype.dispose.call(this),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this},s}(a.Source);exports.FMOscillator=s;
},{"tslib":"vCxL","../../core/context/Gain":"EfHt","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../signal/Multiply":"uJ9R","../../signal/Signal":"u9T1","../Source":"RA2T","./Oscillator":"wURk","./OscillatorInterface":"koxT"}],"EYAj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PulseOscillator=void 0;var e=require("tslib"),t=require("../../core/context/Gain"),r=require("../../core/util/Defaults"),n=require("../../core/util/Interface"),i=require("../../signal/Signal"),o=require("../../signal/WaveShaper"),a=require("../Source"),u=require("./Oscillator"),s=require("./OscillatorInterface"),c=function(c){function l(){var e=c.call(this,(0,r.optionsFromArguments)(l.getDefaults(),arguments,["frequency","width"]))||this;e.name="PulseOscillator",e._widthGate=new t.Gain({context:e.context,gain:0}),e._thresh=new o.WaveShaper({context:e.context,mapping:function(e){return e<=0?-1:1}});var a=(0,r.optionsFromArguments)(l.getDefaults(),arguments,["frequency","width"]);return e.width=new i.Signal({context:e.context,units:"audioRange",value:a.width}),e._triangle=new u.Oscillator({context:e.context,detune:a.detune,frequency:a.frequency,onstop:function(){return e.onstop(e)},phase:a.phase,type:"triangle"}),e.frequency=e._triangle.frequency,e.detune=e._triangle.detune,e._triangle.chain(e._thresh,e.output),e.width.chain(e._widthGate,e._thresh),(0,n.readOnly)(e,["width","frequency","detune"]),e}return(0,e.__extends)(l,c),l.getDefaults=function(){return Object.assign(a.Source.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})},l.prototype._start=function(e){e=this.toSeconds(e),this._triangle.start(e),this._widthGate.gain.setValueAtTime(1,e)},l.prototype._stop=function(e){e=this.toSeconds(e),this._triangle.stop(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(0,e)},l.prototype._restart=function(e){this._triangle.restart(e),this._widthGate.gain.cancelScheduledValues(e),this._widthGate.gain.setValueAtTime(1,e)},Object.defineProperty(l.prototype,"phase",{get:function(){return this._triangle.phase},set:function(e){this._triangle.phase=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"type",{get:function(){return"pulse"},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"baseType",{get:function(){return"pulse"},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"partials",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"partialCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"carrierType",{set:function(e){this._triangle.type=e},enumerable:!0,configurable:!0}),l.prototype.asArray=function(t){return void 0===t&&(t=1024),(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return[2,(0,s.generateWaveform)(this,t)]})})},l.prototype.dispose=function(){return c.prototype.dispose.call(this),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this},l}(a.Source);exports.PulseOscillator=c;
},{"tslib":"vCxL","../../core/context/Gain":"EfHt","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../signal/Signal":"u9T1","../../signal/WaveShaper":"jY3Y","../Source":"RA2T","./Oscillator":"wURk","./OscillatorInterface":"koxT"}],"inkK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FatOscillator=void 0;var t=require("tslib"),e=require("../../core/util/Defaults"),r=require("../../core/util/Interface"),n=require("../../signal/Signal"),o=require("../Source"),i=require("./Oscillator"),s=require("./OscillatorInterface"),a=require("../../core/util/Debug"),u=function(o){function u(){var t=o.call(this,(0,e.optionsFromArguments)(u.getDefaults(),arguments,["frequency","type","spread"]))||this;t.name="FatOscillator",t._oscillators=[];var i=(0,e.optionsFromArguments)(u.getDefaults(),arguments,["frequency","type","spread"]);return t.frequency=new n.Signal({context:t.context,units:"frequency",value:i.frequency}),t.detune=new n.Signal({context:t.context,units:"cents",value:i.detune}),t._spread=i.spread,t._type=i.type,t._phase=i.phase,t._partials=i.partials,t._partialCount=i.partialCount,t.count=i.count,(0,r.readOnly)(t,["frequency","detune"]),t}return(0,t.__extends)(u,o),u.getDefaults=function(){return Object.assign(i.Oscillator.getDefaults(),{count:3,spread:20,type:"sawtooth"})},u.prototype._start=function(t){t=this.toSeconds(t),this._forEach(function(e){return e.start(t)})},u.prototype._stop=function(t){t=this.toSeconds(t),this._forEach(function(e){return e.stop(t)})},u.prototype._restart=function(t){this._forEach(function(e){return e.restart(t)})},u.prototype._forEach=function(t){for(var e=0;e<this._oscillators.length;e++)t(this._oscillators[e],e)},Object.defineProperty(u.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t,this._forEach(function(e){return e.type=t})},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"spread",{get:function(){return this._spread},set:function(t){if(this._spread=t,this._oscillators.length>1){var e=-t/2,r=t/(this._oscillators.length-1);this._forEach(function(t,n){return t.detune.value=e+r*n})}},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"count",{get:function(){return this._oscillators.length},set:function(t){var e=this;if((0,a.assertRange)(t,1),this._oscillators.length!==t){this._forEach(function(t){return t.dispose()}),this._oscillators=[];for(var n=0;n<t;n++){var o=new i.Oscillator({context:this.context,volume:-6-1.1*t,type:this._type,phase:this._phase+n/t*360,partialCount:this._partialCount,onstop:0===n?function(){return e.onstop(e)}:r.noOp});"custom"===this.type&&(o.partials=this._partials),this.frequency.connect(o.frequency),this.detune.connect(o.detune),o.detune.overridden=!1,o.connect(this.output),this._oscillators[n]=o}this.spread=this._spread,"started"===this.state&&this._forEach(function(t){return t.start()})}},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"phase",{get:function(){return this._phase},set:function(t){this._phase=t,this._forEach(function(e){return e.phase=t})},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"baseType",{get:function(){return this._oscillators[0].baseType},set:function(t){this._forEach(function(e){return e.baseType=t}),this._type=this._oscillators[0].type},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"partials",{get:function(){return this._oscillators[0].partials},set:function(t){this._partials=t,this._partialCount=this._partials.length,t.length&&(this._type="custom",this._forEach(function(e){return e.partials=t}))},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"partialCount",{get:function(){return this._oscillators[0].partialCount},set:function(t){this._partialCount=t,this._forEach(function(e){return e.partialCount=t}),this._type=this._oscillators[0].type},enumerable:!0,configurable:!0}),u.prototype.asArray=function(e){return void 0===e&&(e=1024),(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(t){return[2,(0,s.generateWaveform)(this,e)]})})},u.prototype.dispose=function(){return o.prototype.dispose.call(this),this.frequency.dispose(),this.detune.dispose(),this._forEach(function(t){return t.dispose()}),this},u}(o.Source);exports.FatOscillator=u;
},{"tslib":"vCxL","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../signal/Signal":"u9T1","../Source":"RA2T","./Oscillator":"wURk","./OscillatorInterface":"koxT","../../core/util/Debug":"wPdo"}],"onqm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PWMOscillator=void 0;var e=require("tslib"),t=require("../../core/util/Defaults"),r=require("../../core/util/Interface"),o=require("../../signal/Multiply"),n=require("../Source"),u=require("./Oscillator"),s=require("./OscillatorInterface"),i=require("./PulseOscillator"),a=function(a){function c(){var e=a.call(this,(0,t.optionsFromArguments)(c.getDefaults(),arguments,["frequency","modulationFrequency"]))||this;e.name="PWMOscillator",e.sourceType="pwm",e._scale=new o.Multiply({context:e.context,value:2});var n=(0,t.optionsFromArguments)(c.getDefaults(),arguments,["frequency","modulationFrequency"]);return e._pulse=new i.PulseOscillator({context:e.context,frequency:n.modulationFrequency}),e._pulse.carrierType="sine",e.modulationFrequency=e._pulse.frequency,e._modulator=new u.Oscillator({context:e.context,detune:n.detune,frequency:n.frequency,onstop:function(){return e.onstop(e)},phase:n.phase}),e.frequency=e._modulator.frequency,e.detune=e._modulator.detune,e._modulator.chain(e._scale,e._pulse.width),e._pulse.connect(e.output),(0,r.readOnly)(e,["modulationFrequency","frequency","detune"]),e}return(0,e.__extends)(c,a),c.getDefaults=function(){return Object.assign(n.Source.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})},c.prototype._start=function(e){e=this.toSeconds(e),this._modulator.start(e),this._pulse.start(e)},c.prototype._stop=function(e){e=this.toSeconds(e),this._modulator.stop(e),this._pulse.stop(e)},c.prototype._restart=function(e){this._modulator.restart(e),this._pulse.restart(e)},Object.defineProperty(c.prototype,"type",{get:function(){return"pwm"},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"baseType",{get:function(){return"pwm"},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"partials",{get:function(){return[]},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"partialCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"phase",{get:function(){return this._modulator.phase},set:function(e){this._modulator.phase=e},enumerable:!0,configurable:!0}),c.prototype.asArray=function(t){return void 0===t&&(t=1024),(0,e.__awaiter)(this,void 0,void 0,function(){return(0,e.__generator)(this,function(e){return[2,(0,s.generateWaveform)(this,t)]})})},c.prototype.dispose=function(){return a.prototype.dispose.call(this),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this},c}(n.Source);exports.PWMOscillator=a;
},{"tslib":"vCxL","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../signal/Multiply":"uJ9R","../Source":"RA2T","./Oscillator":"wURk","./OscillatorInterface":"koxT","./PulseOscillator":"EYAj"}],"Z3iX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OmniOscillator=void 0;var t=require("tslib"),e=require("../../core/util/Defaults"),i=require("../../core/util/Interface"),o=require("../../core/util/TypeCheck"),s=require("../../signal/Signal"),r=require("../Source"),l=require("./AMOscillator"),c=require("./FatOscillator"),a=require("./FMOscillator"),n=require("./Oscillator"),u=require("./OscillatorInterface"),p=require("./PulseOscillator"),h=require("./PWMOscillator"),f={am:l.AMOscillator,fat:c.FatOscillator,fm:a.FMOscillator,oscillator:n.Oscillator,pulse:p.PulseOscillator,pwm:h.PWMOscillator},_=function(r){function _(){var t=r.call(this,(0,e.optionsFromArguments)(_.getDefaults(),arguments,["frequency","type"]))||this;t.name="OmniOscillator";var o=(0,e.optionsFromArguments)(_.getDefaults(),arguments,["frequency","type"]);return t.frequency=new s.Signal({context:t.context,units:"frequency",value:o.frequency}),t.detune=new s.Signal({context:t.context,units:"cents",value:o.detune}),(0,i.readOnly)(t,["frequency","detune"]),t.set(o),t}return(0,t.__extends)(_,r),_.getDefaults=function(){return Object.assign(n.Oscillator.getDefaults(),a.FMOscillator.getDefaults(),l.AMOscillator.getDefaults(),c.FatOscillator.getDefaults(),p.PulseOscillator.getDefaults(),h.PWMOscillator.getDefaults())},_.prototype._start=function(t){this._oscillator.start(t)},_.prototype._stop=function(t){this._oscillator.stop(t)},_.prototype._restart=function(t){return this._oscillator.restart(t),this},Object.defineProperty(_.prototype,"type",{get:function(){var t=this,e="";return["am","fm","fat"].some(function(e){return t._sourceType===e})&&(e=this._sourceType),e+this._oscillator.type},set:function(t){"fm"===t.substr(0,2)?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"am"===t.substr(0,2)?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(2)):"fat"===t.substr(0,3)?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=t.substr(3)):"pwm"===t?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):"pulse"===t?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=t)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"partials",{get:function(){return this._oscillator.partials},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partials=t)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"partialCount",{get:function(){return this._oscillator.partialCount},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||(this._oscillator.partialCount=t)},enumerable:!0,configurable:!0}),_.prototype.set=function(t){return Reflect.has(t,"type")&&t.type&&(this.type=t.type),r.prototype.set.call(this,t),this},_.prototype._createNewOscillator=function(t){var e=this;if(t!==this._sourceType){this._sourceType=t;var i=f[t],o=this.now();if(this._oscillator){var s=this._oscillator;s.stop(o),this.context.setTimeout(function(){return s.dispose()},this.blockTime)}this._oscillator=new i({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=function(){return e.onstop(e)},"started"===this.state&&this._oscillator.start(o)}},Object.defineProperty(_.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(t){this._oscillator.phase=t},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"sourceType",{get:function(){return this._sourceType},set:function(t){var e="sine";"pwm"!==this._oscillator.type&&"pulse"!==this._oscillator.type&&(e=this._oscillator.type),"fm"===t?this.type="fm"+e:"am"===t?this.type="am"+e:"fat"===t?this.type="fat"+e:"oscillator"===t?this.type=e:"pulse"===t?this.type="pulse":"pwm"===t&&(this.type="pwm")},enumerable:!0,configurable:!0}),_.prototype._getOscType=function(t,e){return t instanceof f[e]},Object.defineProperty(_.prototype,"baseType",{get:function(){return this._oscillator.baseType},set:function(t){this._getOscType(this._oscillator,"pulse")||this._getOscType(this._oscillator,"pwm")||"pulse"===t||"pwm"===t||(this._oscillator.baseType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"width",{get:function(){return this._getOscType(this._oscillator,"pulse")?this._oscillator.width:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"count",{get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.count:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&(0,o.isNumber)(t)&&(this._oscillator.count=t)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"spread",{get:function(){return this._getOscType(this._oscillator,"fat")?this._oscillator.spread:void 0},set:function(t){this._getOscType(this._oscillator,"fat")&&(0,o.isNumber)(t)&&(this._oscillator.spread=t)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"modulationType",{get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.modulationType:void 0},set:function(t){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&(0,o.isString)(t)&&(this._oscillator.modulationType=t)},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"modulationIndex",{get:function(){return this._getOscType(this._oscillator,"fm")?this._oscillator.modulationIndex:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"harmonicity",{get:function(){return this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am")?this._oscillator.harmonicity:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"modulationFrequency",{get:function(){return this._getOscType(this._oscillator,"pwm")?this._oscillator.modulationFrequency:void 0},enumerable:!0,configurable:!0}),_.prototype.asArray=function(e){return void 0===e&&(e=1024),(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(t){return[2,(0,u.generateWaveform)(this,e)]})})},_.prototype.dispose=function(){return r.prototype.dispose.call(this),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this},_}(r.Source);exports.OmniOscillator=_;
},{"tslib":"vCxL","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../core/util/TypeCheck":"Mk3b","../../signal/Signal":"u9T1","../Source":"RA2T","./AMOscillator":"Rg7m","./FatOscillator":"inkK","./FMOscillator":"wdyw","./Oscillator":"wURk","./OscillatorInterface":"koxT","./PulseOscillator":"EYAj","./PWMOscillator":"onqm"}],"nMdK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Add=void 0;var e=require("tslib"),t=require("../core/context/ToneAudioNode"),r=require("../core/context/Gain"),n=require("../core/util/Defaults"),s=require("./Signal"),o=function(o){function i(){var e=o.call(this,Object.assign((0,n.optionsFromArguments)(i.getDefaults(),arguments,["value"])))||this;return e.override=!1,e.name="Add",e._sum=new r.Gain({context:e.context}),e.input=e._sum,e.output=e._sum,e.addend=e._param,(0,t.connectSeries)(e._constantSource,e._sum),e}return(0,e.__extends)(i,o),i.getDefaults=function(){return Object.assign(s.Signal.getDefaults(),{value:0})},i.prototype.dispose=function(){return o.prototype.dispose.call(this),this._sum.dispose(),this},i}(s.Signal);exports.Add=o;
},{"tslib":"vCxL","../core/context/ToneAudioNode":"lGdl","../core/context/Gain":"EfHt","../core/util/Defaults":"gf59","./Signal":"u9T1"}],"qHH3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Scale=void 0;var t=require("tslib"),e=require("../core/util/Defaults"),i=require("./Add"),n=require("./Multiply"),r=require("./SignalOperator"),s=function(s){function o(){var t=s.call(this,Object.assign((0,e.optionsFromArguments)(o.getDefaults(),arguments,["min","max"])))||this;t.name="Scale";var r=(0,e.optionsFromArguments)(o.getDefaults(),arguments,["min","max"]);return t._mult=t.input=new n.Multiply({context:t.context,value:r.max-r.min}),t._add=t.output=new i.Add({context:t.context,value:r.min}),t._min=r.min,t._max=r.max,t.input.connect(t.output),t}return(0,t.__extends)(o,s),o.getDefaults=function(){return Object.assign(r.SignalOperator.getDefaults(),{max:1,min:0})},Object.defineProperty(o.prototype,"min",{get:function(){return this._min},set:function(t){this._min=t,this._setRange()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"max",{get:function(){return this._max},set:function(t){this._max=t,this._setRange()},enumerable:!0,configurable:!0}),o.prototype._setRange=function(){this._add.value=this._min,this._mult.value=this._max-this._min},o.prototype.dispose=function(){return s.prototype.dispose.call(this),this._add.dispose(),this._mult.dispose(),this},o}(r.SignalOperator);exports.Scale=s;
},{"tslib":"vCxL","../core/util/Defaults":"gf59","./Add":"nMdK","./Multiply":"uJ9R","./SignalOperator":"vlBR"}],"yJlf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Zero=void 0;var e=require("tslib"),t=require("../core/context/Gain"),o=require("../core/context/ToneAudioNode"),n=require("../core/util/Defaults"),r=require("./SignalOperator"),i=function(r){function i(){var e=r.call(this,Object.assign((0,n.optionsFromArguments)(i.getDefaults(),arguments)))||this;return e.name="Zero",e._gain=new t.Gain({context:e.context}),e.output=e._gain,e.input=void 0,(0,o.connect)(e.context.getConstant(0),e._gain),e}return(0,e.__extends)(i,r),i.prototype.dispose=function(){return r.prototype.dispose.call(this),(0,o.disconnect)(this.context.getConstant(0),this._gain),this},i}(r.SignalOperator);exports.Zero=i;
},{"tslib":"vCxL","../core/context/Gain":"EfHt","../core/context/ToneAudioNode":"lGdl","../core/util/Defaults":"gf59","./SignalOperator":"vlBR"}],"Hodm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LFO=void 0;var e=require("tslib"),t=require("../../core/context/Gain"),i=require("../../core/context/Param"),n=require("../../core/context/ToneAudioNode"),o=require("../../core/util/Defaults"),s=require("../../core/util/Interface"),r=require("../../signal/AudioToGain"),a=require("../../signal/Scale"),u=require("../../signal/Signal"),c=require("../../signal/Zero"),l=require("./Oscillator"),p=function(p){function _(){var e=p.call(this,(0,o.optionsFromArguments)(_.getDefaults(),arguments,["frequency","min","max"]))||this;e.name="LFO",e._stoppedValue=0,e._units="number",e.convert=!0,e._fromType=i.Param.prototype._fromType,e._toType=i.Param.prototype._toType,e._is=i.Param.prototype._is,e._clampValue=i.Param.prototype._clampValue;var n=(0,o.optionsFromArguments)(_.getDefaults(),arguments,["frequency","min","max"]);return e._oscillator=new l.Oscillator({context:e.context,frequency:n.frequency,type:n.type}),e.frequency=e._oscillator.frequency,e._amplitudeGain=new t.Gain({context:e.context,gain:n.amplitude,units:"normalRange"}),e.amplitude=e._amplitudeGain.gain,e._stoppedSignal=new u.Signal({context:e.context,units:"audioRange",value:0}),e._zeros=new c.Zero({context:e.context}),e._a2g=new r.AudioToGain({context:e.context}),e._scaler=e.output=new a.Scale({context:e.context,max:n.max,min:n.min}),e.units=n.units,e.min=n.min,e.max=n.max,e._oscillator.chain(e._a2g,e._amplitudeGain,e._scaler),e._zeros.connect(e._a2g),e._stoppedSignal.connect(e._a2g),(0,s.readOnly)(e,["amplitude","frequency"]),e.phase=n.phase,e}return(0,e.__extends)(_,p),_.getDefaults=function(){return Object.assign(n.ToneAudioNode.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,phase:0,type:"sine",units:"number"})},_.prototype.start=function(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(0,e),this._oscillator.start(e),this},_.prototype.stop=function(e){return e=this.toSeconds(e),this._stoppedSignal.setValueAtTime(this._stoppedValue,e),this._oscillator.stop(e),this},_.prototype.sync=function(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this},_.prototype.unsync=function(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this},Object.defineProperty(_.prototype,"min",{get:function(){return this._toType(this._scaler.min)},set:function(e){e=this._fromType(e),this._scaler.min=e},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"max",{get:function(){return this._toType(this._scaler.max)},set:function(e){e=this._fromType(e),this._scaler.max=e},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"type",{get:function(){return this._oscillator.type},set:function(e){this._oscillator.type=e,this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"phase",{get:function(){return this._oscillator.phase},set:function(e){this._oscillator.phase=e,this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"units",{get:function(){return this._units},set:function(e){var t=this.min,i=this.max;this._units=e,this.min=t,this.max=i},enumerable:!0,configurable:!0}),Object.defineProperty(_.prototype,"state",{get:function(){return this._oscillator.state},enumerable:!0,configurable:!0}),_.prototype.connect=function(e,t,n){return(e instanceof i.Param||e instanceof u.Signal)&&(this.convert=e.convert,this.units=e.units),(0,u.connectSignal)(this,e,t,n),this},_.prototype.dispose=function(){return p.prototype.dispose.call(this),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this},_}(n.ToneAudioNode);exports.LFO=p;
},{"tslib":"vCxL","../../core/context/Gain":"EfHt","../../core/context/Param":"SJab","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../signal/AudioToGain":"faOy","../../signal/Scale":"qHH3","../../signal/Signal":"u9T1","../../signal/Zero":"yJlf","./Oscillator":"wURk"}],"utx5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.range=t,exports.timeRange=n;var e=require("./Debug");function t(t,n){void 0===n&&(n=1/0);var r=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return r.get(this)},set:function(i){(0,e.assertRange)(i,t,n),r.set(this,i)}})}}function n(t,n){void 0===n&&(n=1/0);var r=new WeakMap;return function(i,o){Reflect.defineProperty(i,o,{configurable:!0,enumerable:!0,get:function(){return r.get(this)},set:function(i){(0,e.assertRange)(this.toSeconds(i),t,n),r.set(this,i)}})}}
},{"./Debug":"wPdo"}],"eqDL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Player=void 0;var t=require("tslib"),e=require("../../core/context/ToneAudioBuffer"),o=require("../../core/util/Defaults"),r=require("../../core/util/Interface"),i=require("../../core/util/TypeCheck"),s=require("../Source"),n=require("./ToneBufferSource"),a=require("../../core/util/Debug"),u=require("../../core/util/Decorator"),c=function(c){function p(){var t=c.call(this,(0,o.optionsFromArguments)(p.getDefaults(),arguments,["url","onload"]))||this;t.name="Player",t._activeSources=new Set;var r=(0,o.optionsFromArguments)(p.getDefaults(),arguments,["url","onload"]);return t._buffer=new e.ToneAudioBuffer({onload:t._onload.bind(t,r.onload),onerror:r.onerror,reverse:r.reverse,url:r.url}),t.autostart=r.autostart,t._loop=r.loop,t._loopStart=r.loopStart,t._loopEnd=r.loopEnd,t._playbackRate=r.playbackRate,t.fadeIn=r.fadeIn,t.fadeOut=r.fadeOut,t}return(0,t.__extends)(p,c),p.getDefaults=function(){return Object.assign(s.Source.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:r.noOp,onerror:r.noOp,playbackRate:1,reverse:!1})},p.prototype.load=function(e){return(0,t.__awaiter)(this,void 0,void 0,function(){return(0,t.__generator)(this,function(t){switch(t.label){case 0:return[4,this._buffer.load(e)];case 1:return t.sent(),this._onload(),[2,this]}})})},p.prototype._onload=function(t){void 0===t&&(t=r.noOp),t(),this.autostart&&this.start()},p.prototype._onSourceEnd=function(t){this.onstop(this),this._activeSources.delete(t),0!==this._activeSources.size||this._synced||"started"!==this._state.getValueAtTime(this.now())||this._state.setStateAtTime("stopped",this.now())},p.prototype.start=function(t,e,o){return c.prototype.start.call(this,t,e,o),this},p.prototype._start=function(t,e,r){e=this._loop?(0,o.defaultArg)(e,this._loopStart):(0,o.defaultArg)(e,0);var s=this.toSeconds(e);this._synced&&(s*=this._playbackRate);var a=r;r=(0,o.defaultArg)(r,Math.max(this._buffer.duration-s,0));var u=this.toSeconds(r);u/=this._playbackRate,t=this.toSeconds(t);var c=new n.ToneBufferSource({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);this._loop||this._synced||(this._state.cancel(t+u),this._state.setStateAtTime("stopped",t+u,{implicitEnd:!0})),this._activeSources.add(c),this._loop&&(0,i.isUndef)(a)?c.start(t,s):c.start(t,s,u-this.toSeconds(this.fadeOut))},p.prototype._stop=function(t){var e=this.toSeconds(t);this._activeSources.forEach(function(t){return t.stop(e)})},p.prototype.restart=function(t,e,o){return c.prototype.restart.call(this,t,e,o),this},p.prototype._restart=function(t,e,o){this._stop(t),this._start(t,e,o)},p.prototype.seek=function(t,e){var o=this.toSeconds(e);if("started"===this._state.getValueAtTime(o)){var r=this.toSeconds(t);this._stop(o),this._start(o,r)}return this},p.prototype.setLoopPoints=function(t,e){return this.loopStart=t,this.loopEnd=e,this},Object.defineProperty(p.prototype,"loopStart",{get:function(){return this._loopStart},set:function(t){this._loopStart=t,this.buffer.loaded&&(0,a.assertRange)(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(function(e){e.loopStart=t})},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(t){this._loopEnd=t,this.buffer.loaded&&(0,a.assertRange)(this.toSeconds(t),0,this.buffer.duration),this._activeSources.forEach(function(e){e.loopEnd=t})},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"buffer",{get:function(){return this._buffer},set:function(t){this._buffer.set(t)},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"loop",{get:function(){return this._loop},set:function(t){if(this._loop!==t&&(this._loop=t,this._activeSources.forEach(function(e){e.loop=t}),t)){var e=this._state.getNextState("stopped",this.now());e&&this._state.cancel(e.time)}},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t;var e=this.now(),o=this._state.getNextState("stopped",e);o&&o.implicitEnd&&(this._state.cancel(o.time),this._activeSources.forEach(function(t){return t.cancelStop()})),this._activeSources.forEach(function(o){o.playbackRate.setValueAtTime(t,e)})},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"reverse",{get:function(){return this._buffer.reverse},set:function(t){this._buffer.reverse=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"loaded",{get:function(){return this._buffer.loaded},enumerable:!0,configurable:!0}),p.prototype.dispose=function(){return c.prototype.dispose.call(this),this._activeSources.forEach(function(t){return t.dispose()}),this._activeSources.clear(),this._buffer.dispose(),this},(0,t.__decorate)([(0,u.timeRange)(0)],p.prototype,"fadeIn",void 0),(0,t.__decorate)([(0,u.timeRange)(0)],p.prototype,"fadeOut",void 0),p}(s.Source);exports.Player=c;
},{"tslib":"vCxL","../../core/context/ToneAudioBuffer":"GLhX","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../core/util/TypeCheck":"Mk3b","../Source":"RA2T","./ToneBufferSource":"WVku","../../core/util/Debug":"wPdo","../../core/util/Decorator":"utx5"}],"gU6G":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Players=void 0;var e=require("tslib"),t=require("../../component/channel/Volume"),r=require("../../core/context/ToneAudioBuffers"),o=require("../../core/context/ToneAudioNode"),u=require("../../core/util/Defaults"),n=require("../../core/util/Debug"),s=require("../../core/util/Interface"),i=require("../Source"),a=require("./Player"),f=function(o){function f(){var e=o.call(this,(0,u.optionsFromArguments)(f.getDefaults(),arguments,["urls","onload"],"urls"))||this;e.name="Players",e.input=void 0,e._players=new Map;var n=(0,u.optionsFromArguments)(f.getDefaults(),arguments,["urls","onload"],"urls");return e._volume=e.output=new t.Volume({context:e.context,volume:n.volume}),e.volume=e._volume.volume,(0,s.readOnly)(e,"volume"),e._buffers=new r.ToneAudioBuffers({urls:n.urls,onload:n.onload,baseUrl:n.baseUrl,onerror:n.onerror}),e.mute=n.mute,e._fadeIn=n.fadeIn,e._fadeOut=n.fadeOut,e}return(0,e.__extends)(f,o),f.getDefaults=function(){return Object.assign(i.Source.getDefaults(),{baseUrl:"",fadeIn:0,fadeOut:0,mute:!1,onload:s.noOp,onerror:s.noOp,urls:{},volume:0})},Object.defineProperty(f.prototype,"mute",{get:function(){return this._volume.mute},set:function(e){this._volume.mute=e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"fadeIn",{get:function(){return this._fadeIn},set:function(e){this._fadeIn=e,this._players.forEach(function(t){t.fadeIn=e})},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"fadeOut",{get:function(){return this._fadeOut},set:function(e){this._fadeOut=e,this._players.forEach(function(t){t.fadeOut=e})},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"state",{get:function(){return Array.from(this._players).some(function(t){var r=(0,e.__read)(t,2);r[0];return"started"===r[1].state})?"started":"stopped"},enumerable:!0,configurable:!0}),f.prototype.has=function(e){return this._buffers.has(e)},f.prototype.player=function(e){if((0,n.assert)(this.has(e),"No Player with the name "+e+" exists on this object"),!this._players.has(e)){var t=new a.Player({context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,url:this._buffers.get(e)}).connect(this.output);this._players.set(e,t)}return this._players.get(e)},Object.defineProperty(f.prototype,"loaded",{get:function(){return this._buffers.loaded},enumerable:!0,configurable:!0}),f.prototype.add=function(e,t,r){return(0,n.assert)(!this._buffers.has(e),"A buffer with that name already exists on this object"),this._buffers.add(e,t,r),this},f.prototype.stopAll=function(e){return this._players.forEach(function(t){return t.stop(e)}),this},f.prototype.dispose=function(){return o.prototype.dispose.call(this),this._volume.dispose(),this.volume.dispose(),this._players.forEach(function(e){return e.dispose()}),this._buffers.dispose(),this},f}(o.ToneAudioNode);exports.Players=f;
},{"tslib":"vCxL","../../component/channel/Volume":"a0V7","../../core/context/ToneAudioBuffers":"Ehuq","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../../core/util/Debug":"wPdo","../../core/util/Interface":"x3aV","../Source":"RA2T","./Player":"eqDL"}],"zFfP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GrainPlayer=void 0;var e=require("tslib"),t=require("../Source"),o=require("../../core/util/Interface"),r=require("../../core/context/ToneAudioBuffer"),i=require("../../core/util/Defaults"),n=require("../../core/clock/Clock"),s=require("./ToneBufferSource"),a=require("../../core/type/Conversions"),c=require("../../core/util/Debug"),u=function(u){function l(){var e=u.call(this,(0,i.optionsFromArguments)(l.getDefaults(),arguments,["url","onload"]))||this;e.name="GrainPlayer",e._loopStart=0,e._loopEnd=0,e._activeSources=[];var t=(0,i.optionsFromArguments)(l.getDefaults(),arguments,["url","onload"]);return e.buffer=new r.ToneAudioBuffer({onload:t.onload,onerror:t.onerror,reverse:t.reverse,url:t.url}),e._clock=new n.Clock({context:e.context,callback:e._tick.bind(e),frequency:1/t.grainSize}),e._playbackRate=t.playbackRate,e._grainSize=t.grainSize,e._overlap=t.overlap,e.detune=t.detune,e.overlap=t.overlap,e.loop=t.loop,e.playbackRate=t.playbackRate,e.grainSize=t.grainSize,e.loopStart=t.loopStart,e.loopEnd=t.loopEnd,e.reverse=t.reverse,e._clock.on("stop",e._onstop.bind(e)),e}return(0,e.__extends)(l,u),l.getDefaults=function(){return Object.assign(t.Source.getDefaults(),{onload:o.noOp,onerror:o.noOp,overlap:.1,grainSize:.2,playbackRate:1,detune:0,loop:!1,loopStart:0,loopEnd:0,reverse:!1})},l.prototype._start=function(e,t,o){t=(0,i.defaultArg)(t,0),t=this.toSeconds(t),e=this.toSeconds(e);var r=1/this._clock.frequency.getValueAtTime(e);this._clock.start(e,t/r),o&&this.stop(e+this.toSeconds(o))},l.prototype.restart=function(e,t,o){return u.prototype.restart.call(this,e,t,o),this},l.prototype._restart=function(e,t,o){this._stop(e),this._start(e,t,o)},l.prototype._stop=function(e){this._clock.stop(e)},l.prototype._onstop=function(e){this._activeSources.forEach(function(t){t.fadeOut=0,t.stop(e)}),this.onstop(this)},l.prototype._tick=function(e){var t=this,o=this._clock.getTicksAtTime(e),r=o*(1/this._clock.frequency.getValueAtTime(e));if(this.log("offset",r),!this.loop&&r>this.buffer.duration)this.stop(e);else{var i=r<this._overlap?0:this._overlap,n=new s.ToneBufferSource({context:this.context,url:this.buffer,fadeIn:i,fadeOut:this._overlap,loop:this.loop,loopStart:this._loopStart,loopEnd:this._loopEnd,playbackRate:(0,a.intervalToFrequencyRatio)(this.detune/100)}).connect(this.output);n.start(e,this._grainSize*o),n.stop(e+this._grainSize/this.playbackRate),this._activeSources.push(n),n.onended=function(){var e=t._activeSources.indexOf(n);-1!==e&&t._activeSources.splice(e,1)}}},Object.defineProperty(l.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(e){(0,c.assertRange)(e,.001),this._playbackRate=e,this.grainSize=this._grainSize},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"loopStart",{get:function(){return this._loopStart},set:function(e){this.buffer.loaded&&(0,c.assertRange)(this.toSeconds(e),0,this.buffer.duration),this._loopStart=this.toSeconds(e)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(e){this.buffer.loaded&&(0,c.assertRange)(this.toSeconds(e),0,this.buffer.duration),this._loopEnd=this.toSeconds(e)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"reverse",{get:function(){return this.buffer.reverse},set:function(e){this.buffer.reverse=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"grainSize",{get:function(){return this._grainSize},set:function(e){this._grainSize=this.toSeconds(e),this._clock.frequency.setValueAtTime(this._playbackRate/this._grainSize,this.now())},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"overlap",{get:function(){return this._overlap},set:function(e){this._overlap=this.toSeconds(e)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"loaded",{get:function(){return this.buffer.loaded},enumerable:!0,configurable:!0}),l.prototype.dispose=function(){return u.prototype.dispose.call(this),this.buffer.dispose(),this._clock.dispose(),this._activeSources.forEach(function(e){return e.dispose()}),this},l}(t.Source);exports.GrainPlayer=u;
},{"tslib":"vCxL","../Source":"RA2T","../../core/util/Interface":"x3aV","../../core/context/ToneAudioBuffer":"GLhX","../../core/util/Defaults":"gf59","../../core/clock/Clock":"w1LD","./ToneBufferSource":"WVku","../../core/type/Conversions":"o1kW","../../core/util/Debug":"wPdo"}],"T4KT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Noise");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./UserMedia");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./oscillator/Oscillator");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var o=require("./oscillator/AMOscillator");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var u=require("./oscillator/FMOscillator");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var n=require("./oscillator/PulseOscillator");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var c=require("./oscillator/FatOscillator");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}})});var f=require("./oscillator/PWMOscillator");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}})});var l=require("./oscillator/OmniOscillator");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}})});var a=require("./oscillator/ToneOscillatorNode");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}})});var i=require("./oscillator/LFO");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})});var s=require("./buffer/ToneBufferSource");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}})});var b=require("./buffer/Player");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}})});var d=require("./buffer/Players");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}})});var O=require("./buffer/GrainPlayer");Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return O[e]}})});
},{"./Noise":"TDl3","./UserMedia":"zL1f","./oscillator/Oscillator":"wURk","./oscillator/AMOscillator":"Rg7m","./oscillator/FMOscillator":"wdyw","./oscillator/PulseOscillator":"EYAj","./oscillator/FatOscillator":"inkK","./oscillator/PWMOscillator":"onqm","./oscillator/OmniOscillator":"Z3iX","./oscillator/ToneOscillatorNode":"fE8z","./oscillator/LFO":"Hodm","./buffer/ToneBufferSource":"WVku","./buffer/Player":"eqDL","./buffer/Players":"gU6G","./buffer/GrainPlayer":"zFfP"}],"fHMV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Abs=void 0;var e=require("tslib"),t=require("./SignalOperator"),r=require("./WaveShaper"),s=function(t){function s(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="Abs",e._abs=new r.WaveShaper({context:e.context,mapping:function(e){return Math.abs(e)<.001?0:Math.abs(e)}}),e.input=e._abs,e.output=e._abs,e}return(0,e.__extends)(s,t),s.prototype.dispose=function(){return t.prototype.dispose.call(this),this._abs.dispose(),this},s}(t.SignalOperator);exports.Abs=s;
},{"tslib":"vCxL","./SignalOperator":"vlBR","./WaveShaper":"jY3Y"}],"aPD5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GainToAudio=void 0;var e=require("tslib"),t=require("./SignalOperator"),r=require("./WaveShaper"),o=function(t){function o(){var e=null!==t&&t.apply(this,arguments)||this;return e.name="GainToAudio",e._norm=new r.WaveShaper({context:e.context,mapping:function(e){return 2*Math.abs(e)-1}}),e.input=e._norm,e.output=e._norm,e}return(0,e.__extends)(o,t),o.prototype.dispose=function(){return t.prototype.dispose.call(this),this._norm.dispose(),this},o}(t.SignalOperator);exports.GainToAudio=o;
},{"tslib":"vCxL","./SignalOperator":"vlBR","./WaveShaper":"jY3Y"}],"lsxS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Negate=void 0;var t=require("tslib"),e=require("./Multiply"),i=require("./SignalOperator"),r=function(i){function r(){var t=null!==i&&i.apply(this,arguments)||this;return t.name="Negate",t._multiply=new e.Multiply({context:t.context,value:-1}),t.input=t._multiply,t.output=t._multiply,t}return(0,t.__extends)(r,i),r.prototype.dispose=function(){return i.prototype.dispose.call(this),this._multiply.dispose(),this},r}(i.SignalOperator);exports.Negate=r;
},{"tslib":"vCxL","./Multiply":"uJ9R","./SignalOperator":"vlBR"}],"jlYG":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Subtract=void 0;var e=require("tslib"),t=require("../core/context/ToneAudioNode"),n=require("../core/context/Gain"),r=require("../core/util/Defaults"),s=require("../signal/Negate"),i=require("../signal/Signal"),u=function(u){function o(){var e=u.call(this,Object.assign((0,r.optionsFromArguments)(o.getDefaults(),arguments,["value"])))||this;return e.override=!1,e.name="Subtract",e._sum=new n.Gain({context:e.context}),e.input=e._sum,e.output=e._sum,e._neg=new s.Negate({context:e.context}),e.subtrahend=e._param,(0,t.connectSeries)(e._constantSource,e._neg,e._sum),e}return(0,e.__extends)(o,u),o.getDefaults=function(){return Object.assign(i.Signal.getDefaults(),{value:0})},o.prototype.dispose=function(){return u.prototype.dispose.call(this),this._neg.dispose(),this._sum.dispose(),this},o}(i.Signal);exports.Subtract=u;
},{"tslib":"vCxL","../core/context/ToneAudioNode":"lGdl","../core/context/Gain":"EfHt","../core/util/Defaults":"gf59","../signal/Negate":"lsxS","../signal/Signal":"u9T1"}],"XbAd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GreaterThanZero=void 0;var e=require("tslib"),t=require("./SignalOperator"),r=require("./Multiply"),n=require("./WaveShaper"),s=require("../core/util/Defaults"),o=function(t){function o(){var e=t.call(this,Object.assign((0,s.optionsFromArguments)(o.getDefaults(),arguments)))||this;return e.name="GreaterThanZero",e._thresh=e.output=new n.WaveShaper({context:e.context,length:127,mapping:function(e){return e<=0?0:1}}),e._scale=e.input=new r.Multiply({context:e.context,value:1e4}),e._scale.connect(e._thresh),e}return(0,e.__extends)(o,t),o.prototype.dispose=function(){return t.prototype.dispose.call(this),this._scale.dispose(),this._thresh.dispose(),this},o}(t.SignalOperator);exports.GreaterThanZero=o;
},{"tslib":"vCxL","./SignalOperator":"vlBR","./Multiply":"uJ9R","./WaveShaper":"jY3Y","../core/util/Defaults":"gf59"}],"WXhQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.GreaterThan=void 0;var e=require("tslib"),t=require("../core/util/Defaults"),r=require("./Subtract"),a=require("./Signal"),s=require("./GreaterThanZero"),o=require("../core/util/Interface"),n=function(n){function u(){var e=n.call(this,Object.assign((0,t.optionsFromArguments)(u.getDefaults(),arguments,["value"])))||this;e.name="GreaterThan",e.override=!1;var a=(0,t.optionsFromArguments)(u.getDefaults(),arguments,["value"]);return e._subtract=e.input=new r.Subtract({context:e.context,value:a.value}),e._gtz=e.output=new s.GreaterThanZero({context:e.context}),e.comparator=e._param=e._subtract.subtrahend,(0,o.readOnly)(e,"comparator"),e._subtract.connect(e._gtz),e}return(0,e.__extends)(u,n),u.getDefaults=function(){return Object.assign(a.Signal.getDefaults(),{value:0})},u.prototype.dispose=function(){return n.prototype.dispose.call(this),this._gtz.dispose(),this._subtract.dispose(),this.comparator.dispose(),this},u}(a.Signal);exports.GreaterThan=n;
},{"tslib":"vCxL","../core/util/Defaults":"gf59","./Subtract":"jlYG","./Signal":"u9T1","./GreaterThanZero":"XbAd","../core/util/Interface":"x3aV"}],"jBx9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pow=void 0;var e=require("tslib"),t=require("./WaveShaper"),n=require("../core/util/Defaults"),r=require("./SignalOperator"),o=function(o){function u(){var e=o.call(this,Object.assign((0,n.optionsFromArguments)(u.getDefaults(),arguments,["value"])))||this;e.name="Pow";var r=(0,n.optionsFromArguments)(u.getDefaults(),arguments,["value"]);return e._exponentScaler=e.input=e.output=new t.WaveShaper({context:e.context,mapping:e._expFunc(r.value),length:8192}),e._exponent=r.value,e}return(0,e.__extends)(u,o),u.getDefaults=function(){return Object.assign(r.SignalOperator.getDefaults(),{value:1})},u.prototype._expFunc=function(e){return function(t){return Math.pow(Math.abs(t),e)}},Object.defineProperty(u.prototype,"value",{get:function(){return this._exponent},set:function(e){this._exponent=e,this._exponentScaler.setMap(this._expFunc(this._exponent))},enumerable:!0,configurable:!0}),u.prototype.dispose=function(){return o.prototype.dispose.call(this),this._exponentScaler.dispose(),this},u}(r.SignalOperator);exports.Pow=o;
},{"tslib":"vCxL","./WaveShaper":"jY3Y","../core/util/Defaults":"gf59","./SignalOperator":"vlBR"}],"zv1V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ScaleExp=void 0;var e=require("tslib"),t=require("./Scale"),n=require("../core/util/Defaults"),o=require("./Pow"),r=function(r){function s(){var e=r.call(this,Object.assign((0,n.optionsFromArguments)(s.getDefaults(),arguments,["min","max","exponent"])))||this;e.name="ScaleExp";var t=(0,n.optionsFromArguments)(s.getDefaults(),arguments,["min","max","exponent"]);return e.input=e._exp=new o.Pow({context:e.context,value:t.exponent}),e._exp.connect(e._mult),e}return(0,e.__extends)(s,r),s.getDefaults=function(){return Object.assign(t.Scale.getDefaults(),{exponent:1})},Object.defineProperty(s.prototype,"exponent",{get:function(){return this._exp.value},set:function(e){this._exp.value=e},enumerable:!0,configurable:!0}),s.prototype.dispose=function(){return r.prototype.dispose.call(this),this._exp.dispose(),this},s}(t.Scale);exports.ScaleExp=r;
},{"tslib":"vCxL","./Scale":"qHH3","../core/util/Defaults":"gf59","./Pow":"jBx9"}],"TiT4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.SyncedSignal=void 0;var t=require("tslib"),e=require("./Signal"),o=require("../core/util/Defaults"),n=require("../core/type/TransportTime"),s=require("./ToneConstantSource"),a=function(a){function r(){var t=a.call(this,(0,o.optionsFromArguments)(e.Signal.getDefaults(),arguments,["value","units"]))||this;t.name="SyncedSignal",t.override=!1;var n=(0,o.optionsFromArguments)(e.Signal.getDefaults(),arguments,["value","units"]);return t._lastVal=n.value,t._synced=t.context.transport.scheduleRepeat(t._onTick.bind(t),"1i"),t._syncedCallback=t._anchorValue.bind(t),t.context.transport.on("start",t._syncedCallback),t.context.transport.on("pause",t._syncedCallback),t.context.transport.on("stop",t._syncedCallback),t._constantSource.disconnect(),t._constantSource.stop(0),t._constantSource=t.output=new s.ToneConstantSource({context:t.context,offset:n.value,units:n.units}).start(0),t.setValueAtTime(n.value,0),t}return(0,t.__extends)(r,a),r.prototype._onTick=function(t){var e=a.prototype.getValueAtTime.call(this,this.context.transport.seconds);this._lastVal!==e&&(this._lastVal=e,this._constantSource.offset.setValueAtTime(e,t))},r.prototype._anchorValue=function(t){var e=a.prototype.getValueAtTime.call(this,this.context.transport.seconds);this._lastVal=e,this._constantSource.offset.cancelAndHoldAtTime(t),this._constantSource.offset.setValueAtTime(e,t)},r.prototype.getValueAtTime=function(t){var e=new n.TransportTimeClass(this.context,t).toSeconds();return a.prototype.getValueAtTime.call(this,e)},r.prototype.setValueAtTime=function(t,e){var o=new n.TransportTimeClass(this.context,e).toSeconds();return a.prototype.setValueAtTime.call(this,t,o),this},r.prototype.linearRampToValueAtTime=function(t,e){var o=new n.TransportTimeClass(this.context,e).toSeconds();return a.prototype.linearRampToValueAtTime.call(this,t,o),this},r.prototype.exponentialRampToValueAtTime=function(t,e){var o=new n.TransportTimeClass(this.context,e).toSeconds();return a.prototype.exponentialRampToValueAtTime.call(this,t,o),this},r.prototype.setTargetAtTime=function(t,e,o){var s=new n.TransportTimeClass(this.context,e).toSeconds();return a.prototype.setTargetAtTime.call(this,t,s,o),this},r.prototype.cancelScheduledValues=function(t){var e=new n.TransportTimeClass(this.context,t).toSeconds();return a.prototype.cancelScheduledValues.call(this,e),this},r.prototype.setValueCurveAtTime=function(t,e,o,s){var r=new n.TransportTimeClass(this.context,e).toSeconds();return o=this.toSeconds(o),a.prototype.setValueCurveAtTime.call(this,t,r,o,s),this},r.prototype.cancelAndHoldAtTime=function(t){var e=new n.TransportTimeClass(this.context,t).toSeconds();return a.prototype.cancelAndHoldAtTime.call(this,e),this},r.prototype.setRampPoint=function(t){var e=new n.TransportTimeClass(this.context,t).toSeconds();return a.prototype.setRampPoint.call(this,e),this},r.prototype.exponentialRampTo=function(t,e,o){var s=new n.TransportTimeClass(this.context,o).toSeconds();return a.prototype.exponentialRampTo.call(this,t,e,s),this},r.prototype.linearRampTo=function(t,e,o){var s=new n.TransportTimeClass(this.context,o).toSeconds();return a.prototype.linearRampTo.call(this,t,e,s),this},r.prototype.targetRampTo=function(t,e,o){var s=new n.TransportTimeClass(this.context,o).toSeconds();return a.prototype.targetRampTo.call(this,t,e,s),this},r.prototype.dispose=function(){return a.prototype.dispose.call(this),this.context.transport.clear(this._synced),this.context.transport.off("start",this._syncedCallback),this.context.transport.off("pause",this._syncedCallback),this.context.transport.off("stop",this._syncedCallback),this._constantSource.dispose(),this},r}(e.Signal);exports.SyncedSignal=a;
},{"tslib":"vCxL","./Signal":"u9T1","../core/util/Defaults":"gf59","../core/type/TransportTime":"PZqX","./ToneConstantSource":"tmPc"}],"jnCA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Add");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./Abs");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./AudioToGain");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var n=require("./GainToAudio");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var u=require("./GreaterThan");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var o=require("./GreaterThanZero");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var c=require("./Multiply");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}})});var f=require("./Negate");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}})});var a=require("./Pow");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}})});var i=require("./Signal");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})});var l=require("./Scale");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}})});var d=require("./ScaleExp");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}})});var s=require("./Subtract");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}})});var b=require("./SyncedSignal");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}})});var p=require("./WaveShaper");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}})});var y=require("./Zero");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return y[e]}})});
},{"./Add":"nMdK","./Abs":"fHMV","./AudioToGain":"faOy","./GainToAudio":"aPD5","./GreaterThan":"WXhQ","./GreaterThanZero":"XbAd","./Multiply":"uJ9R","./Negate":"lsxS","./Pow":"jBx9","./Signal":"u9T1","./Scale":"qHH3","./ScaleExp":"zv1V","./Subtract":"jlYG","./SyncedSignal":"TiT4","./WaveShaper":"jY3Y","./Zero":"yJlf"}],"awNY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Envelope=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),i=require("../../core/util/Defaults"),r=require("../../core/util/TypeCheck"),a=require("../../signal/Signal"),s=require("../../core/context/OfflineContext"),n=require("../../core/util/Debug"),o=require("../../core/util/Decorator"),u=function(u){function l(){var e=u.call(this,(0,i.optionsFromArguments)(l.getDefaults(),arguments,["attack","decay","sustain","release"]))||this;e.name="Envelope",e._sig=new a.Signal({context:e.context,value:0}),e.output=e._sig,e.input=void 0;var t=(0,i.optionsFromArguments)(l.getDefaults(),arguments,["attack","decay","sustain","release"]);return e.attack=t.attack,e.decay=t.decay,e.sustain=t.sustain,e.release=t.release,e.attackCurve=t.attackCurve,e.releaseCurve=t.releaseCurve,e.decayCurve=t.decayCurve,e}return(0,e.__extends)(l,u),l.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})},Object.defineProperty(l.prototype,"value",{get:function(){return this.getValueAtTime(this.now())},enumerable:!0,configurable:!0}),l.prototype._getCurve=function(e,t){if((0,r.isString)(e))return e;var i=void 0;for(i in c)if(c[i][t]===e)return i;return e},l.prototype._setCurve=function(e,t,i){if((0,r.isString)(i)&&Reflect.has(c,i)){var a=c[i];(0,r.isObject)(a)?"_decayCurve"!==e&&(this[e]=a[t]):this[e]=a}else{if(!(0,r.isArray)(i)||"_decayCurve"===e)throw new Error("Envelope: invalid curve: "+i);this[e]=i}},Object.defineProperty(l.prototype,"attackCurve",{get:function(){return this._getCurve(this._attackCurve,"In")},set:function(e){this._setCurve("_attackCurve","In",e)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"releaseCurve",{get:function(){return this._getCurve(this._releaseCurve,"Out")},set:function(e){this._setCurve("_releaseCurve","Out",e)},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"decayCurve",{get:function(){return this._decayCurve},set:function(e){(0,n.assert)(["linear","exponential"].some(function(t){return t===e}),"Invalid envelope curve: "+e),this._decayCurve=e},enumerable:!0,configurable:!0}),l.prototype.triggerAttack=function(e,t){void 0===t&&(t=1),this.log("triggerAttack",e,t),e=this.toSeconds(e);var i=this.toSeconds(this.attack),r=this.toSeconds(this.decay),a=this.getValueAtTime(e);a>0&&(i=(1-a)/(1/i));if(i<this.sampleTime)this._sig.cancelScheduledValues(e),this._sig.setValueAtTime(t,e);else if("linear"===this._attackCurve)this._sig.linearRampTo(t,i,e);else if("exponential"===this._attackCurve)this._sig.targetRampTo(t,i,e);else{this._sig.cancelAndHoldAtTime(e);for(var s=this._attackCurve,n=1;n<s.length;n++)if(s[n-1]<=a&&a<=s[n]){(s=this._attackCurve.slice(n))[0]=a;break}this._sig.setValueCurveAtTime(s,e,i,t)}if(r&&this.sustain<1){var o=t*this.sustain,u=e+i;this.log("decay",u),"linear"===this._decayCurve?this._sig.linearRampToValueAtTime(o,r+u):this._sig.exponentialApproachValueAtTime(o,u,r)}return this},l.prototype.triggerRelease=function(e){this.log("triggerRelease",e),e=this.toSeconds(e);var t=this.getValueAtTime(e);if(t>0){var i=this.toSeconds(this.release);i<this.sampleTime?this._sig.setValueAtTime(0,e):"linear"===this._releaseCurve?this._sig.linearRampTo(0,i,e):"exponential"===this._releaseCurve?this._sig.targetRampTo(0,i,e):((0,n.assert)((0,r.isArray)(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(e),this._sig.setValueCurveAtTime(this._releaseCurve,e,i,t))}return this},l.prototype.getValueAtTime=function(e){return this._sig.getValueAtTime(e)},l.prototype.triggerAttackRelease=function(e,t,i){return void 0===i&&(i=1),t=this.toSeconds(t),this.triggerAttack(t,i),this.triggerRelease(t+this.toSeconds(e)),this},l.prototype.cancel=function(e){return this._sig.cancelScheduledValues(this.toSeconds(e)),this},l.prototype.connect=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=0),(0,a.connectSignal)(this,e,t,i),this},l.prototype.asArray=function(t){return void 0===t&&(t=1024),(0,e.__awaiter)(this,void 0,void 0,function(){var i,r,a,n,o,u,c;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return i=t/this.context.sampleRate,r=new s.OfflineContext(1,i,this.context.sampleRate),a=this.toSeconds(this.attack)+this.toSeconds(this.decay),n=a+this.toSeconds(this.release),u=n+(o=.1*n),(c=new this.constructor(Object.assign(this.get(),{attack:i*this.toSeconds(this.attack)/u,decay:i*this.toSeconds(this.decay)/u,release:i*this.toSeconds(this.release)/u,context:r})))._sig.toDestination(),c.triggerAttackRelease(i*(a+o)/u,0),[4,r.render()];case 1:return[2,e.sent().getChannelData(0)]}})})},l.prototype.dispose=function(){return u.prototype.dispose.call(this),this._sig.dispose(),this},(0,e.__decorate)([(0,o.timeRange)(0)],l.prototype,"attack",void 0),(0,e.__decorate)([(0,o.timeRange)(0)],l.prototype,"decay",void 0),(0,e.__decorate)([(0,o.range)(0,1)],l.prototype,"sustain",void 0),(0,e.__decorate)([(0,o.timeRange)(0)],l.prototype,"release",void 0),l}(t.ToneAudioNode);exports.Envelope=u;var c=function(){var e,t,i=[];for(e=0;e<128;e++)i[e]=Math.sin(e/127*(Math.PI/2));var r=[];for(e=0;e<127;e++){t=e/127;var a=Math.sin(t*(2*Math.PI)*6.4-Math.PI/2)+1;r[e]=a/10+.83*t}r[127]=1;var s=[];for(e=0;e<128;e++)s[e]=Math.ceil(e/127*5)/5;var n=[];for(e=0;e<128;e++)t=e/127,n[e]=.5*(1-Math.cos(Math.PI*t));var o,u=[];for(e=0;e<128;e++){t=e/127;var c=4*Math.pow(t,3)+.2,l=Math.cos(c*Math.PI*2*t);u[e]=Math.abs(l*(1-t))}function h(e){for(var t=new Array(e.length),i=0;i<e.length;i++)t[i]=1-e[i];return t}return{bounce:{In:h(u),Out:u},cosine:{In:i,Out:(o=i,o.slice(0).reverse())},exponential:"exponential",linear:"linear",ripple:{In:r,Out:h(r)},sine:{In:n,Out:h(n)},step:{In:s,Out:h(s)}}}();
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../../core/util/TypeCheck":"Mk3b","../../signal/Signal":"u9T1","../../core/context/OfflineContext":"IbG8","../../core/util/Debug":"wPdo","../../core/util/Decorator":"utx5"}],"NtmW":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Instrument=void 0;var e=require("tslib"),t=require("../component/channel/Volume"),r=require("../core/context/ToneAudioNode"),s=require("../core/util/Defaults"),i=require("../core/util/Interface"),o=function(o){function n(){var e=o.call(this,(0,s.optionsFromArguments)(n.getDefaults(),arguments))||this;e._scheduledEvents=[],e._synced=!1,e._original_triggerAttack=e.triggerAttack,e._original_triggerRelease=e.triggerRelease;var r=(0,s.optionsFromArguments)(n.getDefaults(),arguments);return e._volume=e.output=new t.Volume({context:e.context,volume:r.volume}),e.volume=e._volume.volume,(0,i.readOnly)(e,"volume"),e}return(0,e.__extends)(n,o),n.getDefaults=function(){return Object.assign(r.ToneAudioNode.getDefaults(),{volume:0})},n.prototype.sync=function(){return this._synced||(this._synced=!0,this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0)),this},n.prototype._syncMethod=function(e,t){var r=this,s=this["_original_"+e]=this[e];this[e]=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=e[t],n=r.context.transport.schedule(function(i){e[t]=i,s.apply(r,e)},o);r._scheduledEvents.push(n)}},n.prototype.unsync=function(){var e=this;return this._scheduledEvents.forEach(function(t){return e.context.transport.clear(t)}),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease),this},n.prototype.triggerAttackRelease=function(e,t,r,s){var i=this.toSeconds(r),o=this.toSeconds(t);return this.triggerAttack(e,i,s),this.triggerRelease(i+o),this},n.prototype.dispose=function(){return o.prototype.dispose.call(this),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this},n}(r.ToneAudioNode);exports.Instrument=o;
},{"tslib":"vCxL","../component/channel/Volume":"a0V7","../core/context/ToneAudioNode":"lGdl","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV"}],"OnvU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Monophonic=void 0;var e=require("tslib"),t=require("../core/type/Frequency"),r=require("../core/util/Defaults"),o=require("../core/util/Interface"),n=require("../instrument/Instrument"),i=require("../core/util/Decorator"),s=function(s){function u(){var e=s.call(this,(0,r.optionsFromArguments)(u.getDefaults(),arguments))||this,t=(0,r.optionsFromArguments)(u.getDefaults(),arguments);return e.portamento=t.portamento,e.onsilence=t.onsilence,e}return(0,e.__extends)(u,s),u.getDefaults=function(){return Object.assign(n.Instrument.getDefaults(),{detune:0,onsilence:o.noOp,portamento:0})},u.prototype.triggerAttack=function(e,t,r){void 0===r&&(r=1),this.log("triggerAttack",e,t,r);var o=this.toSeconds(t);return this._triggerEnvelopeAttack(o,r),this.setNote(e,o),this},u.prototype.triggerRelease=function(e){this.log("triggerRelease",e);var t=this.toSeconds(e);return this._triggerEnvelopeRelease(t),this},u.prototype.setNote=function(e,r){var o=this.toSeconds(r),n=e instanceof t.FrequencyClass?e.toFrequency():e;if(this.portamento>0&&this.getLevelAtTime(o)>.05){var i=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(n,i,o)}else this.frequency.setValueAtTime(n,o);return this},(0,e.__decorate)([(0,i.timeRange)(0)],u.prototype,"portamento",void 0),u}(n.Instrument);exports.Monophonic=s;
},{"tslib":"vCxL","../core/type/Frequency":"wJLn","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV","../instrument/Instrument":"NtmW","../core/util/Decorator":"utx5"}],"qOGN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AmplitudeEnvelope=void 0;var e=require("tslib"),t=require("../../core/context/Gain"),i=require("../../core/util/Defaults"),n=require("./Envelope"),o=function(n){function o(){var e=n.call(this,(0,i.optionsFromArguments)(o.getDefaults(),arguments,["attack","decay","sustain","release"]))||this;return e.name="AmplitudeEnvelope",e._gainNode=new t.Gain({context:e.context,gain:0}),e.output=e._gainNode,e.input=e._gainNode,e._sig.connect(e._gainNode.gain),e.output=e._gainNode,e.input=e._gainNode,e}return(0,e.__extends)(o,n),o.prototype.dispose=function(){return n.prototype.dispose.call(this),this._gainNode.dispose(),this},o}(n.Envelope);exports.AmplitudeEnvelope=o;
},{"tslib":"vCxL","../../core/context/Gain":"EfHt","../../core/util/Defaults":"gf59","./Envelope":"awNY"}],"MeiH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Synth=void 0;var e=require("tslib"),t=require("../component/envelope/AmplitudeEnvelope"),o=require("../component/envelope/Envelope"),n=require("../core/context/ToneAudioNode"),s=require("../core/util/Defaults"),i=require("../core/util/Interface"),r=require("../source/oscillator/OmniOscillator"),l=require("../source/Source"),c=require("./Monophonic"),u=function(u){function a(){var e=u.call(this,(0,s.optionsFromArguments)(a.getDefaults(),arguments))||this;e.name="Synth";var o=(0,s.optionsFromArguments)(a.getDefaults(),arguments);return e.oscillator=new r.OmniOscillator(Object.assign({context:e.context,detune:o.detune,onstop:function(){return e.onsilence(e)}},o.oscillator)),e.frequency=e.oscillator.frequency,e.detune=e.oscillator.detune,e.envelope=new t.AmplitudeEnvelope(Object.assign({context:e.context},o.envelope)),e.oscillator.chain(e.envelope,e.output),(0,i.readOnly)(e,["oscillator","frequency","detune","envelope"]),e}return(0,e.__extends)(a,u),a.getDefaults=function(){return Object.assign(c.Monophonic.getDefaults(),{envelope:Object.assign((0,s.omitFromObject)(o.Envelope.getDefaults(),Object.keys(n.ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign((0,s.omitFromObject)(r.OmniOscillator.getDefaults(),(0,e.__spread)(Object.keys(l.Source.getDefaults()),["frequency","detune"])),{type:"triangle"})})},a.prototype._triggerEnvelopeAttack=function(e,t){if(this.envelope.triggerAttack(e,t),this.oscillator.start(e),0===this.envelope.sustain){var o=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+o+n)}},a.prototype._triggerEnvelopeRelease=function(e){this.envelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))},a.prototype.getLevelAtTime=function(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)},a.prototype.dispose=function(){return u.prototype.dispose.call(this),this.oscillator.dispose(),this.envelope.dispose(),this},a}(c.Monophonic);exports.Synth=u;
},{"tslib":"vCxL","../component/envelope/AmplitudeEnvelope":"qOGN","../component/envelope/Envelope":"awNY","../core/context/ToneAudioNode":"lGdl","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV","../source/oscillator/OmniOscillator":"Z3iX","../source/Source":"RA2T","./Monophonic":"OnvU"}],"BhkC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ModulationSynth=void 0;var e=require("tslib"),t=require("../signal/Signal"),o=require("../signal/Multiply"),n=require("../core/context/Gain"),i=require("../component/envelope/Envelope"),r=require("../core/context/ToneAudioNode"),l=require("./Monophonic"),s=require("../source/oscillator/OmniOscillator"),a=require("../source/Source"),u=require("./Synth"),c=require("../core/util/Interface"),p=require("../core/util/Defaults"),d=function(d){function m(){var e=d.call(this,(0,p.optionsFromArguments)(m.getDefaults(),arguments))||this;e.name="ModulationSynth";var i=(0,p.optionsFromArguments)(m.getDefaults(),arguments);return e._carrier=new u.Synth({context:e.context,oscillator:i.oscillator,envelope:i.envelope,onsilence:function(){return e.onsilence(e)},volume:-10}),e._modulator=new u.Synth({context:e.context,oscillator:i.modulation,envelope:i.modulationEnvelope,volume:-10}),e.oscillator=e._carrier.oscillator,e.envelope=e._carrier.envelope,e.modulation=e._modulator.oscillator,e.modulationEnvelope=e._modulator.envelope,e.frequency=new t.Signal({context:e.context,units:"frequency"}),e.detune=new t.Signal({context:e.context,value:i.detune,units:"cents"}),e.harmonicity=new o.Multiply({context:e.context,value:i.harmonicity,minValue:0}),e._modulationNode=new n.Gain({context:e.context,gain:0}),(0,c.readOnly)(e,["frequency","harmonicity","oscillator","envelope","modulation","modulationEnvelope","detune"]),e}return(0,e.__extends)(m,d),m.getDefaults=function(){return Object.assign(l.Monophonic.getDefaults(),{harmonicity:3,oscillator:Object.assign((0,p.omitFromObject)(s.OmniOscillator.getDefaults(),(0,e.__spread)(Object.keys(a.Source.getDefaults()),["frequency","detune"])),{type:"sine"}),envelope:Object.assign((0,p.omitFromObject)(i.Envelope.getDefaults(),Object.keys(r.ToneAudioNode.getDefaults())),{attack:.01,decay:.01,sustain:1,release:.5}),modulation:Object.assign((0,p.omitFromObject)(s.OmniOscillator.getDefaults(),(0,e.__spread)(Object.keys(a.Source.getDefaults()),["frequency","detune"])),{type:"square"}),modulationEnvelope:Object.assign((0,p.omitFromObject)(i.Envelope.getDefaults(),Object.keys(r.ToneAudioNode.getDefaults())),{attack:.5,decay:0,sustain:1,release:.5})})},m.prototype._triggerEnvelopeAttack=function(e,t){this._carrier._triggerEnvelopeAttack(e,t),this._modulator._triggerEnvelopeAttack(e,t)},m.prototype._triggerEnvelopeRelease=function(e){return this._carrier._triggerEnvelopeRelease(e),this._modulator._triggerEnvelopeRelease(e),this},m.prototype.getLevelAtTime=function(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)},m.prototype.dispose=function(){return d.prototype.dispose.call(this),this._carrier.dispose(),this._modulator.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._modulationNode.dispose(),this},m}(l.Monophonic);exports.ModulationSynth=d;
},{"tslib":"vCxL","../signal/Signal":"u9T1","../signal/Multiply":"uJ9R","../core/context/Gain":"EfHt","../component/envelope/Envelope":"awNY","../core/context/ToneAudioNode":"lGdl","./Monophonic":"OnvU","../source/oscillator/OmniOscillator":"Z3iX","../source/Source":"RA2T","./Synth":"MeiH","../core/util/Interface":"x3aV","../core/util/Defaults":"gf59"}],"Zw5O":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AMSynth=void 0;var e=require("tslib"),t=require("../signal/AudioToGain"),o=require("../core/util/Defaults"),n=require("./ModulationSynth"),r=function(n){function r(){var e=n.call(this,(0,o.optionsFromArguments)(r.getDefaults(),arguments))||this;return e.name="AMSynth",e._modulationScale=new t.AudioToGain({context:e.context}),e.frequency.connect(e._carrier.frequency),e.frequency.chain(e.harmonicity,e._modulator.frequency),e.detune.fan(e._carrier.detune,e._modulator.detune),e._modulator.chain(e._modulationScale,e._modulationNode.gain),e._carrier.chain(e._modulationNode,e.output),e}return(0,e.__extends)(r,n),r.prototype.dispose=function(){return n.prototype.dispose.call(this),this._modulationScale.dispose(),this},r}(n.ModulationSynth);exports.AMSynth=r;
},{"tslib":"vCxL","../signal/AudioToGain":"faOy","../core/util/Defaults":"gf59","./ModulationSynth":"BhkC"}],"OcAm":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Filter=void 0;var e=require("tslib"),t=require("../../core/context/Gain"),n=require("../../core/context/ToneAudioNode"),r=require("../../core/util/Defaults"),i=require("../../core/util/Interface"),o=require("../../core/util/TypeCheck"),s=require("../../signal/Signal"),u=require("../../core/util/Debug"),a=function(a){function c(){var e=a.call(this,(0,r.optionsFromArguments)(c.getDefaults(),arguments,["frequency","type","rolloff"]))||this;e.name="Filter",e.input=new t.Gain({context:e.context}),e.output=new t.Gain({context:e.context}),e._filters=[];var n=(0,r.optionsFromArguments)(c.getDefaults(),arguments,["frequency","type","rolloff"]);return e._filters=[],e.Q=new s.Signal({context:e.context,units:"positive",value:n.Q}),e.frequency=new s.Signal({context:e.context,units:"frequency",value:n.frequency}),e.detune=new s.Signal({context:e.context,units:"cents",value:n.detune}),e.gain=new s.Signal({context:e.context,units:"decibels",value:n.gain}),e._type=n.type,e.rolloff=n.rolloff,(0,i.readOnly)(e,["detune","frequency","gain","Q"]),e}return(0,e.__extends)(c,a),c.getDefaults=function(){return Object.assign(n.ToneAudioNode.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})},Object.defineProperty(c.prototype,"type",{get:function(){return this._type},set:function(e){(0,u.assert)(-1!==["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(e),"Invalid filter type: "+e),this._type=e,this._filters.forEach(function(t){return t.type=e})},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"rolloff",{get:function(){return this._rolloff},set:function(t){var r=(0,o.isNumber)(t)?t:parseInt(t,10),i=[-12,-24,-48,-96],s=i.indexOf(r);(0,u.assert)(-1!==s,"rolloff can only be "+i.join(", ")),s+=1,this._rolloff=r,this.input.disconnect(),this._filters.forEach(function(e){return e.disconnect()}),this._filters=new Array(s);for(var a=0;a<s;a++){var c=this.context.createBiquadFilter();c.type=this._type,this.frequency.connect(c.frequency),this.detune.connect(c.detune),this.Q.connect(c.Q),this.gain.connect(c.gain),this._filters[a]=c}this._internalChannels=this._filters,n.connectSeries.apply(void 0,(0,e.__spread)([this.input],this._internalChannels,[this.output]))},enumerable:!0,configurable:!0}),c.prototype.getFrequencyResponse=function(e){var t=this;void 0===e&&(e=128);for(var n=new Float32Array(e).map(function(){return 1}),r=new Float32Array(e),i=0;i<e;i++){var o=19980*Math.pow(i/e,2)+20;r[i]=o}var s=new Float32Array(e),u=new Float32Array(e);return this._filters.forEach(function(){var e=t.context.createBiquadFilter();e.type=t._type,e.Q.value=t.Q.value,e.frequency.value=t.frequency.value,e.gain.value=t.gain.value,e.getFrequencyResponse(r,s,u),s.forEach(function(e,t){n[t]*=e})}),n},c.prototype.dispose=function(){return a.prototype.dispose.call(this),this._filters.forEach(function(e){e.disconnect()}),(0,i.writable)(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this},c}(n.ToneAudioNode);exports.Filter=a;
},{"tslib":"vCxL","../../core/context/Gain":"EfHt","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../core/util/TypeCheck":"Mk3b","../../signal/Signal":"u9T1","../../core/util/Debug":"wPdo"}],"gTYf":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FrequencyEnvelope=void 0;var e=require("tslib"),t=require("../../core/util/Defaults"),n=require("./Envelope"),s=require("../../signal/Scale"),o=require("../../signal/Pow"),r=require("../../core/util/Debug"),a=function(a){function u(){var e=a.call(this,(0,t.optionsFromArguments)(u.getDefaults(),arguments,["attack","decay","sustain","release"]))||this;e.name="FrequencyEnvelope";var n=(0,t.optionsFromArguments)(u.getDefaults(),arguments,["attack","decay","sustain","release"]);return e._octaves=n.octaves,e._baseFrequency=e.toFrequency(n.baseFrequency),e._exponent=e.input=new o.Pow({context:e.context,value:n.exponent}),e._scale=e.output=new s.Scale({context:e.context,min:e._baseFrequency,max:e._baseFrequency*Math.pow(2,e._octaves)}),e._sig.chain(e._exponent,e._scale),e}return(0,e.__extends)(u,a),u.getDefaults=function(){return Object.assign(n.Envelope.getDefaults(),{baseFrequency:200,exponent:1,octaves:4})},Object.defineProperty(u.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(e){var t=this.toFrequency(e);(0,r.assertRange)(t,0),this._baseFrequency=t,this._scale.min=this._baseFrequency,this.octaves=this._octaves},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"octaves",{get:function(){return this._octaves},set:function(e){(0,r.assertRange)(e,0),this._octaves=e,this._scale.max=this._baseFrequency*Math.pow(2,e)},enumerable:!0,configurable:!0}),Object.defineProperty(u.prototype,"exponent",{get:function(){return this._exponent.value},set:function(e){this._exponent.value=e},enumerable:!0,configurable:!0}),u.prototype.dispose=function(){return a.prototype.dispose.call(this),this._exponent.dispose(),this._scale.dispose(),this},u}(n.Envelope);exports.FrequencyEnvelope=a;
},{"tslib":"vCxL","../../core/util/Defaults":"gf59","./Envelope":"awNY","../../signal/Scale":"qHH3","../../signal/Pow":"jBx9","../../core/util/Debug":"wPdo"}],"GHPN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MonoSynth=void 0;var e=require("tslib"),t=require("../component/envelope/AmplitudeEnvelope"),o=require("../component/envelope/Envelope"),n=require("../component/filter/Filter"),i=require("../core/util/Defaults"),s=require("../core/util/Interface"),r=require("../instrument/Monophonic"),l=require("../source/oscillator/OmniOscillator"),c=require("../source/Source"),a=require("../component/envelope/FrequencyEnvelope"),u=require("../core/context/ToneAudioNode"),p=function(p){function f(){var e=p.call(this,(0,i.optionsFromArguments)(f.getDefaults(),arguments))||this;e.name="MonoSynth";var o=(0,i.optionsFromArguments)(f.getDefaults(),arguments);return e.oscillator=new l.OmniOscillator(Object.assign(o.oscillator,{context:e.context,detune:o.detune,onstop:function(){return e.onsilence(e)}})),e.frequency=e.oscillator.frequency,e.detune=e.oscillator.detune,e.filter=new n.Filter(Object.assign(o.filter,{context:e.context})),e.filterEnvelope=new a.FrequencyEnvelope(Object.assign(o.filterEnvelope,{context:e.context})),e.envelope=new t.AmplitudeEnvelope(Object.assign(o.envelope,{context:e.context})),e.oscillator.chain(e.filter,e.envelope,e.output),e.filterEnvelope.connect(e.filter.frequency),(0,s.readOnly)(e,["oscillator","frequency","detune","filter","filterEnvelope","envelope"]),e}return(0,e.__extends)(f,p),f.getDefaults=function(){return Object.assign(r.Monophonic.getDefaults(),{envelope:Object.assign((0,i.omitFromObject)(o.Envelope.getDefaults(),Object.keys(u.ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.9}),filter:Object.assign((0,i.omitFromObject)(n.Filter.getDefaults(),Object.keys(u.ToneAudioNode.getDefaults())),{Q:1,rolloff:-12,type:"lowpass"}),filterEnvelope:Object.assign((0,i.omitFromObject)(a.FrequencyEnvelope.getDefaults(),Object.keys(u.ToneAudioNode.getDefaults())),{attack:.6,baseFrequency:200,decay:.2,exponent:2,octaves:3,release:2,sustain:.5}),oscillator:Object.assign((0,i.omitFromObject)(l.OmniOscillator.getDefaults(),Object.keys(c.Source.getDefaults())),{type:"sawtooth"})})},f.prototype._triggerEnvelopeAttack=function(e,t){if(void 0===t&&(t=1),this.envelope.triggerAttack(e,t),this.filterEnvelope.triggerAttack(e),this.oscillator.start(e),0===this.envelope.sustain){var o=this.toSeconds(this.envelope.attack),n=this.toSeconds(this.envelope.decay);this.oscillator.stop(e+o+n)}},f.prototype._triggerEnvelopeRelease=function(e){this.envelope.triggerRelease(e),this.filterEnvelope.triggerRelease(e),this.oscillator.stop(e+this.toSeconds(this.envelope.release))},f.prototype.getLevelAtTime=function(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)},f.prototype.dispose=function(){return p.prototype.dispose.call(this),this.oscillator.dispose(),this.envelope.dispose(),this.filterEnvelope.dispose(),this.filter.dispose(),this},f}(r.Monophonic);exports.MonoSynth=p;
},{"tslib":"vCxL","../component/envelope/AmplitudeEnvelope":"qOGN","../component/envelope/Envelope":"awNY","../component/filter/Filter":"OcAm","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV","../instrument/Monophonic":"OnvU","../source/oscillator/OmniOscillator":"Z3iX","../source/Source":"RA2T","../component/envelope/FrequencyEnvelope":"gTYf","../core/context/ToneAudioNode":"lGdl"}],"nEbI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DuoSynth=void 0;var e=require("tslib"),t=require("./Monophonic"),o=require("./MonoSynth"),n=require("../signal/Signal"),i=require("../core/util/Interface"),r=require("../source/oscillator/LFO"),c=require("../core/context/Gain"),a=require("../signal/Multiply"),s=require("../core/util/Defaults"),u=function(u){function v(){var e=u.call(this,(0,s.optionsFromArguments)(v.getDefaults(),arguments))||this;e.name="DuoSynth";var t=(0,s.optionsFromArguments)(v.getDefaults(),arguments);return e.voice0=new o.MonoSynth(Object.assign(t.voice0,{context:e.context,onsilence:function(){return e.onsilence(e)}})),e.voice1=new o.MonoSynth(Object.assign(t.voice1,{context:e.context})),e.harmonicity=new a.Multiply({context:e.context,units:"positive",value:t.harmonicity}),e._vibrato=new r.LFO({frequency:t.vibratoRate,context:e.context,min:-50,max:50}),e._vibrato.start(),e.vibratoRate=e._vibrato.frequency,e._vibratoGain=new c.Gain({context:e.context,units:"normalRange",gain:t.vibratoAmount}),e.vibratoAmount=e._vibratoGain.gain,e.frequency=new n.Signal({context:e.context,units:"frequency",value:440}),e.detune=new n.Signal({context:e.context,units:"cents",value:t.detune}),e.frequency.connect(e.voice0.frequency),e.frequency.chain(e.harmonicity,e.voice1.frequency),e._vibrato.connect(e._vibratoGain),e._vibratoGain.fan(e.voice0.detune,e.voice1.detune),e.detune.fan(e.voice0.detune,e.voice1.detune),e.voice0.connect(e.output),e.voice1.connect(e.output),(0,i.readOnly)(e,["voice0","voice1","frequency","vibratoAmount","vibratoRate"]),e}return(0,e.__extends)(v,u),v.prototype.getLevelAtTime=function(e){return e=this.toSeconds(e),this.voice0.envelope.getValueAtTime(e)+this.voice1.envelope.getValueAtTime(e)},v.getDefaults=function(){return(0,s.deepMerge)(t.Monophonic.getDefaults(),{vibratoAmount:.5,vibratoRate:5,harmonicity:1.5,voice0:(0,s.deepMerge)((0,s.omitFromObject)(o.MonoSynth.getDefaults(),Object.keys(t.Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}}),voice1:(0,s.deepMerge)((0,s.omitFromObject)(o.MonoSynth.getDefaults(),Object.keys(t.Monophonic.getDefaults())),{filterEnvelope:{attack:.01,decay:0,sustain:1,release:.5},envelope:{attack:.01,decay:0,sustain:1,release:.5}})})},v.prototype._triggerEnvelopeAttack=function(e,t){this.voice0._triggerEnvelopeAttack(e,t),this.voice1._triggerEnvelopeAttack(e,t)},v.prototype._triggerEnvelopeRelease=function(e){return this.voice0._triggerEnvelopeRelease(e),this.voice1._triggerEnvelopeRelease(e),this},v.prototype.dispose=function(){return u.prototype.dispose.call(this),this.voice0.dispose(),this.voice1.dispose(),this.frequency.dispose(),this.detune.dispose(),this._vibrato.dispose(),this.vibratoRate.dispose(),this._vibratoGain.dispose(),this.harmonicity.dispose(),this},v}(t.Monophonic);exports.DuoSynth=u;
},{"tslib":"vCxL","./Monophonic":"OnvU","./MonoSynth":"GHPN","../signal/Signal":"u9T1","../core/util/Interface":"x3aV","../source/oscillator/LFO":"Hodm","../core/context/Gain":"EfHt","../signal/Multiply":"uJ9R","../core/util/Defaults":"gf59"}],"NuZF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FMSynth=void 0;var e=require("tslib"),t=require("../core/util/Defaults"),n=require("../signal/Multiply"),o=require("./ModulationSynth"),r=function(r){function u(){var e=r.call(this,(0,t.optionsFromArguments)(u.getDefaults(),arguments))||this;e.name="FMSynth";var o=(0,t.optionsFromArguments)(u.getDefaults(),arguments);return e.modulationIndex=new n.Multiply({context:e.context,value:o.modulationIndex}),e.frequency.connect(e._carrier.frequency),e.frequency.chain(e.harmonicity,e._modulator.frequency),e.frequency.chain(e.modulationIndex,e._modulationNode),e.detune.fan(e._carrier.detune,e._modulator.detune),e._modulator.connect(e._modulationNode.gain),e._modulationNode.connect(e._carrier.frequency),e._carrier.connect(e.output),e}return(0,e.__extends)(u,r),u.getDefaults=function(){return Object.assign(o.ModulationSynth.getDefaults(),{modulationIndex:10})},u.prototype.dispose=function(){return r.prototype.dispose.call(this),this.modulationIndex.dispose(),this},u}(o.ModulationSynth);exports.FMSynth=r;
},{"tslib":"vCxL","../core/util/Defaults":"gf59","../signal/Multiply":"uJ9R","./ModulationSynth":"BhkC"}],"NOwI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MetalSynth=void 0;var e=require("tslib"),t=require("../component/envelope/Envelope"),n=require("../component/filter/Filter"),o=require("../core/context/Gain"),r=require("../core/context/ToneAudioNode"),i=require("../core/util/Defaults"),s=require("../core/util/Interface"),c=require("../signal/Multiply"),a=require("../signal/Scale"),l=require("../signal/Signal"),u=require("../source/oscillator/FMOscillator"),p=require("./Monophonic"),h=[1,1.483,1.932,2.546,2.63,3.897],f=function(f){function d(){var e=f.call(this,(0,i.optionsFromArguments)(d.getDefaults(),arguments))||this;e.name="MetalSynth",e._oscillators=[],e._freqMultipliers=[];var r=(0,i.optionsFromArguments)(d.getDefaults(),arguments);e.detune=new l.Signal({context:e.context,units:"cents",value:r.detune}),e.frequency=new l.Signal({context:e.context,units:"frequency"}),e._amplitude=new o.Gain({context:e.context,gain:0}).connect(e.output),e._highpass=new n.Filter({Q:0,context:e.context,type:"highpass"}).connect(e._amplitude);for(var p=0;p<h.length;p++){var v=new u.FMOscillator({context:e.context,harmonicity:r.harmonicity,modulationIndex:r.modulationIndex,modulationType:"square",onstop:0===p?function(){return e.onsilence(e)}:s.noOp,type:"square"});v.connect(e._highpass),e._oscillators[p]=v;var g=new c.Multiply({context:e.context,value:h[p]});e._freqMultipliers[p]=g,e.frequency.chain(g,v.frequency),e.detune.connect(v.detune)}return e._filterFreqScaler=new a.Scale({context:e.context,max:7e3,min:e.toFrequency(r.resonance)}),e.envelope=new t.Envelope({attack:r.envelope.attack,attackCurve:"linear",context:e.context,decay:r.envelope.decay,release:r.envelope.release,sustain:0}),e.envelope.chain(e._filterFreqScaler,e._highpass.frequency),e.envelope.connect(e._amplitude.gain),e._octaves=r.octaves,e.octaves=r.octaves,e}return(0,e.__extends)(d,f),d.getDefaults=function(){return(0,i.deepMerge)(p.Monophonic.getDefaults(),{envelope:Object.assign((0,i.omitFromObject)(t.Envelope.getDefaults(),Object.keys(r.ToneAudioNode.getDefaults())),{attack:.001,decay:1.4,release:.2}),harmonicity:5.1,modulationIndex:32,octaves:1.5,resonance:4e3})},d.prototype._triggerEnvelopeAttack=function(e,t){var n=this;return void 0===t&&(t=1),this.envelope.triggerAttack(e,t),this._oscillators.forEach(function(t){return t.start(e)}),0===this.envelope.sustain&&this._oscillators.forEach(function(t){t.stop(e+n.toSeconds(n.envelope.attack)+n.toSeconds(n.envelope.decay))}),this},d.prototype._triggerEnvelopeRelease=function(e){var t=this;return this.envelope.triggerRelease(e),this._oscillators.forEach(function(n){return n.stop(e+t.toSeconds(t.envelope.release))}),this},d.prototype.getLevelAtTime=function(e){return e=this.toSeconds(e),this.envelope.getValueAtTime(e)},Object.defineProperty(d.prototype,"modulationIndex",{get:function(){return this._oscillators[0].modulationIndex.value},set:function(e){this._oscillators.forEach(function(t){return t.modulationIndex.value=e})},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"harmonicity",{get:function(){return this._oscillators[0].harmonicity.value},set:function(e){this._oscillators.forEach(function(t){return t.harmonicity.value=e})},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"resonance",{get:function(){return this._filterFreqScaler.min},set:function(e){this._filterFreqScaler.min=this.toFrequency(e),this.octaves=this._octaves},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"octaves",{get:function(){return this._octaves},set:function(e){this._octaves=e,this._filterFreqScaler.max=this._filterFreqScaler.min*Math.pow(2,e)},enumerable:!0,configurable:!0}),d.prototype.dispose=function(){return f.prototype.dispose.call(this),this._oscillators.forEach(function(e){return e.dispose()}),this._freqMultipliers.forEach(function(e){return e.dispose()}),this.frequency.dispose(),this.detune.dispose(),this._filterFreqScaler.dispose(),this._amplitude.dispose(),this.envelope.dispose(),this._highpass.dispose(),this},d}(p.Monophonic);exports.MetalSynth=f;
},{"tslib":"vCxL","../component/envelope/Envelope":"awNY","../component/filter/Filter":"OcAm","../core/context/Gain":"EfHt","../core/context/ToneAudioNode":"lGdl","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV","../signal/Multiply":"uJ9R","../signal/Scale":"qHH3","../signal/Signal":"u9T1","../source/oscillator/FMOscillator":"wdyw","./Monophonic":"OnvU"}],"YUuz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MembraneSynth=void 0;var e=require("tslib"),t=require("../core/type/Frequency"),o=require("../core/util/Defaults"),r=require("../core/util/Interface"),n=require("./Monophonic"),i=require("./Synth"),s=require("../core/util/Decorator"),a=function(a){function c(){var e=a.call(this,(0,o.optionsFromArguments)(c.getDefaults(),arguments))||this;e.name="MembraneSynth",e.portamento=0;var t=(0,o.optionsFromArguments)(c.getDefaults(),arguments);return e.pitchDecay=t.pitchDecay,e.octaves=t.octaves,(0,r.readOnly)(e,["oscillator","envelope"]),e}return(0,e.__extends)(c,a),c.getDefaults=function(){return(0,o.deepMerge)(n.Monophonic.getDefaults(),i.Synth.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})},c.prototype.setNote=function(e,o){var r=this.toSeconds(o),n=this.toFrequency(e instanceof t.FrequencyClass?e.toFrequency():e),i=n*this.octaves;return this.oscillator.frequency.setValueAtTime(i,r),this.oscillator.frequency.exponentialRampToValueAtTime(n,r+this.toSeconds(this.pitchDecay)),this},c.prototype.dispose=function(){return a.prototype.dispose.call(this),this},(0,e.__decorate)([(0,s.range)(0)],c.prototype,"octaves",void 0),(0,e.__decorate)([(0,s.timeRange)(0)],c.prototype,"pitchDecay",void 0),c}(i.Synth);exports.MembraneSynth=a;
},{"tslib":"vCxL","../core/type/Frequency":"wJLn","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV","./Monophonic":"OnvU","./Synth":"MeiH","../core/util/Decorator":"utx5"}],"iIEw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.NoiseSynth=void 0;var e=require("tslib"),t=require("../component/envelope/AmplitudeEnvelope"),o=require("../core/util/Defaults"),s=require("../source/Noise"),i=require("./Instrument"),n=require("../core/context/ToneAudioNode"),r=require("../component/envelope/Envelope"),u=require("../source/Source"),c=function(c){function p(){var e=c.call(this,(0,o.optionsFromArguments)(p.getDefaults(),arguments))||this;e.name="NoiseSynth";var i=(0,o.optionsFromArguments)(p.getDefaults(),arguments);return e.noise=new s.Noise(Object.assign({context:e.context},i.noise)),e.envelope=new t.AmplitudeEnvelope(Object.assign({context:e.context},i.envelope)),e.noise.chain(e.envelope,e.output),e}return(0,e.__extends)(p,c),p.getDefaults=function(){return Object.assign(i.Instrument.getDefaults(),{envelope:Object.assign((0,o.omitFromObject)(r.Envelope.getDefaults(),Object.keys(n.ToneAudioNode.getDefaults())),{decay:.1,sustain:0}),noise:Object.assign((0,o.omitFromObject)(s.Noise.getDefaults(),Object.keys(u.Source.getDefaults())),{type:"white"})})},p.prototype.triggerAttack=function(e,t){return void 0===t&&(t=1),e=this.toSeconds(e),this.envelope.triggerAttack(e,t),this.noise.start(e),0===this.envelope.sustain&&this.noise.stop(e+this.toSeconds(this.envelope.attack)+this.toSeconds(this.envelope.decay)),this},p.prototype.triggerRelease=function(e){return e=this.toSeconds(e),this.envelope.triggerRelease(e),this.noise.stop(e+this.toSeconds(this.envelope.release)),this},p.prototype.sync=function(){return this._syncMethod("triggerAttack",0),this._syncMethod("triggerRelease",0),this},p.prototype.triggerAttackRelease=function(e,t,o){return void 0===o&&(o=1),t=this.toSeconds(t),e=this.toSeconds(e),this.triggerAttack(t,o),this.triggerRelease(t+e),this},p.prototype.dispose=function(){return c.prototype.dispose.call(this),this.noise.dispose(),this.envelope.dispose(),this},p}(i.Instrument);exports.NoiseSynth=c;
},{"tslib":"vCxL","../component/envelope/AmplitudeEnvelope":"qOGN","../core/util/Defaults":"gf59","../source/Noise":"TDl3","./Instrument":"NtmW","../core/context/ToneAudioNode":"lGdl","../component/envelope/Envelope":"awNY","../source/Source":"RA2T"}],"E9Yh":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneAudioWorklet=void 0;var e=require("tslib"),o=require("./ToneAudioNode"),t=require("../util/Interface"),r=function(o){function r(e){var r=o.call(this,e)||this;r.name="ToneAudioWorklet",r.workletOptions={},r.onprocessorerror=t.noOp;var i=URL.createObjectURL(new Blob([r._audioWorklet()],{type:"text/javascript"})),n=r._audioWorkletName();return r.context.addAudioWorkletModule(i,n).then(function(){r.disposed||(r._worklet=r.context.createAudioWorkletNode(n,r.workletOptions),r._worklet.onprocessorerror=r.onprocessorerror.bind(r),r.onReady(r._worklet))}),r}return(0,e.__extends)(r,o),r.prototype.dispose=function(){return o.prototype.dispose.call(this),this._worklet&&this._worklet.disconnect(),this},r}(o.ToneAudioNode);exports.ToneAudioWorklet=r;
},{"tslib":"vCxL","./ToneAudioNode":"lGdl","../util/Interface":"x3aV"}],"rYrw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FeedbackCombFilter=void 0;var t=require("tslib"),e=require("../../core/context/Gain"),n=require("../../core/context/Param"),a=require("../../core/context/ToneAudioNode"),r=require("../../core/util/Defaults"),o=require("../../core/util/Interface"),u=require("../../core/context/ToneAudioWorklet"),s=function(u){function s(){var t=u.call(this,(0,r.optionsFromArguments)(s.getDefaults(),arguments,["delayTime","resonance"]))||this;t.name="FeedbackCombFilter",t.workletOptions={numberOfInputs:1,numberOfOutputs:1,channelCount:1};var a=(0,r.optionsFromArguments)(s.getDefaults(),arguments,["delayTime","resonance"]);t.input=new e.Gain({context:t.context}),t.output=new e.Gain({context:t.context});var i=t.context.createGain();return t.delayTime=new n.Param({context:t.context,value:a.delayTime,units:"time",minValue:0,maxValue:1,param:i.gain,swappable:!0}),t.resonance=new n.Param({context:t.context,value:a.resonance,units:"normalRange",param:i.gain,swappable:!0}),(0,o.readOnly)(t,["resonance","delayTime"]),t}return(0,t.__extends)(s,u),s.prototype._audioWorkletName=function(){return"feedback-comb-filter"},s.prototype._audioWorklet=function(){return' \n\t\t\tregisterProcessor("'+this._audioWorkletName()+'", class extends AudioWorkletProcessor {\n\t\t\t\tstatic get parameterDescriptors() {\n\t\t\t\t\treturn [{\n\t\t\t\t\t\tname: "delayTime",\n\t\t\t\t\t\tdefaultValue: 0.1,\n\t\t\t\t\t\tminValue: 0,\n\t\t\t\t\t\tmaxValue: 1,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: "feedback",\n\t\t\t\t\t\tdefaultValue: 0.5,\n\t\t\t\t\t\tminValue: 0,\n\t\t\t\t\t\tmaxValue: 0.9999,\n\t\t\t\t\t}];\n\t\t\t\t}\n\t\t\t\n\t\t\t\tconstructor(options) {\n\t\t\t\t\tsuper(options);\n\t\t\t\t\tthis.delayBuffer = new Float32Array(sampleRate);\n\t\t\t\t\tthis.fallbackInput = new Float32Array(128)\n\t\t\t\t}\n\t\t\t\n\t\t\t\tgetParameter(parameter, index) {\n\t\t\t\t\tif (parameter.length > 1) {\n\t\t\t\t\t\treturn parameter[index];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn parameter[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\n\t\t\t\tprocess(inputs, outputs, parameters) {\n\t\t\t\t\tconst input = inputs[0];\n\t\t\t\t\tconst output = outputs[0];\n\t\t\t\t\tconst delayLength = this.delayBuffer.length;\n\t\t\t\t\tconst outputChannel = output[0];\n\t\t\t\t\tconst inputChannel = input[0] || this.fallbackInput;\n\t\t\t\t\tconst delayTimeParam = parameters.delayTime;\n\t\t\t\t\tconst feedbackParam = parameters.feedback;\n\t\t\t\t\tinputChannel.forEach((value, index) => {\n\t\t\t\t\t\tconst delayTime = this.getParameter(delayTimeParam, index);\n\t\t\t\t\t\tconst feedback = this.getParameter(feedbackParam, index);\n\t\t\t\t\t\tconst delaySamples = Math.floor(delayTime * sampleRate);\n\t\t\t\t\t\tconst currentIndex = (currentFrame + index) % delayLength;\n\t\t\t\t\t\tconst delayedIndex = (currentFrame + index + delaySamples) % delayLength;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// the current value to output\n\t\t\t\t\t\tconst currentValue = this.delayBuffer[currentIndex];\n\t\t\t\t\t\t\n\t\t\t\t\t\t// write the current value to the delayBuffer in the future\n\t\t\t\t\t\tthis.delayBuffer[delayedIndex] = value + currentValue * feedback;\n\n\t\t\t\t\t\t// set all of the output channels to the same value\n\t\t\t\t\t\toutputChannel[index] = delaySamples > 0 ? currentValue : value;\n\t\t\t\t\t});\n\t\t\t\t\t// keep the processing alive\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t});\n\t\t'},s.getDefaults=function(){return Object.assign(a.ToneAudioNode.getDefaults(),{delayTime:.1,resonance:.5})},s.prototype.onReady=function(t){(0,a.connectSeries)(this.input,t,this.output);var e=t.parameters.get("delayTime");this.delayTime.setParam(e);var n=t.parameters.get("feedback");this.resonance.setParam(n)},s.prototype.dispose=function(){return u.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this.delayTime.dispose(),this.resonance.dispose(),this},s}(u.ToneAudioWorklet);exports.FeedbackCombFilter=s;
},{"tslib":"vCxL","../../core/context/Gain":"EfHt","../../core/context/Param":"SJab","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../core/context/ToneAudioWorklet":"E9Yh"}],"XhJg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.OnePoleFilter=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),r=require("../../core/util/Defaults"),i=require("../../core/context/Gain"),n=function(n){function o(){var e=n.call(this,(0,r.optionsFromArguments)(o.getDefaults(),arguments,["frequency","type"]))||this;e.name="OnePoleFilter";var t=(0,r.optionsFromArguments)(o.getDefaults(),arguments,["frequency","type"]);return e._frequency=t.frequency,e._type=t.type,e.input=new i.Gain({context:e.context}),e.output=new i.Gain({context:e.context}),e._createFilter(),e}return(0,e.__extends)(o,n),o.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{frequency:880,type:"lowpass"})},o.prototype._createFilter=function(){var e=this,t=this._filter,r=this.toFrequency(this._frequency),i=1/(2*Math.PI*r);if("lowpass"===this._type){var n=1/(i*this.context.sampleRate),o=n-1;this._filter=this.context.createIIRFilter([n,0],[1,o])}else{o=1/(i*this.context.sampleRate)-1;this._filter=this.context.createIIRFilter([1,-1],[1,o])}this.input.chain(this._filter,this.output),t&&this.context.setTimeout(function(){e.disposed||(e.input.disconnect(t),t.disconnect())},this.blockTime)},Object.defineProperty(o.prototype,"frequency",{get:function(){return this._frequency},set:function(e){this._frequency=e,this._createFilter()},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"type",{get:function(){return this._type},set:function(e){this._type=e,this._createFilter()},enumerable:!0,configurable:!0}),o.prototype.getFrequencyResponse=function(e){void 0===e&&(e=128);for(var t=new Float32Array(e),r=0;r<e;r++){var i=19980*Math.pow(r/e,2)+20;t[r]=i}var n=new Float32Array(e),o=new Float32Array(e);return this._filter.getFrequencyResponse(t,n,o),n},o.prototype.dispose=function(){return n.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this._filter.disconnect(),this},o}(t.ToneAudioNode);exports.OnePoleFilter=n;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../../core/context/Gain":"EfHt"}],"BLT5":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LowpassCombFilter=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),o=require("../../core/util/Defaults"),n=require("./FeedbackCombFilter"),r=require("./OnePoleFilter"),i=function(i){function s(){var e=i.call(this,(0,o.optionsFromArguments)(s.getDefaults(),arguments,["delayTime","resonance","dampening"]))||this;e.name="LowpassCombFilter";var t=(0,o.optionsFromArguments)(s.getDefaults(),arguments,["delayTime","resonance","dampening"]);return e._combFilter=e.output=new n.FeedbackCombFilter({context:e.context,delayTime:t.delayTime,resonance:t.resonance}),e.delayTime=e._combFilter.delayTime,e.resonance=e._combFilter.resonance,e._lowpass=e.input=new r.OnePoleFilter({context:e.context,frequency:t.dampening,type:"lowpass"}),e._lowpass.connect(e._combFilter),e}return(0,e.__extends)(s,i),s.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{dampening:3e3,delayTime:.1,resonance:.5})},Object.defineProperty(s.prototype,"dampening",{get:function(){return this._lowpass.frequency},set:function(e){this._lowpass.frequency=e},enumerable:!0,configurable:!0}),s.prototype.dispose=function(){return i.prototype.dispose.call(this),this._combFilter.dispose(),this._lowpass.dispose(),this},s}(t.ToneAudioNode);exports.LowpassCombFilter=i;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","./FeedbackCombFilter":"rYrw","./OnePoleFilter":"XhJg"}],"Xk2q":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PluckSynth=void 0;var e=require("tslib"),t=require("../component/filter/LowpassCombFilter"),n=require("../core/util/Defaults"),s=require("../source/Noise"),r=require("./Instrument"),o=function(o){function i(){var e=o.call(this,(0,n.optionsFromArguments)(i.getDefaults(),arguments))||this;e.name="PluckSynth";var r=(0,n.optionsFromArguments)(i.getDefaults(),arguments);return e._noise=new s.Noise({context:e.context,type:"pink"}),e.attackNoise=r.attackNoise,e._lfcf=new t.LowpassCombFilter({context:e.context,dampening:r.dampening,resonance:r.resonance}),e.resonance=r.resonance,e.release=r.release,e._noise.connect(e._lfcf),e._lfcf.connect(e.output),e}return(0,e.__extends)(i,o),i.getDefaults=function(){return(0,n.deepMerge)(r.Instrument.getDefaults(),{attackNoise:1,dampening:4e3,resonance:.7,release:1})},Object.defineProperty(i.prototype,"dampening",{get:function(){return this._lfcf.dampening},set:function(e){this._lfcf.dampening=e},enumerable:!0,configurable:!0}),i.prototype.triggerAttack=function(e,t){var n=this.toFrequency(e);t=this.toSeconds(t);var s=1/n;return this._lfcf.delayTime.setValueAtTime(s,t),this._noise.start(t),this._noise.stop(t+s*this.attackNoise),this._lfcf.resonance.cancelScheduledValues(t),this._lfcf.resonance.setValueAtTime(this.resonance,t),this},i.prototype.triggerRelease=function(e){return this._lfcf.resonance.linearRampTo(0,this.release,e),this},i.prototype.dispose=function(){return o.prototype.dispose.call(this),this._noise.dispose(),this._lfcf.dispose(),this},i}(r.Instrument);exports.PluckSynth=o;
},{"tslib":"vCxL","../component/filter/LowpassCombFilter":"BLT5","../core/util/Defaults":"gf59","../source/Noise":"TDl3","./Instrument":"NtmW"}],"TNM4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PolySynth=void 0;var e=require("tslib"),t=require("../core/type/Midi"),i=require("../core/util/Defaults"),o=require("../core/util/TypeCheck"),s=require("./Instrument"),r=require("./Synth"),n=require("../core/util/Debug"),a=function(a){function c(){var e=a.call(this,(0,i.optionsFromArguments)(c.getDefaults(),arguments,["voice","options"]))||this;e.name="PolySynth",e._availableVoices=[],e._activeVoices=[],e._voices=[],e._gcTimeout=-1,e._averageActiveVoices=0;var t=(0,i.optionsFromArguments)(c.getDefaults(),arguments,["voice","options"]);(0,n.assert)(!(0,o.isNumber)(t.voice),"DEPRECATED: The polyphony count is no longer the first argument.");var s=t.voice.getDefaults();e.options=Object.assign(s,t.options),e.voice=t.voice,e.maxPolyphony=t.maxPolyphony,e._dummyVoice=e._getNextAvailableVoice();var r=e._voices.indexOf(e._dummyVoice);return e._voices.splice(r,1),e._gcTimeout=e.context.setInterval(e._collectGarbage.bind(e),1),e}return(0,e.__extends)(c,a),c.getDefaults=function(){return Object.assign(s.Instrument.getDefaults(),{maxPolyphony:32,options:{},voice:r.Synth})},Object.defineProperty(c.prototype,"activeVoices",{get:function(){return this._activeVoices.length},enumerable:!0,configurable:!0}),c.prototype._makeVoiceAvailable=function(e){this._availableVoices.push(e);var t=this._activeVoices.findIndex(function(t){return t.voice===e});this._activeVoices.splice(t,1)},c.prototype._getNextAvailableVoice=function(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){var e=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return e.connect(this.output),this._voices.push(e),e}(0,n.warn)("Max polyphony exceeded. Note dropped.")},c.prototype._collectGarbage=function(){if(this._averageActiveVoices=Math.max(.95*this._averageActiveVoices,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){var e=this._availableVoices.shift(),t=this._voices.indexOf(e);this._voices.splice(t,1),this.context.isOffline||e.dispose()}},c.prototype._triggerAttack=function(e,i,o){var s=this;e.forEach(function(e){var r=new t.MidiClass(s.context,e).toMidi(),n=s._getNextAvailableVoice();n&&(n.triggerAttack(e,i,o),s._activeVoices.push({midi:r,voice:n,released:!1}),s.log("triggerAttack",e,i))})},c.prototype._triggerRelease=function(e,i){var o=this;e.forEach(function(e){var s=new t.MidiClass(o.context,e).toMidi(),r=o._activeVoices.find(function(e){var t=e.midi,i=e.released;return t===s&&!i});r&&(r.voice.triggerRelease(i),r.released=!0,o.log("triggerRelease",e,i))})},c.prototype._scheduleEvent=function(e,t,i,o){var s=this;(0,n.assert)(!this.disposed,"Synth was already disposed"),i<=this.now()?"attack"===e?this._triggerAttack(t,i,o):this._triggerRelease(t,i):this.context.setTimeout(function(){s._scheduleEvent(e,t,i,o)},i-this.now())},c.prototype.triggerAttack=function(e,t,i){Array.isArray(e)||(e=[e]);var o=this.toSeconds(t);return this._scheduleEvent("attack",e,o,i),this},c.prototype.triggerRelease=function(e,t){Array.isArray(e)||(e=[e]);var i=this.toSeconds(t);return this._scheduleEvent("release",e,i),this},c.prototype.triggerAttackRelease=function(e,t,i,s){var r=this.toSeconds(i);if(this.triggerAttack(e,r,s),(0,o.isArray)(t)){(0,n.assert)((0,o.isArray)(e),"If the duration is an array, the notes must also be an array"),e=e;for(var a=0;a<e.length;a++){var c=t[Math.min(a,t.length-1)],h=this.toSeconds(c);(0,n.assert)(h>0,"The duration must be greater than 0"),this.triggerRelease(e[a],r+h)}}else{h=this.toSeconds(t);(0,n.assert)(h>0,"The duration must be greater than 0"),this.triggerRelease(e,r+h)}return this},c.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this},c.prototype.set=function(e){var t=(0,i.omitFromObject)(e,["onsilence","context"]);return this.options=(0,i.deepMerge)(this.options,t),this._voices.forEach(function(e){return e.set(t)}),this._dummyVoice.set(t),this},c.prototype.get=function(){return this._dummyVoice.get()},c.prototype.releaseAll=function(){var e=this.now();return this._activeVoices.forEach(function(t){t.voice.triggerRelease(e)}),this._activeVoices=[],this},c.prototype.dispose=function(){return a.prototype.dispose.call(this),this._dummyVoice.dispose(),this._voices.forEach(function(e){return e.dispose()}),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this},c}(s.Instrument);exports.PolySynth=a;
},{"tslib":"vCxL","../core/type/Midi":"ntgo","../core/util/Defaults":"gf59","../core/util/TypeCheck":"Mk3b","./Instrument":"NtmW","./Synth":"MeiH","../core/util/Debug":"wPdo"}],"c9i3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sampler=void 0;var e=require("tslib"),t=require("../core/context/ToneAudioBuffers"),r=require("../core/type/Conversions"),o=require("../core/type/Frequency"),s=require("../core/util/Defaults"),i=require("../core/util/Interface"),n=require("../core/util/TypeCheck"),a=require("../instrument/Instrument"),u=require("../source/buffer/ToneBufferSource"),c=require("../core/util/Decorator"),f=require("../core/util/Debug"),l=function(l){function h(){var e=l.call(this,(0,s.optionsFromArguments)(h.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"))||this;e.name="Sampler",e._activeSources=new Map;var r=(0,s.optionsFromArguments)(h.getDefaults(),arguments,["urls","onload","baseUrl"],"urls"),i={};return Object.keys(r.urls).forEach(function(t){var s=parseInt(t,10);if((0,f.assert)((0,n.isNote)(t)||(0,n.isNumber)(s)&&isFinite(s),"url key is neither a note or midi pitch: "+t),(0,n.isNote)(t)){var a=new o.FrequencyClass(e.context,t).toMidi();i[a]=r.urls[t]}else(0,n.isNumber)(s)&&isFinite(s)&&(i[s]=r.urls[s])}),e._buffers=new t.ToneAudioBuffers({urls:i,onload:r.onload,baseUrl:r.baseUrl,onerror:r.onerror}),e.attack=r.attack,e.release=r.release,e.curve=r.curve,e._buffers.loaded&&Promise.resolve().then(r.onload),e}return(0,e.__extends)(h,l),h.getDefaults=function(){return Object.assign(a.Instrument.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:i.noOp,onerror:i.noOp,release:.1,urls:{}})},h.prototype._findClosest=function(e){for(var t=0;t<96;){if(this._buffers.has(e+t))return-t;if(this._buffers.has(e-t))return t;t++}throw new Error("No available buffers for note: "+e)},h.prototype.triggerAttack=function(e,t,s){var i=this;return void 0===s&&(s=1),this.log("triggerAttack",e,t,s),Array.isArray(e)||(e=[e]),e.forEach(function(e){var a=new o.FrequencyClass(i.context,e).toMidi(),c=i._findClosest(a),f=a-c,l=i._buffers.get(f),h=(0,r.intervalToFrequencyRatio)(c),d=new u.ToneBufferSource({url:l,context:i.context,curve:i.curve,fadeIn:i.attack,fadeOut:i.release,playbackRate:h}).connect(i.output);d.start(t,0,l.duration/h,s),(0,n.isArray)(i._activeSources.get(a))||i._activeSources.set(a,[]),i._activeSources.get(a).push(d),d.onended=function(){if(i._activeSources&&i._activeSources.has(a)){var e=i._activeSources.get(a),t=e.indexOf(d);-1!==t&&e.splice(t,1)}}}),this},h.prototype.triggerRelease=function(e,t){var r=this;return this.log("triggerRelease",e,t),Array.isArray(e)||(e=[e]),e.forEach(function(e){var s=new o.FrequencyClass(r.context,e).toMidi();if(r._activeSources.has(s)&&r._activeSources.get(s).length){var i=r._activeSources.get(s);t=r.toSeconds(t),i.forEach(function(e){e.stop(t)}),r._activeSources.set(s,[])}}),this},h.prototype.releaseAll=function(e){var t=this.toSeconds(e);return this._activeSources.forEach(function(e){for(;e.length;){e.shift().stop(t)}}),this},h.prototype.sync=function(){return this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this},h.prototype.triggerAttackRelease=function(e,t,r,o){var s=this;void 0===o&&(o=1);var i=this.toSeconds(r);return this.triggerAttack(e,i,o),(0,n.isArray)(t)?((0,f.assert)((0,n.isArray)(e),"notes must be an array when duration is array"),e.forEach(function(e,r){var o=t[Math.min(r,t.length-1)];s.triggerRelease(e,i+s.toSeconds(o))})):this.triggerRelease(e,i+this.toSeconds(t)),this},h.prototype.add=function(e,t,r){if((0,f.assert)((0,n.isNote)(e)||isFinite(e),"note must be a pitch or midi: "+e),(0,n.isNote)(e)){var s=new o.FrequencyClass(this.context,e).toMidi();this._buffers.add(s,t,r)}else this._buffers.add(e,t,r);return this},Object.defineProperty(h.prototype,"loaded",{get:function(){return this._buffers.loaded},enumerable:!0,configurable:!0}),h.prototype.dispose=function(){return l.prototype.dispose.call(this),this._buffers.dispose(),this._activeSources.forEach(function(e){e.forEach(function(e){return e.dispose()})}),this._activeSources.clear(),this},(0,e.__decorate)([(0,c.timeRange)(0)],h.prototype,"attack",void 0),(0,e.__decorate)([(0,c.timeRange)(0)],h.prototype,"release",void 0),h}(a.Instrument);exports.Sampler=l;
},{"tslib":"vCxL","../core/context/ToneAudioBuffers":"Ehuq","../core/type/Conversions":"o1kW","../core/type/Frequency":"wJLn","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV","../core/util/TypeCheck":"Mk3b","../instrument/Instrument":"NtmW","../source/buffer/ToneBufferSource":"WVku","../core/util/Decorator":"utx5","../core/util/Debug":"wPdo"}],"Pq8f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./AMSynth");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./DuoSynth");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./FMSynth");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var n=require("./MetalSynth");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var u=require("./MembraneSynth");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var o=require("./MonoSynth");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var c=require("./NoiseSynth");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}})});var f=require("./PluckSynth");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}})});var a=require("./PolySynth");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}})});var i=require("./Sampler");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})});var l=require("./Synth");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}})});
},{"./AMSynth":"Zw5O","./DuoSynth":"nEbI","./FMSynth":"NuZF","./MetalSynth":"NOwI","./MembraneSynth":"YUuz","./MonoSynth":"GHPN","./NoiseSynth":"iIEw","./PluckSynth":"Xk2q","./PolySynth":"TNM4","./Sampler":"c9i3","./Synth":"MeiH"}],"y1ry":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.ToneEvent=void 0;var t=require("tslib");require("../core/clock/Transport");var e=require("../core/context/ToneWithContext"),o=require("../core/type/Ticks"),i=require("../core/util/Defaults"),r=require("../core/util/Interface"),s=require("../core/util/StateTimeline"),n=require("../core/util/TypeCheck"),a=function(a){function c(){var t=a.call(this,(0,i.optionsFromArguments)(c.getDefaults(),arguments,["callback","value"]))||this;t.name="ToneEvent",t._state=new s.StateTimeline("stopped"),t._startOffset=0;var e=(0,i.optionsFromArguments)(c.getDefaults(),arguments,["callback","value"]);return t._loop=e.loop,t.callback=e.callback,t.value=e.value,t._loopStart=t.toTicks(e.loopStart),t._loopEnd=t.toTicks(e.loopEnd),t._playbackRate=e.playbackRate,t._probability=e.probability,t._humanize=e.humanize,t.mute=e.mute,t._playbackRate=e.playbackRate,t._state.increasing=!0,t._rescheduleEvents(),t}return(0,t.__extends)(c,a),c.getDefaults=function(){return Object.assign(e.ToneWithContext.getDefaults(),{callback:r.noOp,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})},c.prototype._rescheduleEvents=function(t){var e=this;void 0===t&&(t=-1),this._state.forEachFrom(t,function(t){var i;if("started"===t.state){-1!==t.id&&e.context.transport.clear(t.id);var r=t.time+Math.round(e.startOffset/e._playbackRate);if(!0===e._loop||(0,n.isNumber)(e._loop)&&e._loop>1){i=1/0,(0,n.isNumber)(e._loop)&&(i=e._loop*e._getLoopDuration());var s=e._state.getAfter(r);null!==s&&(i=Math.min(i,s.time-r)),i!==1/0&&(e._state.setStateAtTime("stopped",r+i+1,{id:-1}),i=new o.TicksClass(e.context,i));var a=new o.TicksClass(e.context,e._getLoopDuration());t.id=e.context.transport.scheduleRepeat(e._tick.bind(e),a,new o.TicksClass(e.context,r),i)}else t.id=e.context.transport.schedule(e._tick.bind(e),new o.TicksClass(e.context,r))}})},Object.defineProperty(c.prototype,"state",{get:function(){return this._state.getValueAtTime(this.context.transport.ticks)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){this._startOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t},enumerable:!0,configurable:!0}),c.prototype.start=function(t){var e=this.toTicks(t);return"stopped"===this._state.getValueAtTime(e)&&(this._state.add({id:-1,state:"started",time:e}),this._rescheduleEvents(e)),this},c.prototype.stop=function(t){this.cancel(t);var e=this.toTicks(t);if("started"===this._state.getValueAtTime(e)){this._state.setStateAtTime("stopped",e,{id:-1});var o=this._state.getBefore(e),i=e;null!==o&&(i=o.time),this._rescheduleEvents(i)}return this},c.prototype.cancel=function(t){var e=this;t=(0,i.defaultArg)(t,-1/0);var o=this.toTicks(t);return this._state.forEachFrom(o,function(t){e.context.transport.clear(t.id)}),this._state.cancel(o),this},c.prototype._tick=function(t){var e=this.context.transport.getTicksAtTime(t);if(!this.mute&&"started"===this._state.getValueAtTime(e)){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){var o=.02;(0,n.isBoolean)(this.humanize)||(o=this.toSeconds(this.humanize)),t+=(2*Math.random()-1)*o}this.callback(t,this.value)}},c.prototype._getLoopDuration=function(){return Math.round((this._loopEnd-this._loopStart)/this._playbackRate)},Object.defineProperty(c.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"loopEnd",{get:function(){return new o.TicksClass(this.context,this._loopEnd).toSeconds()},set:function(t){this._loopEnd=this.toTicks(t),this._loop&&this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"loopStart",{get:function(){return new o.TicksClass(this.context,this._loopStart).toSeconds()},set:function(t){this._loopStart=this.toTicks(t),this._loop&&this._rescheduleEvents()},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"progress",{get:function(){if(this._loop){var t=this.context.transport.ticks,e=this._state.get(t);if(null!==e&&"started"===e.state){var o=this._getLoopDuration();return(t-e.time)%o/o}return 0}return 0},enumerable:!0,configurable:!0}),c.prototype.dispose=function(){return a.prototype.dispose.call(this),this.cancel(),this._state.dispose(),this},c}(e.ToneWithContext);exports.ToneEvent=a;
},{"tslib":"vCxL","../core/clock/Transport":"Vktw","../core/context/ToneWithContext":"u8pw","../core/type/Ticks":"H1v9","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV","../core/util/StateTimeline":"cTDo","../core/util/TypeCheck":"Mk3b"}],"HXnk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Loop=void 0;var e=require("tslib"),t=require("./ToneEvent"),n=require("../core/context/ToneWithContext"),o=require("../core/util/Defaults"),r=require("../core/util/Interface"),i=function(i){function a(){var e=i.call(this,(0,o.optionsFromArguments)(a.getDefaults(),arguments,["callback","interval"]))||this;e.name="Loop";var n=(0,o.optionsFromArguments)(a.getDefaults(),arguments,["callback","interval"]);return e._event=new t.ToneEvent({context:e.context,callback:e._tick.bind(e),loop:!0,loopEnd:n.interval,playbackRate:n.playbackRate,probability:n.probability}),e.callback=n.callback,e.iterations=n.iterations,e}return(0,e.__extends)(a,i),a.getDefaults=function(){return Object.assign(n.ToneWithContext.getDefaults(),{interval:"4n",callback:r.noOp,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})},a.prototype.start=function(e){return this._event.start(e),this},a.prototype.stop=function(e){return this._event.stop(e),this},a.prototype.cancel=function(e){return this._event.cancel(e),this},a.prototype._tick=function(e){this.callback(e)},Object.defineProperty(a.prototype,"state",{get:function(){return this._event.state},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"progress",{get:function(){return this._event.progress},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"interval",{get:function(){return this._event.loopEnd},set:function(e){this._event.loopEnd=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"playbackRate",{get:function(){return this._event.playbackRate},set:function(e){this._event.playbackRate=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"humanize",{get:function(){return this._event.humanize},set:function(e){this._event.humanize=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"probability",{get:function(){return this._event.probability},set:function(e){this._event.probability=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"mute",{get:function(){return this._event.mute},set:function(e){this._event.mute=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"iterations",{get:function(){return!0===this._event.loop?1/0:this._event.loop},set:function(e){this._event.loop=e===1/0||e},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){return i.prototype.dispose.call(this),this._event.dispose(),this},a}(n.ToneWithContext);exports.Loop=i;
},{"tslib":"vCxL","./ToneEvent":"y1ry","../core/context/ToneWithContext":"u8pw","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV"}],"rHMv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Part=void 0;var t=require("tslib"),e=require("../core/type/Ticks"),o=require("../core/type/TransportTime"),s=require("../core/util/Defaults"),i=require("../core/util/StateTimeline"),n=require("../core/util/TypeCheck"),r=require("./ToneEvent"),a=function(a){function c(){var t=a.call(this,(0,s.optionsFromArguments)(c.getDefaults(),arguments,["callback","events"]))||this;t.name="Part",t._state=new i.StateTimeline("stopped"),t._events=new Set;var e=(0,s.optionsFromArguments)(c.getDefaults(),arguments,["callback","events"]);return t._state.increasing=!0,e.events.forEach(function(e){(0,n.isArray)(e)?t.add(e[0],e[1]):t.add(e)}),t}return(0,t.__extends)(c,a),c.getDefaults=function(){return Object.assign(r.ToneEvent.getDefaults(),{events:[]})},c.prototype.start=function(t,e){var o=this,i=this.toTicks(t);if("started"!==this._state.getValueAtTime(i)){e=(0,s.defaultArg)(e,this._loop?this._loopStart:0),e=this._loop?(0,s.defaultArg)(e,this._loopStart):(0,s.defaultArg)(e,0);var n=this.toTicks(e);this._state.add({id:-1,offset:n,state:"started",time:i}),this._forEach(function(t){o._startNote(t,i,n)})}return this},c.prototype._startNote=function(t,o,s){o-=s,this._loop?t.startOffset>=this._loopStart&&t.startOffset<this._loopEnd?(t.startOffset<s&&(o+=this._getLoopDuration()),t.start(new e.TicksClass(this.context,o))):t.startOffset<this._loopStart&&t.startOffset>=s&&(t.loop=!1,t.start(new e.TicksClass(this.context,o))):t.startOffset>=s&&t.start(new e.TicksClass(this.context,o))},Object.defineProperty(c.prototype,"startOffset",{get:function(){return this._startOffset},set:function(t){var e=this;this._startOffset=t,this._forEach(function(t){t.startOffset+=e._startOffset})},enumerable:!0,configurable:!0}),c.prototype.stop=function(t){var e=this.toTicks(t);return this._state.cancel(e),this._state.setStateAtTime("stopped",e),this._forEach(function(e){e.stop(t)}),this},c.prototype.at=function(t,s){for(var i=new o.TransportTimeClass(this.context,t).toTicks(),r=new e.TicksClass(this.context,1).toSeconds(),a=this._events.values(),c=a.next();!c.done;){var p=c.value;if(Math.abs(i-p.startOffset)<r)return(0,n.isDefined)(s)&&(p.value=s),p;c=a.next()}return(0,n.isDefined)(s)?(this.add(t,s),this.at(t)):null},c.prototype.add=function(t,e){t instanceof Object&&Reflect.has(t,"time")&&(t=(e=t).time);var o,s=this.toTicks(t);return e instanceof r.ToneEvent?(o=e).callback=this._tick.bind(this):o=new r.ToneEvent({callback:this._tick.bind(this),context:this.context,value:e}),o.startOffset=s,o.set({humanize:this.humanize,loop:this.loop,loopEnd:this.loopEnd,loopStart:this.loopStart,playbackRate:this.playbackRate,probability:this.probability}),this._events.add(o),this._restartEvent(o),this},c.prototype._restartEvent=function(t){var o=this;this._state.forEach(function(s){"started"===s.state?o._startNote(t,s.time,s.offset):t.stop(new e.TicksClass(o.context,s.time))})},c.prototype.remove=function(t,e){var o=this;return(0,n.isObject)(t)&&t.hasOwnProperty("time")&&(t=(e=t).time),t=this.toTicks(t),this._events.forEach(function(s){s.startOffset===t&&((0,n.isUndef)(e)||(0,n.isDefined)(e)&&s.value===e)&&(o._events.delete(s),s.dispose())}),this},c.prototype.clear=function(){return this._forEach(function(t){return t.dispose()}),this._events.clear(),this},c.prototype.cancel=function(t){return this._forEach(function(e){return e.cancel(t)}),this._state.cancel(this.toTicks(t)),this},c.prototype._forEach=function(t){return this._events&&this._events.forEach(function(e){e instanceof c?e._forEach(t):t(e)}),this},c.prototype._setAll=function(t,e){this._forEach(function(o){o[t]=e})},c.prototype._tick=function(t,e){this.mute||this.callback(t,e)},c.prototype._testLoopBoundries=function(t){this._loop&&(t.startOffset<this._loopStart||t.startOffset>=this._loopEnd)?t.cancel(0):"stopped"===t.state&&this._restartEvent(t)},Object.defineProperty(c.prototype,"probability",{get:function(){return this._probability},set:function(t){this._probability=t,this._setAll("probability",t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"humanize",{get:function(){return this._humanize},set:function(t){this._humanize=t,this._setAll("humanize",t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"loop",{get:function(){return this._loop},set:function(t){var e=this;this._loop=t,this._forEach(function(o){o.loopStart=e.loopStart,o.loopEnd=e.loopEnd,o.loop=t,e._testLoopBoundries(o)})},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"loopEnd",{get:function(){return new e.TicksClass(this.context,this._loopEnd).toSeconds()},set:function(t){var e=this;this._loopEnd=this.toTicks(t),this._loop&&this._forEach(function(o){o.loopEnd=t,e._testLoopBoundries(o)})},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"loopStart",{get:function(){return new e.TicksClass(this.context,this._loopStart).toSeconds()},set:function(t){var e=this;this._loopStart=this.toTicks(t),this._loop&&this._forEach(function(t){t.loopStart=e.loopStart,e._testLoopBoundries(t)})},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"playbackRate",{get:function(){return this._playbackRate},set:function(t){this._playbackRate=t,this._setAll("playbackRate",t)},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"length",{get:function(){return this._events.size},enumerable:!0,configurable:!0}),c.prototype.dispose=function(){return a.prototype.dispose.call(this),this.clear(),this},c}(r.ToneEvent);exports.Part=a;
},{"tslib":"vCxL","../core/type/Ticks":"H1v9","../core/type/TransportTime":"PZqX","../core/util/Defaults":"gf59","../core/util/StateTimeline":"cTDo","../core/util/TypeCheck":"Mk3b","./ToneEvent":"y1ry"}],"N3Ed":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PatternGenerator=b;var e=require("tslib"),r=require("../core/util/Debug"),t=require("../core/util/Math");function n(r){var t;return(0,e.__generator)(this,function(e){switch(e.label){case 0:t=0,e.label=1;case 1:return t<r.length?(t=u(t,r),[4,r[t]]):[3,3];case 2:return e.sent(),t++,[3,1];case 3:return[2]}})}function a(r){var t;return(0,e.__generator)(this,function(e){switch(e.label){case 0:t=r.length-1,e.label=1;case 1:return t>=0?(t=u(t,r),[4,r[t]]):[3,3];case 2:return e.sent(),t--,[3,1];case 3:return[2]}})}function s(r,t){return(0,e.__generator)(this,function(n){switch(n.label){case 0:return[5,(0,e.__values)(t(r))];case 1:return n.sent(),[3,0];case 2:return[2]}})}function u(e,r){return(0,t.clamp)(e,0,r.length-1)}function c(r,t){var n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:n=t?0:r.length-1,e.label=1;case 1:return n=u(n,r),[4,r[n]];case 2:return e.sent(),t?++n>=r.length-1&&(t=!1):--n<=0&&(t=!0),[3,1];case 3:return[2]}})}function l(r){var t,n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:t=0,n=0,e.label=1;case 1:return t<r.length?(t=u(t,r),[4,r[t]]):[3,3];case 2:return e.sent(),t+=++n%2?2:-1,[3,1];case 3:return[2]}})}function o(r){var t,n;return(0,e.__generator)(this,function(e){switch(e.label){case 0:t=r.length-1,n=0,e.label=1;case 1:return t>=0?(t=u(t,r),[4,r[t]]):[3,3];case 2:return e.sent(),t+=++n%2?-2:1,[3,1];case 3:return[2]}})}function i(r){var t;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return t=Math.floor(Math.random()*r.length),[4,r[t]];case 1:return e.sent(),[3,0];case 2:return[2]}})}function h(r){var t,n,a,s;return(0,e.__generator)(this,function(e){switch(e.label){case 0:for(t=[],n=0;n<r.length;n++)t.push(n);e.label=1;case 1:return t.length>0?(a=t.splice(Math.floor(t.length*Math.random()),1),s=u(a[0],r),[4,r[s]]):[3,3];case 2:return e.sent(),[3,1];case 3:return[2]}})}function _(r){var t;return(0,e.__generator)(this,function(e){switch(e.label){case 0:t=Math.floor(Math.random()*r.length),e.label=1;case 1:return 0===t?t++:t===r.length-1?t--:Math.random()<.5?t--:t++,[4,r[t]];case 2:return e.sent(),[3,1];case 3:return[2]}})}function b(t,u,b){return void 0===u&&(u="up"),void 0===b&&(b=0),(0,e.__generator)(this,function(b){switch(b.label){case 0:switch((0,r.assert)(t.length>0,"The array must have more than one value in it"),u){case"up":return[3,1];case"down":return[3,3];case"upDown":return[3,5];case"downUp":return[3,7];case"alternateUp":return[3,9];case"alternateDown":return[3,11];case"random":return[3,13];case"randomOnce":return[3,15];case"randomWalk":return[3,17]}return[3,19];case 1:return[5,(0,e.__values)(s(t,n))];case 2:b.sent(),b.label=3;case 3:return[5,(0,e.__values)(s(t,a))];case 4:b.sent(),b.label=5;case 5:return[5,(0,e.__values)(c(t,!0))];case 6:b.sent(),b.label=7;case 7:return[5,(0,e.__values)(c(t,!1))];case 8:b.sent(),b.label=9;case 9:return[5,(0,e.__values)(s(t,l))];case 10:b.sent(),b.label=11;case 11:return[5,(0,e.__values)(s(t,o))];case 12:b.sent(),b.label=13;case 13:return[5,(0,e.__values)(i(t))];case 14:b.sent(),b.label=15;case 15:return[5,(0,e.__values)(s(t,h))];case 16:b.sent(),b.label=17;case 17:return[5,(0,e.__values)(_(t))];case 18:b.sent(),b.label=19;case 19:return[2]}})}
},{"tslib":"vCxL","../core/util/Debug":"wPdo","../core/util/Math":"MP8q"}],"cjJ1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pattern=void 0;var e=require("tslib"),t=require("./Loop"),r=require("./PatternGenerator"),a=require("../core/util/Defaults"),n=require("../core/util/Interface"),u=function(u){function o(){var e=u.call(this,(0,a.optionsFromArguments)(o.getDefaults(),arguments,["callback","values","pattern"]))||this;e.name="Pattern";var t=(0,a.optionsFromArguments)(o.getDefaults(),arguments,["callback","values","pattern"]);return e.callback=t.callback,e._values=t.values,e._pattern=(0,r.PatternGenerator)(t.values,t.pattern),e._type=t.pattern,e}return(0,e.__extends)(o,u),o.getDefaults=function(){return Object.assign(t.Loop.getDefaults(),{pattern:"up",values:[],callback:n.noOp})},o.prototype._tick=function(e){var t=this._pattern.next();this._value=t.value,this.callback(e,this._value)},Object.defineProperty(o.prototype,"values",{get:function(){return this._values},set:function(e){this._values=e,this.pattern=this._type},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"pattern",{get:function(){return this._type},set:function(e){this._type=e,this._pattern=(0,r.PatternGenerator)(this._values,this._type)},enumerable:!0,configurable:!0}),o}(t.Loop);exports.Pattern=u;
},{"tslib":"vCxL","./Loop":"HXnk","./PatternGenerator":"N3Ed","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV"}],"HVXv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Sequence=void 0;var e=require("tslib"),t=require("../core/type/Ticks"),r=require("../core/util/Defaults"),n=require("../core/util/TypeCheck"),i=require("./Part"),o=require("./ToneEvent"),s=function(s){function a(){var e=s.call(this,(0,r.optionsFromArguments)(a.getDefaults(),arguments,["callback","events","subdivision"]))||this;e.name="Sequence",e._part=new i.Part({callback:e._seqCallback.bind(e),context:e.context}),e._events=[],e._eventsArray=[];var t=(0,r.optionsFromArguments)(a.getDefaults(),arguments,["callback","events","subdivision"]);return e._subdivision=e.toTicks(t.subdivision),e.events=t.events,e.loop=t.loop,e.loopStart=t.loopStart,e.loopEnd=t.loopEnd,e.playbackRate=t.playbackRate,e.probability=t.probability,e.humanize=t.humanize,e.mute=t.mute,e.playbackRate=t.playbackRate,e}return(0,e.__extends)(a,s),a.getDefaults=function(){return Object.assign((0,r.omitFromObject)(o.ToneEvent.getDefaults(),["value"]),{events:[],loop:!0,loopEnd:0,loopStart:0,subdivision:"8n"})},a.prototype._seqCallback=function(e,t){null!==t&&this.callback(e,t)},Object.defineProperty(a.prototype,"events",{get:function(){return this._events},set:function(e){this.clear(),this._eventsArray=e,this._events=this._createSequence(this._eventsArray),this._eventsUpdated()},enumerable:!0,configurable:!0}),a.prototype.start=function(e,t){return this._part.start(e,t?this._indexTime(t):t),this},a.prototype.stop=function(e){return this._part.stop(e),this},Object.defineProperty(a.prototype,"subdivision",{get:function(){return new t.TicksClass(this.context,this._subdivision).toSeconds()},enumerable:!0,configurable:!0}),a.prototype._createSequence=function(e){var t=this;return new Proxy(e,{get:function(e,t){return e[t]},set:function(e,r,i){return(0,n.isString)(r)&&isFinite(parseInt(r,10))&&(0,n.isArray)(i)?e[r]=t._createSequence(i):e[r]=i,t._eventsUpdated(),!0}})},a.prototype._eventsUpdated=function(){this._part.clear(),this._rescheduleSequence(this._eventsArray,this._subdivision,this.startOffset),this.loopEnd=this.loopEnd},a.prototype._rescheduleSequence=function(e,r,i){var o=this;e.forEach(function(e,s){var a=s*r+i;if((0,n.isArray)(e))o._rescheduleSequence(e,r/e.length,a);else{var p=new t.TicksClass(o.context,a,"i").toSeconds();o._part.add(p,e)}})},a.prototype._indexTime=function(e){return new t.TicksClass(this.context,e*this._subdivision+this.startOffset).toSeconds()},a.prototype.clear=function(){return this._part.clear(),this},a.prototype.dispose=function(){return s.prototype.dispose.call(this),this._part.dispose(),this},Object.defineProperty(a.prototype,"loop",{get:function(){return this._part.loop},set:function(e){this._part.loop=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"loopStart",{get:function(){return this._loopStart},set:function(e){this._loopStart=e,this._part.loopStart=this._indexTime(e)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"loopEnd",{get:function(){return this._loopEnd},set:function(e){this._loopEnd=e,this._part.loopEnd=0===e?this._indexTime(this._eventsArray.length):this._indexTime(e)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"startOffset",{get:function(){return this._part.startOffset},set:function(e){this._part.startOffset=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"playbackRate",{get:function(){return this._part.playbackRate},set:function(e){this._part.playbackRate=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"probability",{get:function(){return this._part.probability},set:function(e){this._part.probability=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"progress",{get:function(){return this._part.progress},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"humanize",{get:function(){return this._part.humanize},set:function(e){this._part.humanize=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"length",{get:function(){return this._part.length},enumerable:!0,configurable:!0}),a}(o.ToneEvent);exports.Sequence=s;
},{"tslib":"vCxL","../core/type/Ticks":"H1v9","../core/util/Defaults":"gf59","../core/util/TypeCheck":"Mk3b","./Part":"rHMv","./ToneEvent":"y1ry"}],"AgYZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Loop");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./Part");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./Pattern");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var n=require("./Sequence");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var u=require("./ToneEvent");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});
},{"./Loop":"HXnk","./Part":"rHMv","./Pattern":"cjJ1","./Sequence":"HVXv","./ToneEvent":"y1ry"}],"KOg3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.CrossFade=void 0;var e=require("tslib"),t=require("../../core/context/Gain"),n=require("../../core/context/ToneAudioNode"),o=require("../../core/util/Defaults"),i=require("../../core/util/Interface"),a=require("../../signal/GainToAudio"),s=require("../../signal/Signal"),r=function(r){function c(){var e=r.call(this,Object.assign((0,o.optionsFromArguments)(c.getDefaults(),arguments,["fade"])))||this;e.name="CrossFade",e._panner=e.context.createStereoPanner(),e._split=e.context.createChannelSplitter(2),e._g2a=new a.GainToAudio({context:e.context}),e.a=new t.Gain({context:e.context,gain:0}),e.b=new t.Gain({context:e.context,gain:0}),e.output=new t.Gain({context:e.context}),e._internalChannels=[e.a,e.b];var u=(0,o.optionsFromArguments)(c.getDefaults(),arguments,["fade"]);return e.fade=new s.Signal({context:e.context,units:"normalRange",value:u.fade}),(0,i.readOnly)(e,"fade"),e.context.getConstant(1).connect(e._panner),e._panner.connect(e._split),e._panner.channelCount=1,e._panner.channelCountMode="explicit",(0,n.connect)(e._split,e.a.gain,0),(0,n.connect)(e._split,e.b.gain,1),e.fade.chain(e._g2a,e._panner.pan),e.a.connect(e.output),e.b.connect(e.output),e}return(0,e.__extends)(c,r),c.getDefaults=function(){return Object.assign(n.ToneAudioNode.getDefaults(),{fade:.5})},c.prototype.dispose=function(){return r.prototype.dispose.call(this),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this},c}(n.ToneAudioNode);exports.CrossFade=r;
},{"tslib":"vCxL","../../core/context/Gain":"EfHt","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../signal/GainToAudio":"aPD5","../../signal/Signal":"u9T1"}],"EXVs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Effect=void 0;var e=require("tslib"),t=require("../component/channel/CrossFade"),n=require("../core/context/Gain"),o=require("../core/context/ToneAudioNode"),r=require("../core/util/Interface"),i=function(i){function c(e){var o=i.call(this,e)||this;return o.name="Effect",o._dryWet=new t.CrossFade({context:o.context}),o.wet=o._dryWet.fade,o.effectSend=new n.Gain({context:o.context}),o.effectReturn=new n.Gain({context:o.context}),o.input=new n.Gain({context:o.context}),o.output=o._dryWet,o.input.fan(o._dryWet.a,o.effectSend),o.effectReturn.connect(o._dryWet.b),o.wet.setValueAtTime(e.wet,0),o._internalChannels=[o.effectReturn,o.effectSend],(0,r.readOnly)(o,"wet"),o}return(0,e.__extends)(c,i),c.getDefaults=function(){return Object.assign(o.ToneAudioNode.getDefaults(),{wet:1})},c.prototype.connectEffect=function(e){return this._internalChannels.push(e),this.effectSend.chain(e,this.effectReturn),this},c.prototype.dispose=function(){return i.prototype.dispose.call(this),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this},c}(o.ToneAudioNode);exports.Effect=i;
},{"tslib":"vCxL","../component/channel/CrossFade":"KOg3","../core/context/Gain":"EfHt","../core/context/ToneAudioNode":"lGdl","../core/util/Interface":"x3aV"}],"yCHD":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.LFOEffect=void 0;var e=require("tslib"),t=require("../effect/Effect"),r=require("../source/oscillator/LFO"),n=require("../core/util/Interface"),o=function(o){function s(e){var t=o.call(this,e)||this;return t.name="LFOEffect",t._lfo=new r.LFO({context:t.context,frequency:e.frequency,amplitude:e.depth}),t.depth=t._lfo.amplitude,t.frequency=t._lfo.frequency,t.type=e.type,(0,n.readOnly)(t,["frequency","depth"]),t}return(0,e.__extends)(s,o),s.getDefaults=function(){return Object.assign(t.Effect.getDefaults(),{frequency:1,type:"sine",depth:1})},s.prototype.start=function(e){return this._lfo.start(e),this},s.prototype.stop=function(e){return this._lfo.stop(e),this},s.prototype.sync=function(){return this._lfo.sync(),this},s.prototype.unsync=function(){return this._lfo.unsync(),this},Object.defineProperty(s.prototype,"type",{get:function(){return this._lfo.type},set:function(e){this._lfo.type=e},enumerable:!0,configurable:!0}),s.prototype.dispose=function(){return o.prototype.dispose.call(this),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this},s}(t.Effect);exports.LFOEffect=o;
},{"tslib":"vCxL","../effect/Effect":"EXVs","../source/oscillator/LFO":"Hodm","../core/util/Interface":"x3aV"}],"qk03":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AutoFilter=void 0;var e=require("tslib"),t=require("../component/filter/Filter"),r=require("../core/util/Defaults"),o=require("./LFOEffect"),s=function(s){function n(){var e=s.call(this,(0,r.optionsFromArguments)(n.getDefaults(),arguments,["frequency","baseFrequency","octaves"]))||this;e.name="AutoFilter";var o=(0,r.optionsFromArguments)(n.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);return e.filter=new t.Filter(Object.assign(o.filter,{context:e.context})),e.connectEffect(e.filter),e._lfo.connect(e.filter.frequency),e.octaves=o.octaves,e.baseFrequency=o.baseFrequency,e}return(0,e.__extends)(n,s),n.getDefaults=function(){return Object.assign(o.LFOEffect.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})},Object.defineProperty(n.prototype,"baseFrequency",{get:function(){return this._lfo.min},set:function(e){this._lfo.min=this.toFrequency(e),this.octaves=this._octaves},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"octaves",{get:function(){return this._octaves},set:function(e){this._octaves=e,this._lfo.max=this._lfo.min*Math.pow(2,e)},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){return s.prototype.dispose.call(this),this.filter.dispose(),this},n}(o.LFOEffect);exports.AutoFilter=s;
},{"tslib":"vCxL","../component/filter/Filter":"OcAm","../core/util/Defaults":"gf59","./LFOEffect":"yCHD"}],"ZuQU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Panner=void 0;var e=require("tslib"),n=require("../../core/context/Param"),t=require("../../core/context/ToneAudioNode"),r=require("../../core/util/Defaults"),a=require("../../core/util/Interface"),o=function(o){function u(){var e=o.call(this,Object.assign((0,r.optionsFromArguments)(u.getDefaults(),arguments,["pan"])))||this;e.name="Panner",e._panner=e.context.createStereoPanner(),e.input=e._panner,e.output=e._panner;var t=(0,r.optionsFromArguments)(u.getDefaults(),arguments,["pan"]);return e.pan=new n.Param({context:e.context,param:e._panner.pan,value:t.pan,minValue:-1,maxValue:1}),e._panner.channelCount=t.channelCount,e._panner.channelCountMode="explicit",(0,a.readOnly)(e,"pan"),e}return(0,e.__extends)(u,o),u.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{pan:0,channelCount:1})},u.prototype.dispose=function(){return o.prototype.dispose.call(this),this._panner.disconnect(),this.pan.dispose(),this},u}(t.ToneAudioNode);exports.Panner=o;
},{"tslib":"vCxL","../../core/context/Param":"SJab","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV"}],"HJBl":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AutoPanner=void 0;var e=require("tslib"),n=require("../component/channel/Panner"),t=require("../core/util/Defaults"),r=require("./LFOEffect"),o=function(r){function o(){var e=r.call(this,(0,t.optionsFromArguments)(o.getDefaults(),arguments,["frequency"]))||this;return e.name="AutoPanner",e._panner=new n.Panner({context:e.context}),e.connectEffect(e._panner),e._lfo.connect(e._panner.pan),e._lfo.min=-1,e._lfo.max=1,e}return(0,e.__extends)(o,r),o.prototype.dispose=function(){return r.prototype.dispose.call(this),this._panner.dispose(),this},o}(r.LFOEffect);exports.AutoPanner=o;
},{"tslib":"vCxL","../component/channel/Panner":"ZuQU","../core/util/Defaults":"gf59","./LFOEffect":"yCHD"}],"EXJc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Follower=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),o=require("../../core/util/Defaults"),s=require("../filter/OnePoleFilter"),n=require("../../signal/Abs"),i=function(i){function r(){var e=i.call(this,(0,o.optionsFromArguments)(r.getDefaults(),arguments,["smoothing"]))||this;e.name="Follower";var t=(0,o.optionsFromArguments)(r.getDefaults(),arguments,["smoothing"]);return e._abs=e.input=new n.Abs({context:e.context}),e._lowpass=e.output=new s.OnePoleFilter({context:e.context,frequency:1/e.toSeconds(t.smoothing),type:"lowpass"}),e._abs.connect(e._lowpass),e._smoothing=t.smoothing,e}return(0,e.__extends)(r,i),r.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{smoothing:.05})},Object.defineProperty(r.prototype,"smoothing",{get:function(){return this._smoothing},set:function(e){this._smoothing=e,this._lowpass.frequency=1/this.toSeconds(this.smoothing)},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){return i.prototype.dispose.call(this),this._abs.dispose(),this._lowpass.dispose(),this},r}(t.ToneAudioNode);exports.Follower=i;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../filter/OnePoleFilter":"XhJg","../../signal/Abs":"fHMV"}],"bS0K":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.AutoWah=void 0;var e=require("tslib"),t=require("./Effect"),n=require("../component/filter/Filter"),o=require("../component/analysis/Follower"),i=require("../core/util/Defaults"),s=require("../core/context/Gain"),r=require("../core/type/Conversions"),a=require("../signal/ScaleExp"),c=require("../core/util/Interface"),u=function(u){function p(){var e=u.call(this,(0,i.optionsFromArguments)(p.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]))||this;e.name="AutoWah";var t=(0,i.optionsFromArguments)(p.getDefaults(),arguments,["baseFrequency","octaves","sensitivity"]);return e._follower=new o.Follower({context:e.context,smoothing:t.follower}),e._sweepRange=new a.ScaleExp({context:e.context,min:0,max:1,exponent:.5}),e._baseFrequency=e.toFrequency(t.baseFrequency),e._octaves=t.octaves,e._inputBoost=new s.Gain({context:e.context}),e._bandpass=new n.Filter({context:e.context,rolloff:-48,frequency:0,Q:t.Q}),e._peaking=new n.Filter({context:e.context,type:"peaking"}),e._peaking.gain.value=t.gain,e.gain=e._peaking.gain,e.Q=e._bandpass.Q,e.effectSend.chain(e._inputBoost,e._follower,e._sweepRange),e._sweepRange.connect(e._bandpass.frequency),e._sweepRange.connect(e._peaking.frequency),e.effectSend.chain(e._bandpass,e._peaking,e.effectReturn),e._setSweepRange(),e.sensitivity=t.sensitivity,(0,c.readOnly)(e,["gain","Q"]),e}return(0,e.__extends)(p,u),p.getDefaults=function(){return Object.assign(t.Effect.getDefaults(),{baseFrequency:100,octaves:6,sensitivity:0,Q:2,gain:2,follower:.2})},Object.defineProperty(p.prototype,"octaves",{get:function(){return this._octaves},set:function(e){this._octaves=e,this._setSweepRange()},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"follower",{get:function(){return this._follower.smoothing},set:function(e){this._follower.smoothing=e},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(e){this._baseFrequency=this.toFrequency(e),this._setSweepRange()},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"sensitivity",{get:function(){return(0,r.gainToDb)(1/this._inputBoost.gain.value)},set:function(e){this._inputBoost.gain.value=1/(0,r.dbToGain)(e)},enumerable:!0,configurable:!0}),p.prototype._setSweepRange=function(){this._sweepRange.min=this._baseFrequency,this._sweepRange.max=Math.min(this._baseFrequency*Math.pow(2,this._octaves),this.context.sampleRate/2)},p.prototype.dispose=function(){return u.prototype.dispose.call(this),this._follower.dispose(),this._sweepRange.dispose(),this._bandpass.dispose(),this._peaking.dispose(),this._inputBoost.dispose(),this},p}(t.Effect);exports.AutoWah=u;
},{"tslib":"vCxL","./Effect":"EXVs","../component/filter/Filter":"OcAm","../component/analysis/Follower":"EXJc","../core/util/Defaults":"gf59","../core/context/Gain":"EfHt","../core/type/Conversions":"o1kW","../signal/ScaleExp":"zv1V","../core/util/Interface":"x3aV"}],"t2qT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.BitCrusher=void 0;var t=require("tslib"),e=require("../core/context/ToneAudioWorklet"),n=require("./Effect"),r=require("../core/context/Gain"),o=require("../core/util/Defaults"),s=require("../core/context/ToneAudioNode"),i=require("../core/context/Param"),u=function(e){function r(){var t=e.call(this,(0,o.optionsFromArguments)(r.getDefaults(),arguments,["bits"]))||this;t.name="BitCrusher";var n=(0,o.optionsFromArguments)(r.getDefaults(),arguments,["bits"]);return t._bitCrusherWorklet=new a({context:t.context,bits:n.bits}),t.connectEffect(t._bitCrusherWorklet),t.bits=t._bitCrusherWorklet.bits,t}return(0,t.__extends)(r,e),r.getDefaults=function(){return Object.assign(n.Effect.getDefaults(),{bits:4,frequencyReduction:.5})},r.prototype.dispose=function(){return e.prototype.dispose.call(this),this._bitCrusherWorklet.dispose(),this},r}(n.Effect);exports.BitCrusher=u;var a=function(n){function u(){var t=n.call(this,(0,o.optionsFromArguments)(u.getDefaults(),arguments))||this;t.name="BitCrusherWorklet",t.workletOptions={numberOfInputs:1,numberOfOutputs:1};var e=(0,o.optionsFromArguments)(u.getDefaults(),arguments);t.input=new r.Gain({context:t.context}),t.output=new r.Gain({context:t.context});var s=t.context.createGain();return t.bits=new i.Param({context:t.context,value:e.bits,units:"positive",minValue:1,maxValue:16,param:s.gain,swappable:!0}),t}return(0,t.__extends)(u,n),u.getDefaults=function(){return Object.assign(e.ToneAudioWorklet.getDefaults(),{bits:12})},u.prototype._audioWorkletName=function(){return"bit-crusher"},u.prototype._audioWorklet=function(){return' \n\t\tregisterProcessor("'+this._audioWorkletName()+"\", class extends AudioWorkletProcessor {\n\t\t\tstatic get parameterDescriptors () {\n\t\t\t\treturn [{\n\t\t\t\t\tname: 'bits',\n\t\t\t\t\tdefaultValue: 12,\n\t\t\t\t\tminValue: 1,\n\t\t\t\t\tmaxValue: 16\n\t\t\t\t}];\n\t\t\t}\n\t\t\t\n\t\t\tprocess (inputs, outputs, parameters) {\n\t\t\t\tconst input = inputs[0];\n\t\t\t\tconst output = outputs[0];\n\t\t\t\tif (input && output && input.length === output.length) {\n\t\t\t\t\tconst bits = parameters.bits;\n\t\t\t\t\tfor (let channelNum = 0; channelNum < input.length; channelNum++) {\n\t\t\t\t\t\tconst inputChannel = input[channelNum];\n\t\t\t\t\t\tfor (let index = 0; index < inputChannel.length; index++) {\n\t\t\t\t\t\t\tconst value = inputChannel[index];\n\t\t\t\t\t\t\tconst step = bits.length > 1 ? Math.pow(0.5, bits[index]) : Math.pow(0.5, bits[0]);\n\t\t\t\t\t\t\tconst val = step * Math.floor(value / step + 0.5);\n\t\t\t\t\t\t\toutput[channelNum][index] = val;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t\t"},u.prototype.onReady=function(t){(0,s.connectSeries)(this.input,t,this.output);var e=t.parameters.get("bits");this.bits.setParam(e)},u.prototype.dispose=function(){return n.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this.bits.dispose(),this},u}(e.ToneAudioWorklet);
},{"tslib":"vCxL","../core/context/ToneAudioWorklet":"E9Yh","./Effect":"EXVs","../core/context/Gain":"EfHt","../core/util/Defaults":"gf59","../core/context/ToneAudioNode":"lGdl","../core/context/Param":"SJab"}],"hGEj":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Chebyshev=void 0;var e=require("tslib"),t=require("./Effect"),r=require("../core/util/Defaults"),o=require("../signal/WaveShaper"),s=function(s){function n(){var e=s.call(this,(0,r.optionsFromArguments)(n.getDefaults(),arguments,["order"]))||this;e.name="Chebyshev";var t=(0,r.optionsFromArguments)(n.getDefaults(),arguments,["order"]);return e._shaper=new o.WaveShaper({context:e.context,length:4096}),e._order=t.order,e.connectEffect(e._shaper),e.order=t.order,e.oversample=t.oversample,e}return(0,e.__extends)(n,s),n.getDefaults=function(){return Object.assign(t.Effect.getDefaults(),{order:1,oversample:"none"})},n.prototype._getCoefficient=function(e,t,r){return r.has(t)?r.get(t):(0===t?r.set(t,0):1===t?r.set(t,e):r.set(t,2*e*this._getCoefficient(e,t-1,r)-this._getCoefficient(e,t-2,r)),r.get(t))},Object.defineProperty(n.prototype,"order",{get:function(){return this._order},set:function(e){var t=this;this._order=e,this._shaper.setMap(function(r){return t._getCoefficient(r,e,new Map)})},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(e){this._shaper.oversample=e},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){return s.prototype.dispose.call(this),this._shaper.dispose(),this},n}(t.Effect);exports.Chebyshev=s;
},{"tslib":"vCxL","./Effect":"EXVs","../core/util/Defaults":"gf59","../signal/WaveShaper":"jY3Y"}],"PqA8":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Split=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),n=require("../../core/util/Defaults"),o=function(o){function r(){var e=o.call(this,(0,n.optionsFromArguments)(r.getDefaults(),arguments,["channels"]))||this;e.name="Split";var t=(0,n.optionsFromArguments)(r.getDefaults(),arguments,["channels"]);return e._splitter=e.input=e.output=e.context.createChannelSplitter(t.channels),e._internalChannels=[e._splitter],e}return(0,e.__extends)(r,o),r.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{channels:2})},r.prototype.dispose=function(){return o.prototype.dispose.call(this),this._splitter.disconnect(),this},r}(t.ToneAudioNode);exports.Split=o;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59"}],"iLVP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Merge=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),r=require("../../core/util/Defaults"),n=function(n){function o(){var e=n.call(this,(0,r.optionsFromArguments)(o.getDefaults(),arguments,["channels"]))||this;e.name="Merge";var t=(0,r.optionsFromArguments)(o.getDefaults(),arguments,["channels"]);return e._merger=e.output=e.input=e.context.createChannelMerger(t.channels),e}return(0,e.__extends)(o,n),o.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{channels:2})},o.prototype.dispose=function(){return n.prototype.dispose.call(this),this._merger.disconnect(),this},o}(t.ToneAudioNode);exports.Merge=n;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59"}],"PnGA":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StereoEffect=void 0;var e=require("tslib"),t=require("../core/context/ToneAudioNode"),n=require("../component/channel/CrossFade"),o=require("../component/channel/Split"),r=require("../core/context/Gain"),c=require("../component/channel/Merge"),i=require("../core/util/Interface"),s=function(s){function p(e){var t=s.call(this,e)||this;return t.name="StereoEffect",t.input=new r.Gain({context:t.context}),t.input.channelCount=2,t.input.channelCountMode="explicit",t._dryWet=t.output=new n.CrossFade({context:t.context,fade:e.wet}),t.wet=t._dryWet.fade,t._split=new o.Split({context:t.context,channels:2}),t._merge=new c.Merge({context:t.context,channels:2}),t.input.connect(t._split),t.input.connect(t._dryWet.a),t._merge.connect(t._dryWet.b),(0,i.readOnly)(t,["wet"]),t}return(0,e.__extends)(p,s),p.prototype.connectEffectLeft=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];this._split.connect(n[0],0,0),t.connectSeries.apply(void 0,(0,e.__spread)(n)),(0,t.connect)(n[n.length-1],this._merge,0,0)},p.prototype.connectEffectRight=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];this._split.connect(n[0],1,0),t.connectSeries.apply(void 0,(0,e.__spread)(n)),(0,t.connect)(n[n.length-1],this._merge,0,1)},p.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{wet:1})},p.prototype.dispose=function(){return s.prototype.dispose.call(this),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this},p}(t.ToneAudioNode);exports.StereoEffect=s;
},{"tslib":"vCxL","../core/context/ToneAudioNode":"lGdl","../component/channel/CrossFade":"KOg3","../component/channel/Split":"PqA8","../core/context/Gain":"EfHt","../component/channel/Merge":"iLVP","../core/util/Interface":"x3aV"}],"UZkB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StereoFeedbackEffect=void 0;var e=require("tslib"),t=require("./StereoEffect"),c=require("../signal/Signal"),n=require("../core/context/Gain"),a=require("../core/util/Interface"),i=require("../component/channel/Split"),o=require("../component/channel/Merge"),r=function(r){function f(e){var t=r.call(this,e)||this;return t.feedback=new c.Signal({context:t.context,value:e.feedback,units:"normalRange"}),t._feedbackL=new n.Gain({context:t.context}),t._feedbackR=new n.Gain({context:t.context}),t._feedbackSplit=new i.Split({context:t.context,channels:2}),t._feedbackMerge=new o.Merge({context:t.context,channels:2}),t._merge.connect(t._feedbackSplit),t._feedbackMerge.connect(t._split),t._feedbackSplit.connect(t._feedbackL,0,0),t._feedbackL.connect(t._feedbackMerge,0,0),t._feedbackSplit.connect(t._feedbackR,1,0),t._feedbackR.connect(t._feedbackMerge,0,1),t.feedback.fan(t._feedbackL.gain,t._feedbackR.gain),(0,a.readOnly)(t,["feedback"]),t}return(0,e.__extends)(f,r),f.getDefaults=function(){return Object.assign(t.StereoEffect.getDefaults(),{feedback:.5})},f.prototype.dispose=function(){return r.prototype.dispose.call(this),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this},f}(t.StereoEffect);exports.StereoFeedbackEffect=r;
},{"tslib":"vCxL","./StereoEffect":"PnGA","../signal/Signal":"u9T1","../core/context/Gain":"EfHt","../core/util/Interface":"x3aV","../component/channel/Split":"PqA8","../component/channel/Merge":"iLVP"}],"g0Fw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Chorus=void 0;var e=require("tslib"),t=require("../effect/StereoFeedbackEffect"),o=require("../core/util/Defaults"),n=require("../source/oscillator/LFO"),i=require("../core/context/Delay"),r=require("../core/util/Interface"),s=function(s){function f(){var e=s.call(this,(0,o.optionsFromArguments)(f.getDefaults(),arguments,["frequency","delayTime","depth"]))||this;e.name="Chorus";var t=(0,o.optionsFromArguments)(f.getDefaults(),arguments,["frequency","delayTime","depth"]);return e._depth=t.depth,e._delayTime=t.delayTime/1e3,e._lfoL=new n.LFO({context:e.context,frequency:t.frequency,min:0,max:1}),e._lfoR=new n.LFO({context:e.context,frequency:t.frequency,min:0,max:1,phase:180}),e._delayNodeL=new i.Delay({context:e.context}),e._delayNodeR=new i.Delay({context:e.context}),e.frequency=e._lfoL.frequency,(0,r.readOnly)(e,["frequency"]),e._lfoL.frequency.connect(e._lfoR.frequency),e.connectEffectLeft(e._delayNodeL),e.connectEffectRight(e._delayNodeR),e._lfoL.connect(e._delayNodeL.delayTime),e._lfoR.connect(e._delayNodeR.delayTime),e.depth=e._depth,e.type=t.type,e.spread=t.spread,e}return(0,e.__extends)(f,s),f.getDefaults=function(){return Object.assign(t.StereoFeedbackEffect.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})},Object.defineProperty(f.prototype,"depth",{get:function(){return this._depth},set:function(e){this._depth=e;var t=this._delayTime*e;this._lfoL.min=Math.max(this._delayTime-t,0),this._lfoL.max=this._delayTime+t,this._lfoR.min=Math.max(this._delayTime-t,0),this._lfoR.max=this._delayTime+t},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"delayTime",{get:function(){return 1e3*this._delayTime},set:function(e){this._delayTime=e/1e3,this.depth=this._depth},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"type",{get:function(){return this._lfoL.type},set:function(e){this._lfoL.type=e,this._lfoR.type=e},enumerable:!0,configurable:!0}),Object.defineProperty(f.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90},enumerable:!0,configurable:!0}),f.prototype.start=function(e){return this._lfoL.start(e),this._lfoR.start(e),this},f.prototype.stop=function(e){return this._lfoL.stop(e),this._lfoR.stop(e),this},f.prototype.sync=function(){return this._lfoL.sync(),this._lfoR.sync(),this},f.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),this},f.prototype.dispose=function(){return s.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this},f}(t.StereoFeedbackEffect);exports.Chorus=s;
},{"tslib":"vCxL","../effect/StereoFeedbackEffect":"UZkB","../core/util/Defaults":"gf59","../source/oscillator/LFO":"Hodm","../core/context/Delay":"Rg3p","../core/util/Interface":"x3aV"}],"lkzU":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Distortion=void 0;var t=require("tslib"),e=require("../core/util/Defaults"),r=require("../signal/WaveShaper"),o=require("./Effect"),s=function(s){function i(){var t=s.call(this,(0,e.optionsFromArguments)(i.getDefaults(),arguments,["distortion"]))||this;t.name="Distortion";var o=(0,e.optionsFromArguments)(i.getDefaults(),arguments,["distortion"]);return t._shaper=new r.WaveShaper({context:t.context,length:4096}),t._distortion=o.distortion,t.connectEffect(t._shaper),t.distortion=o.distortion,t.oversample=o.oversample,t}return(0,t.__extends)(i,s),i.getDefaults=function(){return Object.assign(o.Effect.getDefaults(),{distortion:.4,oversample:"none"})},Object.defineProperty(i.prototype,"distortion",{get:function(){return this._distortion},set:function(t){this._distortion=t;var e=100*t,r=Math.PI/180;this._shaper.setMap(function(t){return Math.abs(t)<.001?0:(3+e)*t*20*r/(Math.PI+e*Math.abs(t))})},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"oversample",{get:function(){return this._shaper.oversample},set:function(t){this._shaper.oversample=t},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){return s.prototype.dispose.call(this),this._shaper.dispose(),this},i}(o.Effect);exports.Distortion=s;
},{"tslib":"vCxL","../core/util/Defaults":"gf59","../signal/WaveShaper":"jY3Y","./Effect":"EXVs"}],"dGtS":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FeedbackEffect=void 0;var e=require("tslib"),t=require("../core/context/Gain"),c=require("../core/util/Interface"),n=require("./Effect"),a=function(a){function i(e){var n=a.call(this,e)||this;return n.name="FeedbackEffect",n._feedbackGain=new t.Gain({context:n.context,gain:e.feedback,units:"normalRange"}),n.feedback=n._feedbackGain.gain,(0,c.readOnly)(n,"feedback"),n.effectReturn.chain(n._feedbackGain,n.effectSend),n}return(0,e.__extends)(i,a),i.getDefaults=function(){return Object.assign(n.Effect.getDefaults(),{feedback:.125})},i.prototype.dispose=function(){return a.prototype.dispose.call(this),this._feedbackGain.dispose(),this.feedback.dispose(),this},i}(n.Effect);exports.FeedbackEffect=a;
},{"tslib":"vCxL","../core/context/Gain":"EfHt","../core/util/Interface":"x3aV","./Effect":"EXVs"}],"UNuB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FeedbackDelay=void 0;var e=require("tslib"),t=require("../core/context/Delay"),a=require("../core/util/Defaults"),r=require("../core/util/Interface"),i=require("./FeedbackEffect"),l=function(l){function o(){var e=l.call(this,(0,a.optionsFromArguments)(o.getDefaults(),arguments,["delayTime","feedback"]))||this;e.name="FeedbackDelay";var i=(0,a.optionsFromArguments)(o.getDefaults(),arguments,["delayTime","feedback"]);return e._delayNode=new t.Delay({context:e.context,delayTime:i.delayTime,maxDelay:i.maxDelay}),e.delayTime=e._delayNode.delayTime,e.connectEffect(e._delayNode),(0,r.readOnly)(e,"delayTime"),e}return(0,e.__extends)(o,l),o.getDefaults=function(){return Object.assign(i.FeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})},o.prototype.dispose=function(){return l.prototype.dispose.call(this),this._delayNode.dispose(),this.delayTime.dispose(),this},o}(i.FeedbackEffect);exports.FeedbackDelay=l;
},{"tslib":"vCxL","../core/context/Delay":"Rg3p","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV","./FeedbackEffect":"dGtS"}],"GYMH":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PhaseShiftAllpass=void 0;var e=require("tslib"),t=require("../../core/context/Gain"),n=require("../../core/context/ToneAudioNode"),o=function(o){function i(i){var s=o.call(this,i)||this;s.name="PhaseShiftAllpass",s.input=new t.Gain({context:s.context}),s.output=new t.Gain({context:s.context}),s.offset90=new t.Gain({context:s.context});return s._bank0=s._createAllPassFilterBank([.6923878,.9360654322959,.988229522686,.9987488452737]),s._bank1=s._createAllPassFilterBank([.4021921162426,.856171088242,.9722909545651,.9952884791278]),s._oneSampleDelay=s.context.createIIRFilter([0,1],[1,0]),n.connectSeries.apply(void 0,(0,e.__spread)([s.input],s._bank0,[s._oneSampleDelay,s.output])),n.connectSeries.apply(void 0,(0,e.__spread)([s.input],s._bank1,[s.offset90])),s}return(0,e.__extends)(i,o),i.prototype._createAllPassFilterBank=function(e){var t=this;return e.map(function(e){var n=[[e*e,0,-1],[1,0,-e*e]];return t.context.createIIRFilter(n[0],n[1])})},i.prototype.dispose=function(){return o.prototype.dispose.call(this),this.input.dispose(),this.output.dispose(),this.offset90.dispose(),this._bank0.forEach(function(e){return e.disconnect()}),this._bank1.forEach(function(e){return e.disconnect()}),this._oneSampleDelay.disconnect(),this},i}(n.ToneAudioNode);exports.PhaseShiftAllpass=o;
},{"tslib":"vCxL","../../core/context/Gain":"EfHt","../../core/context/ToneAudioNode":"lGdl"}],"uGcv":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FrequencyShifter=void 0;var e=require("tslib"),t=require("../component/filter/PhaseShiftAllpass"),n=require("../core/util/Defaults"),i=require("../effect/Effect"),s=require("../signal/Add"),o=require("../signal/Multiply"),c=require("../signal/Negate"),r=require("../signal/Signal"),l=require("../source/oscillator/Oscillator"),a=require("../source/oscillator/ToneOscillatorNode"),u=function(u){function f(){var e=u.call(this,(0,n.optionsFromArguments)(f.getDefaults(),arguments,["frequency"]))||this;e.name="FrequencyShifter";var i=(0,n.optionsFromArguments)(f.getDefaults(),arguments,["frequency"]);e.frequency=new r.Signal({context:e.context,units:"frequency",value:i.frequency,minValue:-e.context.sampleRate/2,maxValue:e.context.sampleRate/2}),e._sine=new a.ToneOscillatorNode({context:e.context,type:"sine"}),e._cosine=new l.Oscillator({context:e.context,phase:-90,type:"sine"}),e._sineMultiply=new o.Multiply({context:e.context}),e._cosineMultiply=new o.Multiply({context:e.context}),e._negate=new c.Negate({context:e.context}),e._add=new s.Add({context:e.context}),e._phaseShifter=new t.PhaseShiftAllpass({context:e.context}),e.effectSend.connect(e._phaseShifter),e.frequency.fan(e._sine.frequency,e._cosine.frequency),e._phaseShifter.offset90.connect(e._cosineMultiply),e._cosine.connect(e._cosineMultiply.factor),e._phaseShifter.connect(e._sineMultiply),e._sine.connect(e._sineMultiply.factor),e._sineMultiply.connect(e._negate),e._cosineMultiply.connect(e._add),e._negate.connect(e._add.addend),e._add.connect(e.effectReturn);var p=e.immediate();return e._sine.start(p),e._cosine.start(p),e}return(0,e.__extends)(f,u),f.getDefaults=function(){return Object.assign(i.Effect.getDefaults(),{frequency:0})},f.prototype.dispose=function(){return u.prototype.dispose.call(this),this.frequency.dispose(),this._add.dispose(),this._cosine.dispose(),this._cosineMultiply.dispose(),this._negate.dispose(),this._phaseShifter.dispose(),this._sine.dispose(),this._sineMultiply.dispose(),this},f}(i.Effect);exports.FrequencyShifter=u;
},{"tslib":"vCxL","../component/filter/PhaseShiftAllpass":"GYMH","../core/util/Defaults":"gf59","../effect/Effect":"EXVs","../signal/Add":"nMdK","../signal/Multiply":"uJ9R","../signal/Negate":"lsxS","../signal/Signal":"u9T1","../source/oscillator/Oscillator":"wURk","../source/oscillator/ToneOscillatorNode":"fE8z"}],"d0VJ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Freeverb=void 0;var e=require("tslib"),t=require("./StereoEffect"),r=require("../core/util/Defaults"),n=require("../core/util/Interface"),i=require("../signal/Signal"),o=require("../component/filter/LowpassCombFilter"),s=[1557/44100,1617/44100,1491/44100,1422/44100,1277/44100,1356/44100,1188/44100,1116/44100],a=[225,556,441,341],l=function(l){function c(){var t=l.call(this,(0,r.optionsFromArguments)(c.getDefaults(),arguments,["roomSize","dampening"]))||this;t.name="Freeverb",t._combFilters=[],t._allpassFiltersL=[],t._allpassFiltersR=[];var u=(0,r.optionsFromArguments)(c.getDefaults(),arguments,["roomSize","dampening"]);return t.roomSize=new i.Signal({context:t.context,value:u.roomSize,units:"normalRange"}),t._allpassFiltersL=a.map(function(e){var r=t.context.createBiquadFilter();return r.type="allpass",r.frequency.value=e,r}),t._allpassFiltersR=a.map(function(e){var r=t.context.createBiquadFilter();return r.type="allpass",r.frequency.value=e,r}),t._combFilters=s.map(function(r,n){var i=new o.LowpassCombFilter({context:t.context,dampening:u.dampening,delayTime:r});return n<s.length/2?t.connectEffectLeft.apply(t,(0,e.__spread)([i],t._allpassFiltersL)):t.connectEffectRight.apply(t,(0,e.__spread)([i],t._allpassFiltersR)),t.roomSize.connect(i.resonance),i}),(0,n.readOnly)(t,["roomSize"]),t}return(0,e.__extends)(c,l),c.getDefaults=function(){return Object.assign(t.StereoEffect.getDefaults(),{roomSize:.7,dampening:3e3})},Object.defineProperty(c.prototype,"dampening",{get:function(){return this._combFilters[0].dampening},set:function(e){this._combFilters.forEach(function(t){return t.dampening=e})},enumerable:!0,configurable:!0}),c.prototype.dispose=function(){return l.prototype.dispose.call(this),this._allpassFiltersL.forEach(function(e){return e.disconnect()}),this._allpassFiltersR.forEach(function(e){return e.disconnect()}),this._combFilters.forEach(function(e){return e.dispose()}),this.roomSize.dispose(),this},c}(t.StereoEffect);exports.Freeverb=l;
},{"tslib":"vCxL","./StereoEffect":"PnGA","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV","../signal/Signal":"u9T1","../component/filter/LowpassCombFilter":"BLT5"}],"UyeB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.JCReverb=void 0;var e=require("tslib"),t=require("./StereoEffect"),r=require("../core/util/Defaults"),o=require("../signal/Scale"),i=require("../signal/Signal"),n=require("../component/filter/FeedbackCombFilter"),s=require("../core/util/Interface"),a=[.06748,.06404,.08212,.09004],l=[.773,.802,.753,.733],c=[347,113,37],u=function(u){function f(){var t=u.call(this,(0,r.optionsFromArguments)(f.getDefaults(),arguments,["roomSize"]))||this;t.name="JCReverb",t._allpassFilters=[],t._feedbackCombFilters=[];var p=(0,r.optionsFromArguments)(f.getDefaults(),arguments,["roomSize"]);return t.roomSize=new i.Signal({context:t.context,value:p.roomSize,units:"normalRange"}),t._scaleRoomSize=new o.Scale({context:t.context,min:-.733,max:.197}),t._allpassFilters=c.map(function(e){var r=t.context.createBiquadFilter();return r.type="allpass",r.frequency.value=e,r}),t._feedbackCombFilters=a.map(function(r,o){var i=new n.FeedbackCombFilter({context:t.context,delayTime:r});return t._scaleRoomSize.connect(i.resonance),i.resonance.value=l[o],o<a.length/2?t.connectEffectLeft.apply(t,(0,e.__spread)(t._allpassFilters,[i])):t.connectEffectRight.apply(t,(0,e.__spread)(t._allpassFilters,[i])),i}),t.roomSize.connect(t._scaleRoomSize),(0,s.readOnly)(t,["roomSize"]),t}return(0,e.__extends)(f,u),f.getDefaults=function(){return Object.assign(t.StereoEffect.getDefaults(),{roomSize:.5})},f.prototype.dispose=function(){return u.prototype.dispose.call(this),this._allpassFilters.forEach(function(e){return e.disconnect()}),this._feedbackCombFilters.forEach(function(e){return e.dispose()}),this.roomSize.dispose(),this._scaleRoomSize.dispose(),this},f}(t.StereoEffect);exports.JCReverb=u;
},{"tslib":"vCxL","./StereoEffect":"PnGA","../core/util/Defaults":"gf59","../signal/Scale":"qHH3","../signal/Signal":"u9T1","../component/filter/FeedbackCombFilter":"rYrw","../core/util/Interface":"x3aV"}],"ZITC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StereoXFeedbackEffect=void 0;var e=require("tslib"),c=require("./StereoFeedbackEffect"),t=require("../core/util/Interface"),r=function(c){function r(e){var r=c.call(this,e)||this;return r._feedbackL.disconnect(),r._feedbackL.connect(r._feedbackMerge,0,1),r._feedbackR.disconnect(),r._feedbackR.connect(r._feedbackMerge,0,0),(0,t.readOnly)(r,["feedback"]),r}return(0,e.__extends)(r,c),r}(c.StereoFeedbackEffect);exports.StereoXFeedbackEffect=r;
},{"tslib":"vCxL","./StereoFeedbackEffect":"UZkB","../core/util/Interface":"x3aV"}],"Mz04":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PingPongDelay=void 0;var e=require("tslib"),t=require("./StereoXFeedbackEffect"),a=require("../core/util/Defaults"),i=require("../core/context/Delay"),l=require("../signal/Signal"),r=require("../core/util/Interface"),n=function(n){function o(){var e=n.call(this,(0,a.optionsFromArguments)(o.getDefaults(),arguments,["delayTime","feedback"]))||this;e.name="PingPongDelay";var t=(0,a.optionsFromArguments)(o.getDefaults(),arguments,["delayTime","feedback"]);return e._leftDelay=new i.Delay({context:e.context,maxDelay:t.maxDelay}),e._rightDelay=new i.Delay({context:e.context,maxDelay:t.maxDelay}),e._rightPreDelay=new i.Delay({context:e.context,maxDelay:t.maxDelay}),e.delayTime=new l.Signal({context:e.context,units:"time",value:t.delayTime}),e.connectEffectLeft(e._leftDelay),e.connectEffectRight(e._rightPreDelay,e._rightDelay),e.delayTime.fan(e._leftDelay.delayTime,e._rightDelay.delayTime,e._rightPreDelay.delayTime),e._feedbackL.disconnect(),e._feedbackL.connect(e._rightDelay),(0,r.readOnly)(e,["delayTime"]),e}return(0,e.__extends)(o,n),o.getDefaults=function(){return Object.assign(t.StereoXFeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})},o.prototype.dispose=function(){return n.prototype.dispose.call(this),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this},o}(t.StereoXFeedbackEffect);exports.PingPongDelay=n;
},{"tslib":"vCxL","./StereoXFeedbackEffect":"ZITC","../core/util/Defaults":"gf59","../core/context/Delay":"Rg3p","../signal/Signal":"u9T1","../core/util/Interface":"x3aV"}],"cfxu":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PitchShift=void 0;var e=require("tslib"),t=require("./FeedbackEffect"),i=require("../core/util/Defaults"),o=require("../source/oscillator/LFO"),n=require("../core/context/Delay"),s=require("../component/channel/CrossFade"),a=require("../signal/Signal"),c=require("../core/util/Interface"),r=require("../core/type/Conversions"),l=function(l){function d(){var e=l.call(this,(0,i.optionsFromArguments)(d.getDefaults(),arguments,["pitch"]))||this;e.name="PitchShift";var t=(0,i.optionsFromArguments)(d.getDefaults(),arguments,["pitch"]);e._frequency=new a.Signal({context:e.context}),e._delayA=new n.Delay({maxDelay:1,context:e.context}),e._lfoA=new o.LFO({context:e.context,min:0,max:.1,type:"sawtooth"}).connect(e._delayA.delayTime),e._delayB=new n.Delay({maxDelay:1,context:e.context}),e._lfoB=new o.LFO({context:e.context,min:0,max:.1,type:"sawtooth",phase:180}).connect(e._delayB.delayTime),e._crossFade=new s.CrossFade({context:e.context}),e._crossFadeLFO=new o.LFO({context:e.context,min:0,max:1,type:"triangle",phase:90}).connect(e._crossFade.fade),e._feedbackDelay=new n.Delay({delayTime:t.delayTime,context:e.context}),e.delayTime=e._feedbackDelay.delayTime,(0,c.readOnly)(e,"delayTime"),e._pitch=t.pitch,e._windowSize=t.windowSize,e._delayA.connect(e._crossFade.a),e._delayB.connect(e._crossFade.b),e._frequency.fan(e._lfoA.frequency,e._lfoB.frequency,e._crossFadeLFO.frequency),e.effectSend.fan(e._delayA,e._delayB),e._crossFade.chain(e._feedbackDelay,e.effectReturn);var r=e.now();return e._lfoA.start(r),e._lfoB.start(r),e._crossFadeLFO.start(r),e.windowSize=e._windowSize,e}return(0,e.__extends)(d,l),d.getDefaults=function(){return Object.assign(t.FeedbackEffect.getDefaults(),{pitch:0,windowSize:.1,delayTime:0,feedback:0})},Object.defineProperty(d.prototype,"pitch",{get:function(){return this._pitch},set:function(e){this._pitch=e;var t=0;e<0?(this._lfoA.min=0,this._lfoA.max=this._windowSize,this._lfoB.min=0,this._lfoB.max=this._windowSize,t=(0,r.intervalToFrequencyRatio)(e-1)+1):(this._lfoA.min=this._windowSize,this._lfoA.max=0,this._lfoB.min=this._windowSize,this._lfoB.max=0,t=(0,r.intervalToFrequencyRatio)(e)-1),this._frequency.value=t*(1.2/this._windowSize)},enumerable:!0,configurable:!0}),Object.defineProperty(d.prototype,"windowSize",{get:function(){return this._windowSize},set:function(e){this._windowSize=this.toSeconds(e),this.pitch=this._pitch},enumerable:!0,configurable:!0}),d.prototype.dispose=function(){return l.prototype.dispose.call(this),this._frequency.dispose(),this._delayA.dispose(),this._delayB.dispose(),this._lfoA.dispose(),this._lfoB.dispose(),this._crossFade.dispose(),this._crossFadeLFO.dispose(),this._feedbackDelay.dispose(),this},d}(t.FeedbackEffect);exports.PitchShift=l;
},{"tslib":"vCxL","./FeedbackEffect":"dGtS","../core/util/Defaults":"gf59","../source/oscillator/LFO":"Hodm","../core/context/Delay":"Rg3p","../component/channel/CrossFade":"KOg3","../signal/Signal":"u9T1","../core/util/Interface":"x3aV","../core/type/Conversions":"o1kW"}],"arJB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Phaser=void 0;var e=require("tslib"),t=require("./StereoEffect"),r=require("../core/util/Defaults"),s=require("../source/oscillator/LFO"),n=require("../signal/Signal"),o=require("../core/util/Interface"),c=function(c){function i(){var t=c.call(this,(0,r.optionsFromArguments)(i.getDefaults(),arguments,["frequency","octaves","baseFrequency"]))||this;t.name="Phaser";var a=(0,r.optionsFromArguments)(i.getDefaults(),arguments,["frequency","octaves","baseFrequency"]);return t._lfoL=new s.LFO({context:t.context,frequency:a.frequency,min:0,max:1}),t._lfoR=new s.LFO({context:t.context,frequency:a.frequency,min:0,max:1,phase:180}),t._baseFrequency=t.toFrequency(a.baseFrequency),t._octaves=a.octaves,t.Q=new n.Signal({context:t.context,value:a.Q,units:"positive"}),t._filtersL=t._makeFilters(a.stages,t._lfoL),t._filtersR=t._makeFilters(a.stages,t._lfoR),t.frequency=t._lfoL.frequency,t.frequency.value=a.frequency,t.connectEffectLeft.apply(t,(0,e.__spread)(t._filtersL)),t.connectEffectRight.apply(t,(0,e.__spread)(t._filtersR)),t._lfoL.frequency.connect(t._lfoR.frequency),t.baseFrequency=a.baseFrequency,t.octaves=a.octaves,t._lfoL.start(),t._lfoR.start(),(0,o.readOnly)(t,["frequency","Q"]),t}return(0,e.__extends)(i,c),i.getDefaults=function(){return Object.assign(t.StereoEffect.getDefaults(),{frequency:.5,octaves:3,stages:10,Q:10,baseFrequency:350})},i.prototype._makeFilters=function(e,t){for(var r=[],s=0;s<e;s++){var n=this.context.createBiquadFilter();n.type="allpass",this.Q.connect(n.Q),t.connect(n.frequency),r.push(n)}return r},Object.defineProperty(i.prototype,"octaves",{get:function(){return this._octaves},set:function(e){this._octaves=e;var t=this._baseFrequency*Math.pow(2,e);this._lfoL.max=t,this._lfoR.max=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"baseFrequency",{get:function(){return this._baseFrequency},set:function(e){this._baseFrequency=this.toFrequency(e),this._lfoL.min=this._baseFrequency,this._lfoR.min=this._baseFrequency,this.octaves=this._octaves},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){return c.prototype.dispose.call(this),this.Q.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._filtersL.forEach(function(e){return e.disconnect()}),this._filtersR.forEach(function(e){return e.disconnect()}),this.frequency.dispose(),this},i}(t.StereoEffect);exports.Phaser=c;
},{"tslib":"vCxL","./StereoEffect":"PnGA","../core/util/Defaults":"gf59","../source/oscillator/LFO":"Hodm","../signal/Signal":"u9T1","../core/util/Interface":"x3aV"}],"dX7U":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Reverb=void 0;var e=require("tslib"),t=require("../component/channel/Merge"),r=require("../core/context/Gain"),n=require("../core/util/Defaults"),o=require("../source/Noise"),i=require("./Effect"),s=require("../core/context/OfflineContext"),a=require("../core/util/Interface"),c=require("../core/util/Debug"),u=function(u){function l(){var e=u.call(this,(0,n.optionsFromArguments)(l.getDefaults(),arguments,["decay"]))||this;e.name="Reverb",e._convolver=e.context.createConvolver(),e.ready=Promise.resolve();var t=(0,n.optionsFromArguments)(l.getDefaults(),arguments,["decay"]);return e._decay=t.decay,e._preDelay=t.preDelay,e.generate(),e.connectEffect(e._convolver),e}return(0,e.__extends)(l,u),l.getDefaults=function(){return Object.assign(i.Effect.getDefaults(),{decay:1.5,preDelay:.01})},Object.defineProperty(l.prototype,"decay",{get:function(){return this._decay},set:function(e){e=this.toSeconds(e),(0,c.assertRange)(e,.001),this._decay=e,this.generate()},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"preDelay",{get:function(){return this._preDelay},set:function(e){e=this.toSeconds(e),(0,c.assertRange)(e,0),this._preDelay=e,this.generate()},enumerable:!0,configurable:!0}),l.prototype.generate=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var n,i,c,u,l,f,p,y;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return n=this.ready,i=new s.OfflineContext(2,this._decay+this._preDelay,this.context.sampleRate),c=new o.Noise({context:i}),u=new o.Noise({context:i}),l=new t.Merge({context:i}),c.connect(l,0,0),u.connect(l,0,1),f=new r.Gain({context:i}).toDestination(),l.connect(f),c.start(0),u.start(0),f.gain.setValueAtTime(0,0),f.gain.setValueAtTime(1,this._preDelay),f.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay),p=i.render(),this.ready=p.then(a.noOp),[4,n];case 1:return e.sent(),y=this._convolver,[4,p];case 2:return y.buffer=e.sent().get(),[2,this]}})})},l.prototype.dispose=function(){return u.prototype.dispose.call(this),this._convolver.disconnect(),this},l}(i.Effect);exports.Reverb=u;
},{"tslib":"vCxL","../component/channel/Merge":"iLVP","../core/context/Gain":"EfHt","../core/util/Defaults":"gf59","../source/Noise":"TDl3","./Effect":"EXVs","../core/context/OfflineContext":"IbG8","../core/util/Interface":"x3aV","../core/util/Debug":"wPdo"}],"qVhN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MidSideSplit=void 0;var t=require("tslib"),e=require("../../core/context/ToneAudioNode"),i=require("./Split"),d=require("../../signal/Add"),s=require("../../signal/Multiply"),n=require("../../signal/Subtract"),o=require("../../core/util/Defaults"),r=function(e){function r(){var t=e.call(this,(0,o.optionsFromArguments)(r.getDefaults(),arguments))||this;return t.name="MidSideSplit",t._split=t.input=new i.Split({channels:2,context:t.context}),t._midAdd=new d.Add({context:t.context}),t.mid=new s.Multiply({context:t.context,value:Math.SQRT1_2}),t._sideSubtract=new n.Subtract({context:t.context}),t.side=new s.Multiply({context:t.context,value:Math.SQRT1_2}),t._split.connect(t._midAdd,0),t._split.connect(t._midAdd.addend,1),t._split.connect(t._sideSubtract,0),t._split.connect(t._sideSubtract.subtrahend,1),t._midAdd.connect(t.mid),t._sideSubtract.connect(t.side),t}return(0,t.__extends)(r,e),r.prototype.dispose=function(){return e.prototype.dispose.call(this),this.mid.dispose(),this.side.dispose(),this._midAdd.dispose(),this._sideSubtract.dispose(),this._split.dispose(),this},r}(e.ToneAudioNode);exports.MidSideSplit=r;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","./Split":"PqA8","../../signal/Add":"nMdK","../../signal/Multiply":"uJ9R","../../signal/Subtract":"jlYG","../../core/util/Defaults":"gf59"}],"LTJ4":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MidSideMerge=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),i=require("./Merge"),n=require("../../signal/Add"),o=require("../../signal/Multiply"),r=require("../../signal/Subtract"),s=require("../../core/context/Gain"),c=require("../../core/util/Defaults"),u=function(t){function u(){var e=t.call(this,(0,c.optionsFromArguments)(u.getDefaults(),arguments))||this;return e.name="MidSideMerge",e.mid=new s.Gain({context:e.context}),e.side=new s.Gain({context:e.context}),e._left=new n.Add({context:e.context}),e._leftMult=new o.Multiply({context:e.context,value:Math.SQRT1_2}),e._right=new r.Subtract({context:e.context}),e._rightMult=new o.Multiply({context:e.context,value:Math.SQRT1_2}),e._merge=e.output=new i.Merge({context:e.context}),e.mid.fan(e._left),e.side.connect(e._left.addend),e.mid.connect(e._right),e.side.connect(e._right.subtrahend),e._left.connect(e._leftMult),e._right.connect(e._rightMult),e._leftMult.connect(e._merge,0,0),e._rightMult.connect(e._merge,0,1),e}return(0,e.__extends)(u,t),u.prototype.dispose=function(){return t.prototype.dispose.call(this),this.mid.dispose(),this.side.dispose(),this._leftMult.dispose(),this._rightMult.dispose(),this._left.dispose(),this._right.dispose(),this},u}(t.ToneAudioNode);exports.MidSideMerge=u;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","./Merge":"iLVP","../../signal/Add":"nMdK","../../signal/Multiply":"uJ9R","../../signal/Subtract":"jlYG","../../core/context/Gain":"EfHt","../../core/util/Defaults":"gf59"}],"rnbM":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MidSideEffect=void 0;var e=require("tslib"),i=require("./Effect"),t=require("../component/channel/MidSideSplit"),d=require("../component/channel/MidSideMerge"),n=function(i){function n(e){var n=i.call(this,e)||this;return n.name="MidSideEffect",n._midSideMerge=new d.MidSideMerge({context:n.context}),n._midSideSplit=new t.MidSideSplit({context:n.context}),n._midSend=n._midSideSplit.mid,n._sideSend=n._midSideSplit.side,n._midReturn=n._midSideMerge.mid,n._sideReturn=n._midSideMerge.side,n.effectSend.connect(n._midSideSplit),n._midSideMerge.connect(n.effectReturn),n}return(0,e.__extends)(n,i),n.prototype.connectEffectMid=function(){for(var i,t=[],d=0;d<arguments.length;d++)t[d]=arguments[d];(i=this._midSend).chain.apply(i,(0,e.__spread)(t,[this._midReturn]))},n.prototype.connectEffectSide=function(){for(var i,t=[],d=0;d<arguments.length;d++)t[d]=arguments[d];(i=this._sideSend).chain.apply(i,(0,e.__spread)(t,[this._sideReturn]))},n.prototype.dispose=function(){return i.prototype.dispose.call(this),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this._midSend.dispose(),this._sideSend.dispose(),this._midReturn.dispose(),this._sideReturn.dispose(),this},n}(i.Effect);exports.MidSideEffect=n;
},{"tslib":"vCxL","./Effect":"EXVs","../component/channel/MidSideSplit":"qVhN","../component/channel/MidSideMerge":"LTJ4"}],"o1Qb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.StereoWidener=void 0;var t=require("tslib"),e=require("../effect/MidSideEffect"),i=require("../signal/Signal"),n=require("../signal/Multiply"),o=require("../signal/Subtract"),s=require("../core/util/Defaults"),d=require("../core/util/Interface"),r=require("../core/context/ToneAudioNode"),u=function(u){function c(){var t=u.call(this,(0,s.optionsFromArguments)(c.getDefaults(),arguments,["width"]))||this;t.name="StereoWidener";var e=(0,s.optionsFromArguments)(c.getDefaults(),arguments,["width"]);return t.width=new i.Signal({context:t.context,value:e.width,units:"normalRange"}),(0,d.readOnly)(t,["width"]),t._twoTimesWidthMid=new n.Multiply({context:t.context,value:2}),t._twoTimesWidthSide=new n.Multiply({context:t.context,value:2}),t._midMult=new n.Multiply({context:t.context}),t._twoTimesWidthMid.connect(t._midMult.factor),t.connectEffectMid(t._midMult),t._oneMinusWidth=new o.Subtract({context:t.context}),t._oneMinusWidth.connect(t._twoTimesWidthMid),(0,r.connect)(t.context.getConstant(1),t._oneMinusWidth),t.width.connect(t._oneMinusWidth.subtrahend),t._sideMult=new n.Multiply({context:t.context}),t.width.connect(t._twoTimesWidthSide),t._twoTimesWidthSide.connect(t._sideMult.factor),t.connectEffectSide(t._sideMult),t}return(0,t.__extends)(c,u),c.getDefaults=function(){return Object.assign(e.MidSideEffect.getDefaults(),{width:.5})},c.prototype.dispose=function(){return u.prototype.dispose.call(this),this.width.dispose(),this._midMult.dispose(),this._sideMult.dispose(),this._twoTimesWidthMid.dispose(),this._twoTimesWidthSide.dispose(),this._oneMinusWidth.dispose(),this},c}(e.MidSideEffect);exports.StereoWidener=u;
},{"tslib":"vCxL","../effect/MidSideEffect":"rnbM","../signal/Signal":"u9T1","../signal/Multiply":"uJ9R","../signal/Subtract":"jlYG","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV","../core/context/ToneAudioNode":"lGdl"}],"zJGc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Tremolo=void 0;var e=require("tslib"),t=require("./StereoEffect"),n=require("../source/oscillator/LFO"),o=require("../core/context/Gain"),i=require("../signal/Signal"),r=require("../core/util/Defaults"),s=require("../core/util/Interface"),u=function(u){function c(){var e=u.call(this,(0,r.optionsFromArguments)(c.getDefaults(),arguments,["frequency","depth"]))||this;e.name="Tremolo";var t=(0,r.optionsFromArguments)(c.getDefaults(),arguments,["frequency","depth"]);return e._lfoL=new n.LFO({context:e.context,type:t.type,min:1,max:0}),e._lfoR=new n.LFO({context:e.context,type:t.type,min:1,max:0}),e._amplitudeL=new o.Gain({context:e.context}),e._amplitudeR=new o.Gain({context:e.context}),e.frequency=new i.Signal({context:e.context,value:t.frequency,units:"frequency"}),e.depth=new i.Signal({context:e.context,value:t.depth,units:"normalRange"}),(0,s.readOnly)(e,["frequency","depth"]),e.connectEffectLeft(e._amplitudeL),e.connectEffectRight(e._amplitudeR),e._lfoL.connect(e._amplitudeL.gain),e._lfoR.connect(e._amplitudeR.gain),e.frequency.fan(e._lfoL.frequency,e._lfoR.frequency),e.depth.fan(e._lfoR.amplitude,e._lfoL.amplitude),e.spread=t.spread,e}return(0,e.__extends)(c,u),c.getDefaults=function(){return Object.assign(t.StereoEffect.getDefaults(),{frequency:10,type:"sine",depth:.5,spread:180})},c.prototype.start=function(e){return this._lfoL.start(e),this._lfoR.start(e),this},c.prototype.stop=function(e){return this._lfoL.stop(e),this._lfoR.stop(e),this},c.prototype.sync=function(){return this._lfoL.sync(),this._lfoR.sync(),this.context.transport.syncSignal(this.frequency),this},c.prototype.unsync=function(){return this._lfoL.unsync(),this._lfoR.unsync(),this.context.transport.unsyncSignal(this.frequency),this},Object.defineProperty(c.prototype,"type",{get:function(){return this._lfoL.type},set:function(e){this._lfoL.type=e,this._lfoR.type=e},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"spread",{get:function(){return this._lfoR.phase-this._lfoL.phase},set:function(e){this._lfoL.phase=90-e/2,this._lfoR.phase=e/2+90},enumerable:!0,configurable:!0}),c.prototype.dispose=function(){return u.prototype.dispose.call(this),this._lfoL.dispose(),this._lfoR.dispose(),this._amplitudeL.dispose(),this._amplitudeR.dispose(),this.frequency.dispose(),this.depth.dispose(),this},c}(t.StereoEffect);exports.Tremolo=u;
},{"tslib":"vCxL","./StereoEffect":"PnGA","../source/oscillator/LFO":"Hodm","../core/context/Gain":"EfHt","../signal/Signal":"u9T1","../core/util/Defaults":"gf59","../core/util/Interface":"x3aV"}],"w6eR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Vibrato=void 0;var e=require("tslib"),t=require("./Effect"),r=require("../core/util/Defaults"),o=require("../source/oscillator/LFO"),n=require("../core/context/Delay"),i=require("../core/util/Interface"),s=function(s){function u(){var e=s.call(this,(0,r.optionsFromArguments)(u.getDefaults(),arguments,["frequency","depth"]))||this;e.name="Vibrato";var t=(0,r.optionsFromArguments)(u.getDefaults(),arguments,["frequency","depth"]);return e._delayNode=new n.Delay({context:e.context,delayTime:0,maxDelay:t.maxDelay}),e._lfo=new o.LFO({context:e.context,type:t.type,min:0,max:t.maxDelay,frequency:t.frequency,phase:-90}).start().connect(e._delayNode.delayTime),e.frequency=e._lfo.frequency,e.depth=e._lfo.amplitude,e.depth.value=t.depth,(0,i.readOnly)(e,["frequency","depth"]),e.effectSend.chain(e._delayNode,e.effectReturn),e}return(0,e.__extends)(u,s),u.getDefaults=function(){return Object.assign(t.Effect.getDefaults(),{maxDelay:.005,frequency:5,depth:.1,type:"sine"})},Object.defineProperty(u.prototype,"type",{get:function(){return this._lfo.type},set:function(e){this._lfo.type=e},enumerable:!0,configurable:!0}),u.prototype.dispose=function(){return s.prototype.dispose.call(this),this._delayNode.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this},u}(t.Effect);exports.Vibrato=s;
},{"tslib":"vCxL","./Effect":"EXVs","../core/util/Defaults":"gf59","../source/oscillator/LFO":"Hodm","../core/context/Delay":"Rg3p","../core/util/Interface":"x3aV"}],"X2xd":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./AutoFilter");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./AutoPanner");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./AutoWah");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var u=require("./BitCrusher");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var n=require("./Chebyshev");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var o=require("./Chorus");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var c=require("./Distortion");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}})});var f=require("./FeedbackDelay");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}})});var i=require("./FrequencyShifter");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})});var a=require("./Freeverb");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}})});var s=require("./JCReverb");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}})});var b=require("./PingPongDelay");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}})});var l=require("./PitchShift");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}})});var d=require("./Phaser");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}})});var y=require("./Reverb");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return y[e]}})});var p=require("./StereoWidener");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}})});var _=require("./Tremolo");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _[e]}})});var j=require("./Vibrato");Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return j[e]}})});
},{"./AutoFilter":"qk03","./AutoPanner":"HJBl","./AutoWah":"bS0K","./BitCrusher":"t2qT","./Chebyshev":"hGEj","./Chorus":"g0Fw","./Distortion":"lkzU","./FeedbackDelay":"UNuB","./FrequencyShifter":"uGcv","./Freeverb":"d0VJ","./JCReverb":"UyeB","./PingPongDelay":"Mz04","./PitchShift":"cfxu","./Phaser":"arJB","./Reverb":"dX7U","./StereoWidener":"o1Qb","./Tremolo":"zJGc","./Vibrato":"w6eR"}],"t2IF":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Analyser=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),n=require("../../core/util/Defaults"),r=require("../channel/Split"),s=require("../../core/context/Gain"),o=require("../../core/util/Debug"),i=function(i){function a(){var e=i.call(this,(0,n.optionsFromArguments)(a.getDefaults(),arguments,["type","size"]))||this;e.name="Analyser",e._analysers=[],e._buffers=[];var t=(0,n.optionsFromArguments)(a.getDefaults(),arguments,["type","size"]);e.input=e.output=e._gain=new s.Gain({context:e.context}),e._split=new r.Split({context:e.context,channels:t.channels}),e.input.connect(e._split),(0,o.assertRange)(t.channels,1);for(var u=0;u<t.channels;u++)e._analysers[u]=e.context.createAnalyser(),e._split.connect(e._analysers[u],u,0);return e.size=t.size,e.type=t.type,e}return(0,e.__extends)(a,i),a.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{size:1024,smoothing:.8,type:"fft",channels:1})},a.prototype.getValue=function(){var e=this;return this._analysers.forEach(function(t,n){var r=e._buffers[n];"fft"===e._type?t.getFloatFrequencyData(r):"waveform"===e._type&&t.getFloatTimeDomainData(r)}),1===this.channels?this._buffers[0]:this._buffers},Object.defineProperty(a.prototype,"size",{get:function(){return this._analysers[0].frequencyBinCount},set:function(e){var t=this;this._analysers.forEach(function(n,r){n.fftSize=2*e,t._buffers[r]=new Float32Array(e)})},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"channels",{get:function(){return this._analysers.length},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"type",{get:function(){return this._type},set:function(e){(0,o.assert)("waveform"===e||"fft"===e,"Analyser: invalid type: "+e),this._type=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"smoothing",{get:function(){return this._analysers[0].smoothingTimeConstant},set:function(e){this._analysers.forEach(function(t){return t.smoothingTimeConstant=e})},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){return i.prototype.dispose.call(this),this._analysers.forEach(function(e){return e.disconnect()}),this._split.dispose(),this._gain.dispose(),this},a}(t.ToneAudioNode);exports.Analyser=i;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../channel/Split":"PqA8","../../core/context/Gain":"EfHt","../../core/util/Debug":"wPdo"}],"wXdB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MeterBase=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),r=require("../../core/util/Defaults"),o=require("./Analyser"),s=function(t){function s(){var e=t.call(this,(0,r.optionsFromArguments)(s.getDefaults(),arguments))||this;return e.name="MeterBase",e.input=e.output=e._analyser=new o.Analyser({context:e.context,size:256,type:"waveform"}),e}return(0,e.__extends)(s,t),s.prototype.dispose=function(){return t.prototype.dispose.call(this),this._analyser.dispose(),this},s}(t.ToneAudioNode);exports.MeterBase=s;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","./Analyser":"t2IF"}],"DouQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Meter=void 0;var e=require("tslib"),t=require("../../core/type/Conversions"),n=require("../../core/util/Defaults"),r=require("./MeterBase"),s=require("../../core/util/Debug"),o=require("./Analyser"),a=function(a){function i(){var e=a.call(this,(0,n.optionsFromArguments)(i.getDefaults(),arguments,["smoothing"]))||this;e.name="Meter",e._rms=0;var t=(0,n.optionsFromArguments)(i.getDefaults(),arguments,["smoothing"]);return e.input=e.output=e._analyser=new o.Analyser({context:e.context,size:256,type:"waveform",channels:t.channels}),e.smoothing=t.smoothing,e.normalRange=t.normalRange,e}return(0,e.__extends)(i,a),i.getDefaults=function(){return Object.assign(r.MeterBase.getDefaults(),{smoothing:.8,normalRange:!1,channels:1})},i.prototype.getLevel=function(){return(0,s.warn)("'getLevel' has been changed to 'getValue'"),this.getValue()},i.prototype.getValue=function(){var e=this,n=this._analyser.getValue(),r=(1===this.channels?[n]:n).map(function(n){var r=n.reduce(function(e,t){return e+t*t},0),s=Math.sqrt(r/n.length);return e._rms=Math.max(s,e._rms*e.smoothing),e.normalRange?e._rms:(0,t.gainToDb)(e._rms)});return 1===this.channels?r[0]:r},Object.defineProperty(i.prototype,"channels",{get:function(){return this._analyser.channels},enumerable:!0,configurable:!0}),i.prototype.dispose=function(){return a.prototype.dispose.call(this),this._analyser.dispose(),this},i}(r.MeterBase);exports.Meter=a;
},{"tslib":"vCxL","../../core/type/Conversions":"o1kW","../../core/util/Defaults":"gf59","./MeterBase":"wXdB","../../core/util/Debug":"wPdo","./Analyser":"t2IF"}],"ZZpq":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.FFT=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),r=require("../../core/type/Conversions"),n=require("../../core/util/Defaults"),o=require("./MeterBase"),s=function(o){function s(){var e=o.call(this,(0,n.optionsFromArguments)(s.getDefaults(),arguments,["size"]))||this;e.name="FFT";var t=(0,n.optionsFromArguments)(s.getDefaults(),arguments,["size"]);return e.normalRange=t.normalRange,e._analyser.type="fft",e.size=t.size,e}return(0,e.__extends)(s,o),s.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{normalRange:!1,size:1024,smoothing:.8})},s.prototype.getValue=function(){var e=this;return this._analyser.getValue().map(function(t){return e.normalRange?(0,r.dbToGain)(t):t})},Object.defineProperty(s.prototype,"size",{get:function(){return this._analyser.size},set:function(e){this._analyser.size=e},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"smoothing",{get:function(){return this._analyser.smoothing},set:function(e){this._analyser.smoothing=e},enumerable:!0,configurable:!0}),s}(o.MeterBase);exports.FFT=s;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/type/Conversions":"o1kW","../../core/util/Defaults":"gf59","./MeterBase":"wXdB"}],"JeOw":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.DCMeter=void 0;var e=require("tslib"),t=require("../../core/util/Defaults"),r=require("./MeterBase"),s=function(r){function s(){var e=r.call(this,(0,t.optionsFromArguments)(s.getDefaults(),arguments))||this;return e.name="DCMeter",e._analyser.type="waveform",e._analyser.size=256,e}return(0,e.__extends)(s,r),s.prototype.getValue=function(){return this._analyser.getValue()[0]},s}(r.MeterBase);exports.DCMeter=s;
},{"tslib":"vCxL","../../core/util/Defaults":"gf59","./MeterBase":"wXdB"}],"sjO7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Waveform=void 0;var e=require("tslib"),t=require("../../core/util/Defaults"),r=require("./MeterBase"),s=function(s){function i(){var e=s.call(this,(0,t.optionsFromArguments)(i.getDefaults(),arguments,["size"]))||this;e.name="Waveform";var r=(0,t.optionsFromArguments)(i.getDefaults(),arguments,["size"]);return e._analyser.type="waveform",e.size=r.size,e}return(0,e.__extends)(i,s),i.getDefaults=function(){return Object.assign(r.MeterBase.getDefaults(),{size:1024})},i.prototype.getValue=function(){return this._analyser.getValue()},Object.defineProperty(i.prototype,"size",{get:function(){return this._analyser.size},set:function(e){this._analyser.size=e},enumerable:!0,configurable:!0}),i}(r.MeterBase);exports.Waveform=s;
},{"tslib":"vCxL","../../core/util/Defaults":"gf59","./MeterBase":"wXdB"}],"Ly8h":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Solo=void 0;var o=require("tslib"),t=require("../../core/context/Gain"),e=require("../../core/context/ToneAudioNode"),s=require("../../core/util/Defaults"),n=function(n){function i(){var o=n.call(this,(0,s.optionsFromArguments)(i.getDefaults(),arguments,["solo"]))||this;o.name="Solo";var e=(0,s.optionsFromArguments)(i.getDefaults(),arguments,["solo"]);return o.input=o.output=new t.Gain({context:o.context}),i._allSolos.has(o.context)||i._allSolos.set(o.context,new Set),i._allSolos.get(o.context).add(o),o.solo=e.solo,o}return(0,o.__extends)(i,n),i.getDefaults=function(){return Object.assign(e.ToneAudioNode.getDefaults(),{solo:!1})},Object.defineProperty(i.prototype,"solo",{get:function(){return this._isSoloed()},set:function(o){o?this._addSolo():this._removeSolo(),i._allSolos.get(this.context).forEach(function(o){return o._updateSolo()})},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"muted",{get:function(){return 0===this.input.gain.value},enumerable:!0,configurable:!0}),i.prototype._addSolo=function(){i._soloed.has(this.context)||i._soloed.set(this.context,new Set),i._soloed.get(this.context).add(this)},i.prototype._removeSolo=function(){i._soloed.has(this.context)&&i._soloed.get(this.context).delete(this)},i.prototype._isSoloed=function(){return i._soloed.has(this.context)&&i._soloed.get(this.context).has(this)},i.prototype._noSolos=function(){return!i._soloed.has(this.context)||i._soloed.has(this.context)&&0===i._soloed.get(this.context).size},i.prototype._updateSolo=function(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0},i.prototype.dispose=function(){return n.prototype.dispose.call(this),i._allSolos.get(this.context).delete(this),this._removeSolo(),this},i._allSolos=new Map,i._soloed=new Map,i}(e.ToneAudioNode);exports.Solo=n;
},{"tslib":"vCxL","../../core/context/Gain":"EfHt","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59"}],"Ible":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PanVol=void 0;var e=require("tslib"),t=require("../../core/util/Interface"),o=require("../../core/context/ToneAudioNode"),n=require("../../core/util/Defaults"),u=require("./Panner"),r=require("./Volume"),i=function(i){function s(){var e=i.call(this,(0,n.optionsFromArguments)(s.getDefaults(),arguments,["pan","volume"]))||this;e.name="PanVol";var o=(0,n.optionsFromArguments)(s.getDefaults(),arguments,["pan","volume"]);return e._panner=e.input=new u.Panner({context:e.context,pan:o.pan}),e.pan=e._panner.pan,e._volume=e.output=new r.Volume({context:e.context,volume:o.volume}),e.volume=e._volume.volume,e._panner.connect(e._volume),e.mute=o.mute,(0,t.readOnly)(e,["pan","volume"]),e}return(0,e.__extends)(s,i),s.getDefaults=function(){return Object.assign(o.ToneAudioNode.getDefaults(),{mute:!1,pan:0,volume:0})},Object.defineProperty(s.prototype,"mute",{get:function(){return this._volume.mute},set:function(e){this._volume.mute=e},enumerable:!0,configurable:!0}),s.prototype.dispose=function(){return i.prototype.dispose.call(this),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this},s}(o.ToneAudioNode);exports.PanVol=i;
},{"tslib":"vCxL","../../core/util/Interface":"x3aV","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","./Panner":"ZuQU","./Volume":"a0V7"}],"KXTL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Channel=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),o=require("../../core/util/Defaults"),n=require("./Solo"),s=require("./PanVol"),u=require("../../core/util/Interface"),r=require("../../core/context/Gain"),i=function(i){function l(){var e=i.call(this,(0,o.optionsFromArguments)(l.getDefaults(),arguments,["volume","pan"]))||this;e.name="Channel";var t=(0,o.optionsFromArguments)(l.getDefaults(),arguments,["volume","pan"]);return e._solo=e.input=new n.Solo({solo:t.solo,context:e.context}),e._panVol=e.output=new s.PanVol({context:e.context,pan:t.pan,volume:t.volume,mute:t.mute}),e.pan=e._panVol.pan,e.volume=e._panVol.volume,e._solo.connect(e._panVol),(0,u.readOnly)(e,["pan","volume"]),e}return(0,e.__extends)(l,i),l.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1})},Object.defineProperty(l.prototype,"solo",{get:function(){return this._solo.solo},set:function(e){this._solo.solo=e},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"muted",{get:function(){return this._solo.muted||this.mute},enumerable:!0,configurable:!0}),Object.defineProperty(l.prototype,"mute",{get:function(){return this._panVol.mute},set:function(e){this._panVol.mute=e},enumerable:!0,configurable:!0}),l.prototype._getBus=function(e){return l.buses.has(e)||l.buses.set(e,new r.Gain({context:this.context})),l.buses.get(e)},l.prototype.send=function(e,t){void 0===t&&(t=0);var o=this._getBus(e),n=new r.Gain({context:this.context,units:"decibels",gain:t});return this.connect(n),n.connect(o),n},l.prototype.receive=function(e){return this._getBus(e).connect(this),this},l.prototype.dispose=function(){return i.prototype.dispose.call(this),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this},l.buses=new Map,l}(t.ToneAudioNode);exports.Channel=i;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","./Solo":"Ly8h","./PanVol":"Ible","../../core/util/Interface":"x3aV","../../core/context/Gain":"EfHt"}],"b1it":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultibandSplit=void 0;var e=require("tslib"),t=require("../../core/context/Gain"),i=require("../../core/context/ToneAudioNode"),n=require("../../core/util/Defaults"),o=require("../../core/util/Interface"),r=require("../../signal/Signal"),u=require("../filter/Filter"),c=function(c){function l(){var e=c.call(this,(0,n.optionsFromArguments)(l.getDefaults(),arguments,["lowFrequency","highFrequency"]))||this;e.name="MultibandSplit",e.input=new t.Gain({context:e.context}),e.output=void 0,e.low=new u.Filter({context:e.context,frequency:0,type:"lowpass"}),e._lowMidFilter=new u.Filter({context:e.context,frequency:0,type:"highpass"}),e.mid=new u.Filter({context:e.context,frequency:0,type:"lowpass"}),e.high=new u.Filter({context:e.context,frequency:0,type:"highpass"}),e._internalChannels=[e.low,e.mid,e.high];var i=(0,n.optionsFromArguments)(l.getDefaults(),arguments,["lowFrequency","highFrequency"]);return e.lowFrequency=new r.Signal({context:e.context,units:"frequency",value:i.lowFrequency}),e.highFrequency=new r.Signal({context:e.context,units:"frequency",value:i.highFrequency}),e.Q=new r.Signal({context:e.context,units:"positive",value:i.Q}),e.input.fan(e.low,e.high),e.input.chain(e._lowMidFilter,e.mid),e.lowFrequency.fan(e.low.frequency,e._lowMidFilter.frequency),e.highFrequency.fan(e.mid.frequency,e.high.frequency),e.Q.connect(e.low.Q),e.Q.connect(e._lowMidFilter.Q),e.Q.connect(e.mid.Q),e.Q.connect(e.high.Q),(0,o.readOnly)(e,["high","mid","low","highFrequency","lowFrequency"]),e}return(0,e.__extends)(l,c),l.getDefaults=function(){return Object.assign(i.ToneAudioNode.getDefaults(),{Q:1,highFrequency:2500,lowFrequency:400})},l.prototype.dispose=function(){return c.prototype.dispose.call(this),(0,o.writable)(this,["high","mid","low","highFrequency","lowFrequency"]),this.low.dispose(),this._lowMidFilter.dispose(),this.mid.dispose(),this.high.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this.Q.dispose(),this},l}(i.ToneAudioNode);exports.MultibandSplit=c;
},{"tslib":"vCxL","../../core/context/Gain":"EfHt","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../../signal/Signal":"u9T1","../filter/Filter":"OcAm"}],"wuuR":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Listener=void 0;var t=require("tslib"),e=require("./ToneAudioNode"),o=require("./Param"),n=require("./ContextInitialization"),r=function(n){function r(){var t=null!==n&&n.apply(this,arguments)||this;return t.name="Listener",t.positionX=new o.Param({context:t.context,param:t.context.rawContext.listener.positionX}),t.positionY=new o.Param({context:t.context,param:t.context.rawContext.listener.positionY}),t.positionZ=new o.Param({context:t.context,param:t.context.rawContext.listener.positionZ}),t.forwardX=new o.Param({context:t.context,param:t.context.rawContext.listener.forwardX}),t.forwardY=new o.Param({context:t.context,param:t.context.rawContext.listener.forwardY}),t.forwardZ=new o.Param({context:t.context,param:t.context.rawContext.listener.forwardZ}),t.upX=new o.Param({context:t.context,param:t.context.rawContext.listener.upX}),t.upY=new o.Param({context:t.context,param:t.context.rawContext.listener.upY}),t.upZ=new o.Param({context:t.context,param:t.context.rawContext.listener.upZ}),t}return(0,t.__extends)(r,n),r.getDefaults=function(){return Object.assign(e.ToneAudioNode.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})},r.prototype.dispose=function(){return n.prototype.dispose.call(this),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this},r}(e.ToneAudioNode);exports.Listener=r,(0,n.onContextInit)(function(t){t.listener=new r({context:t})}),(0,n.onContextClose)(function(t){t.listener.dispose()});
},{"tslib":"vCxL","./ToneAudioNode":"lGdl","./Param":"SJab","./ContextInitialization":"aMdC"}],"T5dI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Panner3D=void 0;var e=require("tslib"),n=require("../../core/context/Param"),t=require("../../core/context/ToneAudioNode"),o=require("../../core/util/Defaults");require("../../core/context/Listener");var i=function(i){function r(){var e=i.call(this,(0,o.optionsFromArguments)(r.getDefaults(),arguments,["positionX","positionY","positionZ"]))||this;e.name="Panner3D";var t=(0,o.optionsFromArguments)(r.getDefaults(),arguments,["positionX","positionY","positionZ"]);return e._panner=e.input=e.output=e.context.createPanner(),e.panningModel=t.panningModel,e.maxDistance=t.maxDistance,e.distanceModel=t.distanceModel,e.coneOuterGain=t.coneOuterGain,e.coneOuterAngle=t.coneOuterAngle,e.coneInnerAngle=t.coneInnerAngle,e.refDistance=t.refDistance,e.rolloffFactor=t.rolloffFactor,e.positionX=new n.Param({context:e.context,param:e._panner.positionX,value:t.positionX}),e.positionY=new n.Param({context:e.context,param:e._panner.positionY,value:t.positionY}),e.positionZ=new n.Param({context:e.context,param:e._panner.positionZ,value:t.positionZ}),e.orientationX=new n.Param({context:e.context,param:e._panner.orientationX,value:t.orientationX}),e.orientationY=new n.Param({context:e.context,param:e._panner.orientationY,value:t.orientationY}),e.orientationZ=new n.Param({context:e.context,param:e._panner.orientationZ,value:t.orientationZ}),e}return(0,e.__extends)(r,i),r.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:0,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1})},r.prototype.setPosition=function(e,n,t){return this.positionX.value=e,this.positionY.value=n,this.positionZ.value=t,this},r.prototype.setOrientation=function(e,n,t){return this.orientationX.value=e,this.orientationY.value=n,this.orientationZ.value=t,this},Object.defineProperty(r.prototype,"panningModel",{get:function(){return this._panner.panningModel},set:function(e){this._panner.panningModel=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"refDistance",{get:function(){return this._panner.refDistance},set:function(e){this._panner.refDistance=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"rolloffFactor",{get:function(){return this._panner.rolloffFactor},set:function(e){this._panner.rolloffFactor=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"distanceModel",{get:function(){return this._panner.distanceModel},set:function(e){this._panner.distanceModel=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"coneInnerAngle",{get:function(){return this._panner.coneInnerAngle},set:function(e){this._panner.coneInnerAngle=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"coneOuterAngle",{get:function(){return this._panner.coneOuterAngle},set:function(e){this._panner.coneOuterAngle=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"coneOuterGain",{get:function(){return this._panner.coneOuterGain},set:function(e){this._panner.coneOuterGain=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxDistance",{get:function(){return this._panner.maxDistance},set:function(e){this._panner.maxDistance=e},enumerable:!0,configurable:!0}),r.prototype.dispose=function(){return i.prototype.dispose.call(this),this._panner.disconnect(),this.orientationX.dispose(),this.orientationY.dispose(),this.orientationZ.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this},r}(t.ToneAudioNode);exports.Panner3D=i;
},{"tslib":"vCxL","../../core/context/Param":"SJab","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../../core/context/Listener":"wuuR"}],"g3um":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Recorder=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),r=require("../../core/context/Gain"),o=require("../../core/util/Debug"),i=require("../../core/context/AudioContext"),n=require("../../core/util/Defaults"),s=function(s){function a(){var e=s.call(this,(0,n.optionsFromArguments)(a.getDefaults(),arguments,["gain","units"]))||this;e.name="Recorder";var t=(0,n.optionsFromArguments)(a.getDefaults(),arguments,["gain","units"]);return e.input=new r.Gain({context:e.context}),(0,o.assert)(a.supported,"Media Recorder API is not available"),e._stream=e.context.createMediaStreamDestination(),e.input.connect(e._stream),e._recorder=new MediaRecorder(e._stream.stream,{mimeType:t.mimeType}),e}return(0,e.__extends)(a,s),a.getDefaults=function(){return t.ToneAudioNode.getDefaults()},Object.defineProperty(a.prototype,"mimeType",{get:function(){return this._recorder.mimeType},enumerable:!0,configurable:!0}),Object.defineProperty(a,"supported",{get:function(){return null!==i.theWindow&&Reflect.has(i.theWindow,"MediaRecorder")},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"state",{get:function(){return"inactive"===this._recorder.state?"stopped":"paused"===this._recorder.state?"paused":"started"},enumerable:!0,configurable:!0}),a.prototype.start=function(){return(0,o.assert)("started"!==this.state,"Recorder is already started"),this._recorder.start(),this},a.prototype.stop=function(){return(0,e.__awaiter)(this,void 0,void 0,function(){var t,r=this;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return(0,o.assert)("stopped"!==this.state,"Recorder is not started"),t=new Promise(function(e){r._recorder.ondataavailable=function(t){return e(t.data)}}),this._recorder.stop(),[4,t];case 1:return[2,e.sent()]}})})},a.prototype.pause=function(){return(0,o.assert)("started"===this.state,"Recorder must be started"),this._recorder.pause(),this},a.prototype.dispose=function(){return s.prototype.dispose.call(this),this.input.dispose(),this._stream.disconnect(),this},a}(t.ToneAudioNode);exports.Recorder=s;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/context/Gain":"EfHt","../../core/util/Debug":"wPdo","../../core/context/AudioContext":"Hgem","../../core/util/Defaults":"gf59"}],"u00X":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Compressor=void 0;var e=require("tslib"),r=require("../../core/context/Param"),t=require("../../core/context/ToneAudioNode"),o=require("../../core/util/Defaults"),s=require("../../core/util/Interface"),a=function(a){function n(){var e=a.call(this,(0,o.optionsFromArguments)(n.getDefaults(),arguments,["threshold","ratio"]))||this;e.name="Compressor",e._compressor=e.context.createDynamicsCompressor(),e.input=e._compressor,e.output=e._compressor;var t=(0,o.optionsFromArguments)(n.getDefaults(),arguments,["threshold","ratio"]);return e.threshold=new r.Param({minValue:e._compressor.threshold.minValue,maxValue:e._compressor.threshold.maxValue,context:e.context,convert:!1,param:e._compressor.threshold,units:"decibels",value:t.threshold}),e.attack=new r.Param({minValue:e._compressor.attack.minValue,maxValue:e._compressor.attack.maxValue,context:e.context,param:e._compressor.attack,units:"time",value:t.attack}),e.release=new r.Param({minValue:e._compressor.release.minValue,maxValue:e._compressor.release.maxValue,context:e.context,param:e._compressor.release,units:"time",value:t.release}),e.knee=new r.Param({minValue:e._compressor.knee.minValue,maxValue:e._compressor.knee.maxValue,context:e.context,convert:!1,param:e._compressor.knee,units:"decibels",value:t.knee}),e.ratio=new r.Param({minValue:e._compressor.ratio.minValue,maxValue:e._compressor.ratio.maxValue,context:e.context,convert:!1,param:e._compressor.ratio,units:"positive",value:t.ratio}),(0,s.readOnly)(e,["knee","release","attack","ratio","threshold"]),e}return(0,e.__extends)(n,a),n.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})},Object.defineProperty(n.prototype,"reduction",{get:function(){return this._compressor.reduction},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){return a.prototype.dispose.call(this),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this},n}(t.ToneAudioNode);exports.Compressor=a;
},{"tslib":"vCxL","../../core/context/Param":"SJab","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV"}],"wqyK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Gate=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),o=require("../../signal/GreaterThan"),n=require("../../core/context/Gain"),i=require("../analysis/Follower"),r=require("../../core/util/Defaults"),s=require("../../core/type/Conversions"),u=function(u){function a(){var e=u.call(this,Object.assign((0,r.optionsFromArguments)(a.getDefaults(),arguments,["threshold","smoothing"])))||this;e.name="Gate";var t=(0,r.optionsFromArguments)(a.getDefaults(),arguments,["threshold","smoothing"]);return e._follower=new i.Follower({context:e.context,smoothing:t.smoothing}),e._gt=new o.GreaterThan({context:e.context,value:(0,s.dbToGain)(t.threshold)}),e.input=new n.Gain({context:e.context}),e._gate=e.output=new n.Gain({context:e.context}),e.input.connect(e._gate),e.input.chain(e._follower,e._gt,e._gate.gain),e}return(0,e.__extends)(a,u),a.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{smoothing:.1,threshold:-40})},Object.defineProperty(a.prototype,"threshold",{get:function(){return(0,s.gainToDb)(this._gt.value)},set:function(e){this._gt.value=(0,s.dbToGain)(e)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"smoothing",{get:function(){return this._follower.smoothing},set:function(e){this._follower.smoothing=e},enumerable:!0,configurable:!0}),a.prototype.dispose=function(){return u.prototype.dispose.call(this),this.input.dispose(),this._follower.dispose(),this._gt.dispose(),this._gate.dispose(),this},a}(t.ToneAudioNode);exports.Gate=u;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../signal/GreaterThan":"WXhQ","../../core/context/Gain":"EfHt","../analysis/Follower":"EXJc","../../core/util/Defaults":"gf59","../../core/type/Conversions":"o1kW"}],"n4fO":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Limiter=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),r=require("../../core/util/Defaults"),o=require("./Compressor"),s=require("../../core/util/Interface"),i=function(i){function n(){var e=i.call(this,Object.assign((0,r.optionsFromArguments)(n.getDefaults(),arguments,["threshold"])))||this;e.name="Limiter";var t=(0,r.optionsFromArguments)(n.getDefaults(),arguments,["threshold"]);return e._compressor=e.input=e.output=new o.Compressor({context:e.context,ratio:20,attack:0,release:0,threshold:t.threshold}),e.threshold=e._compressor.threshold,(0,s.readOnly)(e,"threshold"),e}return(0,e.__extends)(n,i),n.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{threshold:-12})},Object.defineProperty(n.prototype,"reduction",{get:function(){return this._compressor.reduction},enumerable:!0,configurable:!0}),n.prototype.dispose=function(){return i.prototype.dispose.call(this),this._compressor.dispose(),this.threshold.dispose(),this},n}(t.ToneAudioNode);exports.Limiter=i;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","./Compressor":"u00X","../../core/util/Interface":"x3aV"}],"s1QL":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MidSideCompressor=void 0;var e=require("tslib"),i=require("../../core/context/ToneAudioNode"),t=require("./Compressor"),s=require("../../core/util/Defaults"),r=require("../channel/MidSideSplit"),d=require("../channel/MidSideMerge"),o=require("../../core/util/Interface"),n=function(n){function u(){var e=n.call(this,Object.assign((0,s.optionsFromArguments)(u.getDefaults(),arguments)))||this;e.name="MidSideCompressor";var i=(0,s.optionsFromArguments)(u.getDefaults(),arguments);return e._midSideSplit=e.input=new r.MidSideSplit({context:e.context}),e._midSideMerge=e.output=new d.MidSideMerge({context:e.context}),e.mid=new t.Compressor(Object.assign(i.mid,{context:e.context})),e.side=new t.Compressor(Object.assign(i.side,{context:e.context})),e._midSideSplit.mid.chain(e.mid,e._midSideMerge.mid),e._midSideSplit.side.chain(e.side,e._midSideMerge.side),(0,o.readOnly)(e,["mid","side"]),e}return(0,e.__extends)(u,n),u.getDefaults=function(){return Object.assign(i.ToneAudioNode.getDefaults(),{mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},side:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10}})},u.prototype.dispose=function(){return n.prototype.dispose.call(this),this.mid.dispose(),this.side.dispose(),this._midSideSplit.dispose(),this._midSideMerge.dispose(),this},u}(i.ToneAudioNode);exports.MidSideCompressor=n;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","./Compressor":"u00X","../../core/util/Defaults":"gf59","../channel/MidSideSplit":"qVhN","../channel/MidSideMerge":"LTJ4","../../core/util/Interface":"x3aV"}],"OA32":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MultibandCompressor=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),o=require("./Compressor"),i=require("../../core/util/Defaults"),r=require("../../core/util/Interface"),s=require("../channel/MultibandSplit"),n=require("../../core/context/Gain"),u=function(u){function c(){var e=u.call(this,Object.assign((0,i.optionsFromArguments)(c.getDefaults(),arguments)))||this;e.name="MultibandCompressor";var t=(0,i.optionsFromArguments)(c.getDefaults(),arguments);return e._splitter=e.input=new s.MultibandSplit({context:e.context,lowFrequency:t.lowFrequency,highFrequency:t.highFrequency}),e.lowFrequency=e._splitter.lowFrequency,e.highFrequency=e._splitter.highFrequency,e.output=new n.Gain({context:e.context}),e.low=new o.Compressor(Object.assign(t.low,{context:e.context})),e.mid=new o.Compressor(Object.assign(t.mid,{context:e.context})),e.high=new o.Compressor(Object.assign(t.high,{context:e.context})),e._splitter.low.chain(e.low,e.output),e._splitter.mid.chain(e.mid,e.output),e._splitter.high.chain(e.high,e.output),(0,r.readOnly)(e,["high","mid","low","highFrequency","lowFrequency"]),e}return(0,e.__extends)(c,u),c.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{lowFrequency:250,highFrequency:2e3,low:{ratio:6,threshold:-30,release:.25,attack:.03,knee:10},mid:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16},high:{ratio:3,threshold:-24,release:.03,attack:.02,knee:16}})},c.prototype.dispose=function(){return u.prototype.dispose.call(this),this._splitter.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.output.dispose(),this},c}(t.ToneAudioNode);exports.MultibandCompressor=u;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","./Compressor":"u00X","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../channel/MultibandSplit":"b1it","../../core/context/Gain":"EfHt"}],"zFl1":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.EQ3=void 0;var i=require("tslib"),e=require("../../core/context/Gain"),t=require("../../core/context/ToneAudioNode"),n=require("../../core/util/Defaults"),o=require("../../core/util/Interface"),u=require("../channel/MultibandSplit"),l=function(l){function s(){var i=l.call(this,(0,n.optionsFromArguments)(s.getDefaults(),arguments,["low","mid","high"]))||this;i.name="EQ3",i.output=new e.Gain({context:i.context}),i._internalChannels=[];var t=(0,n.optionsFromArguments)(s.getDefaults(),arguments,["low","mid","high"]);return i.input=i._multibandSplit=new u.MultibandSplit({context:i.context,highFrequency:t.highFrequency,lowFrequency:t.lowFrequency}),i._lowGain=new e.Gain({context:i.context,gain:t.low,units:"decibels"}),i._midGain=new e.Gain({context:i.context,gain:t.mid,units:"decibels"}),i._highGain=new e.Gain({context:i.context,gain:t.high,units:"decibels"}),i.low=i._lowGain.gain,i.mid=i._midGain.gain,i.high=i._highGain.gain,i.Q=i._multibandSplit.Q,i.lowFrequency=i._multibandSplit.lowFrequency,i.highFrequency=i._multibandSplit.highFrequency,i._multibandSplit.low.chain(i._lowGain,i.output),i._multibandSplit.mid.chain(i._midGain,i.output),i._multibandSplit.high.chain(i._highGain,i.output),(0,o.readOnly)(i,["low","mid","high","lowFrequency","highFrequency"]),i._internalChannels=[i._multibandSplit],i}return(0,i.__extends)(s,l),s.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{high:0,highFrequency:2500,low:0,lowFrequency:400,mid:0})},s.prototype.dispose=function(){return l.prototype.dispose.call(this),(0,o.writable)(this,["low","mid","high","lowFrequency","highFrequency"]),this._multibandSplit.dispose(),this.lowFrequency.dispose(),this.highFrequency.dispose(),this._lowGain.dispose(),this._midGain.dispose(),this._highGain.dispose(),this.low.dispose(),this.mid.dispose(),this.high.dispose(),this.Q.dispose(),this},s}(t.ToneAudioNode);exports.EQ3=l;
},{"tslib":"vCxL","../../core/context/Gain":"EfHt","../../core/context/ToneAudioNode":"lGdl","../../core/util/Defaults":"gf59","../../core/util/Interface":"x3aV","../channel/MultibandSplit":"b1it"}],"m8dN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Convolver=void 0;var e=require("tslib"),t=require("../../core/context/ToneAudioNode"),o=require("../../core/context/ToneAudioBuffer"),n=require("../../core/util/Defaults"),r=require("../../core/context/Gain"),i=require("../../core/util/Interface"),u=function(u){function s(){var e=u.call(this,(0,n.optionsFromArguments)(s.getDefaults(),arguments,["url","onload"]))||this;e.name="Convolver",e._convolver=e.context.createConvolver();var t=(0,n.optionsFromArguments)(s.getDefaults(),arguments,["url","onload"]);return e._buffer=new o.ToneAudioBuffer(t.url,function(o){e.buffer=o,t.onload()}),e.input=new r.Gain({context:e.context}),e.output=new r.Gain({context:e.context}),e._buffer.loaded&&(e.buffer=e._buffer),e.normalize=t.normalize,e.input.chain(e._convolver,e.output),e}return(0,e.__extends)(s,u),s.getDefaults=function(){return Object.assign(t.ToneAudioNode.getDefaults(),{normalize:!0,onload:i.noOp})},s.prototype.load=function(t){return(0,e.__awaiter)(this,void 0,void 0,function(){var o;return(0,e.__generator)(this,function(e){switch(e.label){case 0:return o=this,[4,this._buffer.load(t)];case 1:return o.buffer=e.sent(),[2]}})})},Object.defineProperty(s.prototype,"buffer",{get:function(){return this._buffer.length?this._buffer:null},set:function(e){e&&this._buffer.set(e),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));var t=this._buffer.get();this._convolver.buffer=t||null},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"normalize",{get:function(){return this._convolver.normalize},set:function(e){this._convolver.normalize=e},enumerable:!0,configurable:!0}),s.prototype.dispose=function(){return u.prototype.dispose.call(this),this._buffer.dispose(),this._convolver.disconnect(),this},s}(t.ToneAudioNode);exports.Convolver=u;
},{"tslib":"vCxL","../../core/context/ToneAudioNode":"lGdl","../../core/context/ToneAudioBuffer":"GLhX","../../core/util/Defaults":"gf59","../../core/context/Gain":"EfHt","../../core/util/Interface":"x3aV"}],"vkAt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./analysis/Analyser");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./analysis/Meter");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./analysis/FFT");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var n=require("./analysis/DCMeter");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var u=require("./analysis/Waveform");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var o=require("./analysis/Follower");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var c=require("./channel/Channel");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}})});var a=require("./channel/CrossFade");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return a[e]}})});var f=require("./channel/Merge");Object.keys(f).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return f[e]}})});var i=require("./channel/MidSideMerge");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return i[e]}})});var l=require("./channel/MidSideSplit");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return l[e]}})});var s=require("./channel/MultibandSplit");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return s[e]}})});var d=require("./channel/Panner");Object.keys(d).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return d[e]}})});var b=require("./channel/Panner3D");Object.keys(b).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return b[e]}})});var p=require("./channel/PanVol");Object.keys(p).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return p[e]}})});var y=require("./channel/Recorder");Object.keys(y).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return y[e]}})});var O=require("./channel/Solo");Object.keys(O).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return O[e]}})});var _=require("./channel/Split");Object.keys(_).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return _[e]}})});var j=require("./channel/Volume");Object.keys(j).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return j[e]}})});var h=require("./dynamics/Compressor");Object.keys(h).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return h[e]}})});var m=require("./dynamics/Gate");Object.keys(m).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return m[e]}})});var v=require("./dynamics/Limiter");Object.keys(v).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return v[e]}})});var M=require("./dynamics/MidSideCompressor");Object.keys(M).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return M[e]}})});var P=require("./dynamics/MultibandCompressor");Object.keys(P).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return P[e]}})});var E=require("./envelope/AmplitudeEnvelope");Object.keys(E).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return E[e]}})});var g=require("./envelope/Envelope");Object.keys(g).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return g[e]}})});var k=require("./envelope/FrequencyEnvelope");Object.keys(k).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return k[e]}})});var q=require("./filter/EQ3");Object.keys(q).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return q[e]}})});var x=require("./filter/Filter");Object.keys(x).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return x[e]}})});var F=require("./filter/OnePoleFilter");Object.keys(F).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return F[e]}})});var C=require("./filter/FeedbackCombFilter");Object.keys(C).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return C[e]}})});var S=require("./filter/LowpassCombFilter");Object.keys(S).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return S[e]}})});var w=require("./filter/Convolver");Object.keys(w).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return w[e]}})});
},{"./analysis/Analyser":"t2IF","./analysis/Meter":"DouQ","./analysis/FFT":"ZZpq","./analysis/DCMeter":"JeOw","./analysis/Waveform":"sjO7","./analysis/Follower":"EXJc","./channel/Channel":"KXTL","./channel/CrossFade":"KOg3","./channel/Merge":"iLVP","./channel/MidSideMerge":"LTJ4","./channel/MidSideSplit":"qVhN","./channel/MultibandSplit":"b1it","./channel/Panner":"ZuQU","./channel/Panner3D":"T5dI","./channel/PanVol":"Ible","./channel/Recorder":"g3um","./channel/Solo":"Ly8h","./channel/Split":"PqA8","./channel/Volume":"a0V7","./dynamics/Compressor":"u00X","./dynamics/Gate":"wqyK","./dynamics/Limiter":"n4fO","./dynamics/MidSideCompressor":"s1QL","./dynamics/MultibandCompressor":"OA32","./envelope/AmplitudeEnvelope":"qOGN","./envelope/Envelope":"awNY","./envelope/FrequencyEnvelope":"gTYf","./filter/EQ3":"zFl1","./filter/Filter":"OcAm","./filter/OnePoleFilter":"XhJg","./filter/FeedbackCombFilter":"rYrw","./filter/LowpassCombFilter":"BLT5","./filter/Convolver":"m8dN"}],"xZ4M":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./core/index");Object.keys(e).forEach(function(r){"default"!==r&&"__esModule"!==r&&Object.defineProperty(exports,r,{enumerable:!0,get:function(){return e[r]}})});var r=require("./source/index");Object.keys(r).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return r[e]}})});var t=require("./signal/index");Object.keys(t).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return t[e]}})});var n=require("./instrument/index");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})});var u=require("./event/index");Object.keys(u).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return u[e]}})});var o=require("./effect/index");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return o[e]}})});var c=require("./component/index");Object.keys(c).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(exports,e,{enumerable:!0,get:function(){return c[e]}})});
},{"./core/index":"wQRE","./source/index":"T4KT","./signal/index":"jnCA","./instrument/index":"Pq8f","./event/index":"AgYZ","./effect/index":"X2xd","./component/index":"vkAt"}],"GfHe":[function(require,module,exports) {

"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e={now:!0,immediate:!0,Transport:!0,Destination:!0,Listener:!0,Draw:!0,context:!0,loaded:!0,Buffer:!0,Buffers:!0,BufferSource:!0,getContext:!0,setContext:!0,start:!0,supported:!0};Object.defineProperty(exports,"getContext",{enumerable:!0,get:function(){return t.getContext}}),Object.defineProperty(exports,"setContext",{enumerable:!0,get:function(){return t.setContext}}),Object.defineProperty(exports,"start",{enumerable:!0,get:function(){return t.start}}),Object.defineProperty(exports,"supported",{enumerable:!0,get:function(){return s.supported}}),exports.BufferSource=exports.Buffers=exports.Buffer=exports.loaded=exports.context=exports.Draw=exports.Listener=exports.Destination=exports.Transport=exports.immediate=exports.now=void 0;var t=require("./core/Global"),r=require("./classes");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return r[t]}}))});var o=require("./version");Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&(Object.prototype.hasOwnProperty.call(e,t)||Object.defineProperty(exports,t,{enumerable:!0,get:function(){return o[t]}}))});var n=require("./core/context/ToneAudioBuffer"),s=require("./core/context/AudioContext"),u=require("./core/context/ToneAudioBuffers"),f=require("./source/buffer/ToneBufferSource"),i=(0,t.getContext)().now.bind((0,t.getContext)());exports.now=i;var a=(0,t.getContext)().immediate.bind((0,t.getContext)());exports.immediate=a;var p=(0,t.getContext)().transport;exports.Transport=p;var x=(0,t.getContext)().destination;exports.Destination=x;var c=(0,t.getContext)().listener;exports.Listener=c;var d=(0,t.getContext)().draw;exports.Draw=d;var l=(0,t.getContext)();exports.context=l;var b=n.ToneAudioBuffer.loaded.bind(n.ToneAudioBuffer);exports.loaded=b;var g=n.ToneAudioBuffer;exports.Buffer=g;var v=u.ToneAudioBuffers;exports.Buffers=v;var B=f.ToneBufferSource;exports.BufferSource=B;
},{"./core/Global":"k68Y","./classes":"xZ4M","./version":"UR5M","./core/context/ToneAudioBuffer":"GLhX","./core/context/AudioContext":"Hgem","./core/context/ToneAudioBuffers":"Ehuq","./source/buffer/ToneBufferSource":"WVku"}],"IKBr":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,o){var a,n=arguments.length,s=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var i=e.length-1;i>=0;i--)(a=e[i])&&(s=(n<3?a(s):n>3?a(t,r,s):a(t,r))||s);return n>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("lit-element");require("./button");const r=require("lit-translate");let o=class extends t.LitElement{static get styles(){return t.css`
            :host {
                position: absolute;
                left: 50%;
                transform: translateX(-50%);
                display: flex;
            }

            #header-logo h1 {
                text-transform: uppercase;
                letter-spacing: 2px;
                font-family: "Quicksand", sans-serif;
                text-transform: uppercase;
                font-weight: 700;
                text-align: center;
                font-size: 20px;
                letter-spacing: 2px;
            }

            #header-logo a {
                color: #000;
                text-decoration: none;
            }

            @media (max-width: 1200px) {
                :host {
                    left: 80px;
			        transform: translateX(0);
                }
            }

            @media (max-width: 992px) {
                #header-logo h1 {
                    font-size: 16px;
                    letter-spacing: 0.1em;
                }
            }

            @media (max-width: 768px) {
                #header-logo h1 {
                    font-size: 14px;
                }
            }
        `}render(){return t.html`
			<div id="header-logo">
				<h1><a href="/">${r.get("shared_piano_header_logotype")}</a></h1>
			</div>
		`}};o=e([t.customElement("piano-logo")],o),exports.PianoLogo=o;
},{"lit-element":"bhxD","./button":"nAWl","lit-translate":"NZZ9"}],"eIcz":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},t=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{s(i.next(e))}catch(t){r(t)}}function l(e){try{s(i.throw(e))}catch(t){r(t)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,l)}s((i=i.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("lit-element"),o=require("../../i18n/languages"),r=n(require("../util/local-store")),a=require("lit-translate");let l=class extends i.LitElement{constructor(){super(...arguments),this.defaultLang=o.getBrowserLanguage()}onChange(e){return t(this,void 0,void 0,function*(){const t=e.target.value;t&&(e.target.blur(),r.default.setSetting("lang",{selected:t,browser:window.navigator.language.slice(0,2)}),yield a.use(t),window.location.reload(),window.scrollTo(0,0))})}render(){return i.html`
            <style>
                #container {
                    position: relative;
                    border-left: 1px solid #ccc;
                    border-right: 1px solid #ccc;
                    margin: 0 25px 0 0;
                }

                .sr-only {
                    position: absolute;
                    width: 1px;
                    height: 1px;
                    padding: 0;
                    margin: -1px;
                    overflow: hidden;
                    clip: rect(0,0,0,0);
                    border: 0;
                }

                select {
                    -webkit-appearance: none;
                    -moz-appearance: none;
                    background: none;
                    appearance: none;
                    padding-left: 25px;
                    line-height: 1.5;
                    border-radius: 0px;
                    border: none;
                    font-family: Poppins, sans-serif;
                    color: #222222;
                    font-size: 18px;
                    margin: 0 25px;
                    vertical-align: middle;
                }

                .select-icon {
                    position: absolute;
                    top: 50%;
                    left: 22px;
                    pointer-events: none;
                    transform: translateY(-50%);
                    width: 21px;
                    height: 21px;
                }

                .select-icon svg {
                    display: block;
                    width: 100%;
                    height: 100%;
                }

                @media (max-width: 992px) {
                    #container {
                        border-left: none;
                        border-right: none;
                        margin: 0 15px 0 0;
                    }

                    .select-icon {
                        left: 0;
                    }

                    select {
                        font-size: 16px;
                        text-indent: -999999px;
                        margin: 0;
                        width: 21px;
                        height: 21px;
                    }
                }

                @media (max-width: 768px) {
                    #container {
                        margin: 0 5px 0 0;
                    }
                }
            </style>
            <div id="container">
                <label class="sr-only" for="languages">Select a language</label>
                <div class="select-icon">
                    ${i.svg`
                        <svg width="22" height="20" viewBox="0 0 22 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd" d="M11.87 13.07L9.33 10.56L9.36 10.53C11.1 8.59 12.34 6.36 13.07 4H16V2H9V0H7V2H0V3.99H11.17C10.5 5.92 9.44 7.75 8 9.35C7.07 8.32 6.3 7.19 5.69 6H3.69C4.42 7.63 5.42 9.17 6.67 10.56L1.58 15.58L3 17L8 12L11.11 15.11L11.87 13.07ZM17.5 8H15.5L11 20H13L14.12 17H18.87L20 20H22L17.5 8ZM16.5 10.67L14.88 15H18.12L16.5 10.67Z" fill="#666666"/>
                        </svg>
                    `}
                </div>
                <select id="languages" @change="${this.onChange}">
                    ${o.languages&&o.languages.map(e=>i.html`
                        <option value=${e.value} ?selected=${e.value===this.defaultLang}>
                            ${e.name}
                        </option>`)}
                </select>
            </div>
        `}};e([i.property({type:String})],l.prototype,"defaultLang",void 0),l=e([i.customElement("language-selector")],l),exports.LanguageSelect=l;
},{"lit-element":"bhxD","../../i18n/languages":"Ez1H","../util/local-store":"xCiE","lit-translate":"NZZ9"}],"erLX":[function(require,module,exports) {
"use strict";var t=this&&this.__decorate||function(t,e,n,s){var r,i=arguments.length,o=i<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,n):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,s);else for(var d=t.length-1;d>=0;d--)(r=t[d])&&(o=(i<3?r(o):i>3?r(e,n,o):r(e,n))||o);return i>3&&o&&Object.defineProperty(e,n,o),o},e=this&&this.__awaiter||function(t,e,n,s){return new(n||(n=Promise))(function(r,i){function o(t){try{u(s.next(t))}catch(e){i(e)}}function d(t){try{u(s.throw(t))}catch(e){i(e)}}function u(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,d)}u((s=s.apply(t,e||[])).next())})},n=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e};Object.defineProperty(exports,"__esModule",{value:!0});const s=require("lit-element"),r=n(require("tone"));let i=class extends s.LitElement{constructor(){super(...arguments),this.suspended=!0}firstUpdated(t){super.firstUpdated(t),this.suspendedInterval=setInterval(()=>{this.suspended="suspended"===r.context.state,this.suspended||clearTimeout(this.suspendedInterval)},500)}clicked(){return e(this,void 0,void 0,function*(){this.suspended&&(yield r.start(),this.suspended="suspended"===r.context.state)})}static get styles(){return s.css`
			#jumpstart {
				position: absolute;
				top: 30vh;
				left: 50%;
				transform: translateX(-50%);
				z-index: 100;
				-webkit-appearance: none;
				font-family: Poppins, sans-serif;
				color: #007BC7;
				background: #fff;
				border: none;
				box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
				font-size: 15px;
				display: flex;
				align-items: center;
				justify-content: center;
				padding: 14px 22px;
				border-radius: 52px;
				cursor: pointer;
				width: 250px;
			}

			#jumpstart svg {
				margin-right: 10px;
			}
		`}render(){return s.html`
			${this.suspended?s.html`
					<button id="jumpstart" @click=${this.clicked.bind(this)}>
						<svg
							width="24"
							height="24"
							viewBox="0 0 24 24"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
						>
							<path
								d="M12 3V13.55C11.41 13.21 10.73 13 10 13C7.79 13 6 14.79 6 17C6 19.21 7.79 21 10 21C12.21 21 14 19.21 14 17V7H18V3H12Z"
								fill="#007BC7"
							/>
						</svg>
						Click to turn sound on
				  </button>`:""}
		`}};t([s.property()],i.prototype,"suspended",void 0),i=t([s.customElement("piano-jumpstart")],i),exports.Jumpstart=i;
},{"lit-element":"bhxD","tone":"GfHe"}],"M8Ve":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});class e{constructor(){this.live=!0,this.playback=!1,this.mute=!1}static getInstance(){return e.instance||(e.instance=new e),e.instance}getMinimumRequiredOctaves(){let e=Math.min(8,Math.floor(window.innerWidth/200));if(!this.recordedSessionNotes||0===this.recordedSessionNotes.length)return e;const t=this.recordedSessionNotes.filter(e=>!isNaN(e.midi));if(0===t.length)return e;const i=t.reduce(function(e,t){return e.midi<t.midi?e:t}),r=t.reduce(function(e,t){return e.midi>t.midi?e:t});let n=Math.floor(i.midi/12),s=Math.floor(r.midi/12);n=n<1?1:n,s=s>8?8:s;let o=null;return[2,3,4,5,6,7,8].filter(t=>t>=e).forEach(e=>{let t=Math.ceil((8-e)/2)+1;!o&&n>=t&&s<=t+e-1&&(o=e)}),o||8}}exports.default=e;
},{}],"ciwe":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,n,i){var r,s=arguments.length,l=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(e,t,n,i);else for(var o=e.length-1;o>=0;o--)(r=e[o])&&(l=(s<3?r(l):s>3?r(t,n,l):r(t,n))||l);return s>3&&l&&Object.defineProperty(t,n,l),l},t=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(r,s){function l(e){try{u(i.next(e))}catch(t){s(t)}}function o(e){try{u(i.throw(e))}catch(t){s(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(l,o)}u((i=i.apply(e,t||[])).next())})},n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const r=require("lit-element"),s=n(require("tone")),l=require("lit-translate"),o=i(require("../util/global-state")),u=o.default.getInstance();let d=class extends r.LitElement{constructor(){super(...arguments),this.suspended=!0,this.muted=!1}firstUpdated(e){super.firstUpdated(e),this.suspendedInterval=setInterval(()=>{this.suspended="suspended"===s.context.state,this.suspended||clearTimeout(this.suspendedInterval)},500)}clicked(){return t(this,void 0,void 0,function*(){this.suspended?(yield s.start(),this.suspended="suspended"===s.context.state):(this.muted=!this.muted,s.Destination.mute=this.muted,u.mute=this.muted)})}static get styles(){return r.css`
			:host {
				display: inline-flex;
			}

			#mute {
				-webkit-appearance: none;
				border: none;
				color: #666666;
				margin: 0 25px 0 0;
				cursor: pointer;
				padding: 0;
				display: flex;
				align-items: center;
				justify-content: center;
				background-color: transparent;
			}

			@media (max-width: 992px) {
				#mute {
					margin-left: 0px;
					margin-right: 15px;
				}
			}
		`}render(){return r.html`
			<button
				id="mute"
				@click=${this.clicked.bind(this)}
				aria-label="${this.suspended||this.muted?l.get("shared_piano_general_mute-enabled_label"):l.get("shared_piano_general_mute-disabled_label")}"
				>
				${this.suspended||this.muted?r.html`
							<svg
								xmlns="http://www.w3.org/2000/svg"
								height="24"
								viewBox="0 0 24 24"
								width="24"
							>
								<path
									d="M16.5 12c0-1.77-1.02-3.29-2.5-4.03v2.21l2.45 2.45c.03-.2.05-.41.05-.63zm2.5 0c0 .94-.2 1.82-.54 2.64l1.51 1.51C20.63 14.91 21 13.5 21 12c0-4.28-2.99-7.86-7-8.77v2.06c2.89.86 5 3.54 5 6.71zM4.27 3L3 4.27 7.73 9H3v6h4l5 5v-6.73l4.25 4.25c-.67.52-1.42.93-2.25 1.18v2.06c1.38-.31 2.63-.95 3.69-1.81L19.73 21 21 19.73l-9-9L4.27 3zM12 4L9.91 6.09 12 8.18V4z"
									fill="currentColor"
								/>
								<path d="M0 0h24v24H0z" fill="none" />
							</svg>
					  `:r.html`
							<svg
								xmlns="http://www.w3.org/2000/svg"
								height="24"
								viewBox="0 0 24 24"
								width="24"
							>
								<path
									d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"
									fill="currentColor"
								/>
								<path d="M0 0h24v24H0z" fill="none" />
							</svg>
					  `}
			</button>
		`}};e([r.property()],d.prototype,"suspended",void 0),e([r.property()],d.prototype,"muted",void 0),d=e([r.customElement("piano-mute")],d),exports.MuteButton=d;
},{"lit-element":"bhxD","tone":"GfHe","lit-translate":"NZZ9","../util/global-state":"M8Ve"}],"FdUl":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("lit-element"),n=(e,t,n)=>{let i=0,r=t-e,o=n-e;return o=1*o/r,i/=r,r=1,o};let i=class extends t.LitElement{constructor(){super(...arguments),this.name="",this.min="0",this.max="100",this.step="1",this.list="range-list",this.value="",this.inlineLabel=!1,this.label="",this.disabled=!1,this.snappable=!1,this.dataRange=[]}_handleInputEvent(e){this.value=e.currentTarget.value,this.dispatchEvent(new CustomEvent(e.type,{bubbles:!0,composed:!0,detail:{inputEvent:e}}))}_handleShortcut(){const e=this.shadowRoot.querySelector(".range-slider__range");e&&e.focus()}render(){const{label:e,list:i,name:r,min:o,max:a,step:l,value:p}=this,[s,d,c]=[o,a,p].map(parseFloat),g=t.html`
			<input
				id="range-slider"
				class="range-slider__range"
				@input=${this._handleInputEvent.bind(this)}
				@change=${this._handleInputEvent.bind(this)}
				name="${r}"
				type="range"
				min="${o}"
				max="${a}"
				.step="${l}"
				?disabled=${this.disabled}
				aria-label="${r}"
				list=${i}
				.value="${p}"
			/>
			${this.snappable?t.html`
						<datalist id=${i}>
							${this.dataRange.map(e=>t.html`<option>${e}</option>`)}
						</datalist>
						<div class="sliderticks">
							${this.dataRange.map(e=>t.html`<div class="tick"></div>`)}
						</div>
				  `:""}
		`,h=`\n            height: 4px;\n            width: 100%;\n            border: 0;\n            border-radius: 3px;\n            box-sizing: border-box;\n            outline: none;\n            cursor: pointer;\n            background-image:\n            linear-gradient( to right, var(--foreground-color, #0490E7)\n\t\t\t${100*(""!==p?n(s,d,c):.5)}%,\n\t\t\tvar(--background-color, #666666)\n\t\t\t${100*(""!==p?n(s,d,c):.5)}%);\n        `,b="\n            -webkit-appearance: none !important;\n            -moz-appearance: none;\n            background-color: var(--foreground-color, #0490E7);\n            height: 19px;\n            width: 19px;\n            border-radius: 50%;\n            position: relative;\n            top: -8px;\n            border: none;\n            z-index: 10;\n        ";return t.html`
			<style>
				:host {
					box-sizing: border-box;
				}

				label {
					font-weight: 400;
					color: #222222;
					font-size: 14px;
					text-transform: capitalize;
					display: block;
					cursor: pointer;
					color: var(--label-color, #222222);
					font-weight: var(--label-font-weight, 700);
				}

				:host([inline]),
				[inline] {
					display: inline-block;
				}

				:host([inline]) .range-slider label,
				:host([inline]) input[type='range'],
				*[inline] .range-slider label,
				*[inline] input[type='range'] {
					display: inline-block;
					vertical-align: middle;
				}

				input[type='range'] {
					-webkit-appearance: none;
					-moz-apperance: none;
					background: transparent;
					outline: none;
					border: 0;
					box-sizing: border-box;
					margin: 0px;
					width: 100%;
				}

				input[type='range']:focus {
					border: 2px solid var(--focus-color);
				}

				input[type='range']::-webkit-slider-runnable-track {${h}}

				input[type='range']::-moz-range-track {${h}}

				input[type='range']::-webkit-slider-thumb {${b}}

				input[type='range']::-moz-range-thumb  {${b}}

				.sliderticks {
					margin-top: -10px;
					display: flex;
					justify-content: space-between;
					padding: 0px 10px;
					position: relative;
					z-index: -1;
				}

				.tick {
					position: relative;
					display: flex;
					justify-content: center;
					text-align: center;
					width: 1px;
					background: #666666;
					height: 5px;
				}

				/* End of slider */

				.range-slider label {
					display: ${this.inlineLabel?"inline-block":"block"};
					color: var(--label-color, #222222);
					flex-shrink: auto;
				}

				[inline] #input-container {
					display: flex;
					flex-direction: row;
					flex-shrink: auto;
				}

				[inline] input[type='range'] {
					padding-right: 16px;
				}

				#input-container {
					position: relative;
					display: block;
					overflow: hidden;
				}

				.range-slider__range[disabled] {
					pointer-events: none;
					opacity: 0.5;
				}

				@media (max-width: 768px) {
					.sliderticks {
						margin-top: 0;
					}
				}
			</style>

			<div class="range-slider">
				${e?t.html`<label for="range-slider">${e}</label>`:""}
				${this.inlineLabel?t.html`<span id="input-container">${g}</span>`:g}
			</div>
		`}};e([t.property({type:String})],i.prototype,"name",void 0),e([t.property({type:String})],i.prototype,"min",void 0),e([t.property({type:String})],i.prototype,"max",void 0),e([t.property({type:String})],i.prototype,"step",void 0),e([t.property({type:String})],i.prototype,"list",void 0),e([t.property({type:String})],i.prototype,"value",void 0),e([t.property({type:Boolean})],i.prototype,"inlineLabel",void 0),e([t.property({type:String})],i.prototype,"label",void 0),e([t.property({type:Boolean,reflect:!0})],i.prototype,"disabled",void 0),e([t.property({type:Boolean})],i.prototype,"snappable",void 0),e([t.property({type:Array})],i.prototype,"dataRange",void 0),i=e([t.customElement("input-range")],i),exports.InputRangeElement=i;
},{"lit-element":"bhxD"}],"gFJJ":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,o,i){var n,l=arguments.length,a=l<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(l<3?n(a):l>3?n(t,o,a):n(t,o))||a);return l>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("lit-element");require("./collapsible"),require("./input-range");let o=class extends t.LitElement{constructor(){super(...arguments),this.octaves=7,this.dialog=!1}static get styles(){return t.css`
			#buttons button {
				-webkit-apperance: none;
				apperance: none;
				background: none;
				border: none;
				font-size: 16px;
				color: #007BC7;
				padding: 0;
				font-family: Poppins, sans-serif;
				cursor: pointer;
			}

            #content {
				padding: 15px;
			}
            p {
                font-size: 18px;
                margin-top: 0px;
                margin-bottom: 0px;
            }

            #buttons {
                display: flex;
				align-items: center;
                flex-direction: row;
				margin-top: 15px;
            }

			.spacer {
				margin: 0 15px;
				height: 20px;
				width: 1px;
				background-color: #ccc;
            }

            @media (max-width: 992px) {
				p {
                    font-size: 16px;
				}
                #buttons button {
                    font-size: 14px;
                }

            }

        `}updated(){this.dispatchEvent(new CustomEvent("settings",{detail:{}}))}click(){this.dispatchEvent(new CustomEvent("clear")),this.close()}close(){this.shadowRoot.querySelector("piano-collapsible").open=!1}render(){return t.html`
			<div id="container">
				<div id="clear">
					<piano-collapsible
						@onExpand=${()=>this.dialog=!0}
						@onCollapse=${()=>this.dialog=!1}
                        label="shared_piano_clear_label"
                        .hideClose=${!0}
						.icon=${t.html`
							<style>
								@media (max-width: 768px) {
									#clear-icon {
										top: 2px !important;
									}
								}
							</style>
                            <svg id="clear-icon" style="display: block; position: relative; top: 1px; max-height: 100%;" width="100%" viewBox="0 0 19 19" fill="none" xmlns="http://www.w3.org/2000/svg">
                                    <path d="M19 1.91357L17.0864 0L9.5 7.58643L1.91357 0L0 1.91357L7.58643 9.5L0 17.0864L1.91357 19L9.5 11.4136L17.0864 19L19 17.0864L11.4136 9.5L19 1.91357Z" fill="#666666"/>
                            </svg>

						`}
					>
						<div id="content">
                                <p>Clear all notes?</p>
                            <div id="buttons">
                                <button @click=${e=>this.close()} aria-label="Close the save all notes dialog">Cancel</button>
                                <div class="spacer"></div>
                                <button @click=${e=>this.click()} aria-label="Confirm you want to clear all notes">Yes, I'm Sure</button>
                            </div>
						</div>
					</piano-collapsible>
				</div>
			</div>
		`}};e([t.property()],o.prototype,"octaves",void 0),e([t.property()],o.prototype,"dialog",void 0),o=e([t.customElement("piano-clear")],o),exports.PianoClear=o;
},{"lit-element":"bhxD","./collapsible":"HB37","./input-range":"FdUl"}],"p0AA":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,o,n){var i,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var p=e.length-1;p>=0;p--)(i=e[p])&&(a=(r<3?i(a):r>3?i(t,o,a):i(t,o))||a);return r>3&&a&&Object.defineProperty(t,o,a),a};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("lit-element");require("./button");const o=require("lit-translate");let n=class extends t.LitElement{constructor(){super(...arguments),this.open=!1}firstUpdated(){document.body.addEventListener("click",e=>{if(this.open){-1!==e.composedPath().indexOf(this.shadowRoot.querySelector("#container"))||(this.open=!1)}})}keyDown(e){"Escape"===e.key&&(this.open=!1)}updated(e){if(e.has("open")){const e=this.shadowRoot.querySelector("#close-button");this.open?(e&&e.focus(),document.body.addEventListener("keydown",this.keyDown.bind(this),!1)):(e&&e.blur(),document.body.removeEventListener("keydown",this.keyDown.bind(this)))}}static get styles(){return t.css`
			:host {
				display: inline-flex;
			}

			#container {
				display: inline-flex;
				position: relative;
			}

			#modal-button {
				appearance: none;
				border: none;
				-moz-appearance: none;
				-webkit-appearance: none;
				background: none;
				padding: 0;
				color: 	#007BC7;
				text-decoration: none;
				font-size: 18px;
				cursor: pointer;
				margin: 0 25px;
				display:  inline-flex;
				align-items: center;
			}

			#close-button {
				appearance: none;
				-moz-appearance: none;
				-webkit-appearance: none;
				color: #007BC7;
				text-decoration: none;
				font-size: 18px;
				cursor: pointer;
				border: none;
				margin-left: 25px;
				position: fixed;
				border-radius: 50%;
				background-color: white;
				box-shadow: 0px 2px 6px rgba(60, 64, 67, 0.15), 0px 1px 2px rgba(60, 64, 67, 0.3), 0px 4px 8px rgba(128, 134, 139, 0.06), 0px -2px 8px rgba(128, 134, 139, 0.09);
				top: 20px;
				right: 20px;
				padding: 30px;
				display:  inline-flex;
				align-items: center;
				z-index: 102;
			}

			#close-button svg {
				width: 26px;
				height: 26px;
			}

			#modal-button svg {
				margin-right: 10px;
			}

			details {
				right: 0px;
				width: 120px;
				transition: box-shadow 0.2s;
				padding: 5px;
			}

			#content {
				background-color: white;
				position: fixed;
				top: 0;
				left: 0;
				width: 100%;
				height: 100%;
				overflow: auto;
				z-index: 101;
			}

			@media (max-width: 992px) {
				#close-button {
					padding: 20px;
				}

				#close-button svg {
					width: 17px;
					height: 17px;
				}

				#modal-button span {
					display: none;
				}

				#modal-button {
					margin: 0 15px;
				}
			}

			@media (max-width: 768px) {
				#modal-button {
					margin: 0 5px;
				}
			}
		`}render(){return t.html`
			<div id="container">
				<button id="modal-button" aria-label="Help" @click=${()=>this.open=!this.open}>
					<svg width="21" height="20" viewBox="0 0 21 20" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path fill-rule="evenodd" clip-rule="evenodd" d="M10.45 0C4.6816 0 0 4.4688 0 9.975C0 15.4812 4.6816 19.95 10.45 19.95C16.2184 19.95 20.9 15.4812 20.9 9.975C20.9 4.4688 16.2184 0 10.45 0ZM9.405 16.9575V14.9625H11.495V16.9575H9.405ZM12.7176 10.1446L13.6581 9.22687C14.2538 8.6583 14.63 7.8603 14.63 6.9825C14.63 4.77802 12.7594 2.9925 10.45 2.9925C8.14055 2.9925 6.27 4.77802 6.27 6.9825H8.36C8.36 5.88525 9.3005 4.9875 10.45 4.9875C11.5995 4.9875 12.54 5.88525 12.54 6.9825C12.54 7.53112 12.3101 8.02987 11.9234 8.38897L10.6276 9.64582C9.87525 10.374 9.405 11.3715 9.405 12.4687V12.9675H11.495C11.495 11.4712 11.9652 10.8727 12.7176 10.1446Z" fill="currentColor"/>
					</svg>
					<span>${o.get("shared_piano_header_help_label")}</span>
				</button>
				${this.open?t.html`
					<div id="content">
						<button id="close-button" aria-label=${o.get("shared_piano_general_close_label")} @click=${()=>this.open=!this.open}>
							<svg width="27" height="27" viewBox="0 0 27 27" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M26.8233 2.82174L24.1781 0.176514L13.6909 10.6636L3.20382 0.176514L0.558594 2.82174L11.0457 13.3089L0.558594 23.796L3.20382 26.4412L13.6909 15.9541L24.1781 26.4412L26.8233 23.796L16.3362 13.3089L26.8233 2.82174Z" fill="#222222"/>
							</svg>
						</button>
						<slot></slot>
					</div>
				`:t.html``}
			</div>
		`}};e([t.property({type:Boolean})],n.prototype,"open",void 0),n=e([t.customElement("piano-modal")],n),exports.PianoModal=n;
},{"lit-element":"bhxD","./button":"nAWl","lit-translate":"NZZ9"}],"SrhJ":[function(require,module,exports) {
module.exports="keyboard-diagram.3f351475.png";
},{}],"PPh0":[function(require,module,exports) {
module.exports="drum-diagram.e7cf186e.png";
},{}],"My6M":[function(require,module,exports) {
"use strict";var t=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,a=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,o,i);else for(var s=t.length-1;s>=0;s--)(n=t[s])&&(a=(r<3?n(a):r>3?n(e,o,a):n(e,o))||a);return r>3&&a&&Object.defineProperty(e,o,a),a};Object.defineProperty(exports,"__esModule",{value:!0});const e=require("lit-html"),o=require("lit-element"),i=require("lit-html/directives/unsafe-html.js");let n=class extends o.LitElement{constructor(){super(),this.open=!1}static get styles(){return o.css`
			:host {
				display: block;
			}

			button {
				font-family: Poppins, sans-serif;
				font-size: 18px;
				font-weight: 600;
				-webkit-appearance: none;
				-moz-appearance: none;
				appearance: none;
				background: none;
				border: none;
				padding: 0;
				margin-bottom: 15px;
				cursor: pointer;
				transition: color 0.25s ease-out;
				position: relative;
				padding-right: 25px;
				line-height: 1.35em;
				text-align: left;
				width: 100%;
				display: block;
			}

			button span {
				position: absolute;
				top: 50%;
				right: 0;
				transform: translateY(-50%);
			}

			button:hover {
				color:#007BC7;
			}

			button:focus {
				outline: none;
				color:#007BC7;
			}

			button:hover .icon path {
				fill: #007BC7
			}

			button:focus {
				outline: none;
			}

			a,
			a:visited {
				color: #007BC7;
			}

			.icon {
				margin-top: -5px;
				transform: rotate(180deg);
				transform-origin: center center;
			}

			.icon path {
				fill: #666;
				transition: fill 0.25s;
			}

			.icon.expand {
				transform: rotate(0deg);
				display: block;
			}

			.icon.expand path {
				fill:#007BC7;
			}

			.icon svg {
				display: block;
			}

			p {
				font-family: 'Poppins', Helvetica, Arial, sans-serif;
				font-weight: 100;
				font-size: 18px;
				line-height: 1.8;
				width: 85%;
			}

			img {
				width: 100%;
				height: auto;
				margin-top: 25px;
			}

			@media all and (max-width: 992px) {
				p {
					font-size: 16px;
					width: 100%;
				}
			}

			.faq.active button {
				color: #007BC7;
			}

			ul {
				padding-inline-start: 1.5em;
			}

			ol {
				padding-inline-start: 0;
				list-style-position: inside;
			}

			li.faq {
				border-bottom: 2px solid #ccc;
				list-style: none;
				margin-bottom: 40px;
				padding-bottom: 10px;
			}

			li.faq.active {
				border-bottom-color: #007BC7;
			}

			li.faq li {
				margin-bottom: 30px;
			}

			.icon {
				margin-left: 10px;
			}
		`}render(){return e.html`
			<li class="${this.open?"active":""} faq">
				<button
					@click=${()=>{this.open=!this.open}}>
					${this.q}
					<span class="icon${this.open?" expand":""}">
						${o.svg`
							<svg width="22" height="13" viewBox="0 0 16 10" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M14.59 9.41L16 8L8 -3.49691e-07L-3.49691e-07 8L1.41 9.41L8 2.83" />
							</svg>
						`}
					</span>
				</button>
				<p
					style="${this.open?"":"display: none"}"
					aria-hidden="${this.open?"false":"true"}">
					${i.unsafeHTML(this.a)}
					${this.img||e.html``}
				</p>
			</li>
		`}};t([o.property({type:String})],n.prototype,"q",void 0),t([o.property({})],n.prototype,"a",void 0),t([o.property({})],n.prototype,"img",void 0),t([o.property({type:Boolean,reflect:!0})],n.prototype,"open",void 0),n=t([o.customElement("piano-faq-item")],n),exports.PianoFaqItem=n;
},{"lit-html":"SPDu","lit-element":"bhxD","lit-html/directives/unsafe-html.js":"jTPt"}],"CkD9":[function(require,module,exports) {
"use strict";var a=this&&this.__decorate||function(a,t,e,i){var o,r=arguments.length,_=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,e):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)_=Reflect.decorate(a,t,e,i);else for(var n=a.length-1;n>=0;n--)(o=a[n])&&(_=(r<3?o(_):r>3?o(t,e,_):o(t,e))||_);return r>3&&_&&Object.defineProperty(t,e,_),_},t=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(exports,"__esModule",{value:!0});const e=require("lit-element");require("./modal");const i=t(require("../../images/keyboard-diagram.png")),o=t(require("../../images/drum-diagram.png")),r=require("lit-translate"),_=require("../../i18n/languages");require("./faq-item");let n=class extends e.LitElement{constructor(){super(...arguments),this.faqData=[{title:"shared_piano_about_header-1",qs:[{q:"shared_piano_about_title-1",a:"shared_piano_about_description-1"},{q:"shared_piano_about_title-2",a:"shared_piano_about_description-2"},{q:"shared_piano_about_title-3",a:"shared_piano_about_description-3"},{q:"shared_piano_about_title-4",a:"shared_piano_about_description-4"},{q:"shared_piano_about_title-5",a:"shared_piano_about_description-5",img:e.html`<img src=${i.default.replace("/saved","")} alt=${r.get("shared_piano_about_keyboard-diagram_alt-text")} />`},{q:"shared_piano_about_title-6",a:"shared_piano_about_description-6",img:e.html`<img src=${o.default.replace("/saved","")} alt=${r.get("shared_piano_about_keyboard-drum-diagram_alt-text")} />`},{q:"shared_piano_about_title-7",a:"shared_piano_about_description-7"},{q:"shared_piano_about_title-8",a:"shared_piano_about_description-8"},{q:"shared_piano_about_title-9",a:"shared_piano_about_description-9"}]},{title:"shared_piano_about_header-2",qs:[{q:"shared_piano_about_title-10",a:"shared_piano_about_description-10"},{q:"shared_piano_about_title-11",a:"shared_piano_about_description-11"},{q:"shared_piano_about_title-12",a:"shared_piano_about_description-12"},{q:"shared_piano_about_title-13",a:"shared_piano_about_description-13"},{q:"shared_piano_about_title-14",a:"shared_piano_about_description-14"},{q:"shared_piano_about_title-15",a:"shared_piano_about_description-15"}]},{title:"shared_piano_about_header-3",qs:[{q:"shared_piano_about_title-16",a:"shared_piano_about_description-16"},{q:"shared_piano_about_title-17",a:"shared_piano_about_description-17"},{q:"shared_piano_about_title-18",a:"shared_piano_about_description-18"},{q:"shared_piano_about_title-19",a:"shared_piano_about_description-19"},{q:"shared_piano_about_title-20",a:"shared_piano_about_description-20"},{q:"shared_piano_about_title-21",a:"shared_piano_about_description-21"}]}]}static get styles(){return e.css`
			:host {
				display: inline-flex;
			}

			#title {
				font-family: Quicksand, Poppins, sans-serif;
				font-weight: 700;
				font-size: 30px;
				color: black;
				text-transform: uppercase;
				letter-spacing: 0.07em;
				line-height: 37px;
				padding-left: 25px;
			}

			.group {
				padding: 0 25px;
			}

			#terms {
				padding-left: 25px;
			}

			#terms a {
				color: #aaa;
			}

			h2 {
				padding-top: 40px;
				padding-bottom: 25px;
				font-size: 30px;
				color: #007BC7;
				line-height: 1.15em;
			}

			ul {
				margin: 0;
				padding: 0;
			}

			#container {
				width: 100%;
				max-width: 800px;
				margin: 0 auto 50px;
			}

			h2 {
				text-align: left;
			}

			@media only screen and (max-width: 992px) {
				h2 {
					padding-top: 20px;
					font-size: 22px;
				}

				#title {
					font-size: 22px;
					line-height: 29px;
					margin-bottom: 0px;
					max-width: 70%;
				}

				#container {
					width: 100%;
				}
			}
		`}render(){return e.html`
			<piano-modal>
				<div id="about">
					<div id="container">
						<h2 id="title">${r.get("shared_piano_about_logotype")} ${r.get("shared_piano_header_logotype")}</h2>
						${this.faqData.map(a=>e.html`
									<div class="group">
										<h2 id="${a.title.replace(/\s/gi,"-")}">${r.get(a.title)}</h2>
										<ul>
											${a.qs.map(a=>e.html`
											<piano-faq-item
												q=${r.get(a.q)}
												.a=${r.get(a.a)}
												.img=${a.img}
											></piano-faq-item>
										`)}
										</ul>
									</div>
								`)}
						<div id="terms">
							<a
								href=${`https://www.google.com/intl/${_.getBrowserLanguage()}/policies/privacy/`}
								target="_blank"
								>${r.get("shared_piano_about_privacy")}</a
							>
							${r.get("shared_piano_about_and-symbol")}
							<a
								href=${`https://www.google.com/intl/${_.getBrowserLanguage()}/policies/terms/`}
								target="_blank"
								>${r.get("shared_piano_about_terms")}</a
							>
						</div>
					</div>
				</div>
			</piano-modal>
		`}};n=a([e.customElement("piano-about")],n),exports.PianoAbout=n;
},{"lit-element":"bhxD","./modal":"p0AA","../../images/keyboard-diagram.png":"SrhJ","../../images/drum-diagram.png":"PPh0","lit-translate":"NZZ9","../../i18n/languages":"Ez1H","./faq-item":"My6M"}],"X6xz":[function(require,module,exports) {
module.exports="metronome.73d9a519.mp3";
},{}],"O4Jr":[function(require,module,exports) {
"use strict";var t=this&&this.__decorate||function(t,e,o,r){var n,i=arguments.length,s=i<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,r);else for(var l=t.length-1;l>=0;l--)(n=t[l])&&(s=(i<3?n(s):i>3?n(e,o,s):n(e,o))||s);return i>3&&s&&Object.defineProperty(e,o,s),s},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var o in t)Object.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e.default=t,e};Object.defineProperty(exports,"__esModule",{value:!0});const r=e(require("../../audio/metronome.mp3")),n=require("lit-element");require("./button");const i=o(require("tone"));let s=class extends n.LitElement{constructor(){super(),this.enabled=!1;const t=new i.Player(r.default).toDestination();i.loaded().then(()=>{new i.Loop(()=>{t.start()},"4n").start("8n")})}play(){i.Transport.stop(),i.Transport.start()}stop(){i.Transport.stop()}updated(){this.enabled?this.play():this.stop()}static get styles(){return n.css`
            piano-button {
                left: 8px;
                position: relative;
            }

            piano-button.active {
                --button-bg-color: #0490E7;
                --button-bg-hover-color:  #0490E7;
            }

            svg {
                position: relative;
                top: -1px;
                left: 1px;
            }
        `}render(){return n.html`
			<piano-button class=${this.enabled?"active":""} @click=${()=>this.enabled=!this.enabled} label="shared_piano_metronome_label">
				${n.svg`
						<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 37.47 32.86" stroke=${this.enabled?"white":"#5f6368"}>
                            <path fill="none" stroke-width="3" d="M18.63,1.57s0-.05.05-.05l.07,0,.07,0s0,0,.05.05L36,31.14a.14.14,0,0,1,0,.07.31.31,0,0,1,0,.08l-.05.05-.08,0H1.68a.15.15,0,0,1-.08,0l-.05-.05a.31.31,0,0,1,0-.08.14.14,0,0,1,0-.07Z"/>
                            <line x1="18.97" y1="31.73" x2="6.77" y2="10.61" fill="none" stroke-width="3" />
                            <circle cx="5.61" cy="7.39" r="4.11" fill="none" stroke-width="3"/>
                        </svg>
				`}
			</piano-button>
		`}};t([n.property({type:Boolean})],s.prototype,"enabled",void 0),s=t([n.customElement("piano-metronome")],s),exports.Metronome=s;
},{"../../audio/metronome.mp3":"X6xz","lit-element":"bhxD","./button":"nAWl","tone":"GfHe"}],"XEaR":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,n,i){var o,a=arguments.length,r=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(r=(a<3?o(r):a>3?o(t,n,r):o(t,n))||r);return a>3&&r&&Object.defineProperty(t,n,r),r},t=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,a){function r(e){try{l(i.next(e))}catch(t){a(t)}}function s(e){try{l(i.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}l((i=i.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const n=require("lit-element");require("./collapsible");const i=require("lit-translate");let o=class extends n.LitElement{constructor(){super(...arguments),this.link=""}setSavedLink(e){this.link=e}copyLink(e){return t(this,void 0,void 0,function*(){const t=e.target,n=this.link,i=e=>{let n;t&&(t.innerText=e,clearTimeout(n),n=setTimeout(()=>{t.innerText="Copy link"},3e3))};navigator.clipboard?navigator.clipboard.writeText(n).then(()=>{i("‚úì Copied")}).catch(e=>{i("Error!")}):(()=>{const e=document.createElement("textarea");e.value=n,e.style.top="0px",e.style.left="0px",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")&&i("‚úì Copied")}catch(t){i("Error!")}document.body.removeChild(e)})()})}static get styles(){return n.css`
			#content {
				padding: 25px;
                min-width: 300px;
			}
            #buttons {
                display: flex;
				align-items: center;
                flex-direction: row;
				margin-top: 20px;
            }

			#buttons button {
				-webkit-apperance: none;
				apperance: none;
				background: none;
				border: none;
				font-size: 16px;
				color: #007BC7;
				padding: 0;
				font-family: Poppins, sans-serif;
				cursor: pointer;
			}

			#buttons a {
				color: #007BC7;
				text-decoration: none;
				font-family: Poppins, sans-serif;
				font-size: 16px;
			}

			.spacer {
				margin: 0 15px;
				height: 20px;
				width: 1px;
				background-color: #ccc;
			}

			#share-check {
				width: 18px;
				height: 18px;
				margin-right: 10px;
			}

            input {
                background: #F0F0F0;
                height: 45px;
				border: none;
				font-family: Poppins, sans-serif;
				font-size: 14px;
				padding: 0 15px;
                border-bottom: 1px solid #666;
				width: calc(100% - 32px);
				color: #666;
            }

            p {
                margin: 0px;
            }

            #header-container {
                display: flex;
                flex-direction: row;
                align-items: center;
				margin-bottom: 20px;
			}

			@media (max-width: 768px) {
				#buttons button,
				#buttons a {
					font-size: 14px;
				}

				.spacer {
					margin: 0 10px;
				}
			}
		`}shareTweet(){const e=`${encodeURIComponent(i.get("shared_piano_general_save-tweet-text"))+"%20"+this.link.replace("#","%23")}%20%23chromemusiclab`;window.open(`https://twitter.com/intent/tweet?text=${e}`,"#SharedPiano","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=600")}render(){return n.html`
			<piano-collapsible @onExpand=${()=>this.dispatchEvent(new CustomEvent("onSave"))} altTextLabel="shared_piano_general_close_save_modal_label" label="shared_piano_save_label" .icon=${n.svg`
					<svg width="100%" style="position: relative; left: 1px; top: 1px; display: block; max-height: 100%;" viewBox="0 0 34 26" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M10.3992 20.1734L3.15863 12.9329C2.64717 12.4214 1.81837 12.4199 1.3051 12.9296L0.387846 13.8404C-0.126709 14.3513 -0.129646 15.1826 0.381285 15.6972C0.382375 15.6983 0.383466 15.6994 0.38456 15.7005L9.47076 24.7867C9.9835 25.2994 10.8148 25.2994 11.3276 24.7867L32.9691 3.14517C33.4818 2.63243 33.4818 1.8011 32.9691 1.28836L32.0644 0.38456C31.5518 -0.128015 30.7208 -0.128211 30.208 0.384121L10.3992 20.1734Z" fill="#666666"/>
					</svg>

				`}>
				<div id="content">
					<div id="header-container">
						<div id="share-check">
							<svg width="100%" style="position: relative; left: 1px; top: 1px; display: block; max-height: 100%;" viewBox="0 0 34 26" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M10.3992 20.1734L3.15863 12.9329C2.64717 12.4214 1.81837 12.4199 1.3051 12.9296L0.387846 13.8404C-0.126709 14.3513 -0.129646 15.1826 0.381285 15.6972C0.382375 15.6983 0.383466 15.6994 0.38456 15.7005L9.47076 24.7867C9.9835 25.2994 10.8148 25.2994 11.3276 24.7867L32.9691 3.14517C33.4818 2.63243 33.4818 1.8011 32.9691 1.28836L32.0644 0.38456C31.5518 -0.128015 30.7208 -0.128211 30.208 0.384121L10.3992 20.1734Z" fill="#77a266"/>
							</svg>
						</div>
						<p>${i.get("shared_piano_general_save-title")}</p>
					</div>
					<input readonly value="${this.link}">
					<div id="buttons">
						<button @click=${this.copyLink.bind(this)}>${i.get("shared_piano_copy-link_label")}</button>
						<div class="spacer"></div>
						<a href="${this.link}" target="_blank">${i.get("shared_piano_general_save-new-tab")}</a>
						<!-- <div class="spacer"></div>
						<button @click=${()=>this.shareTweet()}>Tweet</button> -->
					</div>
				</div>
			</piano-collapsible>
		`}};e([n.property()],o.prototype,"link",void 0),o=e([n.customElement("piano-save")],o),exports.Save=o;
},{"lit-element":"bhxD","./collapsible":"HB37","lit-translate":"NZZ9"}],"Xlfm":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,n,t,r){var i,a=arguments.length,o=a<3?n:null===r?r=Object.getOwnPropertyDescriptor(n,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,n,t,r);else for(var d=e.length-1;d>=0;d--)(i=e[d])&&(o=(a<3?i(o):a>3?i(n,t,o):i(n,t))||o);return a>3&&o&&Object.defineProperty(n,t,o),o};Object.defineProperty(exports,"__esModule",{value:!0});const n=require("lit-element"),t=require("lit-translate"),r=require("lit-html/directives/unsafe-html");let i=class extends n.LitElement{static get styles(){return n.css`
			:host {
				display: none;
			}

			#banner {
				background-color: #0490E7;
				padding: 15px;
				text-align: center;
				color: white;
				position: relative;
				touch-action: none;
				z-index: 10;
			}

			#banner p {
				padding: 0;
				margin: 0;
				font-size: 16px;
			}

			a {
				color: white;
			}

			@media (max-width: 768px) {
				#banner {
					padding: 10px;
				}

				#banner p {
					font-size: 12px;
				}
			}

			@media only screen
				and (min-device-width : 375px)
				and (max-device-width : 1024px)
				and (orientation : landscape) {
				#banner {
					padding: 10px;
				}

				#banner p {
					font-size: 8px;
				}
			}

		`}render(){return n.html`
			<div id="banner">
				<p>${r.unsafeHTML(t.get("shared_piano_general_save-banner"))}</p>
			</div>
		`}};i=e([n.customElement("piano-banner")],i),exports.Banner=i;
},{"lit-element":"bhxD","lit-translate":"NZZ9","lit-html/directives/unsafe-html":"jTPt"}],"Gz1l":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a},t=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{c(i.next(e))}catch(t){r(t)}}function s(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((i=i.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const n=require("lit-element");require("./collapsible");const i=require("lit-translate");let o=class extends n.LitElement{constructor(){super(...arguments),this.link=""}setSavedLink(){this.link=window.location.href}copyLink(e){return t(this,void 0,void 0,function*(){const t=e.target,n=this.link,i=e=>{let n;t&&(t.innerText=e,clearTimeout(n),n=setTimeout(()=>{t.innerText="Copy link"},3e3))};navigator.clipboard?navigator.clipboard.writeText(n).then(()=>{i("‚úì Copied")}).catch(e=>{i("Error!")}):(()=>{const e=document.createElement("textarea");e.value=n,e.style.top="0px",e.style.left="0px",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")&&i("‚úì Copied")}catch(t){i("Error!")}document.body.removeChild(e)})()})}static get styles(){return n.css`
			#content {
				padding: 25px;
                min-width: 300px;
			}
            #buttons {
                display: flex;
				align-items: center;
                flex-direction: row;
				margin-top: 20px;
            }

			#buttons button {
				-webkit-apperance: none;
				apperance: none;
				background: none;
				border: none;
				font-size: 16px;
				color: #007BC7;
				padding: 0;
				font-family: Poppins, sans-serif;
				cursor: pointer;
			}

			#buttons a {
				color: #007BC7;
				text-decoration: none;
				font-family: Poppins, sans-serif;
				font-size: 16px;
			}

			.spacer {
				margin: 0 15px;
				height: 20px;
				width: 1px;
				background-color: #ccc;
			}

			#share-check {
				width: 18px;
				height: 18px;
				margin-right: 10px;
			}

            input {
                background: #F0F0F0;
                height: 45px;
				border: none;
				font-family: Poppins, sans-serif;
				font-size: 14px;
				padding: 0 15px;
                border-bottom: 1px solid #666;
				width: calc(100% - 32px);
				color: #666;
            }

            p {
                margin: 0px;
            }

            #header-container {
                display: flex;
                flex-direction: row;
                align-items: center;
				margin-bottom: 20px;
			}

			@media (max-width: 768px) {
				#buttons button,
				#buttons a {
					font-size: 14px;
				}

				.spacer {
					margin: 0 10px;
				}
			}
		`}shareTweet(){const e=`${encodeURIComponent(i.get("shared_piano_general_save-tweet-text"))+"%20"+this.link.replace("#","%23")}%20%23chromemusiclab`;window.open(`https://twitter.com/intent/tweet?text=${e}`,"#SharedPiano","menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=400,width=600")}render(){return n.html`
			<piano-collapsible @onExpand=${()=>this.setSavedLink()} altTextLabel="shared_piano_general_close_save_modal_label" label="shared_piano_share_label" .icon=${n.svg`
					<style>
						.share-icon {
							margin-left: -2px;
							margin-top: 1px;
						}

						@media (max-width: 768px) {
							.share-icon {
								margin-top: 3px;
							}
						}
					</style>
					<svg class="share-icon" xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 24 24"><path d="M0 0h24v24H0z" fill="none"/><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z" fill="#666666" />
					</svg>

				`}>
				<div id="content">
					<div id="header-container">
						<p>${i.get("shared_piano_share-recording_label")}</p>
					</div>
					<input readonly value="${this.link}">
					<div id="buttons">
						<button @click=${this.copyLink.bind(this)}>${i.get("shared_piano_copy-link_label")}</button>
						<!-- <div class="spacer"></div> -->
						<!-- <a href="${this.link}" target="_blank">${i.get("shared_piano_general_save-new-tab")}</a> -->
						<!-- <div class="spacer"></div>
						<button @click=${()=>this.shareTweet()}>Tweet</button> -->
					</div>
				</div>
			</piano-collapsible>
		`}};e([n.property()],o.prototype,"link",void 0),o=e([n.customElement("piano-share")],o),exports.Share=o;
},{"lit-element":"bhxD","./collapsible":"HB37","lit-translate":"NZZ9"}],"fF5f":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,r,o){var n,i=arguments.length,s=i<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,r,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(i<3?n(s):i>3?n(t,r,s):n(t,r))||s);return i>3&&s&&Object.defineProperty(t,r,s),s};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("lit-element");let r=class extends t.LitElement{constructor(){super(),this.shown=!1;const e=navigator.userAgent.match(/Firefox\/(\d+)/i);e&&e.length>1&&parseInt(e[1],10)<81&&(this.shown=!0)}static get styles(){return t.css`
			section {
				position: absolute;
				top: 0;
				bottom: 0;
				left: 0;
				right: 0;
				background-color: #fff;
				z-index: 1000;
				display: flex;
				align-items: center;
				justify-content: center;
				text-align: center;
			}

			p {
				margin: 5px;
			}

			a {
				color: #007BC7;
			}
		`}dismiss(e){e.preventDefault(),this.shown=!1}render(){return this.shown?t.html`
					<section>
						<div>
							<p><b>Heads up!</b></p>
							<p>
								Scrolling and playback are buggy in this version of Firefox.<br />
								For now, try
								<a
									href="https://www.mozilla.org/en-US/firefox/channel/desktop/"
									target="_blank"
									>Firefox Beta</a
								>
								or
								<a href="https://www.google.com/chrome/" target="_blank"
									>Chrome</a
								>
								for the best experience.
							</p>
							<br />
							<p>
								Or
								<a href="#" @click=${this.dismiss.bind(this)}
									>click here to go ahead and dive in.</a
								>
							</p>
						</div>
					</section>
			  `:""}};e([t.property({type:Boolean})],r.prototype,"shown",void 0),r=e([t.customElement("piano-warning")],r),exports.PianoWarning=r;
},{"lit-element":"bhxD"}],"gnju":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Interval=exports.Node=exports.default=void 0;const t=class t{constructor(t,e){this.low=t,this.high=e}clone(){return new t(this.low,this.high)}get max(){return this.clone()}less_than(t){return this.low<t.low||this.low==t.low&&this.high<t.high}equal_to(t){return this.low==t.low&&this.high==t.high}intersect(t){return!this.not_intersect(t)}not_intersect(t){return this.high<t.low||t.high<this.low}merge(e){return new t(void 0===this.low?e.low:Math.min(this.low,e.low),void 0===this.high?e.high:Math.max(this.high,e.high))}output(){return[this.low,this.high]}static comparable_max(t,e){return t.merge(e)}static comparable_less_than(t,e){return t<e}};exports.Interval=t;const e=0,r=1;class i{constructor(e,i,l=null,o=null,h=null,s=r){this.left=l,this.right=o,this.parent=h,this.color=s,this.item={key:e,value:i},e&&e instanceof Array&&2==e.length&&(Number.isNaN(e[0])||Number.isNaN(e[1])||(this.item.key=new t(Math.min(e[0],e[1]),Math.max(e[0],e[1])))),this.max=this.item.key?this.item.key.max:void 0}isNil(){return void 0===this.item.key&&void 0===this.item.value&&null===this.left&&null===this.right&&this.color===r}less_than(t){if(this.item.value&&t.item.value){let e=this.item.value.less_than?this.item.value.less_than(t.item.value):this.item.value<t.item.value;return this.item.key.less_than(t.item.key)||this.item.key.equal_to(t.item.key)&&e}return this.item.key.less_than(t.item.key)}equal_to(t){let e=!0;return this.item.value&&t.item.value&&(e=this.item.value.equal_to?this.item.value.equal_to(t.item.value):this.item.value==t.item.value),this.item.key.equal_to(t.item.key)&&e}intersect(t){return this.item.key.intersect(t.item.key)}copy_data(t){this.item.key=t.item.key.clone(),this.item.value=t.item.value}update_max(){if(this.max=this.item.key?this.item.key.max:void 0,this.right&&this.right.max){const t=this.item.key.constructor.comparable_max;this.max=t(this.max,this.right.max)}if(this.left&&this.left.max){const t=this.item.key.constructor.comparable_max;this.max=t(this.max,this.left.max)}}not_intersect_left_subtree(t){return(0,this.item.key.constructor.comparable_less_than)(void 0!==this.left.max.high?this.left.max.high:this.left.max,t.item.key.low)}not_intersect_right_subtree(t){const e=this.item.key.constructor.comparable_less_than;let r=void 0!==this.right.max.low?this.right.max.low:this.right.item.key.low;return e(t.item.key.high,r)}}exports.Node=i;class l{constructor(){this.root=null,this.nil_node=new i}get size(){let t=0;return this.tree_walk(this.root,()=>t++),t}get keys(){let t=[];return this.tree_walk(this.root,e=>t.push(e.item.key.output?e.item.key.output():e.item.key)),t}get values(){let t=[];return this.tree_walk(this.root,e=>t.push(e.item.value)),t}get items(){let t=[];return this.tree_walk(this.root,e=>t.push({key:e.item.key.output?e.item.key.output():e.item.key,value:e.item.value})),t}isEmpty(){return null==this.root||this.root==this.nil_node}insert(t,r=t){if(void 0===t)return;let l=new i(t,r,this.nil_node,this.nil_node,null,e);return this.tree_insert(l),this.recalc_max(l),l}exist(t,e){let r=new i(t,e);return!!this.tree_search(this.root,r)}remove(t,e){let r=new i(t,e),l=this.tree_search(this.root,r);return l&&this.tree_delete(l),l}search(t,e=((t,e)=>t||e.output())){let r=new i(t),l=[];return this.tree_search_interval(this.root,r,l),l.map(t=>e(t.item.value,t.item.key))}forEach(t){this.tree_walk(this.root,e=>t(e.item.key,e.item.value))}map(t){const e=new l;return this.tree_walk(this.root,r=>e.insert(r.item.key,t(r.item.value,r.item.key))),e}recalc_max(t){let e=t;for(;null!=e.parent;)e.parent.update_max(),e=e.parent}tree_insert(t){let e=this.root,r=null;if(null==this.root||this.root==this.nil_node)this.root=t;else{for(;e!=this.nil_node;)r=e,e=t.less_than(e)?e.left:e.right;t.parent=r,t.less_than(r)?r.left=t:r.right=t}this.insert_fixup(t)}insert_fixup(t){let i,l;for(i=t;i!=this.root&&i.parent.color==e;)i.parent==i.parent.parent.left?(l=i.parent.parent.right).color==e?(i.parent.color=r,l.color=r,i.parent.parent.color=e,i=i.parent.parent):(i==i.parent.right&&(i=i.parent,this.rotate_left(i)),i.parent.color=r,i.parent.parent.color=e,this.rotate_right(i.parent.parent)):(l=i.parent.parent.left).color==e?(i.parent.color=r,l.color=r,i.parent.parent.color=e,i=i.parent.parent):(i==i.parent.left&&(i=i.parent,this.rotate_right(i)),i.parent.color=r,i.parent.parent.color=e,this.rotate_left(i.parent.parent));this.root.color=r}tree_delete(t){let e,i;(i=(e=t.left==this.nil_node||t.right==this.nil_node?t:this.tree_successor(t)).left!=this.nil_node?e.left:e.right).parent=e.parent,e==this.root?this.root=i:(e==e.parent.left?e.parent.left=i:e.parent.right=i,e.parent.update_max()),this.recalc_max(i),e!=t&&(t.copy_data(e),t.update_max(),this.recalc_max(t)),e.color==r&&this.delete_fixup(i)}delete_fixup(t){let i,l=t;for(;l!=this.root&&null!=l.parent&&l.color==r;)l==l.parent.left?((i=l.parent.right).color==e&&(i.color=r,l.parent.color=e,this.rotate_left(l.parent),i=l.parent.right),i.left.color==r&&i.right.color==r?(i.color=e,l=l.parent):(i.right.color==r&&(i.color=e,i.left.color=r,this.rotate_right(i),i=l.parent.right),i.color=l.parent.color,l.parent.color=r,i.right.color=r,this.rotate_left(l.parent),l=this.root)):((i=l.parent.left).color==e&&(i.color=r,l.parent.color=e,this.rotate_right(l.parent),i=l.parent.left),i.left.color==r&&i.right.color==r?(i.color=e,l=l.parent):(i.left.color==r&&(i.color=e,i.right.color=r,this.rotate_left(i),i=l.parent.left),i.color=l.parent.color,l.parent.color=r,i.left.color=r,this.rotate_right(l.parent),l=this.root));l.color=r}tree_search(t,e){if(null!=t&&t!=this.nil_node)return e.equal_to(t)?t:e.less_than(t)?this.tree_search(t.left,e):this.tree_search(t.right,e)}tree_search_interval(t,e,r){null!=t&&t!=this.nil_node&&(t.left==this.nil_node||t.not_intersect_left_subtree(e)||this.tree_search_interval(t.left,e,r),t.intersect(e)&&r.push(t),t.right==this.nil_node||t.not_intersect_right_subtree(e)||this.tree_search_interval(t.right,e,r))}local_minimum(t){let e=t;for(;null!=e.left&&e.left!=this.nil_node;)e=e.left;return e}local_maximum(t){let e=t;for(;null!=e.right&&e.right!=this.nil_node;)e=e.right;return e}tree_successor(t){let e,r,i;if(t.right!=this.nil_node)e=this.local_minimum(t.right);else{for(r=t,i=t.parent;null!=i&&i.right==r;)r=i,i=i.parent;e=i}return e}rotate_left(t){let e=t.right;t.right=e.left,e.left!=this.nil_node&&(e.left.parent=t),e.parent=t.parent,t==this.root?this.root=e:t==t.parent.left?t.parent.left=e:t.parent.right=e,e.left=t,t.parent=e,null!=t&&t!=this.nil_node&&t.update_max(),null!=(e=t.parent)&&e!=this.nil_node&&e.update_max()}rotate_right(t){let e=t.left;t.left=e.right,e.right!=this.nil_node&&(e.right.parent=t),e.parent=t.parent,t==this.root?this.root=e:t==t.parent.left?t.parent.left=e:t.parent.right=e,e.right=t,t.parent=e,null!=t&&t!=this.nil_node&&t.update_max(),null!=(e=t.parent)&&e!=this.nil_node&&e.update_max()}tree_walk(t,e){null!=t&&t!=this.nil_node&&(this.tree_walk(t.left,e),e(t),this.tree_walk(t.right,e))}testRedBlackProperty(){let t=!0;return this.tree_walk(this.root,function(i){i.color==e&&(i.left.color==r&&i.right.color==r||(t=!1))}),t}testBlackHeightProperty(t){let e=0,i=0,l=0;if(t.color==r&&e++,(i=t.left!=this.nil_node?this.testBlackHeightProperty(t.left):1)!=(l=t.right!=this.nil_node?this.testBlackHeightProperty(t.right):1))throw new Error("Red-black height property violated");return e+=i}}var o=l;exports.default=o;
},{}],"pBGv":[function(require,module,exports) {

var t,e,n=module.exports={};function r(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function i(e){if(t===setTimeout)return setTimeout(e,0);if((t===r||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(n){try{return t.call(null,e,0)}catch(n){return t.call(this,e,0)}}}function u(t){if(e===clearTimeout)return clearTimeout(t);if((e===o||!e)&&clearTimeout)return e=clearTimeout,clearTimeout(t);try{return e(t)}catch(n){try{return e.call(null,t)}catch(n){return e.call(this,t)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:r}catch(n){t=r}try{e="function"==typeof clearTimeout?clearTimeout:o}catch(n){e=o}}();var c,s=[],l=!1,a=-1;function f(){l&&c&&(l=!1,c.length?s=c.concat(s):a=-1,s.length&&h())}function h(){if(!l){var t=i(f);l=!0;for(var e=s.length;e;){for(c=s,s=[];++a<e;)c&&c[a].run();a=-1,e=s.length}c=null,l=!1,u(t)}}function m(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];s.push(new m(t,e)),1!==s.length||l||i(h)},m.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0};
},{}],"MxHY":[function(require,module,exports) {
var process = require("process");
var t=require("process");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var n="18.5.0",e=function(){this._tweens={},this._tweensAddedDuringUpdate={}};e.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,n){var e=Object.keys(this._tweens);if(0===e.length)return!1;for(t=void 0!==t?t:i.now();e.length>0;){this._tweensAddedDuringUpdate={};for(var s=0;s<e.length;s++){var r=this._tweens[e[s]];r&&!1===r.update(t)&&(r._isPlaying=!1,n||delete this._tweens[e[s]])}e=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var i=new e;i.Group=e,i._nextId=0,i.nextId=function(){return i._nextId++},"undefined"==typeof self&&void 0!==t&&t.hrtime?i.now=function(){var n=t.hrtime();return 1e3*n[0]+n[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?i.now=self.performance.now.bind(self.performance):void 0!==Date.now?i.now=Date.now:i.now=function(){return(new Date).getTime()},i.Tween=function(t,n){this._isPaused=!1,this._pauseStart=null,this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=i.Easing.Linear.None,this._interpolationFunction=i.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=n||i,this._id=i.nextId()},i.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},isPaused:function(){return this._isPaused},to:function(t,n){return this._valuesEnd=Object.create(t),void 0!==n&&(this._duration=n),this},duration:function(t){return this._duration=t,this},start:function(t){for(var n in this._group.add(this),this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?i.now()+parseFloat(t):t:i.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[n]instanceof Array){if(0===this._valuesEnd[n].length)continue;this._valuesEnd[n]=[this._object[n]].concat(this._valuesEnd[n])}void 0!==this._object[n]&&(void 0===this._valuesStart[n]&&(this._valuesStart[n]=this._object[n]),this._valuesStart[n]instanceof Array==!1&&(this._valuesStart[n]*=1),this._valuesStartRepeat[n]=this._valuesStart[n]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},pause:function(t){return this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=void 0===t?i.now():t,this._group.remove(this),this)},resume:function(t){return this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=(void 0===t?i.now():t)-this._pauseStart,this._pauseStart=0,this._group.add(this),this):this},stopChainedTweens:function(){for(var t=0,n=this._chainedTweens.length;t<n;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var n,e,i;if(t<this._startTime)return!0;for(n in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),e=(t-this._startTime)/this._duration,e=0===this._duration||e>1?1:e,i=this._easingFunction(e),this._valuesEnd)if(void 0!==this._valuesStart[n]){var s=this._valuesStart[n]||0,r=this._valuesEnd[n];r instanceof Array?this._object[n]=this._interpolationFunction(r,i):("string"==typeof r&&(r="+"===r.charAt(0)||"-"===r.charAt(0)?s+parseFloat(r):parseFloat(r)),"number"==typeof r&&(this._object[n]=s+(r-s)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,e),1===e){if(this._repeat>0){for(n in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[n]&&(this._valuesStartRepeat[n]=this._valuesStartRepeat[n]+parseFloat(this._valuesEnd[n])),this._yoyo){var a=this._valuesStartRepeat[n];this._valuesStartRepeat[n]=this._valuesEnd[n],this._valuesEnd[n]=a}this._valuesStart[n]=this._valuesStartRepeat[n]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var o=0,u=this._chainedTweens.length;o<u;o++)this._chainedTweens[o].start(this._startTime+this._duration);return!1}return!0}},i.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var n=1.70158;return t*t*((n+1)*t-n)},Out:function(t){var n=1.70158;return--t*t*((n+1)*t+n)+1},InOut:function(t){var n=2.5949095;return(t*=2)<1?t*t*((n+1)*t-n)*.5:.5*((t-=2)*t*((n+1)*t+n)+2)}},Bounce:{In:function(t){return 1-i.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*i.Easing.Bounce.In(2*t):.5*i.Easing.Bounce.Out(2*t-1)+.5}}},i.Interpolation={Linear:function(t,n){var e=t.length-1,s=e*n,r=Math.floor(s),a=i.Interpolation.Utils.Linear;return n<0?a(t[0],t[1],s):n>1?a(t[e],t[e-1],e-s):a(t[r],t[r+1>e?e:r+1],s-r)},Bezier:function(t,n){for(var e=0,s=t.length-1,r=Math.pow,a=i.Interpolation.Utils.Bernstein,o=0;o<=s;o++)e+=r(1-n,s-o)*r(n,o)*t[o]*a(s,o);return e},CatmullRom:function(t,n){var e=t.length-1,s=e*n,r=Math.floor(s),a=i.Interpolation.Utils.CatmullRom;return t[0]===t[e]?(n<0&&(r=Math.floor(s=e*(1+n))),a(t[(r-1+e)%e],t[r],t[(r+1)%e],t[(r+2)%e],s-r)):n<0?t[0]-(a(t[0],t[0],t[1],t[1],-s)-t[0]):n>1?t[e]-(a(t[e],t[e],t[e-1],t[e-1],s-e)-t[e]):a(t[r?r-1:0],t[r],t[e<r+1?e:r+1],t[e<r+2?e:r+2],s-r)},Utils:{Linear:function(t,n,e){return(n-t)*e+t},Bernstein:function(t,n){var e=i.Interpolation.Utils.Factorial;return e(t)/e(n)/e(t-n)},Factorial:function(){var t=[1];return function(n){var e=1;if(t[n])return t[n];for(var i=n;i>1;i--)e*=i;return t[n]=e,e}}(),CatmullRom:function(t,n,e,i,s){var r=.5*(e-t),a=.5*(i-n),o=s*s;return(2*n-2*e+r+a)*(s*o)+(-3*n+3*e-2*r-a)*o+r*s+n}}},i.version=n;var s=i;exports.default=s;
},{"process":"pBGv"}],"Tjrd":[function(require,module,exports) {
"use strict";var s=this&&this.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(exports,"__esModule",{value:!0});const e=s(require("@tweenjs/tween.js"));class i{constructor(){this.pixelsPerSecond=60,this.lastUpdate=Date.now(),this.playingPixels=0,this.ppsTween=new e.default.Tween,this.currentPixelsPerSecond=0,this.isPaused=!0,this.isPlaying=!1,this.lastPlayheadPosition=0,this.savedMode=!1,this.lastdiff=0,this.elapsedPixels=20,this.animationFrame()}deserialize(s){this.elapsedPixels=s}animationFrame(){requestAnimationFrame(this.animationFrame.bind(this));const s=Date.now()-this.lastUpdate;this.lastUpdate=Date.now();const e=s*this.currentPixelsPerSecond/1e3;this.savedMode||(this.elapsedPixels+=e),this.isPlaying&&(this.playingPixels+=s*this.pixelsPerSecond/1e3)}now(){return this.elapsedPixels}playhead(){let s=this.playingPixels-this.lastPlayheadPosition;this.lastPlayheadPosition=this.playingPixels;let e=Math.round(s);return 0==e&&0!=s&&(this.lastdiff+=1),4==this.lastdiff&&15==this.pixelsPerSecond&&(e=1,this.lastdiff=0),e}getPlayingStatus(){return this.isPlaying}setSpeedMultiplier(s){this.pixelsPerSecond=60*s}getPlayingStatus(){return this.isPlaying}pause(){this.isPaused||(this.isPaused=!0,this.ppsTween.stop(),this.ppsTween=new e.default.Tween(this).to({currentPixelsPerSecond:0},2e3).start())}resume(){this.isPaused&&(this.isPaused=!1,this.ppsTween.stop(),this.ppsTween=new e.default.Tween(this).to({currentPixelsPerSecond:this.pixelsPerSecond},100).start())}play(){this.isPlaying||(this.playingPixels=0,this.lastPlayheadPosition=0,this.isPlaying=!0)}stop(){this.isPlaying&&(this.isPlaying=!1)}}exports.PianoRollTimeline=i;
},{"@tweenjs/tween.js":"MxHY"}],"U8nX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.classMap=void 0;var t=require("../lit-html.js");class e{constructor(t){this.classes=new Set,this.changed=!1,this.element=t;const e=(t.getAttribute("class")||"").split(/\s+/);for(const s of e)this.classes.add(s)}add(t){this.classes.add(t),this.changed=!0}remove(t){this.classes.delete(t),this.changed=!0}commit(){if(this.changed){let t="";this.classes.forEach(e=>t+=e+" "),this.element.setAttribute("class",t)}}}const s=new WeakMap,i=(0,t.directive)(i=>a=>{if(!(a instanceof t.AttributePart)||a instanceof t.PropertyPart||"class"!==a.committer.name||a.committer.parts.length>1)throw new Error("The `classMap` directive must be used in the `class` attribute and must be the only part in the attribute.");const{committer:c}=a,{element:r}=c;let o=s.get(a);void 0===o&&(r.setAttribute("class",c.strings.join(" ")),s.set(a,o=new Set));const n=r.classList||new e(r);o.forEach(t=>{t in i||(n.remove(t),o.delete(t))});for(const t in i){const e=i[t];e!=o.has(t)&&(e?(n.add(t),o.add(t)):(n.remove(t),o.delete(t)))}"function"==typeof n.commit&&n.commit()});exports.classMap=i;
},{"../lit-html.js":"SPDu"}],"gLoQ":[function(require,module,exports) {
"use strict";var t=this&&this.__decorate||function(t,e,i,n){var o,r=arguments.length,a=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},e=this&&this.__awaiter||function(t,e,i,n){return new(i||(i=Promise))(function(o,r){function a(t){try{l(n.next(t))}catch(e){r(e)}}function s(t){try{l(n.throw(t))}catch(e){r(e)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(a,s)}l((n=n.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("lit-element"),n=require("lit-html/directives/class-map"),o=require("lit-translate");let r=class extends i.LitElement{constructor(){super(...arguments),this.playing=!1,this.visible=!1}clicked(t){return e(this,void 0,void 0,function*(){t.stopPropagation(),t.stopImmediatePropagation(),this.visible&&this.dispatchEvent(new CustomEvent("click",t))})}static get styles(){return i.css`
			button {
				-webkit-appearance: none;
				-moz-appearance: none;
				border: none;
				background-color: #0490E7;
				color: white;
				padding: 0;
				cursor: pointer;
				border-radius: 50%;
				width: 80px;
				height: 80px;
				font-size: 24px;
				transition: background-color 0.2s;
				display: flex;
				align-items: center;
				justify-content: center;
			}

			button:not(.visible) {
				background-color: #c9e4f9;
				cursor: auto;
			}

			button svg {
				width: 30px;
				height: 50px;
				transform: translateX(4px);
				position: absolute;
			}

			#stop {
				width: 30px;
				height: 30px;
				display: inline-block;
				background-color: #fff;
				border-radius: 2px;
			}

			@media (max-width: 992px) {
				button {
					width: 55px;
					height: 55px;
				}

				#stop {
					width: 20px;
					height: 20px;
				}

				button svg {
					width: 16px;
					height: 24px;
					transform: translateX(2px);
				}
			}

			@media only screen
				and (min-device-width : 375px)
				and (max-device-width : 1024px)
				and (orientation : landscape) {
				button {
					width: 45px;
					height: 45px;
				}

				#stop {
					width: 15px;
					height: 15px;
				}

				button svg {
					width: 12px;
					height: 22px;
					transform: translateX(2px);
				}
			}
		`}render(){return i.html`
			<button
				@click=${this.clicked.bind(this)}
				class=${n.classMap({visible:this.visible})}
				aria-label=${this.playing?o.get("shared_piano_general_play-button-stop_label"):o.get("shared_piano_general_play-button-play_label")}
				aria-disabled=${this.visible?"false":"true"}
			>
				${this.playing?i.html`<span id="stop"></span>`:i.html`<svg
							width="27"
							height="39"
							viewBox="0 0 27 39"
							fill="none"
							xmlns="http://www.w3.org/2000/svg"
					  >
							<path
								d="M3.53325 38.2666C2.21478 39.2555 0.333252 38.3147 0.333252 36.6666V2.66663C0.333252 1.01854 2.21478 0.0777709 3.53325 1.06663L26.1999 18.0666C27.2666 18.8666 27.2666 20.4666 26.1999 21.2666L3.53325 38.2666Z"
								fill="white"
							/>
					  </svg> `}
			</button>
		`}};t([i.property({type:Boolean})],r.prototype,"playing",void 0),t([i.property({type:Boolean})],r.prototype,"visible",void 0),r=t([i.customElement("piano-play-button")],r),exports.PlayButton=r;
},{"lit-element":"bhxD","lit-html/directives/class-map":"U8nX","lit-translate":"NZZ9"}],"ylxW":[function(require,module,exports) {
"use strict";var t=this&&this.__decorate||function(t,e,i,o){var s,n=arguments.length,l=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,i,o);else for(var r=t.length-1;r>=0;r--)(s=t[r])&&(l=(n<3?s(l):n>3?s(e,i,l):s(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l},e=this&&this.__awaiter||function(t,e,i,o){return new(i||(i=Promise))(function(s,n){function l(t){try{a(o.next(t))}catch(e){n(e)}}function r(t){try{a(o.throw(t))}catch(e){n(e)}}function a(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(l,r)}a((o=o.apply(t,e||[])).next())})},i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const o=require("lit-element");require("./timeline");const s=require("./timeline"),n=i(require("@tweenjs/tween.js"));require("../interface/play-button");const l=i(require("../util/global-state")),r=l.default.getInstance();let a=class extends o.LitElement{constructor(){super(...arguments),this.height=0,this.padding=100,this.time=0,this.triggerline=0,this.scrollTop=0,this.stillScrolling=!0,this.bottom=!0,this.playback=!1,this.updateInterval=100,this.timeline=new s.PianoRollTimeline,this.scrollTween=new n.default.Tween,this.forceDoneScrolling=!1,this.scrollInverted=!1,this.copresenceInfo=document.body.querySelector("copresence-info"),this.totaltime=0,this.elapsedtime=0,this.savedMode=!1}deserialize(t){return e(this,void 0,void 0,function*(){this.timeline.deserialize(t),yield this.updateComplete,setTimeout(()=>{this.scrollTop=this.container.scrollTop=-t},100)})}firstUpdated(){this.animationFrame(),setTimeout(()=>{0===this.container.scrollTop&&(this.scrollInverted=!0)},0)}animationFrame(){if(n.default.update(),requestAnimationFrame(this.animationFrame.bind(this)),this.height=this.timeline.now()+this.container.offsetHeight,this.totaltime=Math.floor(this.timeline.elapsedPixels/this.timeline.pixelsPerSecond),this.elapsedtime=Math.floor(this.offset/this.timeline.pixelsPerSecond),this.copresenceInfo.totaltime=this.totaltime,this.copresenceInfo.elapsedtime=this.elapsedtime,this.bottom)return void(this.copresenceInfo.elapsedtime=this.totaltime);let t=this.timeline.playhead();this.container.scrollTop+=t}get offset(){return this.bottom?this.timeline.now():this.scrollInverted?this.container.scrollHeight-Math.abs(this.container.scrollTop)-this.container.offsetHeight:this.scrollTop}getPlaying(){return this.timeline.getPlayingStatus()}onscrollHandler(t){t.preventDefault(),t.stopImmediatePropagation(),this.scrollTop=this.container.scrollTop,this.forceDoneScrolling||this.testBottom(),this.dispatchEvent(new CustomEvent("scroll"))}testBottom(){this.bottom=this.scrollInverted?0===Math.round(this.container.scrollTop):Math.round(this.container.scrollTop)===this.container.scrollHeight-this.container.offsetHeight,r.live=this.bottom,r.playback=this.playback}liftSustain(){this.dispatchEvent(new CustomEvent("sustainUp",{composed:!0,bubbles:!0}))}liftSustain(){this.dispatchEvent(new CustomEvent("sustainUp",{composed:!0,bubbles:!0}))}updated(t){t.has("offset")&&this.dispatchEvent(new CustomEvent("scroll",{detail:this.timeline.now()-this.offset})),t.has("scrollTop")&&(this.stillScrolling=!0,clearTimeout(this.stillScrollingTimeout),this.stillScrollingTimeout=setTimeout(()=>{this.stillScrolling=!1},100)),t.has("stillScrolling")&&!this.stillScrolling&&(this.forceDoneScrolling=!1,this.testBottom()),t.has("bottom")&&this.bottom&&(this.timeline.stop(),this.liftSustain(),this.playback=!1,r.playback=!0,this.liftSustain())}toBottom(){return e(this,void 0,void 0,function*(){this.savedMode||(this.dispatchEvent(new CustomEvent("toBottom",{composed:!0,bubbles:!0})),yield new Promise(t=>{if(this.bottom)t();else{this.timeline.stop(),this.scrollTween.stop(),this.liftSustain();const e=100;this.forceDoneScrolling=!0,this.scrollTween=new n.default.Tween(this.container).to({scrollTop:this.timeline.now()+e/1e3*this.timeline.pixelsPerSecond},e).start().onComplete(()=>{this.bottom=!0,r.live=!0,t()})}}))})}disableScroll(){this.container&&this.container.style.setProperty("touch-action","none")}enableScroll(){this.container&&this.container.style.removeProperty("touch-action")}now(){return this.timeline.now()}pause(){this.timeline.pause()}resume(){this.timeline.resume()}playToggle(){this.playback?(this.timeline.stop(),this.liftSustain(),this.playback=!1,r.playback=!1,this.liftSustain()):(this.timeline.play(),this.playback=!0,r.playback=!0)}static get styles(){return o.css`
			#container {
				width: 100%;
				height: 100%;
				overflow-y: scroll;
				display: flex;
				flex-direction: column-reverse;
			}

			/* @-moz-document url-prefix() {
				#container {
					flex-direction: column;
					scrollbar-width: auto;
					scrollbar-color: #0490E7 #f5f5f5;
				}
			} */

			#container::-webkit-scrollbar {
				width: 20px;
			}

			#container::-webkit-scrollbar-track {
				background: #f5f5f5;
			}

			#container::-webkit-scrollbar-thumb {
				background: #0490E7;
				border-radius: 20px;
			}

			#inner {
				width: 100%;
				position: relative;
			}

			#play {
				position: fixed;
				bottom: 15px;
				left: 20px;
				opacity: 1;
				z-index: 100;
			}

			#back-to-live {
				font-family: Poppins, sans-serif;
				color: #007BC7;
				background: #fff;
				border: none;
				position: absolute;
				z-index: 1;
				box-shadow: 0 2px 6px rgba(0, 0, 0, 0.25);
				font-size: 15px;
				display: flex;
				align-items: center;
				justify-content: center;
				left: 50%;
				transform: translateX(-50%);
				margin: 0 auto;
				bottom: 40px;
				padding: 14px 22px;
				border-radius: 52px;
				cursor: pointer;
				opacity: 0;
				visibility: hidden;
				transition: opacity 0.2s ease-out, visibilty 0.01s;
				pointer-events: none;
			}

			#back-to-live.visible {
				opacity: 1;
				pointer-events: auto;
				visibility: visible;
			}

			#back-to-live svg {
				margin-right: 10px;
				width: 18px;
			}

			@media only screen and (max-width: 992px) {
				#play {
					bottom: 15px;
					left: 5px;
				}
			}

			@media only screen and (max-width: 700px) {
				#play {
					bottom: 15px;
					left: 5px;
				}

				#back-to-live {
					font-size: 12px;
					bottom: 10px;
				}
			}

			@media only screen
				and (min-device-width: 375px)
				and (max-device-width: 1024px)
				and (orientation: landscape) {
				#play {
					bottom: 10px;
					left: 5px;
				}
			}
		`}render(){return o.html`
			<div id="container" @scroll=${this.onscrollHandler.bind(this)}>
				<div
					id="inner"
					style="flex: 0 0 ${Math.floor(this.height).toFixed(1)}px"
				></div>
			</div>
			${this.savedMode?"":o.html`
			<button
				id="back-to-live"
				class="${this.bottom?"":"visible"}"
				aria-hidden=${this.bottom?"true":"false"}
				@click=${this.toBottom.bind(this)}
			>
				<svg
					width="24"
					height="24"
					viewBox="0 0 24 24"
					fill="none"
					xmlns="http://www.w3.org/2000/svg"
				>
					<path
						d="M20 12L18.59 10.59L13 16.17V4H11V16.17L5.42 10.58L4 12L12 20L20 12Z"
						fill="#007BC7"
					/>
				</svg>
				Back to live
			</button>`}
			<piano-play-button
				id="play"
				@click=${this.playToggle.bind(this)}
				?playing=${this.playback}
				?visible=${!this.bottom}
			></piano-play-button>
		`}};t([o.property()],a.prototype,"height",void 0),t([o.property()],a.prototype,"padding",void 0),t([o.property()],a.prototype,"time",void 0),t([o.property()],a.prototype,"triggerline",void 0),t([o.property()],a.prototype,"scrollTop",void 0),t([o.property()],a.prototype,"stillScrolling",void 0),t([o.property()],a.prototype,"bottom",void 0),t([o.property()],a.prototype,"playback",void 0),t([o.query("#container")],a.prototype,"container",void 0),t([o.property()],a.prototype,"updateInterval",void 0),a=t([o.customElement("piano-roll-scroller")],a),exports.PianoRollScroller=a;
},{"lit-element":"bhxD","./timeline":"Tjrd","@tweenjs/tween.js":"MxHY","../interface/play-button":"gLoQ","../util/global-state":"M8Ve"}],"YYaI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const e=require("tone"),t=require("../index");function o(o,c=!0){const s=o%12,u=[0,2,4,5,7,9,11].includes(s)?"white":"black";return t.customKeyMap&&t.customKeyMap[u]&&t.customKeyMap[u][s]&&t.customKeyMap[u][s].note&&!t.customKeyMap[u][s].hidden&&c?t.customKeyMap[u][s].note+t.customKeyMap[u][s].pitch:t.customKeyMap&&t.customKeyMap[u]&&t.customKeyMap[u][s]&&t.customKeyMap[u][s].note&&t.customKeyMap[u][s].hidden&&c?"":e.Midi(s).toNote().replace("#","‚ôØ").replace("-1","")}exports.midiToNoteName=o;
},{"tone":"GfHe","../index":"QCba"}],"xl1x":[function(require,module,exports) {
"use strict";var t=this&&this.__decorate||function(t,e,i,s){var o,r=arguments.length,a=r<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,i,s);else for(var n=t.length-1;n>=0;n--)(o=t[n])&&(a=(r<3?o(a):r>3?o(e,i,a):o(e,i))||a);return r>3&&a&&Object.defineProperty(e,i,a),a},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("lit-element"),s=e(require("@flatten-js/interval-tree"));require("./scroller");const o=require("../util/midi"),r="bold 14px Poppins";let a=class extends i.LitElement{constructor(){super(...arguments),this.height=0,this.width=0,this.padding=0,this.octaves=0,this.rootoctave=0,this.triggerline=0,this.triggerheight=80,this.notename=!1,this.notetrail=!0,this.noteColors=["#E33059","#F75839","#F7943D","#F3B72F","#EDD929","#95C631","#56A754","#11826D","#3160A3","#5B37CC","#A347BF","#EA57B2"],this.settingsDialog=!1,this.activeNotes=new Map,this.sustainedNotes=new Map,this.sustainedMaintineceNotes=new Map,this.currentScrollingNotes=[],this.noteWidth=0,this.octaveWidth=0,this.maxWidth=0,this.opacity="33",this.noteOffsets=[0,.5,1,1.5,2,3,3.5,4,4.5,5,5.5,6],this.scrollingToBottom=!1,this.pedalDown=!1,this.savedMode=!1,this.intervalTree=new s.default,this.allNotes=[]}deserialize(t,e){this.allNotes=t,this.allNotes.forEach(t=>this.intervalTree.insert([t.start,t.end],t)),this.scroller.deserialize(e)}clear(){this.intervalTree=new s.default,this.activeNotes.clear(),this.allNotes=[],this.sustainedNotes.clear(),this.scroller.timeline.elapsedPixels=20}firstUpdated(){this.context=this.canvas.getContext("2d"),this.context.imageSmoothingEnabled=!1,this.context.imageSmoothingQuality="low",this.context.font=r,window.addEventListener("resize",this.updateSize.bind(this)),setTimeout(()=>{this.updateSize(),this.showRange(),this.animationFrame()},1)}animationFrame(){requestAnimationFrame(this.animationFrame.bind(this)),this.activeNotes.forEach(t=>{t.forEach(t=>t.end=this.scroller.now())}),this.sustainedNotes.forEach(t=>t.values().next().value.sustainEnd=this.scroller.now());const t=this.scroller.offset+this.triggerline;this.context.clearRect(0,0,this.width,this.height);const e=this.padding,i=i=>{const s=this.noteOffsets[i.pitch];let a=t-i.start,n=i.end-i.start;a>this.triggerline&&a-n-1<this.triggerline&&(n+=this.triggerheight),a<this.triggerline&&(a-=this.triggerheight),n=Math.max(n,2);const h=s*this.noteWidth+(i.octave-this.rootoctave)*this.octaveWidth;if(h>=0&&i.octave<this.octaves+this.rootoctave&&(this.notetrail&&(this.context.beginPath(),this.context.fillStyle=i.color,this.context.rect(e+h+1,a-n,this.noteWidth-2,n),this.context.fill()),this.notename&&(this.context.save(),this.context.scale(1,-1),this.context.translate(h,-Math.floor(a)),this.context.fillStyle=i.color,this.context.font=r,this.context.textAlign="center",this.context.fillText(o.midiToNoteName(i.midi),this.padding+this.noteWidth/2,-5),this.context.restore()),i.sustainStart&&i.sustainEnd)){let s=t-i.sustainStart,o=i.sustainEnd-i.sustainStart;s<this.triggerline&&(s-=this.triggerheight),s>this.triggerline&&s-o-1<this.triggerline&&(o+=this.triggerheight),this.context.beginPath(),this.context.fillStyle=i.color+this.opacity,this.context.rect(e+h+1,s-o,this.noteWidth-2,o),this.context.fill()}};this.allNotes.forEach(i),this.activeNotes.forEach(t=>t.forEach(i)),this.sustainedNotes.forEach((t,e)=>{-1==this.allNotes.indexOf(t.values().next().value)&&t.forEach(i)})}updated(t){(t.has("padding")||t.has("octaves")||t.has("rootoctave"))&&this.updateSize()}showRange(){clearTimeout(this.showRangeTimeout),this.showRangeTimeout=setTimeout(this.showRange.bind(this),100);const t=this.scroller.offset-this.triggerline-100,e=this.scroller.offset+this.container.offsetHeight-this.triggerline+100;this.allNotes=this.intervalTree.search([t,e]),this.allNotes.filter(t=>"sustain"==t.type).forEach(t=>{let e=this.intervalTree.search([t.start,t.end]);for(var i=0;i<e.length;i++)-1===this.allNotes.indexOf(e[i])&&this.allNotes.push(e[i])}),this.scroller.bottom||this.scrollingToBottom||this.triggerNotesOnLine()}triggerNotesOnLine(){const t=this.scroller.offset,e=this.intervalTree.search([t,t+1]),i=e.filter(t=>-1===this.currentScrollingNotes.indexOf(t)),s=this.currentScrollingNotes.filter(t=>-1===e.indexOf(t));this.currentScrollingNotes=e,i.forEach((t,e)=>{0==e&&t.sustained&&this.scroller.getPlaying()&&this.dispatchEvent(new CustomEvent("sustainDown",{detail:t.emoji,composed:!0})),"sustain"==t.type&&this.scroller.getPlaying()?this.dispatchEvent(new CustomEvent("sustainDown",{detail:t.emoji,composed:!0})):"sustain"!=t.type&&this.dispatchEvent(new CustomEvent("keyDown",{detail:t}))}),s.forEach(t=>{"sustain"==t.type?this.dispatchEvent(new CustomEvent("sustainUp",{detail:t.emoji,composed:!0})):this.dispatchEvent(new CustomEvent("keyUp",{detail:t}))})}addNote(t){this.savedMode||(this.intervalTree.insert([t.start,t.end],t),this.allNotes.push(t))}get bottom(){return this.scroller.bottom}setSavedMode(){this.savedMode=!0,this.scroller.savedMode=!0,this.scroller.timeline.savedMode=!0}keyDown({midi:t,velocity:e},i=""){if(this.savedMode||this.settingsDialog)return;this.activeNotes.has(t)||this.activeNotes.set(t,new Set);let s,o,r=!1;this.pedalDown&&(r=!0,s=this.scroller.now(),o=this.scroller.now(),this.sustainedNotes.has(t)||this.sustainedNotes.set(t,new Set));let a={color:this.noteColors[t%12],midi:t,velocity:e,pitch:t%12,octave:Math.floor(t/12),start:this.scroller.now(),end:this.scroller.now(),emoji:i,sustained:r,sustainStart:s,sustainEnd:o};this.activeNotes.get(t).add(a),this.pedalDown&&this.sustainedNotes.get(t).add(a)}get noteCount(){return this.activeNotes.size}transpose(t){this.intervalTree.values.forEach(e=>{e.originalMidi||(e.originalMidi=e.midi),e.midi=e.originalMidi+parseInt(t),e.pitch=e.midi%12,e.octave=Math.floor(e.midi/12),e.color=this.noteColors[e.midi%12]})}keyUp({midi:t},e=""){if(this.activeNotes.has(t)&&!this.settingsDialog){Array.from(this.activeNotes.get(t)).filter(t=>t.emoji===e).forEach(e=>{this.pedalDown?(this.activeNotes.get(t).forEach(t=>{t.end=this.scroller.now(),t.sustained=!0}),this.activeNotes.delete(t)):this.activeNotes.get(t).delete(e),this.addNote(e)}),this.activeNotes.get(t)&&0===this.activeNotes.get(t).size&&this.activeNotes.delete(t)}}addSustainedNotes(){this.activeNotes.forEach((t,e)=>{this.sustainedNotes.set(e,t)})}sustainDown(t){let e=this.scroller.now();this.curr_sustain_event={type:"sustain",start:e,end:e,emoji:t},this.pedalDown=!0,this.addSustainedNotes(),this.activeNotes.forEach(t=>t.forEach(t=>{t.sustainStart=e,t.sustainEnd=e,t.sustained=!0}))}sustainUp(t){null!=this.curr_sustain_event&&(this.curr_sustain_event.end=this.scroller.now(),this.intervalTree.insert([this.curr_sustain_event.start,this.curr_sustain_event.end],this.curr_sustain_event),this.pedalDown=!1,this.showRange(),this.sustainedNotes.clear())}toBottom(){this.savedMode||this.scroller.bottom||(this.scrollingToBottom=!0,this.currentScrollingNotes.forEach(t=>{this.activeNotes.has(t.midi)||this.dispatchEvent(new CustomEvent("keyUp",{detail:t}))}),this.scroller.toBottom().then(()=>this.scrollingToBottom=!1))}pause(){this.scroller.pause()}resume(){this.scroller.resume()}updateSize(){this.width=this.canvas.offsetWidth,this.height=this.canvas.offsetHeight;const t=this.width-2*parseFloat(this.padding.toString());this.noteWidth=t/(7*this.octaves),this.octaveWidth=t/this.octaves}static get styles(){return i.css`
			#container {
				height: 100%;
				width: 100%;
				position: relative;
				max-width: 1680px;
				margin: 0 auto;
			}

			canvas {
				transform: scale(1, -1);
			}

			#notes,
			piano-roll-scroller {
				position: absolute;
				top: 0px;
				left: 0px;
				height: 100%;
				width: 100%;
			}

			#notes {
				width: calc(100% - 80px);
				margin-left: 0;
				left: 50%;
				transform: translateX(-50%) scale(1, -1);
			}

			/* each octave should have a max width of 260 */
			#notes[octave-count='2'] {
				max-width: 520px;
			}

			#notes[octave-count='3'] {
				max-width: 780px;
			}

			#notes[octave-count='4'] {
				max-width: 1040px;
			}

			#notes[octave-count='5'] {
				max-width: 1300px;
			}

			#notes[octave-count='6'] {
				max-width: 1560px;
			}
		`}render(){return i.html`
			<div id="container">
				<canvas
					id="notes"
					octave-count="${this.octaves}"
					width="${this.width}px"
					height="${this.height}px"
				></canvas>
			</div>
			<piano-roll-scroller
				@scroll=${this.showRange.bind(this)}
			></piano-roll-scroller>
		`}};t([i.property({type:Number})],a.prototype,"height",void 0),t([i.property({type:Number})],a.prototype,"width",void 0),t([i.property({type:Number})],a.prototype,"padding",void 0),t([i.property({type:Number})],a.prototype,"octaves",void 0),t([i.property({type:Number})],a.prototype,"rootoctave",void 0),t([i.property({type:Number})],a.prototype,"triggerline",void 0),t([i.property({type:Number})],a.prototype,"triggerheight",void 0),t([i.property({type:Boolean})],a.prototype,"notename",void 0),t([i.property({type:Boolean})],a.prototype,"notetrail",void 0),t([i.property({type:Array})],a.prototype,"noteColors",void 0),t([i.property({type:Boolean})],a.prototype,"settingsDialog",void 0),t([i.query("#container")],a.prototype,"container",void 0),t([i.query("canvas")],a.prototype,"canvas",void 0),t([i.query("piano-roll-scroller")],a.prototype,"scroller",void 0),a=t([i.customElement("piano-roll-canvas")],a),exports.PianoRollCanvas=a;
},{"lit-element":"bhxD","@flatten-js/interval-tree":"gnju","./scroller":"ylxW","../util/midi":"YYaI"}],"xdHm":[function(require,module,exports) {
"use strict";var t=this&&this.__decorate||function(t,e,o,i){var n,r=arguments.length,s=r<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,o,i);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(s=(r<3?n(s):r>3?n(e,o,s):n(e,o))||s);return r>3&&s&&Object.defineProperty(e,o,s),s},e=this&&this.__awaiter||function(t,e,o,i){return new(o||(o=Promise))(function(n,r){function s(t){try{p(i.next(t))}catch(e){r(e)}}function a(t){try{p(i.throw(t))}catch(e){r(e)}}function p(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o(function(t){t(e)})).then(s,a)}p((i=i.apply(t,e||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const o=require("lit-element");require("./canvas"),require("./timeline");let i=class extends o.LitElement{constructor(){super(...arguments),this.padding=80,this.notename=!1,this.notetrail=!0,this.emoji=!0,this.scrollBehavior="pause",this.hide=!1,this.rootoctave=0,this.octaves=7,this.triggerline=0,this.noteColors=["#E33059","#F75839","#F7943D","#F3B72F","#EDD929","#95C631","#56A754","#11826D","#3160A3","#5B37CC","#A347BF","#EA57B2"]}deserialize(t,o){return e(this,void 0,void 0,function*(){yield this.updateComplete,this.canvas.deserialize(t,o)})}serialize(){return{notes:this.canvas.intervalTree.values,elapsed:this.canvas.scroller.timeline.elapsedPixels}}firstUpdated(){this.canvas.addEventListener("keyDown",t=>{this.dispatchEvent(new CustomEvent("keyDown",{composed:!0,detail:t.detail}))}),this.canvas.addEventListener("keyUp",t=>{this.dispatchEvent(new CustomEvent("keyUp",{composed:!0,detail:t.detail}))})}keyDown(t,e){this.canvas.keyDown(t,e),this.canvas.resume(),clearTimeout(this.noNotesTimeout)}keyUp(t,e){this.canvas.keyUp(t,e),clearTimeout(this.noNotesTimeout),"pause"===this.scrollBehavior&&0===this.canvas.noteCount&&(this.noNotesTimeout=setTimeout(()=>{this.canvas.pause()},1e3))}setSpeedMultiplier(t){null==this.canvas.scroller||this.canvas.scroller.timeline.setSpeedMultiplier(t)}sustainDown(t){this.canvas.sustainDown(t)}sustainUp(t){this.canvas.sustainUp(t)}toBottom(){this.canvas.toBottom()}get bottom(){return this.canvas.bottom}static get styles(){return o.css`
			#container {
				width: 100%;
				height: 100%;
				position: relative;
				transition: opacity 0.2s;
			}
			piano-roll-canvas {
				width: 100%;
				height: 100%;
				position: absolute;
				top: 0px;
				left: 0px;
			}

			#container[hide] {
				opacity: 0;
				pointer-events: none;
			}
		`}render(){return o.html`
			<div id="container" ?hide=${this.hide}>
				<piano-roll-canvas
					.padding=${this.padding}
					.triggerline="${this.triggerline}"
					.octaves="${this.octaves}"
					.notename="${this.notename}"
					.notetrail="${this.notetrail}"
					.rootoctave="${this.rootoctave}"
				></piano-roll-canvas>
			</div>
		`}};t([o.property({type:Number})],i.prototype,"padding",void 0),t([o.property({type:Boolean})],i.prototype,"notename",void 0),t([o.property({type:Boolean})],i.prototype,"notetrail",void 0),t([o.property({type:Boolean})],i.prototype,"emoji",void 0),t([o.property({type:String})],i.prototype,"scrollBehavior",void 0),t([o.property({type:Boolean})],i.prototype,"hide",void 0),t([o.property({type:Number})],i.prototype,"rootoctave",void 0),t([o.property({type:Number})],i.prototype,"octaves",void 0),t([o.property({type:Number})],i.prototype,"triggerline",void 0),t([o.property()],i.prototype,"noteColors",void 0),t([o.query("#container")],i.prototype,"container",void 0),t([o.query("piano-roll-canvas")],i.prototype,"canvas",void 0),i=t([o.customElement("piano-roll")],i),exports.PianoRoll=i;
},{"lit-element":"bhxD","./canvas":"xl1x","./timeline":"Tjrd"}],"QKHD":[function(require,module,exports) {
"use strict";var t=this&&this.__decorate||function(t,e,i,o){var s,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(n=(r<3?s(n):r>3?s(e,i,n):s(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(exports,"__esModule",{value:!0});const e=require("lit-element"),i=require("lit-html/directives/class-map"),o=require("../util/midi");class s extends e.LitElement{constructor(){super(...arguments),this.color="white",this.activecolor="#eee",this.active=!1,this.emoji=!0,this.clicked=!1,this.accidental=!1,this.notename=!1,this.touchid=-1,this.fontSize=10,this.emojis=new Set,this.saveActive=!1}updated(t){if(t.has("clicked")&&void 0!==t.get("clicked")){const t=this.clicked?"keyDown":"keyUp";this.clicked||(this.touchid=-1),this.dispatchEvent(new CustomEvent(t,{detail:{midi:this.note,velocity:.5},composed:!0,bubbles:!0}))}}_mouseover(t){t.buttons&&(this.clicked=!0,this.shadowRoot.querySelector("button").focus())}_keydown(t){t.repeat||" "!==t.key&&"Enter"!==t.key||(this.clicked=!0)}_keyup(t){" "!==t.key&&"Enter"!==t.key||(this.clicked=!1)}_touchstart(t){t.preventDefault(),this.touchid=t.touches[0].identifier,this.clicked=!0}keyDown(t){this.active=!0,t?this.emojis.add(t):!t&&window.location.pathname.endsWith("/saved/")&&(this.saveActive=!0),this.active?this.requestUpdate():this.active=!0}keyUp(t){t?(this.emojis.delete(t),this.saveActive?this.requestUpdate():this.active=this.emojis.size>0):this.saveActive?(this.active=this.emojis.size>0,this.saveActive=!1):(this.emojis.clear(),this.active=!1)}release(){this.emojis.clear(),this.active=!1}static get styles(){return e.css`
			:host {
				display: block;
			}

			#container {
				width: 100%;
				height: 100%;
				display: block;
				position: relative;
			}

			#container:not(.accidental) {
				border: 1px solid #aaa;
			}

			#container:not([show]) {
				opacity: 0;
				margin: 2px;
				pointer-events: none;
			}

			button {
				display: block;
				border: none;
				-webkit-appearance: none;
				--key-margin: 0px;
				width: 100%;
				height: 100%;
				box-sizing: border-box;
				padding: 0;
				outline: none;
				transition: background-color 0.2s;
				color: #000;
				font-size: 10px;
				font-family: Poppins, sans-serif;
			}

			.accidental button {
				width: calc(100% - 2px);
				margin: 0px 2px;
			}

			button[active] {
				color: white;
				transition-duration: 0s;
			}

			#text {
				pointer-events: none;
				position: absolute;
				bottom: 14px;
				color: black;
				width: 100%;
				line-height: 1;
				letter-spacing: normal;
				font-size: 1.2em;
				font-weight: 700;
				text-align: center;
				background-color: transparent;
			}

			.accidental #text {
				color: #fff;
			}

			.user {
				position: absolute;
				bottom: -30px;
				display: flex;
				align-items: center;
				justify-content: center;
				left: 50%;
				transform: translate(-50%, 0);
				width: 4em;
				height: 4em;
				z-index: 1;
			}

			.user > div {
				text-align: center;
				background-color: white;
				box-shadow: 0 1px 3px rgba(0, 0, 0, 0.12), 0 1px 2px rgba(0, 0, 0, 0.24);
				border-radius: 50%;
				width: 4em;
				height: 4em;
			}

			.emoji {
				font-size: 2.5em;
				margin-top: 1px;
				margin-left: 1px;
			}
		`}render(){const t=0!==this.note;return e.html`
			<div
				id="container"
				class=${i.classMap({accidental:this.accidental})}
				?show=${t}
			>
				${t?e.html` <button
							aria-label="${o.midiToNoteName(this.note)?o.midiToNoteName(this.note):"None"}"
							?active=${this.active}
							@mouseover=${this._mouseover.bind(this)}
							@mouseleave=${()=>this.clicked=!1}
							@mousedown=${()=>this.clicked=!0}
							@touchstart=${this._touchstart.bind(this)}
							@touchend=${()=>this.clicked=!1}
							@mouseup=${()=>this.clicked=!1}
							@keydown=${this._keydown.bind(this)}
							@keyup=${this._keyup.bind(this)}
							style="background-color: ${this.active?this.activecolor:this.color};"
					  >
							${this.notename?e.html` <div id="text">${o.midiToNoteName(this.note)}</div> `:e.html``}
							${this.emoji?Array.from(this.emojis).map(t=>e.html`
											<div class="user">
												<div>
													<div class="emoji">${t}</div>
												</div>
											</div>
										`):e.html``}
					  </button>`:e.html``}
			</div>
		`}}t([e.property({type:Number})],s.prototype,"note",void 0),t([e.property({type:String})],s.prototype,"color",void 0),t([e.property({type:String})],s.prototype,"activecolor",void 0),t([e.property({type:Boolean})],s.prototype,"active",void 0),t([e.property({type:Boolean})],s.prototype,"emoji",void 0),t([e.property({type:Boolean})],s.prototype,"clicked",void 0),t([e.property({type:Number})],s.prototype,"velocity",void 0),t([e.property({type:Boolean})],s.prototype,"accidental",void 0),t([e.property({type:Boolean})],s.prototype,"notename",void 0),t([e.property({type:Number})],s.prototype,"touchid",void 0),t([e.property({type:Number})],s.prototype,"fontSize",void 0),exports.PianoKeyboardNote=s,customElements.define("piano-keyboard-note",s);
},{"lit-element":"bhxD","lit-html/directives/class-map":"U8nX","../util/midi":"YYaI"}],"ZuQH":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,o,t,r){var i,n=arguments.length,a=n<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,o,t,r);else for(var s=e.length-1;s>=0;s--)(i=e[s])&&(a=(n<3?i(a):n>3?i(o,t,a):i(o,t))||a);return n>3&&a&&Object.defineProperty(o,t,a),a};Object.defineProperty(exports,"__esModule",{value:!0});const o=require("lit-element");require("./note");let t=class extends o.LitElement{constructor(){super(...arguments),this.octave=1,this.notename=!1,this.emoji=!0,this.noteColors=["#E33059","#F75839","#F7943D","#F3B72F","#EDD929","#95C631","#56A754","#11826D","#3160A3","#5B37CC","#A347BF","#EA57B2"]}keyDown(e,o){this.shadowRoot.querySelector(`piano-keyboard-note[note="${e}"]`).keyDown(o)}keyUp(e,o){this.shadowRoot.querySelector(`piano-keyboard-note[note="${e}"]`).keyUp(o)}releaseAll(){this.shadowRoot.querySelectorAll("piano-keyboard-note").forEach(e=>{e.release()})}getNoteByTouchId(e){const o=Array.from(this.shadowRoot.querySelectorAll("piano-keyboard-note")).find(o=>o.touchid===e);if(o&&o.note)return o}static get styles(){return o.css`
			#container {
				display: block;
				position: relative;
				height: 100%;
				width: 100%;
				cursor: pointer;
			}
			piano-keyboard-note {
				order: 0;
				flex-grow: 1;
			}

			#white-notes {
				position: absolute;
				left: 0px;
				top: 0px;
				width: 100%;
				height: 100%;
				display: flex;
				flex-direction: row;
			}

			#black-notes {
				position: absolute;
				top: 0px;
				width: 100%;
				display: flex;
				flex-direction: row;
				height: 55%;
			}

			#black-notes piano-keyboard-note:first-child, #black-notes piano-keyboard-note:last-child {
				flex-grow: 0.5;
				pointer-events: none;
			}
		`}render(){const e=12*this.octave,t=[0,2,4,5,7,9,11].map(o=>o+e),r=[0,1,3,0,6,8,10,0].map(o=>o?o+e:0);return o.html`
			<div id="container">
				<div id="white-notes">
				${t.map(e=>o.html`
					<piano-keyboard-note
						activecolor=${this.noteColors[e%12]}
						?notename=${this.notename}
						color="white"
						note="${e}"
						?emoji="${this.emoji}">
					</piano-keyboard-note>
				`)}
				</div>
				<div id="black-notes">
				${r.map(e=>o.html`
					<piano-keyboard-note
						accidental
						?notename=${this.notename}
						activecolor=${this.noteColors[e%12]}
						color="black"
						note="${e}"
						?emoji="${this.emoji}">
					</piano-keyboard-note>
				`)}
				</div>
			</div>
		`}};e([o.property({type:Number})],t.prototype,"octave",void 0),e([o.property({type:Boolean})],t.prototype,"notename",void 0),e([o.property({type:Boolean})],t.prototype,"emoji",void 0),e([o.property()],t.prototype,"noteColors",void 0),t=e([o.customElement("piano-keyboard-octave")],t),exports.PianoKeyboardOctave=t;
},{"lit-element":"bhxD","./note":"QKHD"}],"jJAW":[function(require,module,exports) {
"use strict";var t=this&&this.__decorate||function(t,e,o,i){var r,s=arguments.length,n=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,o,i);else for(var c=t.length-1;c>=0;c--)(r=t[c])&&(n=(s<3?r(n):s>3?r(e,o,n):r(e,o))||n);return s>3&&n&&Object.defineProperty(e,o,n),n},e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});const o=require("lit-element");require("./octave"),require("./note");const i=e(require("../util/global-state")),r=i.default.getInstance();let s=class extends o.LitElement{constructor(){super(...arguments),this.rootoctave=0,this.fontSize=8,this.octaves=4,this.notename=!1,this.emoji=!0,this.noteColors=["#E33059","#F75839","#F7943D","#F3B72F","#EDD929","#95C631","#56A754","#11826D","#3160A3","#5B37CC","#A347BF","#EA57B2"],this.activeNotes=new Set}getNoteByTouchId(t){const e=Array.from(this.shadowRoot.querySelectorAll("piano-keyboard-octave")).find(e=>e.getNoteByTouchId(t));if(e)return e.getNoteByTouchId(t)}firstUpdated(){window.addEventListener("resize",this.sizeFont.bind(this)),setTimeout(()=>{this.sizeFont()},1)}sizeFont(){this.fontSize=Math.min(Math.floor(this.container.offsetWidth/(12*this.octaves)),24)}_touchmove(t){Array.from(t.changedTouches).forEach(t=>{this.getNoteByTouchId(t.identifier);const e=this.getNoteByTouchId(t.identifier),o=this.shadowRoot.elementFromPoint(t.clientX,t.clientY);if(o&&o.shadowRoot){const i=o.shadowRoot.elementFromPoint(t.clientX,t.clientY);i&&i.note&&e.note!==i.note&&(e.clicked=!1,e.touchid=-1,i.clicked=!0,i.touchid=t.identifier)}})}_touchend(t){Array.from(t.changedTouches).forEach(t=>{this.getNoteByTouchId(t.identifier);const e=this.getNoteByTouchId(t.identifier);e&&e.clicked&&(e.clicked=!1,e.touchid=-1)})}keyDown({midi:t},e,o=!1){if(o&&!r.live)return;const i=Math.floor(t/12),s=this.shadowRoot.querySelector(`piano-keyboard-octave[octave="${i}"]`);null==s||s.keyDown(t,e),this.activeNotes.add(t)}keyUp({midi:t},e){const o=Math.floor(t/12),i=this.shadowRoot.querySelector(`piano-keyboard-octave[octave="${o}"]`);null==i||i.keyUp(t,e),this.activeNotes.delete(t)}releaseAll(){this.shadowRoot.querySelectorAll("piano-keyboard-octave").forEach(t=>{t.releaseAll()}),this.activeNotes.clear()}static get styles(){return o.css`
			#container {
				display: flex;
				background-color: white;
				height: 80px;
				max-width: 1600px;
				margin: 0 auto;
				width: 100%;
			}

			piano-keyboard-octave {
				flex-grow: 1;
			}
		`}render(){this.shadowRoot.host.setAttribute("octave-count",String(this.octaves));const t=[];for(let e=this.rootoctave;e<this.rootoctave+this.octaves;e++)t.push(e);return o.html`
			<style>
				:host {
					font-size: ${`${this.fontSize}px;`}
				}
			</style>
            <div id="container"
                class="octaves-${this.octaves}"
				@touchmove=${this._touchmove.bind(this)}
				@touchend=${this._touchend.bind(this)}>
				${t.map(t=>o.html`
					<piano-keyboard-octave
						?notename=${this.notename}
						?emoji=${this.emoji}
						octave=${t.toString()}></piano-keyboard-octave>
				`)}
			</div>
		`}};t([o.property({type:Number})],s.prototype,"rootoctave",void 0),t([o.property({type:Number})],s.prototype,"fontSize",void 0),t([o.property({type:Number})],s.prototype,"octaves",void 0),t([o.property({type:Boolean})],s.prototype,"notename",void 0),t([o.property({type:Boolean})],s.prototype,"emoji",void 0),t([o.property()],s.prototype,"noteColors",void 0),t([o.query("#container")],s.prototype,"container",void 0),s=t([o.customElement("piano-keyboard")],s),exports.PianoKeyboard=s;
},{"lit-element":"bhxD","./octave":"ZuQH","./note":"QKHD","../util/global-state":"M8Ve"}],"YkOJ":[function(require,module,exports) {
module.exports={_setState:function(t){t||(t={}),this._state={},this._extendState({polyphony:4,rows:1,priority:"last",rootNote:60,octaveControls:!0,octave:0,velocityControls:!0,velocity:127,keys:[],buffer:[]}),this._extendState(t)},_extendState:function(t){for(var e in t)this._state[e]=t[e]},set:function(){return 1===arguments.length?this._extendState(arguments[0]):this._state[arguments[0]]=arguments[1],this},get:function(t){return this._state[t]}};
},{}],"zJfp":[function(require,module,exports) {
module.exports={down:function(n){this._listeners.down=(this._listeners.down||[]).concat(n)},up:function(n){this._listeners.up=(this._listeners.up||[]).concat(n)},_trigger:function(n){var e=this;if(e._listeners[n]&&e._listeners[n].length){var t=Array.prototype.slice.call(arguments);t.splice(0,1),e._listeners[n].forEach(function(n){n.apply(e,t)})}},_bind:function(){var n=this;if("undefined"!=typeof window&&window.document){window.document.addEventListener("keydown",function(e){n._addKey(e)}),window.document.addEventListener("keyup",function(e){n._removeKey(e)});var e=!0;setInterval(function(){window.document.hasFocus()!==e&&((e=!e)||n.clear())},100)}}};
},{}],"jSUN":[function(require,module,exports) {
module.exports={_map:function(t){return this._keyMap[this._state.rows][t]+this._offset()},_offset:function(){return this._state.rootNote-this._keyMap[this._state.rows].root+12*this._state.octave},_isNote:function(t){return!!this._keyMap[this._state.rows][t]},_toFrequency:function(t){return 440*Math.pow(2,(t-69)/12)},_keyMap:{1:{root:60,65:60,87:61,83:62,69:63,68:64,70:65,84:66,71:67,89:68,72:69,85:70,74:71,75:72,79:73,76:74,80:75,186:76,222:77},2:{root:60,90:60,83:61,88:62,68:63,67:64,86:65,71:66,66:67,72:68,78:69,74:70,77:71,188:72,76:73,190:74,186:75,191:76,81:72,50:73,87:74,51:75,69:76,82:77,53:78,84:79,54:80,89:81,55:82,85:83,73:84,57:85,79:86,48:87,80:88,219:89,187:90,221:91}}};
},{}],"xeHq":[function(require,module,exports) {
module.exports={_addKey:function(e){if(this._isNote(e.keyCode)&&!this._isPressed(e.keyCode)){var t=this._makeNote(e.keyCode);this._state.keys=(this._state.keys||[]).concat(t),this._update()}else this._isSpecialKey(e.keyCode)&&this._specialKey(e.keyCode)},_removeKey:function(e){if(this._isPressed(e.keyCode)){for(var t,s=0;s<this._state.keys.length;s++)if(this._state.keys[s].keyCode===e.keyCode){t=this._state.keys[s];break}this._state.keys.splice(this._state.keys.indexOf(t),1),this._update()}},_isPressed:function(e){if(!this._state.keys||!this._state.keys.length)return!1;for(var t=0;t<this._state.keys.length;t++)if(this._state.keys[t].keyCode===e)return!0;return!1},_makeNote:function(e){return{keyCode:e,note:this._map(e),frequency:this._toFrequency(this._map(e)),velocity:this._state.velocity}},clear:function(){var e=this;e._state.buffer.forEach(function(t){t.velocity=0,e._trigger("up",t)}),e._state.keys=[],e._state.buffer=[]},_update:function(){var e=this._state.buffer;this._prioritize(),this._diff(e)},_diff:function(e){var t=this,s=e.map(function(e){return e.keyCode}),i=t._state.buffer.map(function(e){return e.keyCode}),r=[];s.forEach(function(e){-1===i.indexOf(e)&&r.push(e)});var f=[];i.forEach(function(e){-1===s.indexOf(e)&&f.push(e)}),f.forEach(function(e){for(var s=0;s<t._state.buffer.length;s++)if(t._state.buffer[s].keyCode===e){t._trigger("down",t._state.buffer[s]);break}}),r.forEach(function(s){for(var i=0;i<e.length;i++)if(e[i].keyCode===s){e[i].velocity=0,t._trigger("up",e[i]);break}})}};
},{}],"LJxB":[function(require,module,exports) {
module.exports={_prioritize:function(){var t=this;t._state.keys.length?(t._state.polyphony>=t._state.keys.length?t._state.keys=t._state.keys.map(function(t){return t.isActive=!0,t}):(t._state.keys=t._state.keys.map(function(t){return t.isActive=!1,t}),t["_"+t._state.priority]()),t._state.buffer=[],t._state.keys.forEach(function(e){e.isActive&&t._state.buffer.push(e)})):t._state.buffer=[]},_last:function(){for(var t=this._state.keys.length-this._state.polyphony;t<this._state.keys.length;t++)this._state.keys[t].isActive=!0},_first:function(){for(var t=0;t<this._state.polyphony;t++)this._state.keys[t].isActive=!0},_highest:function(){var t=this._state.keys.map(function(t){return t.note});t.sort(function(t,e){return e===t?0:e<t?-1:1}),t.splice(this._state.polyphony,Number.MAX_VALUE),this._state.keys.forEach(function(e){-1!==t.indexOf(e.note)&&(e.isActive=!0)})},_lowest:function(){var t=this._state.keys.map(function(t){return t.note});t.sort(function(t,e){return t===e?0:t<e?-1:1}),t.splice(this._state.polyphony,Number.MAX_VALUE),this._state.keys.forEach(function(e){-1!==t.indexOf(e.note)&&(e.isActive=!0)})}};
},{}],"PwRZ":[function(require,module,exports) {
module.exports={_isSpecialKey:function(e){return 1===this._state.rows&&this._specialKeyMap[e]},_specialKey:function(e){"octave"===this._specialKeyMap[e].type&&this._state.octaveControls?this._state.octave+=this._specialKeyMap[e].value:"velocity"===this._specialKeyMap[e].type&&this._state.velocityControls&&(this._state.velocity=this._specialKeyMap[e].value)},_specialKeyMap:{90:{type:"octave",value:-1},88:{type:"octave",value:1},49:{type:"velocity",value:1},50:{type:"velocity",value:14},51:{type:"velocity",value:28},52:{type:"velocity",value:42},53:{type:"velocity",value:56},54:{type:"velocity",value:70},55:{type:"velocity",value:84},56:{type:"velocity",value:98},57:{type:"velocity",value:112},48:{type:"velocity",value:127}}};
},{}],"XjPq":[function(require,module,exports) {
var e=require("./AudioKeys.state"),t=require("./AudioKeys.events"),o=require("./AudioKeys.mapping"),p=require("./AudioKeys.buffer"),r=require("./AudioKeys.priority"),i=require("./AudioKeys.special");function y(e){this._setState(e),this._listeners={},this._bind()}y.prototype._setState=e._setState,y.prototype._extendState=e._extendState,y.prototype.set=e.set,y.prototype.get=e.get,y.prototype.down=t.down,y.prototype.up=t.up,y.prototype._trigger=t._trigger,y.prototype._bind=t._bind,y.prototype._map=o._map,y.prototype._offset=o._offset,y.prototype._isNote=o._isNote,y.prototype._toFrequency=o._toFrequency,y.prototype._keyMap=o._keyMap,y.prototype._addKey=p._addKey,y.prototype._removeKey=p._removeKey,y.prototype._isPressed=p._isPressed,y.prototype._makeNote=p._makeNote,y.prototype.clear=p.clear,y.prototype._update=p._update,y.prototype._diff=p._diff,y.prototype._prioritize=r._prioritize,y.prototype._last=r._last,y.prototype._first=r._first,y.prototype._highest=r._highest,y.prototype._lowest=r._lowest,y.prototype._isSpecialKey=i._isSpecialKey,y.prototype._specialKey=i._specialKey,y.prototype._specialKeyMap=i._specialKeyMap,module.exports=y;
},{"./AudioKeys.state":"YkOJ","./AudioKeys.events":"zJfp","./AudioKeys.mapping":"jSUN","./AudioKeys.buffer":"xeHq","./AudioKeys.priority":"LJxB","./AudioKeys.special":"PwRZ"}],"UveZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PianoComponent=void 0;var e=require("tone"),t=function(e,t,o,n){return new(o||(o=Promise))(function(i,s){function u(e){try{r(n.next(e))}catch(t){s(t)}}function a(e){try{r(n.throw(e))}catch(t){s(t)}}function r(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(u,a)}r((n=n.apply(e,t||[])).next())})};class o extends e.ToneAudioNode{constructor(t){super(t),this.name="PianoComponent",this.input=void 0,this.output=new e.Volume({context:this.context}),this._enabled=!1,this.volume=this.output.volume,this._loaded=!1,this.volume.value=t.volume,this._enabled=t.enabled,this.samples=t.samples}get loaded(){return this._loaded}load(){return t(this,void 0,void 0,function*(){if(!this._enabled)return Promise.resolve();yield this._internalLoad(),this._loaded=!0})}}exports.PianoComponent=o;
},{"tone":"GfHe"}],"pAYt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.noteToMidi=t,exports.midiToNote=n,exports.randomBetween=i;var e=require("tone");function t(t){return(0,e.Frequency)(t).toMidi()}function n(t){return(0,e.Frequency)(t,"midi").toNote()}function r(t){const n=t%3;return 1===n?[t-1,(0,e.intervalToFrequencyRatio)(1)]:2===n?[t+1,(0,e.intervalToFrequencyRatio)(-1)]:[t,1]}function o(t){return new e.ToneBufferSource(t)}function i(e,t){return Math.random()*(t-e)+e}
},{"tone":"GfHe"}],"d1NX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getReleasesUrl=o,exports.getHarmonicsUrl=r,exports.getNotesUrl=n,exports.getNotesInRange=p,exports.getHarmonicsInRange=l,exports.inHarmonicsRange=c,exports.allNotes=exports.velocitiesMap=exports.githubURL=void 0;var e=require("./Util");const t="https://tambien.github.io/Piano/Salamander/";function o(e){return`rel${e-20}.[mp3|ogg]`}function r(t){return`harmS${(0,e.midiToNote)(t).replace("#","s")}.[mp3|ogg]`}function n(t,o){return`${(0,e.midiToNote)(t).replace("#","s")}v${o}.[mp3|ogg]`}exports.githubURL=t;const s={1:[8],2:[6,12],3:[1,7,15],4:[1,5,10,15],5:[1,4,8,12,16],6:[1,3,7,10,13,16],7:[1,3,6,9,11,13,16],8:[1,3,5,7,9,11,13,16],9:[1,3,5,7,9,11,13,15,16],10:[1,2,3,5,7,9,11,13,15,16],11:[1,2,3,5,7,9,11,13,14,15,16],12:[1,2,3,4,5,7,9,11,13,14,15,16],13:[1,2,3,4,5,7,9,11,12,13,14,15,16],14:[1,2,3,4,5,6,7,9,11,12,13,14,15,16],15:[1,2,3,4,5,6,7,9,10,11,12,13,14,15,16],16:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]};exports.velocitiesMap=s;const i=[21,24,27,30,33,36,39,42,45,48,51,54,57,60,63,66,69,72,75,78,81,84,87,90,93,96,99,102,105,108];function p(e,t){return i.filter(o=>e<=o&&o<=t)}exports.allNotes=i;const a=[21,24,27,30,33,36,39,42,45,48,51,54,57,60,63,66,69,72,75,78,81,84,87];function l(e,t){return a.filter(o=>e<=o&&o<=t)}function c(e){return a[0]<=e&&e<=a[a.length-1]}
},{"./Util":"pAYt"}],"DZVI":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Harmonics=void 0;var e=require("tone"),r=require("./Component"),t=require("./Salamander"),s=require("./Util");class o extends r.PianoComponent{constructor(e){super(e),this._urls={};const r=(0,t.getHarmonicsInRange)(e.minNote,e.maxNote);for(const s of r)this._urls[s]=(0,t.getHarmonicsUrl)(s)}triggerAttack(r,o,n){this._enabled&&(0,t.inHarmonicsRange)(r)&&this._sampler.triggerAttack((0,e.Midi)(r).toNote(),o,n*(0,s.randomBetween)(.5,1))}_internalLoad(){return new Promise(r=>{this._sampler=new e.Sampler({baseUrl:this.samples,onload:r,urls:this._urls}).connect(this.output)})}}exports.Harmonics=o;
},{"tone":"GfHe","./Component":"UveZ","./Salamander":"d1NX","./Util":"pAYt"}],"ZUPa":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Keybed=void 0;var e=require("tone"),t=require("./Component"),r=require("./Salamander"),s=require("./Util");class o extends t.PianoComponent{constructor(e){super(e),this._urls={};for(let t=e.minNote;t<=e.maxNote;t++)this._urls[t]=(0,r.getReleasesUrl)(t)}_internalLoad(){return new Promise(t=>{this._buffers=new e.ToneAudioBuffers(this._urls,t,this.samples)})}start(t,r,o){if(this._enabled&&this._buffers.has(t)){new e.ToneBufferSource({url:this._buffers.get(t),context:this.context}).connect(this.output).start(r,0,void 0,.015*o*(0,s.randomBetween)(.5,1))}}}exports.Keybed=o;
},{"tone":"GfHe","./Component":"UveZ","./Salamander":"d1NX","./Util":"pAYt"}],"QdZy":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pedal=void 0;var e=require("tone"),t=require("./Component"),n=require("./Util");class s extends t.PianoComponent{constructor(e){super(e),this._downTime=1/0,this._currentSound=null,this._downTime=1/0}_internalLoad(){return new Promise(t=>{this._buffers=new e.ToneAudioBuffers({down1:"pedalD1.mp3",down2:"pedalD2.mp3",up1:"pedalU1.mp3",up2:"pedalU2.mp3"},t,this.samples)})}_squash(e){this._currentSound&&"stopped"!==this._currentSound.state&&this._currentSound.stop(e),this._currentSound=null}_playSample(t,s){this._enabled&&(this._currentSound=new e.ToneBufferSource({url:this._buffers.get(`${s}${Math.random()>.5?1:2}`),context:this.context,curve:"exponential",fadeIn:.05,fadeOut:.1}).connect(this.output),this._currentSound.start(t,(0,n.randomBetween)(0,.01),void 0,.1*(0,n.randomBetween)(.5,1)))}down(e){this._squash(e),this._downTime=e,this._playSample(e,"down")}up(e){this._squash(e),this._downTime=1/0,this._playSample(e,"up")}isDown(e){return e>this._downTime}}exports.Pedal=s;
},{"tone":"GfHe","./Component":"UveZ","./Util":"pAYt"}],"L8F7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PianoString=void 0;var e=require("tone"),r=require("./Salamander");class t extends e.ToneAudioNode{constructor(e){super(e),this.name="PianoString",this._urls={},e.notes.forEach(t=>this._urls[t]=(0,r.getNotesUrl)(t,e.velocity)),this.samples=e.samples}load(){return new Promise(r=>{this._sampler=this.output=new e.Sampler({attack:0,baseUrl:this.samples,curve:"exponential",onload:r,release:.4,urls:this._urls,volume:3})})}triggerAttack(e,r,t){this._sampler.triggerAttack(e,r,t)}triggerRelease(e,r){this._sampler.triggerRelease(e,r)}}exports.PianoString=t;
},{"tone":"GfHe","./Salamander":"d1NX"}],"iZVK":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.PianoStrings=void 0;var t=require("tone"),e=require("./Component"),i=require("./Salamander"),n=require("./String"),s=function(t,e,i,n){return new(i||(i=Promise))(function(s,o){function r(t){try{c(n.next(t))}catch(e){o(e)}}function a(t){try{c(n.throw(t))}catch(e){o(e)}}function c(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i(function(t){t(e)})).then(r,a)}c((n=n.apply(t,e||[])).next())})};class o extends e.PianoComponent{constructor(t){super(t);const e=(0,i.getNotesInRange)(t.minNote,t.maxNote),s=i.velocitiesMap[t.velocities].slice();this._strings=s.map(i=>{return new n.PianoString(Object.assign(t,{notes:e,velocity:i}))}),this._activeNotes=new Map}scale(t,e,i,n,s){return(t-e)/(i-e)*(s-n)+n}triggerAttack(e,i,n){const s=this.scale(n,0,1,-.5,this._strings.length-.51),o=Math.max(Math.round(s),0);let r=1+s-o;1===this._strings.length&&(r=n);const a=this._strings[o];this._activeNotes.has(e)&&this.triggerRelease(e,i),this._activeNotes.set(e,a),a.triggerAttack((0,t.Midi)(e).toNote(),i,r)}triggerRelease(e,i){this._activeNotes.has(e)&&(this._activeNotes.get(e).triggerRelease((0,t.Midi)(e).toNote(),i),this._activeNotes.delete(e))}_internalLoad(){return s(this,void 0,void 0,function*(){yield Promise.all(this._strings.map(t=>s(this,void 0,void 0,function*(){yield t.load(),t.connect(this.output)})))})}}exports.PianoStrings=o;
},{"tone":"GfHe","./Component":"UveZ","./Salamander":"d1NX","./String":"L8F7"}],"ejM7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Piano=void 0;var e=require("tone"),t=require("./Harmonics"),s=require("./Keybed"),i=require("./Pedal"),o=require("./Strings"),n=function(e,t,s,i){return new(s||(s=Promise))(function(o,n){function a(e){try{d(i.next(e))}catch(t){n(t)}}function h(e){try{d(i.throw(e))}catch(t){n(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s(function(e){e(t)})).then(a,h)}d((i=i.apply(e,t||[])).next())})};class a extends e.ToneAudioNode{constructor(){super((0,e.optionsFromArguments)(a.getDefaults(),arguments)),this.name="Piano",this.input=void 0,this.output=new e.Gain({context:this.context}),this._heldNotes=new Map,this._loaded=!1;const n=(0,e.optionsFromArguments)(a.getDefaults(),arguments);n.url.endsWith("/")||(n.url+="/"),this.maxPolyphony=n.maxPolyphony,this._heldNotes=new Map,this._sustainedNotes=new Map,this._strings=new o.PianoStrings(Object.assign({},n,{enabled:!0,samples:n.url,volume:n.volume.strings})).connect(this.output),this.strings=this._strings.volume,this._pedal=new i.Pedal(Object.assign({},n,{enabled:n.pedal,samples:n.url,volume:n.volume.pedal})).connect(this.output),this.pedal=this._pedal.volume,this._keybed=new s.Keybed(Object.assign({},n,{enabled:n.release,samples:n.url,volume:n.volume.keybed})).connect(this.output),this.keybed=this._keybed.volume,this._harmonics=new t.Harmonics(Object.assign({},n,{enabled:n.release,samples:n.url,volume:n.volume.harmonics})).connect(this.output),this.harmonics=this._harmonics.volume}static getDefaults(){return Object.assign(e.ToneAudioNode.getDefaults(),{maxNote:108,minNote:21,pedal:!0,release:!1,url:"https://tambien.github.io/Piano/audio/",velocities:1,maxPolyphony:32,volume:{harmonics:0,keybed:0,pedal:0,strings:0}})}load(){return n(this,void 0,void 0,function*(){yield Promise.all([this._strings.load(),this._pedal.load(),this._keybed.load(),this._harmonics.load()]),this._loaded=!0})}get loaded(){return this._loaded}pedalDown({time:e=this.immediate()}={}){return this.loaded&&(e=this.toSeconds(e),this._pedal.isDown(e)||this._pedal.down(e)),this}pedalUp({time:e=this.immediate()}={}){if(this.loaded){const t=this.toSeconds(e);this._pedal.isDown(t)&&(this._pedal.up(t),this._sustainedNotes.forEach((e,s)=>{this._heldNotes.has(s)||this._strings.triggerRelease(s,t)}),this._sustainedNotes.clear())}return this}keyDown({note:t,midi:s,time:i=this.immediate(),velocity:o=.8}){return this.loaded&&this.maxPolyphony>this._heldNotes.size+this._sustainedNotes.size?(i=this.toSeconds(i),(0,e.isString)(t)&&(s=Math.round((0,e.Midi)(t).toMidi())),this._heldNotes.has(s)||(this._heldNotes.set(s,{time:i,velocity:o}),this._strings.triggerAttack(s,i,o))):console.warn("samples not loaded"),this}keyUp({note:t,midi:s,time:i=this.immediate(),velocity:o=.8}){if(this.loaded&&(i=this.toSeconds(i),(0,e.isString)(t)&&(s=Math.round((0,e.Midi)(t).toMidi())),this._heldNotes.has(s))){const e=this._heldNotes.get(s);this._heldNotes.delete(s);let t=3/Math.pow(Math.max(i-e.time,.1),.7)*e.velocity*o;t=Math.max(t,.4),t=Math.min(t,4),this._pedal.isDown(i)?this._sustainedNotes.has(s)||this._sustainedNotes.set(s,i):(this._strings.triggerRelease(s,i),this._harmonics.triggerAttack(s,i,t)),this._keybed.start(s,i,o)}return this}stopAll(){return this.pedalUp(),this._heldNotes.forEach((e,t)=>{this.keyUp({midi:t})}),this}}exports.Piano=a;
},{"tone":"GfHe","./Harmonics":"DZVI","./Keybed":"ZUPa","./Pedal":"QdZy","./Strings":"iZVK"}],"FRpO":[function(require,module,exports) {
"use strict";var e,t="object"==typeof Reflect?Reflect:null,n=t&&"function"==typeof t.apply?t.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};function r(e){console&&console.warn&&console.warn(e)}e=t&&"function"==typeof t.ownKeys?t.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}module.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var s=10;function u(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function v(e,t,n,i){var o,s,v;if(u(n),void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),s=e._events),v=s[t]),void 0===v)v=s[t]=n,++e._eventsCount;else if("function"==typeof v?v=s[t]=i?[n,v]:[v,n]:i?v.unshift(n):v.push(n),(o=f(e))>0&&v.length>o&&!v.warned){v.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+v.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=v.length,r(l)}return e}function l(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function a(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=l.bind(r);return i.listener=n,r.wrapFn=i,i}function h(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?d(i):c(i,i.length)}function p(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function c(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}function d(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return s},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");s=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return f(this)},o.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var s;if(t.length>0&&(s=t[0]),s instanceof Error)throw s;var u=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw u.context=s,u}var f=o[e];if(void 0===f)return!1;if("function"==typeof f)n(f,this,t);else{var v=f.length,l=c(f,v);for(r=0;r<v;++r)n(l[r],this,t)}return!0},o.prototype.addListener=function(e,t){return v(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return v(this,e,t,!0)},o.prototype.once=function(e,t){return u(t),this.on(e,a(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return u(t),this.prependListener(e,a(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,s;if(u(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){s=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():y(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,s||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return h(this,e,!0)},o.prototype.rawListeners=function(e){return h(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):p.call(e,t)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]};
},{}],"qDOy":[function(require,module,exports) {
var define;
var e;!function(t){"use strict";function n(){if(n.prototype._singleton)throw new Error("WebMidi is a singleton, it cannot be instantiated directly.");(n.prototype._singleton=this)._inputs=[],this._outputs=[],this._userHandlers={},this._stateChangeQueue=[],this._processingStateChange=!1,this._midiInterfaceEvents=["connected","disconnected"],this._nrpnBuffer=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this._nrpnEventsEnabled=!0,this._nrpnTypes=["entry","increment","decrement"],this._notes=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],this._semitones={C:0,D:2,E:4,F:5,G:7,A:9,B:11},Object.defineProperties(this,{MIDI_SYSTEM_MESSAGES:{value:{sysex:240,timecode:241,songposition:242,songselect:243,tuningrequest:246,sysexend:247,clock:248,start:250,continue:251,stop:252,activesensing:254,reset:255,midimessage:0,unknownsystemmessage:-1},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MESSAGES:{value:{noteoff:8,noteon:9,keyaftertouch:10,controlchange:11,channelmode:11,nrpn:11,programchange:12,channelaftertouch:13,pitchbend:14},writable:!1,enumerable:!0,configurable:!1},MIDI_REGISTERED_PARAMETER:{value:{pitchbendrange:[0,0],channelfinetuning:[0,1],channelcoarsetuning:[0,2],tuningprogram:[0,3],tuningbank:[0,4],modulationrange:[0,5],azimuthangle:[61,0],elevationangle:[61,1],gain:[61,2],distanceratio:[61,3],maximumdistance:[61,4],maximumdistancegain:[61,5],referencedistanceratio:[61,6],panspreadangle:[61,7],rollangle:[61,8]},writable:!1,enumerable:!0,configurable:!1},MIDI_CONTROL_CHANGE_MESSAGES:{value:{bankselectcoarse:0,modulationwheelcoarse:1,breathcontrollercoarse:2,footcontrollercoarse:4,portamentotimecoarse:5,dataentrycoarse:6,volumecoarse:7,balancecoarse:8,pancoarse:10,expressioncoarse:11,effectcontrol1coarse:12,effectcontrol2coarse:13,generalpurposeslider1:16,generalpurposeslider2:17,generalpurposeslider3:18,generalpurposeslider4:19,bankselectfine:32,modulationwheelfine:33,breathcontrollerfine:34,footcontrollerfine:36,portamentotimefine:37,dataentryfine:38,volumefine:39,balancefine:40,panfine:42,expressionfine:43,effectcontrol1fine:44,effectcontrol2fine:45,holdpedal:64,portamento:65,sustenutopedal:66,softpedal:67,legatopedal:68,hold2pedal:69,soundvariation:70,resonance:71,soundreleasetime:72,soundattacktime:73,brightness:74,soundcontrol6:75,soundcontrol7:76,soundcontrol8:77,soundcontrol9:78,soundcontrol10:79,generalpurposebutton1:80,generalpurposebutton2:81,generalpurposebutton3:82,generalpurposebutton4:83,reverblevel:91,tremololevel:92,choruslevel:93,celestelevel:94,phaserlevel:95,databuttonincrement:96,databuttondecrement:97,nonregisteredparametercoarse:98,nonregisteredparameterfine:99,registeredparametercoarse:100,registeredparameterfine:101},writable:!1,enumerable:!0,configurable:!1},MIDI_NRPN_MESSAGES:{value:{entrymsb:6,entrylsb:38,increment:96,decrement:97,paramlsb:98,parammsb:99,nullactiveparameter:127},writable:!1,enumerable:!0,configurable:!1},MIDI_CHANNEL_MODE_MESSAGES:{value:{allsoundoff:120,resetallcontrollers:121,localcontrol:122,allnotesoff:123,omnimodeoff:124,omnimodeon:125,monomodeon:126,polymodeon:127},writable:!1,enumerable:!0,configurable:!1},octaveOffset:{value:0,writable:!0,enumerable:!0,configurable:!1}}),Object.defineProperties(this,{supported:{enumerable:!0,get:function(){return"requestMIDIAccess"in navigator}},enabled:{enumerable:!0,get:function(){return void 0!==this.interface}.bind(this)},inputs:{enumerable:!0,get:function(){return this._inputs}.bind(this)},outputs:{enumerable:!0,get:function(){return this._outputs}.bind(this)},sysexEnabled:{enumerable:!0,get:function(){return!(!this.interface||!this.interface.sysexEnabled)}.bind(this)},nrpnEventsEnabled:{enumerable:!0,get:function(){return!!this._nrpnEventsEnabled}.bind(this),set:function(e){return this._nrpnEventsEnabled=e,this._nrpnEventsEnabled}},nrpnTypes:{enumerable:!0,get:function(){return this._nrpnTypes}.bind(this)},time:{enumerable:!0,get:function(){return performance.now()}}})}var r=new n;function i(e){var t=this;this._userHandlers={channel:{},system:{}},this._midiInput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiInput.connection}},id:{enumerable:!0,get:function(){return t._midiInput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiInput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiInput.name}},state:{enumerable:!0,get:function(){return t._midiInput.state}},type:{enumerable:!0,get:function(){return t._midiInput.type}}}),this._initializeUserHandlers(),this._midiInput.onmidimessage=this._onMidiMessage.bind(this)}function o(e){var t=this;this._midiOutput=e,Object.defineProperties(this,{connection:{enumerable:!0,get:function(){return t._midiOutput.connection}},id:{enumerable:!0,get:function(){return t._midiOutput.id}},manufacturer:{enumerable:!0,get:function(){return t._midiOutput.manufacturer}},name:{enumerable:!0,get:function(){return t._midiOutput.name}},state:{enumerable:!0,get:function(){return t._midiOutput.state}},type:{enumerable:!0,get:function(){return t._midiOutput.type}}})}n.prototype.enable=function(e,t){this.enabled||(this.supported?navigator.requestMIDIAccess({sysex:t}).then(function(t){var n,r=[],i=[];this.interface=t,this._resetInterfaceUserHandlers(),this.interface.onstatechange=function(e){r.push(e)};for(var o=t.inputs.values(),a=o.next();a&&!a.done;a=o.next())i.push(a.value.open());for(var s=t.outputs.values(),u=s.next();u&&!u.done;u=s.next())i.push(u.value.open());function h(){clearTimeout(n),this._updateInputsAndOutputs(),this.interface.onstatechange=this._onInterfaceStateChange.bind(this),"function"==typeof e&&e.call(this),r.forEach(function(e){this._onInterfaceStateChange(e)}.bind(this))}n=setTimeout(h.bind(this),200),Promise&&Promise.all(i).catch(function(e){}).then(h.bind(this))}.bind(this),function(t){"function"==typeof e&&e.call(this,t)}.bind(this)):"function"==typeof e&&e(new Error("The Web MIDI API is not supported by your browser.")))},n.prototype.disable=function(){if(!this.supported)throw new Error("The Web MIDI API is not supported by your browser.");this.interface&&(this.interface.onstatechange=void 0),this.interface=void 0,this._inputs=[],this._outputs=[],this._nrpnEventsEnabled=!0,this._resetInterfaceUserHandlers()},n.prototype.addListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before adding event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(e)))throw new TypeError("The specified event type is not supported.");return this._userHandlers[e].push(t),this},n.prototype.hasListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before checking event listeners.");if("function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(!(0<=this._midiInterfaceEvents.indexOf(e)))throw new TypeError("The specified event type is not supported.");for(var n=0;n<this._userHandlers[e].length;n++)if(this._userHandlers[e][n]===t)return!0;return!1},n.prototype.removeListener=function(e,t){if(!this.enabled)throw new Error("WebMidi must be enabled before removing event listeners.");if(void 0!==t&&"function"!=typeof t)throw new TypeError("The 'listener' parameter must be a function.");if(0<=this._midiInterfaceEvents.indexOf(e))if(t)for(var n=0;n<this._userHandlers[e].length;n++)this._userHandlers[e][n]===t&&this._userHandlers[e].splice(n,1);else this._userHandlers[e]=[];else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._resetInterfaceUserHandlers()}return this},n.prototype.toMIDIChannels=function(e){var t;if("all"===e||void 0===e)t=["all"];else{if("none"===e)return[];t=Array.isArray(e)?e:[e]}return-1<t.indexOf("all")&&(t=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16]),t.map(function(e){return parseInt(e)}).filter(function(e){return 1<=e&&e<=16})},n.prototype.getInputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");e=String(e);for(var t=0;t<this.inputs.length;t++)if(this.inputs[t].id===e)return this.inputs[t];return!1},n.prototype.getOutputById=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");e=String(e);for(var t=0;t<this.outputs.length;t++)if(this.outputs[t].id===e)return this.outputs[t];return!1},n.prototype.getInputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.inputs.length;t++)if(~this.inputs[t].name.indexOf(e))return this.inputs[t];return!1},n.prototype.getOctave=function(e){if(null!=e&&0<=e&&e<=127)return Math.floor(Math.floor(e)/12-1)+Math.floor(r.octaveOffset)},n.prototype.getOutputByName=function(e){if(!this.enabled)throw new Error("WebMidi is not enabled.");for(var t=0;t<this.outputs.length;t++)if(~this.outputs[t].name.indexOf(e))return this.outputs[t];return!1},n.prototype.guessNoteNumber=function(e){var t=!1;if(e&&e.toFixed&&0<=e&&e<=127?t=Math.round(e):0<=parseInt(e)&&parseInt(e)<=127?t=parseInt(e):("string"==typeof e||e instanceof String)&&(t=this.noteNameToNumber(e)),!1===t)throw new Error("Invalid input value ("+e+").");return t},n.prototype.noteNameToNumber=function(e){"string"!=typeof e&&(e="");var t=e.match(/([CDEFGAB])(#{0,2}|b{0,2})(-?\d+)/i);if(!t)throw new RangeError("Invalid note name.");var n=r._semitones[t[1].toUpperCase()],i=12*(parseInt(t[3])+1-Math.floor(r.octaveOffset))+n;if(-1<t[2].toLowerCase().indexOf("b")?i-=t[2].length:-1<t[2].toLowerCase().indexOf("#")&&(i+=t[2].length),i<0||127<i)throw new RangeError("Invalid note name or note outside valid range.");return i},n.prototype._updateInputsAndOutputs=function(){this._updateInputs(),this._updateOutputs()},n.prototype._updateInputs=function(){for(var e=0;e<this._inputs.length;e++){for(var t=!0,n=this.interface.inputs.values(),r=n.next();r&&!r.done;r=n.next())if(this._inputs[e]._midiInput===r.value){t=!1;break}t&&this._inputs.splice(e,1)}this.interface&&this.interface.inputs.forEach(function(e){for(var t=!0,n=0;n<this._inputs.length;n++)this._inputs[n]._midiInput===e&&(t=!1);t&&this._inputs.push(new i(e))}.bind(this))},n.prototype._updateOutputs=function(){for(var e=0;e<this._outputs.length;e++){for(var t=!0,n=this.interface.outputs.values(),r=n.next();r&&!r.done;r=n.next())if(this._outputs[e]._midiOutput===r.value){t=!1;break}t&&this._outputs.splice(e,1)}this.interface&&this.interface.outputs.forEach(function(e){for(var t=!0,n=0;n<this._outputs.length;n++)this._outputs[n]._midiOutput===e&&(t=!1);t&&this._outputs.push(new o(e))}.bind(this))},n.prototype._onInterfaceStateChange=function(e){this._updateInputsAndOutputs();var t={timestamp:e.timeStamp,type:e.port.state};this.interface&&"connected"===e.port.state?"output"===e.port.type?t.port=this.getOutputById(e.port.id):"input"===e.port.type&&(t.port=this.getInputById(e.port.id)):t.port={connection:"closed",id:e.port.id,manufacturer:e.port.manufacturer,name:e.port.name,state:e.port.state,type:e.port.type},this._userHandlers[e.port.state].forEach(function(e){e(t)})},n.prototype._resetInterfaceUserHandlers=function(){for(var e=0;e<this._midiInterfaceEvents.length;e++)this._userHandlers[this._midiInterfaceEvents[e]]=[]},i.prototype.on=i.prototype.addListener=function(e,t,n){var i=this;if(void 0===t&&(t="all"),Array.isArray(t)||(t=[t]),t.forEach(function(e){if("all"!==e&&!(1<=e&&e<=16))throw new RangeError("The 'channel' parameter is invalid.")}),"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0!==r.MIDI_SYSTEM_MESSAGES[e])this._userHandlers.system[e]||(this._userHandlers.system[e]=[]),this._userHandlers.system[e].push(n);else{if(void 0===r.MIDI_CHANNEL_MESSAGES[e])throw new TypeError("The specified event type is not supported.");if(-1<t.indexOf("all")){t=[];for(var o=1;o<=16;o++)t.push(o)}this._userHandlers.channel[e]||(this._userHandlers.channel[e]=[]),t.forEach(function(t){i._userHandlers.channel[e][t]||(i._userHandlers.channel[e][t]=[]),i._userHandlers.channel[e][t].push(n)})}return this},i.prototype.hasListener=function(e,t,n){var i=this;if("function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),void 0!==r.MIDI_SYSTEM_MESSAGES[e]){for(var o=0;o<this._userHandlers.system[e].length;o++)if(this._userHandlers.system[e][o]===n)return!0}else if(void 0!==r.MIDI_CHANNEL_MESSAGES[e]){if(-1<t.indexOf("all")){t=[];for(var a=1;a<=16;a++)t.push(a)}return!!this._userHandlers.channel[e]&&t.every(function(t){var r=i._userHandlers.channel[e][t];return r&&-1<r.indexOf(n)})}return!1},i.prototype.removeListener=function(e,t,n){var i=this;if(void 0!==n&&"function"!=typeof n)throw new TypeError("The 'listener' parameter must be a function.");if(void 0===t&&(t="all"),t.constructor!==Array&&(t=[t]),void 0!==r.MIDI_SYSTEM_MESSAGES[e])if(void 0===n)this._userHandlers.system[e]=[];else for(var o=0;o<this._userHandlers.system[e].length;o++)this._userHandlers.system[e][o]===n&&this._userHandlers.system[e].splice(o,1);else if(void 0!==r.MIDI_CHANNEL_MESSAGES[e]){if(-1<t.indexOf("all")){t=[];for(var a=1;a<=16;a++)t.push(a)}if(!this._userHandlers.channel[e])return this;t.forEach(function(t){var r=i._userHandlers.channel[e][t];if(r)if(void 0===n)i._userHandlers.channel[e][t]=[];else for(var o=0;o<r.length;o++)r[o]===n&&r.splice(o,1)})}else{if(void 0!==e)throw new TypeError("The specified event type is not supported.");this._initializeUserHandlers()}return this},i.prototype._initializeUserHandlers=function(){for(var e in r.MIDI_CHANNEL_MESSAGES)r.MIDI_CHANNEL_MESSAGES.hasOwnProperty(e)&&(this._userHandlers.channel[e]={});for(var t in r.MIDI_SYSTEM_MESSAGES)r.MIDI_SYSTEM_MESSAGES.hasOwnProperty(t)&&(this._userHandlers.system[t]=[])},i.prototype._onMidiMessage=function(e){if(0<this._userHandlers.system.midimessage.length){var t={target:this,data:e.data,timestamp:e.timeStamp,type:"midimessage"};this._userHandlers.system.midimessage.forEach(function(e){e(t)})}e.data[0]<240?(this._parseChannelEvent(e),this._parseNrpnEvent(e)):e.data[0]<=255&&this._parseSystemEvent(e)},i.prototype._parseNrpnEvent=function(e){var t,n,i=e.data[0]>>4,o=15&e.data[0],a=1+o;if(1<e.data.length&&(t=e.data[1],n=2<e.data.length?e.data[2]:void 0),r.nrpnEventsEnabled&&i===r.MIDI_CHANNEL_MESSAGES.controlchange&&(t>=r.MIDI_NRPN_MESSAGES.increment&&t<=r.MIDI_NRPN_MESSAGES.parammsb||t===r.MIDI_NRPN_MESSAGES.entrymsb||t===r.MIDI_NRPN_MESSAGES.entrylsb)){var s={target:this,type:"controlchange",data:e.data,timestamp:e.timeStamp,channel:a,controller:{number:t,name:this.getCcNameByNumber(t)},value:n};if(s.controller.number===r.MIDI_NRPN_MESSAGES.parammsb&&s.value!=r.MIDI_NRPN_MESSAGES.nullactiveparameter)r._nrpnBuffer[o]=[],r._nrpnBuffer[o][0]=s;else if(1===r._nrpnBuffer[o].length&&s.controller.number===r.MIDI_NRPN_MESSAGES.paramlsb)r._nrpnBuffer[o].push(s);else if(2!==r._nrpnBuffer[o].length||s.controller.number!==r.MIDI_NRPN_MESSAGES.increment&&s.controller.number!==r.MIDI_NRPN_MESSAGES.decrement&&s.controller.number!==r.MIDI_NRPN_MESSAGES.entrymsb)if(3===r._nrpnBuffer[o].length&&r._nrpnBuffer[o][2].number===r.MIDI_NRPN_MESSAGES.entrymsb&&s.controller.number===r.MIDI_NRPN_MESSAGES.entrylsb)r._nrpnBuffer[o].push(s);else if(3<=r._nrpnBuffer[o].length&&r._nrpnBuffer[o].length<=4&&s.controller.number===r.MIDI_NRPN_MESSAGES.parammsb&&s.value===r.MIDI_NRPN_MESSAGES.nullactiveparameter)r._nrpnBuffer[o].push(s);else if(4<=r._nrpnBuffer[o].length&&r._nrpnBuffer[o].length<=5&&s.controller.number===r.MIDI_NRPN_MESSAGES.paramlsb&&s.value===r.MIDI_NRPN_MESSAGES.nullactiveparameter){r._nrpnBuffer[o].push(s);var u=[];r._nrpnBuffer[o].forEach(function(e){u.push(e.data)});var h=r._nrpnBuffer[o][0].value<<7|r._nrpnBuffer[o][1].value,l=r._nrpnBuffer[o][2].value;6===r._nrpnBuffer[o].length&&(l=r._nrpnBuffer[o][2].value<<7|r._nrpnBuffer[o][3].value);var c="";switch(r._nrpnBuffer[o][2].controller.number){case r.MIDI_NRPN_MESSAGES.entrymsb:c=r._nrpnTypes[0];break;case r.MIDI_NRPN_MESSAGES.increment:c=r._nrpnTypes[1];break;case r.MIDI_NRPN_MESSAGES.decrement:c=r._nrpnTypes[2];break;default:throw new Error("The NPRN type was unidentifiable.")}var p={timestamp:s.timestamp,channel:s.channel,type:"nrpn",data:u,controller:{number:h,type:c,name:"Non-Registered Parameter "+h},value:l};r._nrpnBuffer[o]=[],this._userHandlers.channel[p.type]&&this._userHandlers.channel[p.type][p.channel]&&this._userHandlers.channel[p.type][p.channel].forEach(function(e){e(p)})}else r._nrpnBuffer[o]=[];else r._nrpnBuffer[o].push(s)}},i.prototype._parseChannelEvent=function(e){var t,n,i=e.data[0]>>4,o=1+(15&e.data[0]);1<e.data.length&&(t=e.data[1],n=2<e.data.length?e.data[2]:void 0);var a={target:this,data:e.data,timestamp:e.timeStamp,channel:o};i===r.MIDI_CHANNEL_MESSAGES.noteoff||i===r.MIDI_CHANNEL_MESSAGES.noteon&&0===n?(a.type="noteoff",a.note={number:t,name:r._notes[t%12],octave:r.getOctave(t)},a.velocity=n/127,a.rawVelocity=n):i===r.MIDI_CHANNEL_MESSAGES.noteon?(a.type="noteon",a.note={number:t,name:r._notes[t%12],octave:r.getOctave(t)},a.velocity=n/127,a.rawVelocity=n):i===r.MIDI_CHANNEL_MESSAGES.keyaftertouch?(a.type="keyaftertouch",a.note={number:t,name:r._notes[t%12],octave:r.getOctave(t)},a.value=n/127):i===r.MIDI_CHANNEL_MESSAGES.controlchange&&0<=t&&t<=119?(a.type="controlchange",a.controller={number:t,name:this.getCcNameByNumber(t)},a.value=n):i===r.MIDI_CHANNEL_MESSAGES.channelmode&&120<=t&&t<=127?(a.type="channelmode",a.controller={number:t,name:this.getChannelModeByNumber(t)},a.value=n):i===r.MIDI_CHANNEL_MESSAGES.programchange?(a.type="programchange",a.value=t):i===r.MIDI_CHANNEL_MESSAGES.channelaftertouch?(a.type="channelaftertouch",a.value=t/127):i===r.MIDI_CHANNEL_MESSAGES.pitchbend?(a.type="pitchbend",a.value=((n<<7)+t-8192)/8192):a.type="unknownchannelmessage",this._userHandlers.channel[a.type]&&this._userHandlers.channel[a.type][o]&&this._userHandlers.channel[a.type][o].forEach(function(e){e(a)})},i.prototype.getCcNameByNumber=function(e){if(!(0<=(e=Math.floor(e))&&e<=119))throw new RangeError("The control change number must be between 0 and 119.");for(var t in r.MIDI_CONTROL_CHANGE_MESSAGES)if(r.MIDI_CONTROL_CHANGE_MESSAGES.hasOwnProperty(t)&&e===r.MIDI_CONTROL_CHANGE_MESSAGES[t])return t},i.prototype.getChannelModeByNumber=function(e){if(!(120<=(e=Math.floor(e))&&status<=127))throw new RangeError("The control change number must be between 120 and 127.");for(var t in r.MIDI_CHANNEL_MODE_MESSAGES)if(r.MIDI_CHANNEL_MODE_MESSAGES.hasOwnProperty(t)&&e===r.MIDI_CHANNEL_MODE_MESSAGES[t])return t},i.prototype._parseSystemEvent=function(e){var t=e.data[0],n={target:this,data:e.data,timestamp:e.timeStamp};t===r.MIDI_SYSTEM_MESSAGES.sysex?n.type="sysex":t===r.MIDI_SYSTEM_MESSAGES.timecode?n.type="timecode":t===r.MIDI_SYSTEM_MESSAGES.songposition?n.type="songposition":t===r.MIDI_SYSTEM_MESSAGES.songselect?(n.type="songselect",n.song=e.data[1]):t===r.MIDI_SYSTEM_MESSAGES.tuningrequest?n.type="tuningrequest":t===r.MIDI_SYSTEM_MESSAGES.clock?n.type="clock":t===r.MIDI_SYSTEM_MESSAGES.start?n.type="start":t===r.MIDI_SYSTEM_MESSAGES.continue?n.type="continue":t===r.MIDI_SYSTEM_MESSAGES.stop?n.type="stop":t===r.MIDI_SYSTEM_MESSAGES.activesensing?n.type="activesensing":t===r.MIDI_SYSTEM_MESSAGES.reset?n.type="reset":n.type="unknownsystemmessage",this._userHandlers.system[n.type]&&this._userHandlers.system[n.type].forEach(function(e){e(n)})},o.prototype.send=function(e,t,n){if(!(128<=e&&e<=255))throw new RangeError("The status byte must be an integer between 128 (0x80) and 255 (0xFF).");void 0===t&&(t=[]),Array.isArray(t)||(t=[t]);var r=[];return t.forEach(function(e){var t=Math.floor(e);if(!(0<=t&&t<=255))throw new RangeError("Data bytes must be integers between 0 (0x00) and 255 (0xFF).");r.push(t)}),this._midiOutput.send([e].concat(r),parseFloat(n)||0),this},o.prototype.sendSysex=function(e,t,n){if(!r.sysexEnabled)throw new Error("Sysex message support must first be activated.");return n=n||{},e=[].concat(e),t.forEach(function(e){if(e<0||127<e)throw new RangeError("The data bytes of a sysex message must be integers between 0 (0x00) and 127 (0x7F).")}),t=e.concat(t,r.MIDI_SYSTEM_MESSAGES.sysexend),this.send(r.MIDI_SYSTEM_MESSAGES.sysex,t,this._parseTimeParameter(n.time)),this},o.prototype.sendTimecodeQuarterFrame=function(e,t){return t=t||{},this.send(r.MIDI_SYSTEM_MESSAGES.timecode,e,this._parseTimeParameter(t.time)),this},o.prototype.sendSongPosition=function(e,t){t=t||{};var n=(e=Math.floor(e)||0)>>7&127,i=127&e;return this.send(r.MIDI_SYSTEM_MESSAGES.songposition,[n,i],this._parseTimeParameter(t.time)),this},o.prototype.sendSongSelect=function(e,t){if(t=t||{},!(0<=(e=Math.floor(e))&&e<=127))throw new RangeError("The song number must be between 0 and 127.");return this.send(r.MIDI_SYSTEM_MESSAGES.songselect,[e],this._parseTimeParameter(t.time)),this},o.prototype.sendTuningRequest=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.tuningrequest,void 0,this._parseTimeParameter(e.time)),this},o.prototype.sendClock=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.clock,void 0,this._parseTimeParameter(e.time)),this},o.prototype.sendStart=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.start,void 0,this._parseTimeParameter(e.time)),this},o.prototype.sendContinue=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.continue,void 0,this._parseTimeParameter(e.time)),this},o.prototype.sendStop=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.stop,void 0,this._parseTimeParameter(e.time)),this},o.prototype.sendActiveSensing=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.activesensing,[],this._parseTimeParameter(e.time)),this},o.prototype.sendReset=function(e){return e=e||{},this.send(r.MIDI_SYSTEM_MESSAGES.reset,void 0,this._parseTimeParameter(e.time)),this},o.prototype.stopNote=function(e,t,n){if("all"===e)return this.sendChannelMode("allnotesoff",0,t,n);var i=64;return(n=n||{}).rawVelocity?!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=127&&(i=n.velocity):!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=1&&(i=127*n.velocity),this._convertNoteToArray(e).forEach(function(e){r.toMIDIChannels(t).forEach(function(t){this.send((r.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(t-1),[e,Math.round(i)],this._parseTimeParameter(n.time))}.bind(this))}.bind(this)),this},o.prototype.playNote=function(e,t,n){var i,o=64;if((n=n||{}).rawVelocity?!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=127&&(o=n.velocity):!isNaN(n.velocity)&&0<=n.velocity&&n.velocity<=1&&(o=127*n.velocity),i=this._parseTimeParameter(n.time),this._convertNoteToArray(e).forEach(function(e){r.toMIDIChannels(t).forEach(function(t){this.send((r.MIDI_CHANNEL_MESSAGES.noteon<<4)+(t-1),[e,Math.round(o)],i)}.bind(this))}.bind(this)),!isNaN(n.duration)){n.duration<=0&&(n.duration=0);var a=64;n.rawVelocity?!isNaN(n.release)&&0<=n.release&&n.release<=127&&(a=n.release):!isNaN(n.release)&&0<=n.release&&n.release<=1&&(a=127*n.release),this._convertNoteToArray(e).forEach(function(e){r.toMIDIChannels(t).forEach(function(t){this.send((r.MIDI_CHANNEL_MESSAGES.noteoff<<4)+(t-1),[e,Math.round(a)],(i||r.time)+n.duration)}.bind(this))}.bind(this))}return this},o.prototype.sendKeyAftertouch=function(e,t,n,i){var o=this;if(i=i||{},t<1||16<t)throw new RangeError("The channel must be between 1 and 16.");(isNaN(n)||n<0||1<n)&&(n=.5);var a=Math.round(127*n);return this._convertNoteToArray(e).forEach(function(e){r.toMIDIChannels(t).forEach(function(t){o.send((r.MIDI_CHANNEL_MESSAGES.keyaftertouch<<4)+(t-1),[e,a],o._parseTimeParameter(i.time))})}),this},o.prototype.sendControlChange=function(e,t,n,i){if(i=i||{},"string"==typeof e){if(void 0===(e=r.MIDI_CONTROL_CHANGE_MESSAGES[e]))throw new TypeError("Invalid controller name.")}else if(!(0<=(e=Math.floor(e))&&e<=119))throw new RangeError("Controller numbers must be between 0 and 119.");if(!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("Controller value must be between 0 and 127.");return r.toMIDIChannels(n).forEach(function(n){this.send((r.MIDI_CHANNEL_MESSAGES.controlchange<<4)+(n-1),[e,t],this._parseTimeParameter(i.time))}.bind(this)),this},o.prototype._selectRegisteredParameter=function(e,t,n){var i=this;if(e[0]=Math.floor(e[0]),!(0<=e[0]&&e[0]<=127))throw new RangeError("The control65 value must be between 0 and 127");if(e[1]=Math.floor(e[1]),!(0<=e[1]&&e[1]<=127))throw new RangeError("The control64 value must be between 0 and 127");return r.toMIDIChannels(t).forEach(function(){i.sendControlChange(101,e[0],t,{time:n}),i.sendControlChange(100,e[1],t,{time:n})}),this},o.prototype._selectNonRegisteredParameter=function(e,t,n){var i=this;if(e[0]=Math.floor(e[0]),!(0<=e[0]&&e[0]<=127))throw new RangeError("The control63 value must be between 0 and 127");if(e[1]=Math.floor(e[1]),!(0<=e[1]&&e[1]<=127))throw new RangeError("The control62 value must be between 0 and 127");return r.toMIDIChannels(t).forEach(function(){i.sendControlChange(99,e[0],t,{time:n}),i.sendControlChange(98,e[1],t,{time:n})}),this},o.prototype._setCurrentRegisteredParameter=function(e,t,n){var i=this;if((e=[].concat(e))[0]=Math.floor(e[0]),!(0<=e[0]&&e[0]<=127))throw new RangeError("The msb value must be between 0 and 127");return r.toMIDIChannels(t).forEach(function(){i.sendControlChange(6,e[0],t,{time:n})}),e[1]=Math.floor(e[1]),0<=e[1]&&e[1]<=127&&r.toMIDIChannels(t).forEach(function(){i.sendControlChange(38,e[1],t,{time:n})}),this},o.prototype._deselectRegisteredParameter=function(e,t){var n=this;return r.toMIDIChannels(e).forEach(function(){n.sendControlChange(101,127,e,{time:t}),n.sendControlChange(100,127,e,{time:t})}),this},o.prototype.setRegisteredParameter=function(e,t,n,i){var o=this;if(i=i||{},!Array.isArray(e)){if(!r.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=r.MIDI_REGISTERED_PARAMETER[e]}return r.toMIDIChannels(n).forEach(function(){o._selectRegisteredParameter(e,n,i.time),o._setCurrentRegisteredParameter(t,n,i.time),o._deselectRegisteredParameter(n,i.time)}),this},o.prototype.setNonRegisteredParameter=function(e,t,n,i){var o=this;if(i=i||{},!(0<=e[0]&&e[0]<=127&&0<=e[1]&&e[1]<=127))throw new Error("Position 0 and 1 of the 2-position parameter array must both be between 0 and 127.");return t=[].concat(t),r.toMIDIChannels(n).forEach(function(){o._selectNonRegisteredParameter(e,n,i.time),o._setCurrentRegisteredParameter(t,n,i.time),o._deselectRegisteredParameter(n,i.time)}),this},o.prototype.incrementRegisteredParameter=function(e,t,n){var i=this;if(n=n||{},!Array.isArray(e)){if(!r.MIDI_REGISTERED_PARAMETER[e])throw new Error("The specified parameter is not available.");e=r.MIDI_REGISTERED_PARAMETER[e]}return r.toMIDIChannels(t).forEach(function(){i._selectRegisteredParameter(e,t,n.time),i.sendControlChange(96,0,t,{time:n.time}),i._deselectRegisteredParameter(t,n.time)}),this},o.prototype.decrementRegisteredParameter=function(e,t,n){if(n=n||{},!Array.isArray(e)){if(!r.MIDI_REGISTERED_PARAMETER[e])throw new TypeError("The specified parameter is not available.");e=r.MIDI_REGISTERED_PARAMETER[e]}return r.toMIDIChannels(t).forEach(function(){this._selectRegisteredParameter(e,t,n.time),this.sendControlChange(97,0,t,{time:n.time}),this._deselectRegisteredParameter(t,n.time)}.bind(this)),this},o.prototype.setPitchBendRange=function(e,t,n,i){var o=this;if(i=i||{},!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The cents value must be between 0 and 127");return r.toMIDIChannels(n).forEach(function(){o.setRegisteredParameter("pitchbendrange",[e,t],n,{time:i.time})}),this},o.prototype.setModulationRange=function(e,t,n,i){var o=this;if(i=i||{},!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The semitones value must be between 0 and 127");if(!(0<=(t=Math.floor(t)||0)&&t<=127))throw new RangeError("The cents value must be between 0 and 127");return r.toMIDIChannels(n).forEach(function(){o.setRegisteredParameter("modulationrange",[e,t],n,{time:i.time})}),this},o.prototype.setMasterTuning=function(e,t,n){var i=this;if(n=n||{},(e=parseFloat(e)||0)<=-65||64<=e)throw new RangeError("The value must be a decimal number larger than -65 and smaller than 64.");var o=Math.floor(e)+64,a=e-Math.floor(e),s=(a=Math.round((a+1)/2*16383))>>7&127,u=127&a;return r.toMIDIChannels(t).forEach(function(){i.setRegisteredParameter("channelcoarsetuning",o,t,{time:n.time}),i.setRegisteredParameter("channelfinetuning",[s,u],t,{time:n.time})}),this},o.prototype.setTuningProgram=function(e,t,n){var i=this;if(n=n||{},!(0<=(e=Math.floor(e))&&e<=127))throw new RangeError("The program value must be between 0 and 127");return r.toMIDIChannels(t).forEach(function(){i.setRegisteredParameter("tuningprogram",e,t,{time:n.time})}),this},o.prototype.setTuningBank=function(e,t,n){var i=this;if(n=n||{},!(0<=(e=Math.floor(e)||0)&&e<=127))throw new RangeError("The bank value must be between 0 and 127");return r.toMIDIChannels(t).forEach(function(){i.setRegisteredParameter("tuningbank",e,t,{time:n.time})}),this},o.prototype.sendChannelMode=function(e,t,n,i){if(i=i||{},"string"==typeof e){if(!(e=r.MIDI_CHANNEL_MODE_MESSAGES[e]))throw new TypeError("Invalid channel mode message name.")}else if(!(120<=(e=Math.floor(e))&&e<=127))throw new RangeError("Channel mode numerical identifiers must be between 120 and 127.");if((t=Math.floor(t)||0)<0||127<t)throw new RangeError("Value must be an integer between 0 and 127.");return r.toMIDIChannels(n).forEach(function(n){this.send((r.MIDI_CHANNEL_MESSAGES.channelmode<<4)+(n-1),[e,t],this._parseTimeParameter(i.time))}.bind(this)),this},o.prototype.sendProgramChange=function(e,t,n){var i=this;if(n=n||{},e=Math.floor(e),isNaN(e)||e<0||127<e)throw new RangeError("Program numbers must be between 0 and 127.");return r.toMIDIChannels(t).forEach(function(t){i.send((r.MIDI_CHANNEL_MESSAGES.programchange<<4)+(t-1),[e],i._parseTimeParameter(n.time))}),this},o.prototype.sendChannelAftertouch=function(e,t,n){var i=this;n=n||{},e=parseFloat(e),(isNaN(e)||e<0||1<e)&&(e=.5);var o=Math.round(127*e);return r.toMIDIChannels(t).forEach(function(e){i.send((r.MIDI_CHANNEL_MESSAGES.channelaftertouch<<4)+(e-1),[o],i._parseTimeParameter(n.time))}),this},o.prototype.sendPitchBend=function(e,t,n){var i=this;if(n=n||{},isNaN(e)||e<-1||1<e)throw new RangeError("Pitch bend value must be between -1 and 1.");var o=Math.round((e+1)/2*16383),a=o>>7&127,s=127&o;return r.toMIDIChannels(t).forEach(function(e){i.send((r.MIDI_CHANNEL_MESSAGES.pitchbend<<4)+(e-1),[s,a],i._parseTimeParameter(n.time))}),this},o.prototype._parseTimeParameter=function(e){var t,n=parseFloat(e);return"string"==typeof e&&"+"===e.substring(0,1)?n&&0<n&&(t=r.time+n):n>r.time&&(t=n),t},o.prototype._convertNoteToArray=function(e){var t=[];return Array.isArray(e)||(e=[e]),e.forEach(function(e){t.push(r.guessNoteNumber(e))}),t},"function"==typeof e&&"object"==typeof e.amd?e([],function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:t.WebMidi||(t.WebMidi=r)}(this);
},{}],"jov3":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.MidiInput=void 0;var e=require("events"),t=i(require("webmidi"));function i(e){return e&&e.__esModule?e:{default:e}}var n=function(e,t,i,n){return new(i||(i=Promise))(function(o,d){function s(e){try{r(n.next(e))}catch(t){d(t)}}function c(e){try{r(n.throw(e))}catch(t){d(t)}}function r(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,c)}r((n=n.apply(e,t||[])).next())})};class o extends e.EventEmitter{constructor(e="all"){super(),this.deviceId=e,o.enabled().then(()=>{t.default.addListener("connected",e=>{"input"===e.port.type&&this._addListeners(e.port)}),t.default.addListener("disconnected",e=>{this._removeListeners(e.port)}),t.default.inputs.forEach(e=>this._addListeners(e))})}_addListeners(e){o.connectedDevices.has(e.id)||(o.connectedDevices.set(e.id,e),this.emit("connect",this._inputToDevice(e)),e.addListener("noteon","all",t=>{"all"!==this.deviceId&&this.deviceId!==e.id||this.emit("keyDown",{note:`${t.note.name}${t.note.octave}`,midi:t.note.number,velocity:t.velocity,device:this._inputToDevice(e)})}),e.addListener("noteoff","all",t=>{"all"!==this.deviceId&&this.deviceId!==e.id||this.emit("keyUp",{note:`${t.note.name}${t.note.octave}`,midi:t.note.number,velocity:t.velocity,device:this._inputToDevice(e)})}),e.addListener("controlchange","all",t=>{"all"!==this.deviceId&&this.deviceId!==e.id||"holdpedal"===t.controller.name&&this.emit(t.value?"pedalDown":"pedalUp",{device:this._inputToDevice(e)})}))}_inputToDevice(e){return{name:e.name,id:e.id,manufacturer:e.manufacturer}}_removeListeners(e){if(o.connectedDevices.has(e.id)){const t=o.connectedDevices.get(e.id);this.emit("disconnect",this._inputToDevice(t)),o.connectedDevices.delete(e.id),t.removeListener("noteon"),t.removeListener("noteoff"),t.removeListener("controlchange")}}emit(e,t){return super.emit(e,t)}on(e,t){return super.on(e,t),this}once(e,t){return super.once(e,t),this}off(e,t){return super.off(e,t),this}static enabled(){return n(this,void 0,void 0,function*(){o._isEnabled||(yield new Promise((e,i)=>{t.default.enable(t=>{t?i(t):(o._isEnabled=!0,e())})}))})}static getDevices(){return n(this,void 0,void 0,function*(){return yield o.enabled(),t.default.inputs})}}exports.MidiInput=o,o.connectedDevices=new Map,o._isEnabled=!1;
},{"events":"FRpO","webmidi":"qDOy"}],"C6MY":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),Object.defineProperty(exports,"Piano",{enumerable:!0,get:function(){return e.Piano}}),Object.defineProperty(exports,"MidiInput",{enumerable:!0,get:function(){return r.MidiInput}});var e=require("./piano/Piano"),r=require("./midi/MidiInput");
},{"./piano/Piano":"ejM7","./midi/MidiInput":"jov3"}],"GSLc":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,i,o){var s,n=arguments.length,d=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)d=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(d=(n<3?s(d):n>3?s(t,i,d):s(t,i))||d);return n>3&&d&&Object.defineProperty(t,i,d),d},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("lit-element"),o=t(require("audiokeys")),s=require("tone"),n=require("@tonejs/piano");let d=class extends i.LitElement{constructor(){super(),this._computerKeyboard=new o.default({polyphony:1/0}),this.midi=(null===navigator||void 0===navigator?void 0:navigator.requestMIDIAccess)?new n.MidiInput:null,this.octaveLimit=5,this.device="all",this.settingsDialog=!1,window.document.addEventListener("keydown",e=>{16==e.keyCode&&this.sustainDown()}),window.document.addEventListener("keyup",e=>{16==e.keyCode&&this.sustainUp()}),this._computerKeyboard.down(e=>{s.start(),this.keyDown(e.note,.5)}),this._computerKeyboard.up(e=>{this.keyUp(e.note,.5)}),window.document.addEventListener("keydown",e=>{if(90==e.keyCode){let e=this._computerKeyboard.get("octave");e<-this.octaveLimit&&this._computerKeyboard.set("octave",e+1)}if(88==e.keyCode){let e=this._computerKeyboard.get("octave");e>this.octaveLimit&&this._computerKeyboard.set("octave",e-1)}32==e.keyCode&&0==e.repeat&&document.activeElement==document.body&&(this.dispatchEvent(new CustomEvent("playPause",{composed:!0})),e.preventDefault())}),this.midi&&(this.midi.on("keyDown",e=>{this.keyDown(e.midi,e.velocity)}),this.midi.on("keyUp",e=>{this.keyUp(e.midi,e.velocity)}),this.midi.on("pedalDown",e=>{this.sustainDown()}),this.midi.on("pedalUp",e=>{this.sustainUp()}))}keyDown(e,t){this.dispatchEvent(new CustomEvent("keyDown",{detail:{midi:e,velocity:t},composed:!0}))}sustainDown(){this.dispatchEvent(new CustomEvent("sustainDown",{composed:!0}))}sustainUp(){this.dispatchEvent(new CustomEvent("sustainUp",{composed:!0}))}sustainDown(){this.dispatchEvent(new CustomEvent("sustainDown",{composed:!0}))}sustainUp(){this.dispatchEvent(new CustomEvent("sustainUp",{composed:!0}))}keyUp(e,t){this.dispatchEvent(new CustomEvent("keyUp",{detail:{midi:e,velocity:t},composed:!0}))}updated(e){e.has("device")&&("all"===this.device.toLowerCase()?this.midi.deviceId="all":this.midi.deviceId=this.device)}render(){return i.html` <div></div> `}};e([i.property()],d.prototype,"device",void 0),e([i.property({type:Boolean})],d.prototype,"settingsDialog",void 0),d=e([i.customElement("piano-input")],d),exports.PianoInput=d;
},{"lit-element":"bhxD","audiokeys":"XjPq","tone":"GfHe","@tonejs/piano":"C6MY"}],"iEU1":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,i,s){var o,a=arguments.length,n=a<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,s);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(n=(a<3?o(n):a>3?o(t,i,n):o(t,i))||n);return a>3&&n&&Object.defineProperty(t,i,n),n},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("lit-element"),s=require("@tonejs/piano");require("./collapsible"),require("./input-range");const o=require("../util/midi"),a=require("lit-translate"),n=t(require("../util/global-state")),l=n.default.getInstance(),p=i.html` <svg
	width="16"
	height="10"
	viewBox="0 0 16 10"
	fill="none"
	xmlns="http://www.w3.org/2000/svg"
>
	<path
		d="M14.59 9.41L16 8L8 -3.49691e-07L-3.49691e-07 8L1.41 9.41L8 2.83"
		fill="currentColor"
	/>
</svg>`;let r=class extends i.LitElement{constructor(){super(...arguments),this.octaves=8,this.resizeMode="auto",this.emoji=!0,this.notetrail=!0,this.pianoroll=!0,this.notename=!1,this.savedMode=!1,this.scrollBehavior="pause",this.speed=1,this.transpose=0,this.midiinput="All",this.devices=[],this.keymap={white:{0:{note:"C",pitch:"",hidden:!1},2:{note:"D",pitch:"",hidden:!1},4:{note:"E",pitch:"",hidden:!1},5:{note:"F",pitch:"",hidden:!1},7:{note:"G",pitch:"",hidden:!1},9:{note:"A",pitch:"",hidden:!1},11:{note:"B",pitch:"",hidden:!1}},black:{1:{note:"C",pitch:"‚ôØ",hidden:!0},3:{note:"D",pitch:"‚ôØ",hidden:!0},6:{note:"F",pitch:"‚ôØ",hidden:!0},8:{note:"G",pitch:"‚ôØ",hidden:!0},10:{note:"A",pitch:"‚ôØ",hidden:!0}}},this.dialog=!1}firstUpdated(){this.octaves=this.getOctaves,this.getDevices(),this.shadowRoot.querySelectorAll("#black-notes .selection").forEach(e=>{e.innerText=""})}get getOctaves(){let e;if("manual"===this.resizeMode)return this.octaves;e=l.getMinimumRequiredOctaves()}getDevices(){s.MidiInput.getDevices().then(e=>{this.devices=[{name:a.get("shared_piano_settings_all_label"),id:"all"},...e.map(e=>({name:e.name,id:e.id})),{name:a.get("shared_piano_settings_none_label"),id:"none"}]}).catch(e=>{this.devices=[{name:a.get("shared_piano_settings_not-supported_label")}]})}get buildKeyMap(){return{whiteNotes:[0,2,4,5,7,9,11].map(e=>e+12),blackNotes:[0,1,3,0,6,8,10,0].map(e=>e?e+12:0)}}get isMIDISupported(){return!(!this.devices||!this.devices.length)&&!this.devices.map(e=>e.name).includes(a.get("shared_piano_settings_not-supported_label"))}get octaveOptions(){return this.savedMode,[a.get("shared_piano_settings_auto_label"),2,3,4,5,6,7,8]}updated(){this.dispatchEvent(new CustomEvent("settings",{detail:{dialog:this.dialog,emoji:this.emoji,octaves:this.getOctaves,resizeMode:this.resizeMode,notename:this.notename,notetrail:this.notetrail,pianoroll:this.pianoroll,midiinput:this.midiinput,scrollBehavior:this.scrollBehavior,keymap:this.keymap,speed:this.speed,transpose:this.transpose}}));let e=65;this.savedMode&&(e=45),this.style.setProperty("--settings-height",e+"vh")}octaveChanged(e){let t=parseInt(e.target.value);isNaN(t)?(this.resizeMode="auto",this.octaves=t=l.getMinimumRequiredOctaves(),e.target.value=a.get("shared_piano_settings_auto_label")):(this.resizeMode="manual",this.octaves=Math.min(Math.max(t,2),8),e.target.value=this.octaves)}keymapChanged(e,t,i,s){const{value:a}=e.target,n=t%12,l=o.midiToNoteName("‚ô≠"===a?this.buildKeyMap.whiteNotes[i]:t,!1)[0];e.target.previousElementSibling.innerText=""!==a?l===a?l:l+a:"",e.target.classList.remove("hidden"),this.keymap=Object.assign(Object.assign({},this.keymap),{[s]:Object.assign(Object.assign({},this.keymap[s]),{[n]:{note:l,pitch:"‚ô≠"===a||"‚ôØ"===a?a:"",hidden:""===a}})}),""===a&&e.target.classList.add("hidden")}handleRange(e){this.speed=[.25,.5,1,1.5,2,2.5,3][e.target.value]}static get styles(){return i.css`
			#container {
				position: relative;
				background-color: white;
			}

			#content {
				width: 100%;
				display: flex;
			}

			.settings-col {
				position: relative;
				padding: 32px;
				width: calc(50% - (32px * 2));
			}

			.settings-col h3 {
				display: inline-block;
				font-weight: bold;
				font-size: 18px;
				line-height: 27px;
				letter-spacing: 0.03em;
				margin: 0;
			}

			.settings-col h4 {
				font-weight: 400;
			}

			.settings-col p {
				font-size: 13px;
				line-height: 19px;
				letter-spacing: 0.03em;
				white-space: normal;
			}

			#keymap {
				position: relative;
				height: 100px;
			}

			.divider {
				width: 100%;
				height: 1px;
				background-color: #ccc;
				margin: 24px auto;
			}

			#white-notes {
				color: black;
				position: absolute;
				left: 0px;
				top: 0px;
				width: 100%;
				height: 100%;
				display: flex;
				flex-direction: row;
			}

			#black-notes {
				color: white;
				position: absolute;
				top: 0px;
				width: 100%;
				display: flex;
				flex-direction: row;
				height: 55%;
			}

			#black-notes div:first-child,
			#black-notes div:last-child {
				flex-grow: 0.5;
				pointer-events: none;
			}

			#keymap > div div {
				position: relative;
				order: 0;
				flex-grow: 1;
			}

			#keymap > div div.hide {
				opacity: 0;
				margin: 2px;
				pointer-events: none;
			}

			#keymap > div div:not(.accidental) {
				border: 1px solid #ccc;
			}

			.accidental span {
				display: block;
				background-color: black;
				width: calc(100% - 2px);
				margin: 0px 2px;
				height: 100%;
			}

			#keymap select {
				appearance: none;
				-moz-appearance: none;
				-webkit-appearance: none;
				background-color: white;
				color: currentColor;
				background: transparent;
				border: none;
				cursor: pointer;
				position: absolute;
				bottom: 0;
				left: 0;
				text-indent: -9999px;
				letter-spacing: 0px;
				right: 0;
				font-size: 18px;
				font-weight: bold;
				margin: 0 auto;
				height: 45%;
			}

			#keymap .selection {
				display: block;
				position: absolute;
				display: flex;
				align-items: center;
				justify-content: center;
				left: 0;
				bottom: 0;
				font-size: 18px;
				font-weight: bold;
				text-align: center;
				width: calc(100% - 2px);
				pointer-events: none;
				z-index: 2;
			}

			#keymap #white-notes .selection {
				background-color: white;
				color: black;
				height: 45%;
			}

			#keymap #black-notes .selection {
				background-color: black;
				color: white;
				height: 100%;
			}

			#keymap #white-notes select {
				color: white;
			}

			#keymap #black-notes select {
				color: black;
			}

			#keymap select option {
				color: black;
			}

			#keymap > div div::after {
				content: '';
				left: 0;
				display: block;
				width: 50%;
				height: 1px;
				left: 0;
				right: 0;
				margin: 0 auto;
				bottom: 9px;
				position: absolute;
				background-color: currentColor;
				z-index: 99;
			}

			#keymap #white-notes div::after {
				background-color: rgba(0, 0, 0, 0.3);
			}

			#keymap #black-notes select {
				height: 100%;
			}

			#keymap #black-notes select.hidden {
				color: black;
			}

			#keymap #white-notes select.hidden {
				color: white;
			}

			.setting {
				display: flex;
				align-items: center;
				justify-content: space-between;
				padding: 20px 0;
				position: relative;
				height: 20px;
			}

			.setting:not(:last-child) {
				border-bottom: 1px solid #ccc;
			}

			.setting label {
				float: left;
				font-size: 18px;
			}

			.setting input[type='text'],
			.setting select {
				float: right;
				font-size: 18px;
				border: none;
				background-color: white;
				-moz-appearance: none;
				-webkit-appearance: none;
				appearance: none;
				border-radius: 0px;
				color: #007BC7;
				padding-right: 25px;
				text-align: right;
			}

			.setting select option {
				color: black;
				text-align: center;
			}

			.setting select[disabled] {
				color: #aaa;
			}

			.setting select[disabled] {
				color: #aaa;
			}

			select {
				font-family: 'Poppins', sans-serif;
			}

			.setting svg {
				color: #007BC7;
				position: absolute;
				pointer-events: none;
				right: 0;
				top: 50%;
				transform: translateY(-50%) rotate(180deg);
				margin-top: 3px;
				transform-origin: center center;
			}

			.settings-col p {
				margin-top: 25px;
			}

			.setting-slider {
				position: relative;
			}

			.setting-value {
				position: absolute;
				font-size: 18px;
				width: 125px;
				transform: translateX(-100%);
				margin-left: -15px;
				text-align: right;
				color: #007BC7;
			}

			@media (max-width: 992px) {
				#content {
					display: block;
					max-height: var(--settings-height);
					width: 100%;
				}

				.settings-col {
					padding: 25px;
					width: calc(100% - (25px * 2));
				}

				.settings-col:first-child {
					padding-bottom: 0;
				}

				.settings-col h3 {
					font-size: 16px;
				}

				.setting {
					padding: 15px 0;
				}

				.setting label {
					font-size: 16px;
				}

				.setting input,
				.setting select {
					font-size: 16px;
				}

				.setting svg {
					width: 12px;
					height: 6px;
					height: auto;
					margin-top: 0;
				}
			}

			@media (max-width: 450px) {
				.setting-value.transpose-value {
					right: 0;
					bottom: -30px;
					transform: translateX(0);
				}
			}
		`}render(){return i.html`
			<div id="container">
				<div id="settings">
					<piano-collapsible @onExpand=${()=>{this.dialog=!0,this.dispatchEvent(new CustomEvent("settingsOpen"))}}
									   @onCollapse=${()=>{this.dialog=!1,this.dispatchEvent(new CustomEvent("settingsClose"))}} label="shared_piano_settings_label" .icon=${i.html`
								<style>
									@media (max-width: 768px) {
										#settings-icon {
											top: 2px !important;
										}
									}
								</style>
								<svg
									id="settings-icon"
									style="display: block; position: relative; top: 1px; max-height: 100%;"
									width="100%"
									viewBox="0 0 31 31"
									fill="none"
									xmlns="http://www.w3.org/2000/svg"
								>
									<path
										d="M26.7055 15.5C26.7055 14.973 26.659 14.477 26.597 13.981L29.8675 11.4235C30.162 11.191 30.2395 10.7725 30.0535 10.4315L26.9535 5.0685C26.7675 4.7275 26.349 4.6035 26.008 4.7275L22.1485 6.2775C21.3425 5.6575 20.4745 5.146 19.529 4.7585L18.94 0.651C18.8935 0.279 18.568 0 18.1805 0H11.9805C11.593 0 11.2675 0.279 11.221 0.651L10.632 4.7585C9.68646 5.146 8.81846 5.673 8.01246 6.2775L4.15296 4.7275C3.79646 4.588 3.39346 4.7275 3.20746 5.0685L0.107464 10.4315C-0.094036 10.7725 -0.00103597 11.191 0.293464 11.4235L3.56396 13.981C3.50196 14.477 3.45546 14.9885 3.45546 15.5C3.45546 16.0115 3.50196 16.523 3.56396 17.019L0.293464 19.5765C-0.00103597 19.809 -0.078536 20.2275 0.107464 20.5685L3.20746 25.9315C3.39346 26.2725 3.81196 26.3965 4.15296 26.2725L8.01246 24.7225C8.81846 25.3425 9.68646 25.854 10.632 26.2415L11.221 30.349C11.2675 30.721 11.593 31 11.9805 31H18.1805C18.568 31 18.8935 30.721 18.94 30.349L19.529 26.2415C20.4745 25.854 21.3425 25.327 22.1485 24.7225L26.008 26.2725C26.3645 26.412 26.7675 26.2725 26.9535 25.9315L30.0535 20.5685C30.2395 20.2275 30.162 19.809 29.8675 19.5765L26.597 17.019C26.659 16.523 26.7055 16.027 26.7055 15.5ZM15.0805 20.925C12.089 20.925 9.65546 18.4915 9.65546 15.5C9.65546 12.5085 12.089 10.075 15.0805 10.075C18.072 10.075 20.5055 12.5085 20.5055 15.5C20.5055 18.4915 18.072 20.925 15.0805 20.925Z"
										fill="#666666"
									/>
								</svg>
							`}
						>
						<div id="content">
							<div class="settings-col">
								<h3>${a.get("shared_piano_settings_settings-title")}</h3>
								<div class="setting">
									<label for="octaves">${a.get("shared_piano_settings_octaves_label")}</label>
									<select
										@input=${this.octaveChanged.bind(this)}
										name="octaves"
										dir="rtl"
									>
										${this.octaveOptions.map(e=>i.html`<option
												value="${e}"
												?selected=${"auto"!==this.resizeMode&&this.octaves===e}
											>
												${e}
											</option>`)}
									</select>
									${p}
								</div>

								<div class="setting">
									<label for="notenames">${a.get("shared_piano_settings_note-names_label")}</label>
									<select
                                        name="notenames"
                                        dir="rtl"
										@input=${e=>this.notename="show"===e.target.value} >
										<option value="show" ?selected=${this.notename}>${a.get("shared_piano_settings_show_label")}</option>
										<option value="hide" ?selected=${!this.notename}>${a.get("shared_piano_settings_hide_label")}</option>
									</select>
									${p}
								</div>

                                <div class="setting">
									<label for="emoji">${a.get("shared_piano_settings_emojis_label")}</label>
									<select
                                        name="emoji"
                                        dir="rtl"
										@input=${e=>this.emoji="show"===e.target.value} >
										<option value="show" ?selected=${this.emoji}>${a.get("shared_piano_settings_show_label")}</option>
										<option value="hide" ?selected=${!this.emoji}>${a.get("shared_piano_settings_hide_label")}</option>
									</select>
									${p}
								</div>

                                <div class="setting">
									<label for="notetrail">${a.get("shared_piano_settings_note-trails_label")}</label>
									<select
                                        name="notetrail"
                                        dir="rtl"
										@input=${e=>this.notetrail="show"===e.target.value} >
										<option value="show" ?selected=${this.notetrail}>${a.get("shared_piano_settings_show_label")}</option>
										<option value="hide" ?selected=${!this.notetrail}>${a.get("shared_piano_settings_hide_label")}</option>
									</select>
									${p}
								</div>

								${this.savedMode?i.html``:i.html`
									<div class="setting">
										<label for="scrollbehavior">${a.get("shared_piano_settings_scroll-behavior_label")}</label>
										<select
											name="scrollbehavior"
											dir="rtl"
											@input=${e=>this.scrollBehavior=e.target.value} >
											<option value="pause" ?selected=${"pause"===this.scrollBehavior}>${a.get("shared_piano_settings_scroll-behavior_pause_label")}</option>
											<option value="continuous" ?selected=${"continuous"===this.scrollBehavior}>${a.get("shared_piano_settings_scroll-behavior_scroll_label")}</option>
										</select>
										${p}
									</div>
								`}

								<div class="setting">
									<label for="mididevice">${a.get("shared_piano_settings_midi-device_label")}</label>
									<select
										name="mididevice"
                                        dir="rtl"
										.disabled=${!this.isMIDISupported}
										@input=${e=>this.midiinput=e.target.value}
									>
										${this.devices.map(e=>i.html`
												<option value="${e.id}" ?selected=${this.midiinput===e}>
													${e.name}
												</option>
											`)}
									</select>
									${i.svg`
										<svg width="16" height="10" viewBox="0 0 16 10" fill="none" xmlns="http://www.w3.org/2000/svg">
											<path d="M14.59 9.41L16 8L8 -3.49691e-07L-3.49691e-07 8L1.41 9.41L8 2.83" fill=${this.isMIDISupported?"currentColor":"#aaa"} />
										</svg>
									`}
								</div>

								${this.savedMode?i.html`
										<div class="setting">
											<label for="fader">${a.get("shared_piano_settings_speed_label")}</label>
											<div class="setting-slider">
												<span class="setting-value">${this.speed}x</span>
												<input-range
													@input=${this.handleRange.bind(this)}
													min="0"
													max="6"
													id="fader"
													value="2"
													step="1"
													.snappable=${!0}
													.dataRange=${[.25,.5,1,1.5,2,2.5,3]}
												>
												</input-range>
											</div>
										</div>
										<div class="setting">
											<label for="transpose">${a.get("shared_piano_settings_transpose_label")}</label>
											<div class="setting-slider">
												<span class="setting-value transpose-value"
													>${(this.transpose>0?"+":"")+this.transpose} ${Math.abs(this.transpose)>=2||0===Math.abs(this.transpose)?a.get("shared_piano_settings_half-step-plural_label"):a.get("shared_piano_settings_half-step-single_label")}
												</span>
												<input-range
													@input=${e=>this.transpose=e.target.value}
													pattern="d+"
													id="transpose"
													type="number"
													value="${this.transpose}"
													min="-11"
													max="11"
												>
												</input-range>
											</div>
										</div>`:""}
							</div>
							<div class="settings-col">
								<h4>Custom note names</h4>
								<div id="keymap">
									<div id="white-notes">
										${this.buildKeyMap.whiteNotes.map((e,t)=>i.html`
													<div class="${0===e?"hide":""}">
														<span class="selection"
															>${o.midiToNoteName(e,!1)}</span
														>
														<select
															@input=${i=>this.keymapChanged(i,e,t,"white")}
														>
															<option value=${o.midiToNoteName(e,!1)}>
																${o.midiToNoteName(e,!1)}
															</option>
															<option value="">${a.get("shared_piano_settings_none_label")}</option>
														</select>
													</div>
												`)}
									</div>
									<div id="black-notes">
										${this.buildKeyMap.blackNotes.map((e,t)=>i.html`
													<div class="accidental${0===e?" hide":""}">
														<span>
															<span class="selection"
																>${o.midiToNoteName(e,!1)}</span
															>
															<select
																@input=${i=>this.keymapChanged(i,e,t,"black")}
															>
																<option value="‚ôØ">
																	${o.midiToNoteName(e,!1)}
																</option>
																<option value="‚ô≠">
																	${o.midiToNoteName(this.buildKeyMap.whiteNotes[t],!1)+"‚ô≠"}
																</option>
																<option value="" selected>${a.get("shared_piano_settings_none_label")}</option>
															</select>
														</span>
													</div>
												`)}
									</div>
								</div>
								<p>${a.get("shared_piano_settings_keymap-description")}</p>
							</div>
						</div>
					</piano-collapsible>
				</div>
			</div>
		`}};e([i.property()],r.prototype,"octaves",void 0),e([i.property()],r.prototype,"resizeMode",void 0),e([i.property()],r.prototype,"emoji",void 0),e([i.property()],r.prototype,"notetrail",void 0),e([i.property()],r.prototype,"pianoroll",void 0),e([i.property()],r.prototype,"notename",void 0),e([i.property()],r.prototype,"savedMode",void 0),e([i.property({type:String})],r.prototype,"scrollBehavior",void 0),e([i.property()],r.prototype,"speed",void 0),e([i.property()],r.prototype,"transpose",void 0),e([i.property()],r.prototype,"midiinput",void 0),e([i.property()],r.prototype,"devices",void 0),e([i.property()],r.prototype,"keymap",void 0),e([i.property({type:Boolean})],r.prototype,"dialog",void 0),r=e([i.customElement("piano-settings")],r),exports.PianoSettings=r;
},{"lit-element":"bhxD","@tonejs/piano":"C6MY","./collapsible":"HB37","./input-range":"FdUl","../util/midi":"YYaI","lit-translate":"NZZ9","../util/global-state":"M8Ve"}],"Zc4g":[function(require,module,exports) {
module.exports="clap.0957ccef.mp3";
},{}],"qMA9":[function(require,module,exports) {
module.exports="hatclosed.d7a0b5f3.mp3";
},{}],"wENn":[function(require,module,exports) {
module.exports="hatopen.52480d45.mp3";
},{}],"SwpJ":[function(require,module,exports) {
module.exports="snare.7c2d195b.mp3";
},{}],"YD4f":[function(require,module,exports) {
module.exports="kick.3eb094af.mp3";
},{}],"UfpE":[function(require,module,exports) {
module.exports="tom1.5d0ba482.mp3";
},{}],"iuSI":[function(require,module,exports) {
module.exports="tom2.2e4dd351.mp3";
},{}],"Ohaj":[function(require,module,exports) {
module.exports="tom3.b98cd003.mp3";
},{}],"VwKp":[function(require,module,exports) {
module.exports="tom4.d9427246.mp3";
},{}],"SkiN":[function(require,module,exports) {
module.exports="clap.57a2cad4.mp3";
},{}],"IOk3":[function(require,module,exports) {
module.exports="hatclosed.26dcf30f.mp3";
},{}],"EEcE":[function(require,module,exports) {
module.exports="hatopen.2e44bf1a.mp3";
},{}],"Kiih":[function(require,module,exports) {
module.exports="kick.4330fb78.mp3";
},{}],"Sann":[function(require,module,exports) {
module.exports="snare.9148c7c7.mp3";
},{}],"CW3E":[function(require,module,exports) {
module.exports="tom1.1da98a6a.mp3";
},{}],"H3y2":[function(require,module,exports) {
module.exports="tom2.1d7c01e3.mp3";
},{}],"CZe7":[function(require,module,exports) {
module.exports="tom3.f90ca4b1.mp3";
},{}],"ufQi":[function(require,module,exports) {
module.exports="tom4.3f8afb9a.mp3";
},{}],"J93P":[function(require,module,exports) {
module.exports="A2.80966957.mp3";
},{}],"CNsj":[function(require,module,exports) {
module.exports="A4.f93d2aa3.mp3";
},{}],"sOZW":[function(require,module,exports) {
module.exports="A3.cc7d0a4b.mp3";
},{}],"TQ7Q":[function(require,module,exports) {
module.exports="A5.c4c561f2.mp3";
},{}],"iHRj":[function(require,module,exports) {
module.exports="A6.7b7ed4b2.mp3";
},{}],"KMSY":[function(require,module,exports) {
module.exports="C2.2c273809.mp3";
},{}],"FzXA":[function(require,module,exports) {
module.exports="C3.bf6e7680.mp3";
},{}],"A7QF":[function(require,module,exports) {
module.exports="C4.b5cfeca7.mp3";
},{}],"rRWr":[function(require,module,exports) {
module.exports="C5.53bc9580.mp3";
},{}],"yjw9":[function(require,module,exports) {
module.exports="C6.0da1964c.mp3";
},{}],"FUP4":[function(require,module,exports) {
module.exports="Ds2.4a170d3b.mp3";
},{}],"mDeL":[function(require,module,exports) {
module.exports="Ds3.b4db93e6.mp3";
},{}],"oowq":[function(require,module,exports) {
module.exports="Ds4.2893b2e1.mp3";
},{}],"lsSk":[function(require,module,exports) {
module.exports="Ds5.11ce3506.mp3";
},{}],"IGjz":[function(require,module,exports) {
module.exports="Ds6.1000e644.mp3";
},{}],"yzhL":[function(require,module,exports) {
module.exports="Fs2.2de4f8b3.mp3";
},{}],"QpXs":[function(require,module,exports) {
module.exports="Fs3.56472ce4.mp3";
},{}],"tqCy":[function(require,module,exports) {
module.exports="Fs4.e2d6f833.mp3";
},{}],"AJxL":[function(require,module,exports) {
module.exports="Fs5.5e8a66b3.mp3";
},{}],"v8Oo":[function(require,module,exports) {
module.exports="Fs6.62f6e622.mp3";
},{}],"aTEF":[function(require,module,exports) {
module.exports="A2.32eab706.mp3";
},{}],"phg0":[function(require,module,exports) {
module.exports="A3.ead476da.mp3";
},{}],"FbML":[function(require,module,exports) {
module.exports="A4.79029edf.mp3";
},{}],"VEM5":[function(require,module,exports) {
module.exports="A5.bda0be10.mp3";
},{}],"pHfy":[function(require,module,exports) {
module.exports="A6.e1417bdc.mp3";
},{}],"SQfZ":[function(require,module,exports) {
module.exports="C2.4df4b0a2.mp3";
},{}],"rUhQ":[function(require,module,exports) {
module.exports="C3.9a2d50aa.mp3";
},{}],"mvmc":[function(require,module,exports) {
module.exports="C4.31bc4670.mp3";
},{}],"h187":[function(require,module,exports) {
module.exports="C5.4f7ad86c.mp3";
},{}],"HCRr":[function(require,module,exports) {
module.exports="C6.655fa406.mp3";
},{}],"lF9T":[function(require,module,exports) {
module.exports="Ds2.005b7bcb.mp3";
},{}],"bdub":[function(require,module,exports) {
module.exports="Ds3.bb419bea.mp3";
},{}],"X6R2":[function(require,module,exports) {
module.exports="Ds4.420faf9f.mp3";
},{}],"zcJN":[function(require,module,exports) {
module.exports="Ds5.0f469a01.mp3";
},{}],"dCnd":[function(require,module,exports) {
module.exports="Ds6.34e23817.mp3";
},{}],"vOJE":[function(require,module,exports) {
module.exports="Fs2.bcd4946c.mp3";
},{}],"rcRx":[function(require,module,exports) {
module.exports="Fs3.99dbdd37.mp3";
},{}],"p5He":[function(require,module,exports) {
module.exports="Fs4.e400a573.mp3";
},{}],"fEIa":[function(require,module,exports) {
module.exports="Fs5.60e92bd7.mp3";
},{}],"n8g2":[function(require,module,exports) {
module.exports="Fs6.a04fb343.mp3";
},{}],"VGtQ":[function(require,module,exports) {
module.exports="A2.d6dffdeb.mp3";
},{}],"OJyt":[function(require,module,exports) {
module.exports="A3.815e4415.mp3";
},{}],"RBG7":[function(require,module,exports) {
module.exports="A4.f6abb568.mp3";
},{}],"GfSY":[function(require,module,exports) {
module.exports="A5.c9ce2e01.mp3";
},{}],"n8N8":[function(require,module,exports) {
module.exports="A6.88dacecc.mp3";
},{}],"RHWv":[function(require,module,exports) {
module.exports="C2.af46ea79.mp3";
},{}],"XiuV":[function(require,module,exports) {
module.exports="C3.669cac8c.mp3";
},{}],"JTfO":[function(require,module,exports) {
module.exports="C4.8ec3eb33.mp3";
},{}],"ULro":[function(require,module,exports) {
module.exports="C5.6bae67e1.mp3";
},{}],"hBlO":[function(require,module,exports) {
module.exports="C6.80f12b44.mp3";
},{}],"J2U6":[function(require,module,exports) {
module.exports="Ds2.55ee830a.mp3";
},{}],"iuCr":[function(require,module,exports) {
module.exports="Ds3.25cf934b.mp3";
},{}],"ANRL":[function(require,module,exports) {
module.exports="Ds4.363205e2.mp3";
},{}],"geDH":[function(require,module,exports) {
module.exports="Ds5.acea7245.mp3";
},{}],"RyZ4":[function(require,module,exports) {
module.exports="Ds6.177c8ff5.mp3";
},{}],"AQ2I":[function(require,module,exports) {
module.exports="Fs2.261e23ac.mp3";
},{}],"NWlq":[function(require,module,exports) {
module.exports="Fs3.c05d9aa4.mp3";
},{}],"eK4J":[function(require,module,exports) {
module.exports="Fs4.97366f53.mp3";
},{}],"CvQ2":[function(require,module,exports) {
module.exports="Fs5.ed3eb947.mp3";
},{}],"FT36":[function(require,module,exports) {
module.exports="Fs6.d1d73465.mp3";
},{}],"xquR":[function(require,module,exports) {
module.exports="A2.d39e6a1e.mp3";
},{}],"oCEF":[function(require,module,exports) {
module.exports="A3.2583ee7f.mp3";
},{}],"EgI5":[function(require,module,exports) {
module.exports="A4.02c12517.mp3";
},{}],"hD1p":[function(require,module,exports) {
module.exports="A5.20b412cf.mp3";
},{}],"aHrH":[function(require,module,exports) {
module.exports="A6.46657279.mp3";
},{}],"O98v":[function(require,module,exports) {
module.exports="C2.9e3b6556.mp3";
},{}],"PSor":[function(require,module,exports) {
module.exports="C3.54c3718a.mp3";
},{}],"IaM0":[function(require,module,exports) {
module.exports="C4.3eba7397.mp3";
},{}],"H4nC":[function(require,module,exports) {
module.exports="C5.731ab831.mp3";
},{}],"jwF6":[function(require,module,exports) {
module.exports="C6.5b196566.mp3";
},{}],"RTDk":[function(require,module,exports) {
module.exports="Ds2.bfd970c2.mp3";
},{}],"x70I":[function(require,module,exports) {
module.exports="Ds3.b7b34f91.mp3";
},{}],"Xldp":[function(require,module,exports) {
module.exports="Ds4.8eced78b.mp3";
},{}],"mZiq":[function(require,module,exports) {
module.exports="Ds5.c027bcf1.mp3";
},{}],"x4PV":[function(require,module,exports) {
module.exports="Ds6.aac2afc3.mp3";
},{}],"uHC9":[function(require,module,exports) {
module.exports="Fs2.ac203d22.mp3";
},{}],"Gfsd":[function(require,module,exports) {
module.exports="Fs3.09fd5617.mp3";
},{}],"qPm5":[function(require,module,exports) {
module.exports="Fs4.7b9b1f11.mp3";
},{}],"Gw23":[function(require,module,exports) {
module.exports="Fs5.4516d628.mp3";
},{}],"fPtO":[function(require,module,exports) {
module.exports="Fs6.ef926ba6.mp3";
},{}],"kwCh":[function(require,module,exports) {
module.exports="A2.c94f91ab.mp3";
},{}],"lgnc":[function(require,module,exports) {
module.exports="A3.44853c04.mp3";
},{}],"nbDR":[function(require,module,exports) {
module.exports="A4.4849e599.mp3";
},{}],"RofD":[function(require,module,exports) {
module.exports="A5.1b9b02ba.mp3";
},{}],"zEPI":[function(require,module,exports) {
module.exports="A6.8f960bfa.mp3";
},{}],"qp6f":[function(require,module,exports) {
module.exports="C2.e247094b.mp3";
},{}],"H2PA":[function(require,module,exports) {
module.exports="C3.254276f0.mp3";
},{}],"BpCZ":[function(require,module,exports) {
module.exports="C4.858d5d62.mp3";
},{}],"aFHv":[function(require,module,exports) {
module.exports="C5.c7a85606.mp3";
},{}],"RcWf":[function(require,module,exports) {
module.exports="C6.a1140119.mp3";
},{}],"pqxP":[function(require,module,exports) {
module.exports="Ds2.2bcba60e.mp3";
},{}],"jJDS":[function(require,module,exports) {
module.exports="Ds3.cc2b0f02.mp3";
},{}],"Mp0n":[function(require,module,exports) {
module.exports="Ds4.4bbbf3a1.mp3";
},{}],"G9pM":[function(require,module,exports) {
module.exports="Ds5.8d8cb316.mp3";
},{}],"wal2":[function(require,module,exports) {
module.exports="Ds6.a7417393.mp3";
},{}],"r2L3":[function(require,module,exports) {
module.exports="Fs2.ed18b5d5.mp3";
},{}],"FqKb":[function(require,module,exports) {
module.exports="Fs3.429fd4e3.mp3";
},{}],"oX1i":[function(require,module,exports) {
module.exports="Fs4.125fc4cf.mp3";
},{}],"KOnZ":[function(require,module,exports) {
module.exports="Fs5.b5db8e30.mp3";
},{}],"I2md":[function(require,module,exports) {
module.exports="Fs6.1295899b.mp3";
},{}],"wXTg":[function(require,module,exports) {
module.exports={metronome:require("./../metronome.mp3"),"drum-kit":{clap:require("./../drum-kit/clap.mp3"),hatclosed:require("./../drum-kit/hatclosed.mp3"),hatopen:require("./../drum-kit/hatopen.mp3"),snare:require("./../drum-kit/snare.mp3"),kick:require("./../drum-kit/kick.mp3"),tom1:require("./../drum-kit/tom1.mp3"),tom2:require("./../drum-kit/tom2.mp3"),tom3:require("./../drum-kit/tom3.mp3"),tom4:require("./../drum-kit/tom4.mp3")},"drum-machine":{clap:require("./../drum-machine/clap.mp3"),hatclosed:require("./../drum-machine/hatclosed.mp3"),hatopen:require("./../drum-machine/hatopen.mp3"),kick:require("./../drum-machine/kick.mp3"),snare:require("./../drum-machine/snare.mp3"),tom1:require("./../drum-machine/tom1.mp3"),tom2:require("./../drum-machine/tom2.mp3"),tom3:require("./../drum-machine/tom3.mp3"),tom4:require("./../drum-machine/tom4.mp3")},marimba:{A2:require("./../marimba/A2.mp3"),A4:require("./../marimba/A4.mp3"),A3:require("./../marimba/A3.mp3"),A5:require("./../marimba/A5.mp3"),A6:require("./../marimba/A6.mp3"),C2:require("./../marimba/C2.mp3"),C3:require("./../marimba/C3.mp3"),C4:require("./../marimba/C4.mp3"),C5:require("./../marimba/C5.mp3"),C6:require("./../marimba/C6.mp3"),Ds2:require("./../marimba/Ds2.mp3"),Ds3:require("./../marimba/Ds3.mp3"),Ds4:require("./../marimba/Ds4.mp3"),Ds5:require("./../marimba/Ds5.mp3"),Ds6:require("./../marimba/Ds6.mp3"),Fs2:require("./../marimba/Fs2.mp3"),Fs3:require("./../marimba/Fs3.mp3"),Fs4:require("./../marimba/Fs4.mp3"),Fs5:require("./../marimba/Fs5.mp3"),Fs6:require("./../marimba/Fs6.mp3")},strings:{A2:require("./../strings/A2.mp3"),A3:require("./../strings/A3.mp3"),A4:require("./../strings/A4.mp3"),A5:require("./../strings/A5.mp3"),A6:require("./../strings/A6.mp3"),C2:require("./../strings/C2.mp3"),C3:require("./../strings/C3.mp3"),C4:require("./../strings/C4.mp3"),C5:require("./../strings/C5.mp3"),C6:require("./../strings/C6.mp3"),Ds2:require("./../strings/Ds2.mp3"),Ds3:require("./../strings/Ds3.mp3"),Ds4:require("./../strings/Ds4.mp3"),Ds5:require("./../strings/Ds5.mp3"),Ds6:require("./../strings/Ds6.mp3"),Fs2:require("./../strings/Fs2.mp3"),Fs3:require("./../strings/Fs3.mp3"),Fs4:require("./../strings/Fs4.mp3"),Fs5:require("./../strings/Fs5.mp3"),Fs6:require("./../strings/Fs6.mp3")},piano:{A2:require("./../piano/A2.mp3"),A3:require("./../piano/A3.mp3"),A4:require("./../piano/A4.mp3"),A5:require("./../piano/A5.mp3"),A6:require("./../piano/A6.mp3"),C2:require("./../piano/C2.mp3"),C3:require("./../piano/C3.mp3"),C4:require("./../piano/C4.mp3"),C5:require("./../piano/C5.mp3"),C6:require("./../piano/C6.mp3"),Ds2:require("./../piano/Ds2.mp3"),Ds3:require("./../piano/Ds3.mp3"),Ds4:require("./../piano/Ds4.mp3"),Ds5:require("./../piano/Ds5.mp3"),Ds6:require("./../piano/Ds6.mp3"),Fs2:require("./../piano/Fs2.mp3"),Fs3:require("./../piano/Fs3.mp3"),Fs4:require("./../piano/Fs4.mp3"),Fs5:require("./../piano/Fs5.mp3"),Fs6:require("./../piano/Fs6.mp3")},synth:{A2:require("./../synth/A2.mp3"),A3:require("./../synth/A3.mp3"),A4:require("./../synth/A4.mp3"),A5:require("./../synth/A5.mp3"),A6:require("./../synth/A6.mp3"),C2:require("./../synth/C2.mp3"),C3:require("./../synth/C3.mp3"),C4:require("./../synth/C4.mp3"),C5:require("./../synth/C5.mp3"),C6:require("./../synth/C6.mp3"),Ds2:require("./../synth/Ds2.mp3"),Ds3:require("./../synth/Ds3.mp3"),Ds4:require("./../synth/Ds4.mp3"),Ds5:require("./../synth/Ds5.mp3"),Ds6:require("./../synth/Ds6.mp3"),Fs2:require("./../synth/Fs2.mp3"),Fs3:require("./../synth/Fs3.mp3"),Fs4:require("./../synth/Fs4.mp3"),Fs5:require("./../synth/Fs5.mp3"),Fs6:require("./../synth/Fs6.mp3")},woodwind:{A2:require("./../woodwind/A2.mp3"),A3:require("./../woodwind/A3.mp3"),A4:require("./../woodwind/A4.mp3"),A5:require("./../woodwind/A5.mp3"),A6:require("./../woodwind/A6.mp3"),C2:require("./../woodwind/C2.mp3"),C3:require("./../woodwind/C3.mp3"),C4:require("./../woodwind/C4.mp3"),C5:require("./../woodwind/C5.mp3"),C6:require("./../woodwind/C6.mp3"),Ds2:require("./../woodwind/Ds2.mp3"),Ds3:require("./../woodwind/Ds3.mp3"),Ds4:require("./../woodwind/Ds4.mp3"),Ds5:require("./../woodwind/Ds5.mp3"),Ds6:require("./../woodwind/Ds6.mp3"),Fs2:require("./../woodwind/Fs2.mp3"),Fs3:require("./../woodwind/Fs3.mp3"),Fs4:require("./../woodwind/Fs4.mp3"),Fs5:require("./../woodwind/Fs5.mp3"),Fs6:require("./../woodwind/Fs6.mp3")}};
},{"./../metronome.mp3":"X6xz","./../drum-kit/clap.mp3":"Zc4g","./../drum-kit/hatclosed.mp3":"qMA9","./../drum-kit/hatopen.mp3":"wENn","./../drum-kit/snare.mp3":"SwpJ","./../drum-kit/kick.mp3":"YD4f","./../drum-kit/tom1.mp3":"UfpE","./../drum-kit/tom2.mp3":"iuSI","./../drum-kit/tom3.mp3":"Ohaj","./../drum-kit/tom4.mp3":"VwKp","./../drum-machine/clap.mp3":"SkiN","./../drum-machine/hatclosed.mp3":"IOk3","./../drum-machine/hatopen.mp3":"EEcE","./../drum-machine/kick.mp3":"Kiih","./../drum-machine/snare.mp3":"Sann","./../drum-machine/tom1.mp3":"CW3E","./../drum-machine/tom2.mp3":"H3y2","./../drum-machine/tom3.mp3":"CZe7","./../drum-machine/tom4.mp3":"ufQi","./../marimba/A2.mp3":"J93P","./../marimba/A4.mp3":"CNsj","./../marimba/A3.mp3":"sOZW","./../marimba/A5.mp3":"TQ7Q","./../marimba/A6.mp3":"iHRj","./../marimba/C2.mp3":"KMSY","./../marimba/C3.mp3":"FzXA","./../marimba/C4.mp3":"A7QF","./../marimba/C5.mp3":"rRWr","./../marimba/C6.mp3":"yjw9","./../marimba/Ds2.mp3":"FUP4","./../marimba/Ds3.mp3":"mDeL","./../marimba/Ds4.mp3":"oowq","./../marimba/Ds5.mp3":"lsSk","./../marimba/Ds6.mp3":"IGjz","./../marimba/Fs2.mp3":"yzhL","./../marimba/Fs3.mp3":"QpXs","./../marimba/Fs4.mp3":"tqCy","./../marimba/Fs5.mp3":"AJxL","./../marimba/Fs6.mp3":"v8Oo","./../strings/A2.mp3":"aTEF","./../strings/A3.mp3":"phg0","./../strings/A4.mp3":"FbML","./../strings/A5.mp3":"VEM5","./../strings/A6.mp3":"pHfy","./../strings/C2.mp3":"SQfZ","./../strings/C3.mp3":"rUhQ","./../strings/C4.mp3":"mvmc","./../strings/C5.mp3":"h187","./../strings/C6.mp3":"HCRr","./../strings/Ds2.mp3":"lF9T","./../strings/Ds3.mp3":"bdub","./../strings/Ds4.mp3":"X6R2","./../strings/Ds5.mp3":"zcJN","./../strings/Ds6.mp3":"dCnd","./../strings/Fs2.mp3":"vOJE","./../strings/Fs3.mp3":"rcRx","./../strings/Fs4.mp3":"p5He","./../strings/Fs5.mp3":"fEIa","./../strings/Fs6.mp3":"n8g2","./../piano/A2.mp3":"VGtQ","./../piano/A3.mp3":"OJyt","./../piano/A4.mp3":"RBG7","./../piano/A5.mp3":"GfSY","./../piano/A6.mp3":"n8N8","./../piano/C2.mp3":"RHWv","./../piano/C3.mp3":"XiuV","./../piano/C4.mp3":"JTfO","./../piano/C5.mp3":"ULro","./../piano/C6.mp3":"hBlO","./../piano/Ds2.mp3":"J2U6","./../piano/Ds3.mp3":"iuCr","./../piano/Ds4.mp3":"ANRL","./../piano/Ds5.mp3":"geDH","./../piano/Ds6.mp3":"RyZ4","./../piano/Fs2.mp3":"AQ2I","./../piano/Fs3.mp3":"NWlq","./../piano/Fs4.mp3":"eK4J","./../piano/Fs5.mp3":"CvQ2","./../piano/Fs6.mp3":"FT36","./../synth/A2.mp3":"xquR","./../synth/A3.mp3":"oCEF","./../synth/A4.mp3":"EgI5","./../synth/A5.mp3":"hD1p","./../synth/A6.mp3":"aHrH","./../synth/C2.mp3":"O98v","./../synth/C3.mp3":"PSor","./../synth/C4.mp3":"IaM0","./../synth/C5.mp3":"H4nC","./../synth/C6.mp3":"jwF6","./../synth/Ds2.mp3":"RTDk","./../synth/Ds3.mp3":"x70I","./../synth/Ds4.mp3":"Xldp","./../synth/Ds5.mp3":"mZiq","./../synth/Ds6.mp3":"x4PV","./../synth/Fs2.mp3":"uHC9","./../synth/Fs3.mp3":"Gfsd","./../synth/Fs4.mp3":"qPm5","./../synth/Fs5.mp3":"Gw23","./../synth/Fs6.mp3":"fPtO","./../woodwind/A2.mp3":"kwCh","./../woodwind/A3.mp3":"lgnc","./../woodwind/A4.mp3":"nbDR","./../woodwind/A5.mp3":"RofD","./../woodwind/A6.mp3":"zEPI","./../woodwind/C2.mp3":"qp6f","./../woodwind/C3.mp3":"H2PA","./../woodwind/C4.mp3":"BpCZ","./../woodwind/C5.mp3":"aFHv","./../woodwind/C6.mp3":"RcWf","./../woodwind/Ds2.mp3":"pqxP","./../woodwind/Ds3.mp3":"jJDS","./../woodwind/Ds4.mp3":"Mp0n","./../woodwind/Ds5.mp3":"G9pM","./../woodwind/Ds6.mp3":"wal2","./../woodwind/Fs2.mp3":"r2L3","./../woodwind/Fs3.mp3":"FqKb","./../woodwind/Fs4.mp3":"oX1i","./../woodwind/Fs5.mp3":"KOnZ","./../woodwind/Fs6.mp3":"I2md"}],"rh7s":[function(require,module,exports) {
"use strict";var t=this&&this.__decorate||function(t,e,r,o){var s,i=arguments.length,n=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,r):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,r,o);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(n=(i<3?s(n):i>3?s(e,r,n):s(e,r))||n);return i>3&&n&&Object.defineProperty(e,r,n),n};Object.defineProperty(exports,"__esModule",{value:!0});const e=require("lit-element");let r=class extends e.LitElement{constructor(){super(...arguments),this.color="#666666",this.offset=187,this.duration=1.4,this.size=65}render(){return e.html`
			<style>
				#container {
					display: flex;
					align-items: center;
					position: relative;
				}

				#spinner {
					display: block;
					width: ${this.size}px;
					height: ${this.size}px;
					min-height: 100%;
					animation: rotator ${this.duration}s linear infinite;
				}

				.spinner-path {
					stroke-dasharray: ${this.offset};
					stroke-dashoffset: 0;
					transform-origin: center;
					stroke: ${this.color};
					animation: dash ${this.duration}s ease-in-out infinite;
				}

				@keyframes rotator {
					0% { transform: rotate(0deg); }
					100% { transform: rotate(270deg); }
				}

				@keyframes dash {
					0% { stroke-dashoffset: ${this.offset}; }
					50% {
						stroke-dashoffset: ${this.offset/4};
						transform:rotate(135deg);
					}
					100% {
						stroke-dashoffset: ${this.offset};
						transform:rotate(450deg);
					}
				}
			</style>
			<div id="container">
				<svg id="spinner" viewBox="0 0 66 66" xmlns="http://www.w3.org/2000/svg">
					<circle class="spinner-path" fill="none" stroke-width="6" stroke-linecap="round" cx="33" cy="33" r="30"></circle>
				</svg>
				<slot></slot>
			</div>
		`}};t([e.property({type:String})],r.prototype,"color",void 0),t([e.property({type:Number})],r.prototype,"offset",void 0),t([e.property({type:Number})],r.prototype,"duration",void 0),t([e.property({type:Number})],r.prototype,"size",void 0),r=t([e.customElement("piano-loader")],r),exports.Loader=r;
},{"lit-element":"bhxD"}],"BlNK":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,i,n){var r,a=arguments.length,o=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(o=(a<3?r(o):a>3?r(t,i,o):r(t,i))||o);return a>3&&o&&Object.defineProperty(t,i,o),o},t=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("lit-element"),n=t(require("../../audio/**/*.mp3")),r=require("lit-translate"),a=t(require("../util/global-state"));require("./loader");const o=a.default.getInstance();let s=class extends i.LitElement{constructor(){super(...arguments),this.instruments=Object.keys(n.default).filter(e=>"metronome"!==e).map(e=>({name:`shared_piano_settings_instrument-${e}`,key:e})),this.instrument=this.instruments.filter(e=>"piano"===e.key)[0].key,this.savedMode=!1,this.loading=!1}static get styles(){return i.css`
			#container {
				display: flex;
				align-items: center;
			}

			div {
				position: relative;
				top: -1px;
				margin-right: 10px;
			}

			select {
				font-family: Poppins, sans-serif;
				text-transform: capitalize;
				font-size: 16px;
				padding: 10px 19px;
				cursor: pointer;
				-webkit-appearance: none;
				appearance: none;
				background-color: white;
				border: 1px solid #ccc;
				border-radius: 6px;
				padding-right: 40px;
				width: auto;
			}

			select:focus + svg {
				transform: rotate(180deg);
				margin-top: -3px;
			}

			svg {
				display: block;
				transform-origin: center center;
				position: absolute;
				right: 15px;
				top: 50%;
				transform: translateY(-50%);
				pointer-events: none;
			}

			#play-label {
				margin-right: 15px;
				font-size: 14px;
			}

			#wrapper {
				display: flex;
				align-items: center;
			}

			#loading-text {
				font-family: Poppins, sans-serif;
				margin-left: 15px;
				color: #222222;
			}

			piano-loader {
				opacity: 0;
				transition: opacity 0.3s linear;
				pointer-events: none;
				margin-left: 15px;
			}

			piano-loader.show {
				opacity: 1;
			}

			@media (max-width: 1100px) {
				select {
					padding: 8px 15px;
					padding-right: 40px;
				}
			}

			@media (max-width: 992px) {
				div {
					margin-right: 0;
				}

				select {
					padding: 5px 7px;
					padding-right: 30px;
				}

				#play-along {
					font-size: 12px;
				}

				svg {
					right: 10px;
					width: 12px;
					height: 6px;
				}
			}

			@media (max-width: 768px) {
				piano-loader {
					display: none;
				}

				select {
					max-width: 140px;
				}
			}

			@media (max-width: 400px) {
				#play-label {
					display: none;
				}
			}
		`}updated(e){e.has("instrument")&&this.dispatchEvent(new CustomEvent("change",{detail:{instrument:this.instrument}}))}render(){return i.html`
			<div id="wrapper">
				<div id="container">
					${this.savedMode?i.html`
						<p id="play-label">${r.get("shared_piano_copresence_play-along_label")}</p>
					`:i.html``}
					<select
						name="instrument"
						@input=${e=>{e.target.blur(),this.instrument=e.target.value}}
					>
						${this.instruments.map(e=>i.html`
								<option value="${e.key}" ?selected=${this.instrument===e.key}
									>${r.get(e.name)}</option
								>
							`)}
					</select>
					<svg width="16" height="10" viewBox="0 0 16 10" fill="none" xmlns="http://www.w3.org/2000/svg">
						<path d="M14.59 9.41L16 8L8 -3.49691e-07L-3.49691e-07 8L1.41 9.41L8 2.83" fill="#222222"/>
					</svg>
				</div>
				<piano-loader color="#666666" size=${25} class=${this.loading?"show":""}>
					<div id="loading-text">${r.get("shared_piano_general_loading")}</div>
				</piano-loader>
			</div>
		`}};e([i.property()],s.prototype,"instruments",void 0),e([i.property()],s.prototype,"instrument",void 0),e([i.property({type:Boolean})],s.prototype,"savedMode",void 0),e([i.property({type:Boolean})],s.prototype,"loading",void 0),s=e([i.customElement("piano-instrument-selector")],s),exports.PianoInstrumentSelector=s;
},{"lit-element":"bhxD","../../audio/**/*.mp3":"wXTg","lit-translate":"NZZ9","../util/global-state":"M8Ve","./loader":"rh7s"}],"jW8V":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=e(require("../../audio/**/*.mp3")),i=require("tone");class s{constructor(e,s){this.loaded=!1,this.pitchMap={0:"kick",1:"clap",2:"snare",3:"clap",4:"snare",5:"tom4",6:"hatclosed",7:"tom3",8:"hatclosed",9:"tom2",10:"hatopen",11:"tom1"},this.players=new i.Players(t.default[e],()=>{this.loaded=!0,s()}).toDestination(),this.folder=e}keyDown({midi:e,velocity:t}){if(this.loaded){const s=this.players.player(this.pitchMap[e%12]);let a=1;if("drum-machine"!==this.folder){const e=20;a=o(t,1,e)-e}s.volume.setValueAtTime(a,i.immediate()),s.start(i.immediate())}}keyUp({midi:e,velocity:t}){}dispose(){this.players.dispose()}}exports.DrumSampler=s;const o=function(e,t,i){var s=Math.log(t),o=(Math.log(i)-s)/1;return Math.exp(s+o*(e-0))};
},{"../../audio/**/*.mp3":"wXTg","tone":"GfHe"}],"etiA":[function(require,module,exports) {
"use strict";var e=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const i=e(require("../../audio/**/*.mp3")),s=require("tone"),t=require("@tonejs/piano"),a=require("./drums");class l{constructor(e,l){if(this.loaded=!1,this.pedalDown=!1,"piano"===e)this.sampler=new t.Piano({velocities:1,release:!1}).toDestination(),this.sampler.load().then(()=>{l(),this.loaded=!0});else if(e.startsWith("drum"))this.sampler=new a.DrumSampler(e,()=>{l(),this.loaded=!0});else{const t={},a=i.default[e];for(const e in a)t[e.replace("s","#")]=a[e];this.sampler=new s.Sampler(t,()=>{l(),this.loaded=!0}).toDestination(),this.sampler.attack=.1,this.sampler.release=.5,this.heldSamplerNotes=new Set}}keyDown({midi:e,velocity:i}){this.loaded&&(this.sampler instanceof t.Piano||this.sampler instanceof a.DrumSampler?this.sampler.keyDown({midi:e,velocity:i}):(this.heldSamplerNotes.has(e)&&this.sampler.triggerRelease(s.Midi(e).toNote(),s.immediate()),this.sampler.triggerAttack(s.Midi(e).toNote(),s.immediate(),i),this.heldSamplerNotes.add(e)))}sustainDown(){this.pedalDown=!0,this.sampler instanceof t.Piano&&this.sampler.pedalDown()}sustainUp(){this.pedalDown=!1,this.sampler instanceof t.Piano&&this.sampler.pedalUp(),this.sampler instanceof s.Sampler&&this.heldSamplerNotes.forEach(e=>{this.sampler.triggerRelease(s.Midi(e).toNote(),s.immediate())})}keyUp({midi:e,velocity:i}){this.loaded&&(this.sampler instanceof t.Piano||this.sampler instanceof a.DrumSampler?this.sampler.keyUp({midi:e,velocity:i}):this.pedalDown||(this.sampler.triggerRelease(s.Midi(e).toNote(),s.immediate()),this.heldSamplerNotes.delete(e)))}dispose(){this.sampler.dispose()}}exports.PianoSampler=l;
},{"../../audio/**/*.mp3":"wXTg","tone":"GfHe","@tonejs/piano":"C6MY","./drums":"jW8V"}],"dBIS":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,n,i){var o,s=arguments.length,r=s<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,i);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(s<3?o(r):s>3?o(t,n,r):o(t,n))||r);return s>3&&r&&Object.defineProperty(t,n,r),r},t=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(o,s){function r(e){try{l(i.next(e))}catch(t){s(t)}}function a(e){try{l(i.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,a)}l((i=i.apply(e,t||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("lit-element"),o=require("./sampler"),s=n(require("../util/global-state"));require("../interface/loader");const r=s.default.getInstance();let a=class extends i.LitElement{constructor(){super(...arguments),this.pianos=new Map,this.loading=!0}addInstrument(e,n=""){return t(this,void 0,void 0,function*(){return new Promise((t,i)=>{this.pianos.has(n)?i(!1):this.pianos.set(n,{instrument:e,sampler:new o.PianoSampler(e,()=>{this.loading=!1,t(!0)})})})})}setInstrument(e,n=""){var i,o;return t(this,void 0,void 0,function*(){(null===(i=this.pianos.get(n))||void 0===i?void 0:i.instrument)!==e&&(null===(o=this.pianos.get(n))||void 0===o||o.sampler.dispose(),this.pianos.delete(n),yield this.addInstrument(e,n))})}keyDown(e,t="",n=!1){var i;n&&!r.live||null===(i=this.pianos.get(t))||void 0===i||i.sampler.keyDown(e)}keyUp(e,t=""){var n;null===(n=this.pianos.get(t))||void 0===n||n.sampler.keyUp(e)}sustainDown(e=""){var t;null===(t=this.pianos.get(e))||void 0===t||t.sampler.sustainDown()}sustainUp(e=""){var t;null===(t=this.pianos.get(e))||void 0===t||t.sampler.sustainUp()}static get styles(){return i.css`
			.container {
				background-color: white;
				position: fixed;
				top: 0;
				left: 0;
				display: flex;
				align-items: center;
				justify-content: center;
				width: 100%;
				height: 100%;
				opacity: 1;
				transition: opacity 0.5s linear;
			}

			.container.hide {
				opacity: 0;
				pointer-events: none;
			}
		`}render(){return i.html`
			<div class="container${this.loading?"":" hide"}">
				<piano-loader></piano-loader>
			</div>
		`}};e([i.property({type:Boolean})],a.prototype,"loading",void 0),a=e([i.customElement("piano-sounds")],a),exports.PianoSounds=a;
},{"lit-element":"bhxD","./sampler":"etiA","../util/global-state":"M8Ve","../interface/loader":"rh7s"}],"PdmL":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},t=this&&this.__awaiter||function(e,t,i,o){return new(i||(i=Promise))(function(n,r){function s(e){try{p(o.next(e))}catch(t){r(t)}}function a(e){try{p(o.throw(e))}catch(t){r(t)}}function p(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i(function(e){e(t)})).then(s,a)}p((o=o.apply(e,t||[])).next())})};Object.defineProperty(exports,"__esModule",{value:!0});const i=require("lit-element"),o=require("lit-translate");let n=class extends i.LitElement{constructor(){super(...arguments),this.selfId="",this.link="",this.users=[],this.pings={},this.savedMode=!1,this._totaltime="00:00:00",this._elapsedtime="00:00:00"}set totaltime(e){if(null==e)return;let t=this.formatTime(e);this._totaltime=t}get totaltime(){return this._totaltime}set elapsedtime(e){if(null==e)return;let t=this.formatTime(e);this._elapsedtime=t,this.requestUpdate()}get elapsedtime(){return this._elapsedtime}formatTime(e){e=parseInt(e),e=Math.max(0,e);let t=new Date(1e3*e).toISOString().substr(11,8);return t.startsWith("00")?t.substr(3,9):t}copyLink(e){return t(this,void 0,void 0,function*(){const t=e.target,i=window.location.href,n=e=>{const i=o.get("shared_piano_copy-link-parentheses_label");let n;t&&(t.innerText=e,clearTimeout(n),n=setTimeout(()=>{t.innerText=i},3e3))};navigator.clipboard?navigator.clipboard.writeText(i).then(()=>{n(o.get("shared_piano_copy-link_confirmed_label"))}).catch(e=>{n(o.get("shared_piano_copy-link_failed_label"))}):(()=>{const e=document.createElement("textarea");e.value=i,e.style.top="0px",e.style.left="0px",e.style.position="fixed",document.body.appendChild(e),e.focus(),e.select();try{document.execCommand("copy")&&n(o.get("shared_piano_copy-link_confirmed_label"))}catch(t){n(o.get("shared_piano_copy-link_failed_label"))}document.body.removeChild(e)})()})}static get styles(){return i.css`
			:host {
				border-right: 1px solid #ccc;
				height: 80px;
				display: flex;
				align-items: center;
				position: relative;
				left: -20px;
			}

			* {
				color: #222;
				font-size: 15px;
				font-family: 'Poppins', sans-serif;
			}

			#live-sign {
				background-color: #e33059;
				color: #fff;
				display: inline-flex;
				text-transform: uppercase;
				border-radius: 3px;
				padding: 0 10px;
				margin-right: 10px;
				font-size: 15px;
			}

			.user {
				position: relative;
				display: inline-block;
				cursor: default;
				font-size: 24px;
				margin-right: 5px;
			}

			.ping-tip {
				display: none;
				position: absolute;
				font-size: 12px;
				top: 6px;
				background-color: #000;
				color: #fff;
				left: 50%;
				padding: 2px 4px;
				transform: translateX(-50%) translateY(-100%);
			}

			.user:hover .ping-tip {
				display: block;
			}

			button {
				-webkit-appearance: none;
				-moz-appearance: none;
				border: none;
				background: none;
				padding: 0;
				color: #007BC7;
				margin: 0 5px;
				cursor: pointer;
				text-decoration: none;
			}

			#copied {
				position: relative;
				display: none;
			}

			#copied-text {
				color: #007BC7;
				position: absolute;
				font-size: 14px;
				margin-top: 3px;
			}

			#person-info {
				display: flex;
				align-items: center;
				height: 32px;
			}

			#timecode {
				display: block;
				width: 100px;
			}

			@media only screen and (max-width: 1200px) {
				* {
					font-size: 16px;
				}

				.user {
					font-size: 20px;
					margin-right: 7px;
				}

				#live-sign {
					font-size: 14px;
				}

				#timecode {
					font-size: 14px;
				}
			}

			@media only screen and (max-width: 992px) {
				:host {
					overflow-x: auto;
					border-right: none;
					left: 0;
				}

				* {
					font-size: 12px;
				}

				#live-sign {
					font-size: 12px;
					margin-right: 10px;
				}

				#room-info {
					display: flex;
					align-items: center;
					margin-left: 10px;
					word-break: break-word;
				}

				#room-info strong {
					margin-right: 3px;
				}

				.user {
					font-size: 15px;
					margin-right: 5px;
				}

				#copied {
					display: inline-block;
					top: -25px;
					position: absolute;
				}

				#copied-text {
					position: relative;
					font-size: 12px;
					margin-top: 0;
				}

				#container {
					width: 100%;
					display: flex;
					align-items: center;
				}

				div > div:first-child {
					position: relative;
					margin-bottom: 0;
				}
			}
		`}render(){const e=`${this.users.length} ${1===this.users.length?o.get("shared_piano_copresence_user-count-single_label"):o.get("shared_piano_copresence_user-count-plural_label")}`;return i.html`
			<div id="container">
				${this.savedMode?i.html`<span id="timecode">${this.elapsedtime} / ${this.totaltime}</span>`:i.html`
					<div id="person-info">
						<span id="live-sign">${o.get("shared_piano_copresence-live_label")}</span>
						${this.users.map(e=>i.html`<span
									class="user"
									aria-label="${o.get("shared_piano_copresence_user_label")} ${e}. ${e===this.selfId?o.get("shared_piano_copresence_you-alt_label"):""}"
									>
									<span class="ping-tip">
										${e===this.selfId?o.get("shared_piano_copresence_you_label"):(this.pings[e]||0)+o.get("shared_piano_copresence_ping-ms_label")}
									</span>
									${e}
								</span>`)}
						<span aria-label="${e+" "+o.get("shared_piano_copresence_in-session_label")}">${e}</span>
					</div>
					<div id="room-info">
						<strong>${o.get("shared_piano_room_label")}</strong>
						${window.location.hash.slice(1)}
						<button id="copy-link" @click=${this.copyLink.bind(this)}>${o.get("shared_piano_copy-link-parentheses_label")}</button>
					</div>
				`}
			</div>
		`}};e([i.property({type:String})],n.prototype,"selfId",void 0),e([i.property({type:String})],n.prototype,"link",void 0),e([i.property({type:Array})],n.prototype,"users",void 0),e([i.property({type:Object})],n.prototype,"pings",void 0),e([i.property({type:Boolean})],n.prototype,"savedMode",void 0),e([i.property({type:String})],n.prototype,"totaltime",null),e([i.property({type:String})],n.prototype,"elapsedtime",null),n=e([i.customElement("copresence-info")],n),exports.CopresenceInfo=n;
},{"lit-element":"bhxD","lit-translate":"NZZ9"}],"vXzt":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,o,r){var n,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var l=e.length-1;l>=0;l--)(n=e[l])&&(s=(i<3?n(s):i>3?n(t,o,s):n(t,o))||s);return i>3&&s&&Object.defineProperty(t,o,s),s};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("lit-element");let o=class extends t.LitElement{constructor(){super(...arguments),this.shown=!1}static get styles(){return t.css`
			section {
				position: absolute;
				top: 0;
				bottom: 0;
				left: 0;
				right: 0;
				background-color: #fff;
				z-index: 1000;
				display: flex;
				align-items: center;
				justify-content: center;
				text-align: center;
			}

			p {
				margin: 5px;
			}

			a {
				color: #16a8f0;
			}
		`}render(){return this.shown?t.html`
					<section>
						<div>
							<p><b>${window.location.href}</b></p>
							<p>
								Oops! This room is a little too crowded (10 people are already
								in it).
							</p>
							<p>
								<a href="./">Click here to start a new room.</a>
							</p>
						</div>
					</section>
			  `:""}};e([t.property({type:Boolean})],o.prototype,"shown",void 0),o=e([t.customElement("piano-full-room")],o),exports.PianoFullRoom=o;
},{"lit-element":"bhxD"}],"EWRF":[function(require,module,exports) {
"use strict";var e=this&&this.__decorate||function(e,t,i,r){var o,s=arguments.length,n=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,i,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n};Object.defineProperty(exports,"__esModule",{value:!0});const t=require("lit-element"),i=require("lit-translate");let r=class extends t.LitElement{constructor(){super(...arguments),this.emoji="",this.url=""}setSave(e,t){this.url=e,this.emoji=t;const i=this.shadowRoot.getElementById("container");i.style.visibility="visible",setTimeout(()=>i.style.visibility="hidden",5e3)}static get styles(){return t.css`
			#container {
				position: absolute;
				bottom: 140px;
				right: 45px;
				background: #eeeeee;
				border-radius: 50px;
				width: 200px;
				height: 53px;
				display: flex;
				align-items: center;
				justify-content: center;
				visibility: hidden;
			}

			a {
				color: #007BC7;
			}

			@media only screen and (max-width: 700px) {
				#container {
					bottom: 180px;
					font-size: 14px;
					width: 180px;
					height: 43px;
				}
			}
		`}render(){return t.html`
			<div id="container">
				<p>
					${this.emoji} ${i.get("shared_piano_general_save-confirmed")}
					<a href="${this.url}" target="_blank"
						>(${i.get("shared_piano_general_save-link_label")})</a
					>
				</p>
			</div>
		`}};e([t.property()],r.prototype,"emoji",void 0),e([t.property()],r.prototype,"url",void 0),r=e([t.customElement("save-chip")],r),exports.SaveChip=r;
},{"lit-element":"bhxD","lit-translate":"NZZ9"}],"xA6u":[function(require,module,exports) {
var global = arguments[3];
var t=arguments[3];Object.defineProperty(exports,"__esModule",{value:!0});var r=require("tslib"),e={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},o=function(t,r){if(!t)throw n(r)},n=function(t){return new Error("Firebase Database ("+e.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},i=function(t){for(var r=[],e=0,o=0;o<t.length;o++){var n=t.charCodeAt(o);n<128?r[e++]=n:n<2048?(r[e++]=n>>6|192,r[e++]=63&n|128):55296==(64512&n)&&o+1<t.length&&56320==(64512&t.charCodeAt(o+1))?(n=65536+((1023&n)<<10)+(1023&t.charCodeAt(++o)),r[e++]=n>>18|240,r[e++]=n>>12&63|128,r[e++]=n>>6&63|128,r[e++]=63&n|128):(r[e++]=n>>12|224,r[e++]=n>>6&63|128,r[e++]=63&n|128)}return r},s=function(t){for(var r=[],e=0,o=0;e<t.length;){var n=t[e++];if(n<128)r[o++]=String.fromCharCode(n);else if(n>191&&n<224){var i=t[e++];r[o++]=String.fromCharCode((31&n)<<6|63&i)}else if(n>239&&n<365){var s=((7&n)<<18|(63&(i=t[e++]))<<12|(63&(a=t[e++]))<<6|63&t[e++])-65536;r[o++]=String.fromCharCode(55296+(s>>10)),r[o++]=String.fromCharCode(56320+(1023&s))}else{i=t[e++];var a=t[e++];r[o++]=String.fromCharCode((15&n)<<12|(63&i)<<6|63&a)}}return r.join("")},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,r){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var e=r?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[],n=0;n<t.length;n+=3){var i=t[n],s=n+1<t.length,a=s?t[n+1]:0,c=n+2<t.length,h=c?t[n+2]:0,f=i>>2,u=(3&i)<<4|a>>4,p=(15&a)<<2|h>>6,l=63&h;c||(l=64,s||(p=64)),o.push(e[f],e[u],e[p],e[l])}return o.join("")},encodeString:function(t,r){return this.HAS_NATIVE_SUPPORT&&!r?btoa(t):this.encodeByteArray(i(t),r)},decodeString:function(t,r){return this.HAS_NATIVE_SUPPORT&&!r?atob(t):s(this.decodeStringToByteArray(t,r))},decodeStringToByteArray:function(t,r){this.init_();for(var e=r?this.charToByteMapWebSafe_:this.charToByteMap_,o=[],n=0;n<t.length;){var i=e[t.charAt(n++)],s=n<t.length?e[t.charAt(n)]:0,a=++n<t.length?e[t.charAt(n)]:64,c=++n<t.length?e[t.charAt(n)]:64;if(++n,null==i||null==s||null==a||null==c)throw Error();var h=i<<2|s>>4;if(o.push(h),64!==a){var f=s<<4&240|a>>2;if(o.push(f),64!==c){var u=a<<6&192|c;o.push(u)}}}return o},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},c=function(t){var r=i(t);return a.encodeByteArray(r,!0)},h=function(t){try{return a.decodeString(t,!0)}catch(r){console.error("base64Decode failed: ",r)}return null};function f(t){return u(void 0,t)}function u(t,r){if(!(r instanceof Object))return r;switch(r.constructor){case Date:return new Date(r.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return r}for(var e in r)r.hasOwnProperty(e)&&(t[e]=u(t[e],r[e]));return t}var p=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(r,e){t.resolve=r,t.reject=e})}return t.prototype.wrapCallback=function(t){var r=this;return function(e,o){e?r.reject(e):r.resolve(o),"function"==typeof t&&(r.promise.catch(function(){}),1===t.length?t(e):t(e,o))}},t}();function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function v(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())}function d(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(r){return!1}}function b(){return"object"==typeof self&&self.self===self}function y(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function E(){return l().indexOf("Electron/")>=0}function g(){var t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function S(){return l().indexOf("MSAppHost/")>=0}function A(){return!0===e.NODE_CLIENT||!0===e.NODE_ADMIN}var x="FirebaseError",O=function(t){function e(r,o){var n=t.call(this,o)||this;return n.code=r,n.name=x,Object.setPrototypeOf(n,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,m.prototype.create),n}return r.__extends(e,t),e}(Error),m=function(){function t(t,r,e){this.service=t,this.serviceName=r,this.errors=e}return t.prototype.create=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];for(var o=r[0]||{},n=this.service+"/"+t,i=this.errors[t],s=i?C(i,o):"Error",a=this.serviceName+": "+s+" ("+n+").",c=new O(n,a),h=0,f=Object.keys(o);h<f.length;h++){var u=f[h];"_"!==u.slice(-1)&&(u in c&&console.warn('Overwriting FirebaseError base field "'+u+'" can cause unexpected behavior.'),c[u]=o[u])}return c},t}();function C(t,r){return t.replace(w,function(t,e){var o=r[e];return null!=o?o.toString():"<"+e+"?>"})}var w=/\{\$([^}]+)}/g;function N(t){return JSON.parse(t)}function T(t){return JSON.stringify(t)}var D=function(t){var r={},e={},o={},n="";try{var i=t.split(".");r=N(h(i[0])||""),e=N(h(i[1])||""),n=i[2],o=e.d||{},delete e.d}catch(s){}return{header:r,claims:e,data:o,signature:n}},j=function(t){var r=D(t).claims,e=Math.floor((new Date).getTime()/1e3),o=0,n=0;return"object"==typeof r&&(r.hasOwnProperty("nbf")?o=r.nbf:r.hasOwnProperty("iat")&&(o=r.iat),n=r.hasOwnProperty("exp")?r.exp:o+86400),!!e&&!!o&&!!n&&e>=o&&e<=n},k=function(t){var r=D(t).claims;return"object"==typeof r&&r.hasOwnProperty("iat")?r.iat:null},M=function(t){var r=D(t).claims;return!!r&&"object"==typeof r&&r.hasOwnProperty("iat")},B=function(t){var r=D(t).claims;return"object"==typeof r&&!0===r.admin};function P(t,r){return Object.prototype.hasOwnProperty.call(t,r)}function V(t,r){return Object.prototype.hasOwnProperty.call(t,r)?t[r]:void 0}function I(t){for(var r in t)if(Object.prototype.hasOwnProperty.call(t,r))return!1;return!0}function W(t,r,e){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=r.call(e,t[n],n,t));return o}function L(t){for(var r=[],e=function(t,e){Array.isArray(e)?e.forEach(function(e){r.push(encodeURIComponent(t)+"="+encodeURIComponent(e))}):r.push(encodeURIComponent(t)+"="+encodeURIComponent(e))},o=0,n=Object.entries(t);o<n.length;o++){var i=n[o];e(i[0],i[1])}return r.length?"&"+r.join("&"):""}function R(t){var r={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var e=t.split("=");r[e[0]]=e[1]}}),r}var z=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,r){r||(r=0);var e=this.W_;if("string"==typeof t)for(var o=0;o<16;o++)e[o]=t.charCodeAt(r)<<24|t.charCodeAt(r+1)<<16|t.charCodeAt(r+2)<<8|t.charCodeAt(r+3),r+=4;else for(o=0;o<16;o++)e[o]=t[r]<<24|t[r+1]<<16|t[r+2]<<8|t[r+3],r+=4;for(o=16;o<80;o++){var n=e[o-3]^e[o-8]^e[o-14]^e[o-16];e[o]=4294967295&(n<<1|n>>>31)}var i,s,a=this.chain_[0],c=this.chain_[1],h=this.chain_[2],f=this.chain_[3],u=this.chain_[4];for(o=0;o<80;o++){o<40?o<20?(i=f^c&(h^f),s=1518500249):(i=c^h^f,s=1859775393):o<60?(i=c&h|f&(c|h),s=2400959708):(i=c^h^f,s=3395469782);n=(a<<5|a>>>27)+i+u+s+e[o]&4294967295;u=f,f=h,h=4294967295&(c<<30|c>>>2),c=a,a=n}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+h&4294967295,this.chain_[3]=this.chain_[3]+f&4294967295,this.chain_[4]=this.chain_[4]+u&4294967295},t.prototype.update=function(t,r){if(null!=t){void 0===r&&(r=t.length);for(var e=r-this.blockSize,o=0,n=this.buf_,i=this.inbuf_;o<r;){if(0===i)for(;o<=e;)this.compress_(t,o),o+=this.blockSize;if("string"==typeof t){for(;o<r;)if(n[i]=t.charCodeAt(o),++o,++i===this.blockSize){this.compress_(n),i=0;break}}else for(;o<r;)if(n[i]=t[o],++o,++i===this.blockSize){this.compress_(n),i=0;break}}this.inbuf_=i,this.total_+=r}},t.prototype.digest=function(){var t=[],r=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var e=this.blockSize-1;e>=56;e--)this.buf_[e]=255&r,r/=256;this.compress_(this.buf_);var o=0;for(e=0;e<5;e++)for(var n=24;n>=0;n-=8)t[o]=this.chain_[e]>>n&255,++o;return t},t}();function F(t,r){var e=new U(t,r);return e.subscribe.bind(e)}var U=function(){function t(t,r){var e=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(function(){t(e)}).catch(function(t){e.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(r){r.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(r){r.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,r,e){var o,n=this;if(void 0===t&&void 0===r&&void 0===e)throw new Error("Missing Observer.");void 0===(o=q(t,["next","error","complete"])?t:{next:t,error:r,complete:e}).next&&(o.next=J),void 0===o.error&&(o.error=J),void 0===o.complete&&(o.complete=J);var i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{n.finalError?o.error(n.finalError):o.complete()}catch(t){}}),this.observers.push(o),i},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var r=0;r<this.observers.length;r++)this.sendOne(r,t)},t.prototype.sendOne=function(t,r){var e=this;this.task.then(function(){if(void 0!==e.observers&&void 0!==e.observers[t])try{r(e.observers[t])}catch(o){"undefined"!=typeof console&&console.error&&console.error(o)}})},t.prototype.close=function(t){var r=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){r.observers=void 0,r.onNoObservers=void 0}))},t}();function H(t,r){return function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];Promise.resolve(!0).then(function(){t.apply(void 0,e)}).catch(function(t){r&&r(t)})}}function q(t,r){if("object"!=typeof t||null===t)return!1;for(var e=0,o=r;e<o.length;e++){var n=o[e];if(n in t&&"function"==typeof t[n])return!0}return!1}function J(){}var G=function(t,r,e,o){var n;if(o<r?n="at least "+r:o>e&&(n=0===e?"none":"no more than "+e),n)throw new Error(t+" failed: Was called with "+o+(1===o?" argument.":" arguments.")+" Expects "+n+".")};function K(t,r,e){var o="";switch(r){case 1:o=e?"first":"First";break;case 2:o=e?"second":"Second";break;case 3:o=e?"third":"Third";break;case 4:o=e?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var n=t+" failed: ";return n+=o+" argument "}function $(t,r,e,o){if((!o||e)&&"string"!=typeof e)throw new Error(K(t,r,o)+"must be a valid firebase namespace.")}function Q(t,r,e,o){if((!o||e)&&"function"!=typeof e)throw new Error(K(t,r,o)+"must be a valid function.")}function X(t,r,e,o){if((!o||e)&&("object"!=typeof e||null===e))throw new Error(K(t,r,o)+"must be a valid context object.")}var Y=function(t){for(var r=[],e=0,n=0;n<t.length;n++){var i=t.charCodeAt(n);if(i>=55296&&i<=56319){var s=i-55296;o(++n<t.length,"Surrogate pair missing trail surrogate."),i=65536+(s<<10)+(t.charCodeAt(n)-56320)}i<128?r[e++]=i:i<2048?(r[e++]=i>>6|192,r[e++]=63&i|128):i<65536?(r[e++]=i>>12|224,r[e++]=i>>6&63|128,r[e++]=63&i|128):(r[e++]=i>>18|240,r[e++]=i>>12&63|128,r[e++]=i>>6&63|128,r[e++]=63&i|128)}return r},Z=function(t){for(var r=0,e=0;e<t.length;e++){var o=t.charCodeAt(e);o<128?r++:o<2048?r+=2:o>=55296&&o<=56319?(r+=4,e++):r+=3}return r};exports.CONSTANTS=e,exports.Deferred=p,exports.ErrorFactory=m,exports.FirebaseError=O,exports.Sha1=z,exports.assert=o,exports.assertionError=n,exports.async=H,exports.base64=a,exports.base64Decode=h,exports.base64Encode=c,exports.contains=P,exports.createSubscribe=F,exports.decode=D,exports.deepCopy=f,exports.deepExtend=u,exports.errorPrefix=K,exports.getUA=l,exports.isAdmin=B,exports.isBrowser=b,exports.isBrowserExtension=y,exports.isElectron=E,exports.isEmpty=I,exports.isIE=g,exports.isMobileCordova=v,exports.isNode=d,exports.isNodeSdk=A,exports.isReactNative=_,exports.isUWP=S,exports.isValidFormat=M,exports.isValidTimestamp=j,exports.issuedAtTime=k,exports.jsonEval=N,exports.map=W,exports.querystring=L,exports.querystringDecode=R,exports.safeGet=V,exports.stringLength=Z,exports.stringToByteArray=Y,exports.stringify=T,exports.validateArgCount=G,exports.validateCallback=Q,exports.validateContextObject=X,exports.validateNamespace=$;
},{"tslib":"vCxL"}],"nzQs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("tslib"),e=require("@firebase/util"),n=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),r="[DEFAULT]",i=function(){function n(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return n.prototype.get=function(t){void 0===t&&(t=r);var n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){var i=new e.Deferred;this.instancesDeferred.set(n,i);try{var o=this.getOrInitializeService(n);o&&i.resolve(o)}catch(s){}}return this.instancesDeferred.get(n).promise},n.prototype.getImmediate=function(e){var n=t.__assign({identifier:r,optional:!1},e),i=n.identifier,o=n.optional,s=this.normalizeInstanceIdentifier(i);try{var a=this.getOrInitializeService(s);if(!a){if(o)return null;throw Error("Service "+this.name+" is not available")}return a}catch(c){if(o)return null;throw c}},n.prototype.getComponent=function(){return this.component},n.prototype.setComponent=function(e){var n,i;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,s(e))try{this.getOrInitializeService(r)}catch(l){}try{for(var o=t.__values(this.instancesDeferred.entries()),a=o.next();!a.done;a=o.next()){var c=t.__read(a.value,2),p=c[0],h=c[1],u=this.normalizeInstanceIdentifier(p);try{var f=this.getOrInitializeService(u);h.resolve(f)}catch(l){}}}catch(d){n={error:d}}finally{try{a&&!a.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},n.prototype.clearInstance=function(t){void 0===t&&(t=r),this.instancesDeferred.delete(t),this.instances.delete(t)},n.prototype.delete=function(){return t.__awaiter(this,void 0,void 0,function(){var e;return t.__generator(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))];case 1:return t.sent(),[2]}})})},n.prototype.isComponentSet=function(){return null!=this.component},n.prototype.getOrInitializeService=function(t){var e=this.instances.get(t);return!e&&this.component&&(e=this.component.instanceFactory(this.container,o(t)),this.instances.set(t,e)),e||null},n.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:r:t},n}();function o(t){return t===r?void 0:t}function s(t){return"EAGER"===t.instantiationMode}var a=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new i(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}();exports.Component=n,exports.ComponentContainer=a,exports.Provider=i;
},{"tslib":"vCxL","@firebase/util":"xA6u"}],"TUpU":[function(require,module,exports) {
"use strict";function e(){for(var e=0,r=0,t=arguments.length;r<t;r++)e+=arguments[r].length;var n=Array(e),o=0;for(r=0;r<t;r++)for(var l=arguments[r],i=0,s=l.length;i<s;i++,o++)n[o]=l[i];return n}var r;Object.defineProperty(exports,"__esModule",{value:!0}),exports.setLogLevel=g,exports.setUserLogHandler=u,exports.Logger=exports.LogLevel=void 0;var t,n=[];exports.LogLevel=t,function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(t||(exports.LogLevel=t={}));var o={debug:t.DEBUG,verbose:t.VERBOSE,info:t.INFO,warn:t.WARN,error:t.ERROR,silent:t.SILENT},l=t.INFO,i=((r={})[t.DEBUG]="log",r[t.VERBOSE]="log",r[t.INFO]="info",r[t.WARN]="warn",r[t.ERROR]="error",r),s=function(r,t){for(var n=[],o=2;o<arguments.length;o++)n[o-2]=arguments[o];if(!(t<r.logLevel)){var l=(new Date).toISOString(),s=i[t];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[s].apply(console,e(["["+l+"]  "+r.name+":"],n))}},a=function(){function r(e){this.name=e,this._logLevel=l,this._logHandler=s,this._userLogHandler=null,n.push(this)}return Object.defineProperty(r.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in t))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!0,configurable:!0}),r.prototype.debug=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,e([this,t.DEBUG],r)),this._logHandler.apply(this,e([this,t.DEBUG],r))},r.prototype.log=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,e([this,t.VERBOSE],r)),this._logHandler.apply(this,e([this,t.VERBOSE],r))},r.prototype.info=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,e([this,t.INFO],r)),this._logHandler.apply(this,e([this,t.INFO],r))},r.prototype.warn=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,e([this,t.WARN],r)),this._logHandler.apply(this,e([this,t.WARN],r))},r.prototype.error=function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,e([this,t.ERROR],r)),this._logHandler.apply(this,e([this,t.ERROR],r))},r}();function g(e){var r="string"==typeof e?o[e]:e;n.forEach(function(e){e.logLevel=r})}function u(e,r){for(var l=function(n){var l=null;r&&r.level&&(l=o[r.level]),n.userLogHandler=null===e?null:function(r,n){for(var o=[],i=2;i<arguments.length;i++)o[i-2]=arguments[i];var s=o.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(r){return null}}).filter(function(e){return e}).join(" ");n>=(null!=l?l:r.logLevel)&&e({level:t[n].toLowerCase(),message:s,args:o,type:r.name})}},i=0,s=n;i<s.length;i++){l(s[i])}}exports.Logger=a;
},{}],"dP58":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e,n,r=require("tslib"),t=require("@firebase/util"),i=require("@firebase/component"),a=require("@firebase/logger"),o=((e={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",e["bad-app-name"]="Illegal App name: '{$appName}",e["duplicate-app"]="Firebase App named '{$appName}' already exists",e["app-deleted"]="Firebase App named '{$appName}' already deleted",e["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",e["invalid-log-argument"]="First argument to `onLog` must be null or a function.",e),s=new t.ErrorFactory("app","Firebase",o),p="@firebase/app",l="0.6.3",c="@firebase/analytics",u="@firebase/auth",f="@firebase/database",d="@firebase/functions",m="@firebase/installations",b="@firebase/messaging",h="@firebase/performance",g="@firebase/remote-config",v="@firebase/storage",y="@firebase/firestore",_="firebase-wrapper",w="[DEFAULT]",N=((n={})[p]="fire-core",n[c]="fire-analytics",n[u]="fire-auth",n[f]="fire-rtdb",n[d]="fire-fn",n[m]="fire-iid",n[b]="fire-fcm",n[h]="fire-perf",n[g]="fire-rc",n[v]="fire-gcs",n[y]="fire-fst",n["fire-js"]="fire-js",n[_]="fire-js-all",n),C=new a.Logger("@firebase/app"),I=function(){function e(e,n,a){var o,s,p=this;this.firebase_=a,this.isDeleted_=!1,this.name_=n.name,this.automaticDataCollectionEnabled_=n.automaticDataCollectionEnabled||!1,this.options_=t.deepCopy(e),this.container=new i.ComponentContainer(n.name),this._addComponent(new i.Component("app",function(){return p},"PUBLIC"));try{for(var l=r.__values(this.firebase_.INTERNAL.components.values()),c=l.next();!c.done;c=l.next()){var u=c.value;this._addComponent(u)}}catch(f){o={error:f}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}}return Object.defineProperty(e.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(e){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),e.prototype.delete=function(){var e=this;return new Promise(function(n){e.checkDestroyed_(),n()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(e){return e.delete()}))}).then(function(){e.isDeleted_=!0})},e.prototype._getService=function(e,n){return void 0===n&&(n=w),this.checkDestroyed_(),this.container.getProvider(e).getImmediate({identifier:n})},e.prototype._removeServiceInstance=function(e,n){void 0===n&&(n=w),this.container.getProvider(e).clearInstance(n)},e.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(n){C.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,n)}},e.prototype._addOrOverwriteComponent=function(e){this.container.addOrOverwriteComponent(e)},e.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw s.create("app-deleted",{appName:this.name_})},e}();I.prototype.name&&I.prototype.options||I.prototype.delete||console.log("dc");var E="7.14.3";function A(e){var n={},o=new Map,p={__esModule:!0,initializeApp:function(r,i){void 0===i&&(i={});if("object"!=typeof i||null===i){var a=i;i={name:a}}var o=i;void 0===o.name&&(o.name=w);var l=o.name;if("string"!=typeof l||!l)throw s.create("bad-app-name",{appName:String(l)});if(t.contains(n,l))throw s.create("duplicate-app",{appName:l});var c=new e(r,o,p);return n[l]=c,c},app:l,registerVersion:function(e,n,r){var t,a=null!==(t=N[e])&&void 0!==t?t:e;r&&(a+="-"+r);var o=a.match(/\s|\//),s=n.match(/\s|\//);if(o||s){var p=['Unable to register library "'+a+'" with version "'+n+'":'];return o&&p.push('library name "'+a+'" contains illegal characters (whitespace or "/")'),o&&s&&p.push("and"),s&&p.push('version name "'+n+'" contains illegal characters (whitespace or "/")'),void C.warn(p.join(" "))}c(new i.Component(a+"-version",function(){return{library:a,version:n}},"VERSION"))},setLogLevel:a.setLogLevel,onLog:function(e,n){if(null!==e&&"function"!=typeof e)throw s.create("invalid-log-argument",{appName:name});a.setUserLogHandler(e,n)},apps:null,SDK_VERSION:E,INTERNAL:{registerComponent:c,removeApp:function(e){delete n[e]},components:o,useAsService:function(e,n){if("serverAuth"===n)return null;return n}}};function l(e){if(e=e||w,!t.contains(n,e))throw s.create("no-app",{appName:e});return n[e]}function c(i){var a,c,u=i.name;if(o.has(u))return C.debug("There were multiple attempts to register component "+u+"."),"PUBLIC"===i.type?p[u]:null;if(o.set(u,i),"PUBLIC"===i.type){var f=function(e){if(void 0===e&&(e=l()),"function"!=typeof e[u])throw s.create("invalid-app-argument",{appName:u});return e[u]()};void 0!==i.serviceProps&&t.deepExtend(f,i.serviceProps),p[u]=f,e.prototype[u]=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return this._getService.bind(this,u).apply(this,i.multipleInstances?e:[])}}try{for(var d=r.__values(Object.keys(n)),m=d.next();!m.done;m=d.next()){var b=m.value;n[b]._addComponent(i)}}catch(h){a={error:h}}finally{try{m&&!m.done&&(c=d.return)&&c.call(d)}finally{if(a)throw a.error}}return"PUBLIC"===i.type?p[u]:null}return p.default=p,Object.defineProperty(p,"apps",{get:function(){return Object.keys(n).map(function(e){return n[e]})}}),l.App=e,p}function F(){var e=A(I);return e.INTERNAL=r.__assign(r.__assign({},e.INTERNAL),{createFirebaseNamespace:F,extendNamespace:function(n){t.deepExtend(e,n)},createSubscribe:t.createSubscribe,ErrorFactory:t.ErrorFactory,deepExtend:t.deepExtend}),e}var P=F(),L=function(){function e(e){this.container=e}return e.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){if(D(e)){var n=e.getImmediate();return n.library+"/"+n.version}return null}).filter(function(e){return e}).join(" ")},e}();function D(e){var n=e.getComponent();return"VERSION"===(null==n?void 0:n.type)}function j(e,n){e.INTERNAL.registerComponent(new i.Component("platform-logger",function(e){return new L(e)},"PRIVATE")),e.registerVersion(p,l,n),e.registerVersion("fire-js","")}if(t.isBrowser()&&void 0!==self.firebase){C.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var O=self.firebase.SDK_VERSION;O&&O.indexOf("LITE")>=0&&C.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var k=P.initializeApp;P.initializeApp=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.isNode()&&C.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),k.apply(void 0,e)};var x=P;j(x),exports.default=x,exports.firebase=x;
},{"tslib":"vCxL","@firebase/util":"xA6u","@firebase/component":"nzQs","@firebase/logger":"TUpU"}],"vmMz":[function(require,module,exports) {
var process = require("process");
var e=require("process");function t(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var n=t(require("@firebase/app")),r=require("tslib"),i=require("@firebase/util"),o=require("@firebase/logger"),s=require("@firebase/component"),a=function(){function e(e){this.domStorage_=e,this.prefix_="firebase:"}return e.prototype.set=function(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),i.stringify(t))},e.prototype.get=function(e){var t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:i.jsonEval(t)},e.prototype.remove=function(e){this.domStorage_.removeItem(this.prefixedName_(e))},e.prototype.prefixedName_=function(e){return this.prefix_+e},e.prototype.toString=function(){return this.domStorage_.toString()},e}(),h=function(){function e(){this.cache_={},this.isInMemoryStorage=!0}return e.prototype.set=function(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t},e.prototype.get=function(e){return i.contains(this.cache_,e)?this.cache_[e]:null},e.prototype.remove=function(e){delete this.cache_[e]},e}(),u=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){var t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new a(t)}}catch(n){}return new h},l=u("localStorage"),c=u("sessionStorage"),p=new o.Logger("@firebase/database"),d=function(){var e=1;return function(){return e++}}(),f=function(e){var t=i.stringToByteArray(e),n=new i.Sha1;n.update(t);var r=n.digest();return i.base64.encodeByteArray(r)},_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n="",r=0;r<e.length;r++){var o=e[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=_.apply(null,o):n+="object"==typeof o?i.stringify(o):o,n+=" "}return n},y=null,v=!0,g=function(e,t){i.assert(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(p.logLevel=o.LogLevel.VERBOSE,y=p.log.bind(p),t&&c.set("logging_enabled",!0)):"function"==typeof e?y=e:(y=null,c.remove("logging_enabled"))},m=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!0===v&&(v=!1,null===y&&!0===c.get("logging_enabled")&&g(!0)),y){var n=_.apply(null,e);y(n)}},C=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];m.apply(void 0,r.__spread([e],t))}},E=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE INTERNAL ERROR: "+_.apply(void 0,r.__spread(e));p.error(n)},w=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE FATAL ERROR: "+_.apply(void 0,r.__spread(e));throw p.error(n),new Error(n)},T=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="FIREBASE WARNING: "+_.apply(void 0,r.__spread(e));p.warn(n)},b=function(){"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&T("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},S=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},I=function(e){if(i.isNodeSdk()||"complete"===document.readyState)e();else{var t=!1,n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}},N="[MIN_NAME]",P="[MAX_NAME]",R=function(e,t){if(e===t)return 0;if(e===N||t===P)return-1;if(t===N||e===P)return 1;var n=Q(e),r=Q(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1},D=function(e,t){return e===t?0:e<t?-1:1},x=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+i.stringify(t))},k=function(e){if("object"!=typeof e||null===e)return i.stringify(e);var t=[];for(var n in e)t.push(n);t.sort();for(var r="{",o=0;o<t.length;o++)0!==o&&(r+=","),r+=i.stringify(t[o]),r+=":",r+=k(e[t[o]]);return r+="}"},O=function(e,t){var n=e.length;if(n<=t)return[e];for(var r=[],i=0;i<n;i+=t)i+t>n?r.push(e.substring(i,n)):r.push(e.substring(i,i+t));return r};function F(e,t){for(var n in e)e.hasOwnProperty(n)&&t(n,e[n])}var A=function(e){i.assert(!S(e),"Invalid JSON number");var t,n,r,o,s;0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(e)/Math.LN2),1023))+1023,r=Math.round(e*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse();var h=a.join(""),u="";for(s=0;s<64;s+=8){var l=parseInt(h.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),u+=l}return u.toLowerCase()},L=function(){return!("object"!=typeof window||!window.chrome||!window.chrome.extension||/^chrome/.test(window.location.href))},M=function(){return"object"==typeof Windows&&"object"==typeof Windows.UI},W=function(e,t){var n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");var r=new Error(e+" at "+t.path.toString()+": "+n);return r.code=e.toUpperCase(),r},q=new RegExp("^-?(0*)\\d{1,10}$"),Q=function(e){if(q.test(e)){var t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},U=function(e){try{e()}catch(t){setTimeout(function(){var e=t.stack||"";throw T("Exception was thrown by user callback.",e),t},Math.floor(0))}},V=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},H=function(e,t){var n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n},j=function(){function e(e,t){if(void 0===t){this.pieces_=e.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}return Object.defineProperty(e,"Empty",{get:function(){return new e("")},enumerable:!0,configurable:!0}),e.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},e.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},e.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new e(this.pieces_,t)},e.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},e.prototype.toString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"},e.prototype.toUrlEncodedString=function(){for(var e="",t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+encodeURIComponent(String(this.pieces_[t])));return e||"/"},e.prototype.slice=function(e){return void 0===e&&(e=0),this.pieces_.slice(this.pieceNum_+e)},e.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],n=this.pieceNum_;n<this.pieces_.length-1;n++)t.push(this.pieces_[n]);return new e(t,0)},e.prototype.child=function(t){for(var n=[],r=this.pieceNum_;r<this.pieces_.length;r++)n.push(this.pieces_[r]);if(t instanceof e)for(r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{var i=t.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new e(n,0)},e.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},e.relativePath=function(t,n){var r=t.getFront(),i=n.getFront();if(null===r)return n;if(r===i)return e.relativePath(t.popFront(),n.popFront());throw new Error("INTERNAL ERROR: innerPath ("+n+") is not within outerPath ("+t+")")},e.comparePaths=function(e,t){for(var n=e.slice(),r=t.slice(),i=0;i<n.length&&i<r.length;i++){var o=R(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},e.prototype.equals=function(e){if(this.getLength()!==e.getLength())return!1;for(var t=this.pieceNum_,n=e.pieceNum_;t<=this.pieces_.length;t++,n++)if(this.pieces_[t]!==e.pieces_[n])return!1;return!0},e.prototype.contains=function(e){var t=this.pieceNum_,n=e.pieceNum_;if(this.getLength()>e.getLength())return!1;for(;t<this.pieces_.length;){if(this.pieces_[t]!==e.pieces_[n])return!1;++t,++n}return!0},e}(),B=function(){function e(e,t){this.errorPrefix_=t,this.parts_=e.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=i.stringLength(this.parts_[n]);this.checkValid_()}return Object.defineProperty(e,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(e,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),e.prototype.push=function(e){this.parts_.length>0&&(this.byteLength_+=1),this.parts_.push(e),this.byteLength_+=i.stringLength(e),this.checkValid_()},e.prototype.pop=function(){var e=this.parts_.pop();this.byteLength_-=i.stringLength(e),this.parts_.length>0&&(this.byteLength_-=1)},e.prototype.checkValid_=function(){if(this.byteLength_>e.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+e.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>e.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+e.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},e.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},e}(),Y="5",K="v",z="s",G="r",X="f",$="firebaseio.com",J="ls",Z="websocket",ee="long_polling",te=function(){function e(e,t,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=t,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=e.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=l.get("host:"+e)||this.host}return e.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},e.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},e.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},e.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},e.prototype.updateHost=function(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&l.set("host:"+this.host,this.internalHost))},e.prototype.connectionURL=function(e,t){var n;if(i.assert("string"==typeof e,"typeof type must == string"),i.assert("object"==typeof t,"typeof params must == object"),e===Z)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(e!==ee)throw new Error("Unknown connection type: "+e);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(t.ns=this.namespace);var r=[];return F(t,function(e,t){r.push(e+"="+t)}),n+r.join("&")},e.prototype.toString=function(){var e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e},e.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},e}();function ne(e){for(var t="",n=e.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}t+="/"+i}return t}function re(e){var t,n,i={};"?"===e.charAt(0)&&(e=e.substring(1));try{for(var o=r.__values(e.split("&")),s=o.next();!s.done;s=o.next()){var a=s.value;if(0!==a.length){var h=a.split("=");2===h.length?i[decodeURIComponent(h[0])]=decodeURIComponent(h[1]):T("Invalid query segment '"+a+"' in query '"+e+"'")}}}catch(u){t={error:u}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i}var ie,oe,se=function(e){var t=ae(e),n=t.namespace;"firebase"===t.domain&&w(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===t.domain||w("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||b();var r="ws"===t.scheme||"wss"===t.scheme;return{repoInfo:new te(t.host,t.secure,n,r,"",n!==t.subdomain),path:new j(t.pathString)}},ae=function(e){var t="",n="",r="",i="",o="",s=!0,a="https",h=443;if("string"==typeof e){var u=e.indexOf("//");u>=0&&(a=e.substring(0,u-1),e=e.substring(u+2));var l=e.indexOf("/");-1===l&&(l=e.length);var c=e.indexOf("?");-1===c&&(c=e.length),t=e.substring(0,Math.min(l,c)),l<c&&(i=ne(e.substring(l,c)));var p=re(e.substring(Math.min(e.length,c)));(u=t.indexOf(":"))>=0?(s="https"===a||"wss"===a,h=parseInt(t.substring(u+1),10)):u=e.length;var d=t.split(".");3===d.length?(n=d[1],o=r=d[0].toLowerCase()):2===d.length?n=d[0]:"localhost"===d[0].slice(0,u).toLowerCase()&&(n="localhost"),"ns"in p&&(o=p.ns)}return{host:t,port:h,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},he=/[\[\].#$\/\u0000-\u001F\u007F]/,ue=/[\[\].#$\u0000-\u001F\u007F]/,le=10485760,ce=function(e){return"string"==typeof e&&0!==e.length&&!he.test(e)},pe=function(e){return"string"==typeof e&&0!==e.length&&!ue.test(e)},de=function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),pe(e)},fe=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!S(e)||e&&"object"==typeof e&&i.contains(e,".sv")},_e=function(e,t,n,r,o){o&&void 0===n||ye(i.errorPrefix(e,t,o),n,r)},ye=function(e,t,n){var r=n instanceof j?new B(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(e+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(S(t))throw new Error(e+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>le/3&&i.stringLength(t)>le)throw new Error(e+"contains a string greater than "+le+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var o=!1,s=!1;if(F(t,function(t,n){if(".value"===t)o=!0;else if(".priority"!==t&&".sv"!==t&&(s=!0,!ce(t)))throw new Error(e+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),ye(e,n,r),r.pop()}),o&&s)throw new Error(e+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ve=function(e,t){var n,r;for(n=0;n<t.length;n++)for(var i=(r=t[n]).slice(),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!ce(i[o]))throw new Error(e+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');t.sort(j.comparePaths);var s=null;for(n=0;n<t.length;n++){if(r=t[n],null!==s&&s.contains(r))throw new Error(e+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}},ge=function(e,t,n,r,o){if(!o||void 0!==n){var s=i.errorPrefix(e,t,o);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(s+" must be an object containing the children to replace.");var a=[];F(n,function(e,t){var n=new j(e);if(ye(s,t,r.child(n)),".priority"===n.getBack()&&!fe(t))throw new Error(s+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(n)}),ve(s,a)}},me=function(e,t,n,r){if(!r||void 0!==n){if(S(n))throw new Error(i.errorPrefix(e,t,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!fe(n))throw new Error(i.errorPrefix(e,t,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Ce=function(e,t,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(i.errorPrefix(e,t,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ee=function(e,t,n,r){if(!(r&&void 0===n||ce(n)))throw new Error(i.errorPrefix(e,t,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},we=function(e,t,n,r){if(!(r&&void 0===n||pe(n)))throw new Error(i.errorPrefix(e,t,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Te=function(e,t,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),we(e,t,n,r)},be=function(e,t){if(".info"===t.getFront())throw new Error(e+" failed = Can't modify data under /.info/")},Se=function(e,t,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ce(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&!de(r))throw new Error(i.errorPrefix(e,t,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},Ie=function(e,t,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(i.errorPrefix(e,t,r)+"must be a boolean.")},Ne=function(){function e(e,t){this.repo_=e,this.path_=t}return e.prototype.cancel=function(e){i.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),i.validateCallback("OnDisconnect.cancel",1,e,!0);var t=new i.Deferred;return this.repo_.onDisconnectCancel(this.path_,t.wrapCallback(e)),t.promise},e.prototype.remove=function(e){i.validateArgCount("OnDisconnect.remove",0,1,arguments.length),be("OnDisconnect.remove",this.path_),i.validateCallback("OnDisconnect.remove",1,e,!0);var t=new i.Deferred;return this.repo_.onDisconnectSet(this.path_,null,t.wrapCallback(e)),t.promise},e.prototype.set=function(e,t){i.validateArgCount("OnDisconnect.set",1,2,arguments.length),be("OnDisconnect.set",this.path_),_e("OnDisconnect.set",1,e,this.path_,!1),i.validateCallback("OnDisconnect.set",2,t,!0);var n=new i.Deferred;return this.repo_.onDisconnectSet(this.path_,e,n.wrapCallback(t)),n.promise},e.prototype.setWithPriority=function(e,t,n){i.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),be("OnDisconnect.setWithPriority",this.path_),_e("OnDisconnect.setWithPriority",1,e,this.path_,!1),me("OnDisconnect.setWithPriority",2,t,!1),i.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new i.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,e,t,r.wrapCallback(n)),r.promise},e.prototype.update=function(e,t){if(i.validateArgCount("OnDisconnect.update",1,2,arguments.length),be("OnDisconnect.update",this.path_),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,T("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ge("OnDisconnect.update",1,e,this.path_,!1),i.validateCallback("OnDisconnect.update",2,t,!0);var o=new i.Deferred;return this.repo_.onDisconnectUpdate(this.path_,e,o.wrapCallback(t)),o.promise},e}(),Pe=function(){function e(e,t){this.committed=e,this.snapshot=t}return e.prototype.toJSON=function(){return i.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},e}(),Re=function(){var e="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",t=0,n=[];return function(r){var o,s=r===t;t=r;var a=new Array(8);for(o=7;o>=0;o--)a[o]=e.charAt(r%64),r=Math.floor(r/64);i.assert(0===r,"Cannot push at time == 0");var h=a.join("");if(s){for(o=11;o>=0&&63===n[o];o--)n[o]=0;n[o]++}else for(o=0;o<12;o++)n[o]=Math.floor(64*Math.random());for(o=0;o<12;o++)h+=e.charAt(n[o]);return i.assert(20===h.length,"nextPushId: Length should be 20."),h}}(),De=function(){function e(e,t){this.name=e,this.node=t}return e.Wrap=function(t,n){return new e(t,n)},e}(),xe=function(){function e(){}return e.prototype.getCompare=function(){return this.compare.bind(this)},e.prototype.indexedValueChanged=function(e,t){var n=new De(N,e),r=new De(N,t);return 0!==this.compare(n,r)},e.prototype.minPost=function(){return De.MIN},e}(),ke=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),Object.defineProperty(t,"__EMPTY_NODE",{get:function(){return ie},set:function(e){ie=e},enumerable:!0,configurable:!0}),t.prototype.compare=function(e,t){return R(e.name,t.name)},t.prototype.isDefinedOn=function(e){throw i.assertionError("KeyIndex.isDefinedOn not expected to be called.")},t.prototype.indexedValueChanged=function(e,t){return!1},t.prototype.minPost=function(){return De.MIN},t.prototype.maxPost=function(){return new De(P,ie)},t.prototype.makePost=function(e,t){return i.assert("string"==typeof e,"KeyIndex indexValue must always be a string."),new De(e,ie)},t.prototype.toString=function(){return".key"},t}(xe),Oe=new ke;function Fe(e){oe=e}var Ae,Le,Me,We=function(e){return"number"==typeof e?"number:"+A(e):"string:"+e},qe=function(e){if(e.isLeafNode()){var t=e.val();i.assert("string"==typeof t||"number"==typeof t||"object"==typeof t&&i.contains(t,".sv"),"Priority must be a string or number.")}else i.assert(e===oe||e.isEmpty(),"priority of unexpected type.");i.assert(e===oe||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Qe=function(){function e(t,n){void 0===n&&(n=e.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=n,this.lazyHash_=null,i.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),qe(this.priorityNode_)}return Object.defineProperty(e,"__childrenNodeConstructor",{get:function(){return Ae},set:function(e){Ae=e},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!0},e.prototype.getPriority=function(){return this.priorityNode_},e.prototype.updatePriority=function(t){return new e(this.value_,t)},e.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE},e.prototype.hasChild=function(){return!1},e.prototype.getPredecessorChildName=function(e,t){return null},e.prototype.updateImmediateChild=function(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)},e.prototype.updateChild=function(t,n){var r=t.getFront();return null===r?n:n.isEmpty()&&".priority"!==r?this:(i.assert(".priority"!==r||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),n)))},e.prototype.isEmpty=function(){return!1},e.prototype.numChildren=function(){return 0},e.prototype.forEachChild=function(e,t){return!1},e.prototype.val=function(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.priorityNode_.isEmpty()||(e+="priority:"+We(this.priorityNode_.val())+":");var t=typeof this.value_;e+=t+":",e+="number"===t?A(this.value_):this.value_,this.lazyHash_=f(e)}return this.lazyHash_},e.prototype.getValue=function(){return this.value_},e.prototype.compareTo=function(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:(i.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},e.prototype.compareToLeafNode_=function(t){var n=typeof t.value_,r=typeof this.value_,o=e.VALUE_TYPE_ORDER.indexOf(n),s=e.VALUE_TYPE_ORDER.indexOf(r);return i.assert(o>=0,"Unknown leaf type: "+n),i.assert(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:s-o},e.prototype.withIndex=function(){return this},e.prototype.isIndexed=function(){return!0},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode()){var t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1},e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e}();function Ue(e){Le=e}function Ve(e){Me=e}var He,je,Be=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?R(e.name,t.name):i},t.prototype.isDefinedOn=function(e){return!e.getPriority().isEmpty()},t.prototype.indexedValueChanged=function(e,t){return!e.getPriority().equals(t.getPriority())},t.prototype.minPost=function(){return De.MIN},t.prototype.maxPost=function(){return new De(P,new Qe("[PRIORITY-POST]",Me))},t.prototype.makePost=function(e,t){var n=Le(e);return new De(t,new Qe("[PRIORITY-POST]",n))},t.prototype.toString=function(){return".priority"},t}(xe),Ye=new Be,Ke=function(){function e(e,t,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!e.isEmpty();)if(e=e,o=t?n(e.key,t):1,r&&(o*=-1),o<0)e=this.isReverse_?e.left:e.right;else{if(0===o){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}return e.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},e.prototype.hasNext=function(){return this.nodeStack_.length>0},e.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}},e}(),ze=function(){function e(t,n,r,i,o){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:Xe.EMPTY_NODE,this.right=null!=o?o:Xe.EMPTY_NODE}return e.prototype.copy=function(t,n,r,i,o){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},e.prototype.count=function(){return this.left.count()+1+this.right.count()},e.prototype.isEmpty=function(){return!1},e.prototype.inorderTraversal=function(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)},e.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},e.prototype.minKey=function(){return this.min_().key},e.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},e.prototype.insert=function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp_()},e.prototype.removeMin_=function(){if(this.left.isEmpty())return Xe.EMPTY_NODE;var e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),(e=e.copy(null,null,null,e.left.removeMin_(),null)).fixUp_()},e.prototype.remove=function(e,t){var n,r;if(t(e,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return Xe.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()},e.prototype.isRed_=function(){return this.color},e.prototype.fixUp_=function(){var e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e},e.prototype.moveRedLeft_=function(){var e=this.colorFlip_();return e.right.left.isRed_()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight_())).rotateLeft_()).colorFlip_()),e},e.prototype.moveRedRight_=function(){var e=this.colorFlip_();return e.left.left.isRed_()&&(e=(e=e.rotateRight_()).colorFlip_()),e},e.prototype.rotateLeft_=function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},e.prototype.rotateRight_=function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},e.prototype.colorFlip_=function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)},e.prototype.checkMaxDepth_=function(){var e=this.check_();return Math.pow(2,e)<=this.count()+1},e.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)},e.RED=!0,e.BLACK=!1,e}(),Ge=function(){function e(){}return e.prototype.copy=function(e,t,n,r,i){return this},e.prototype.insert=function(e,t,n){return new ze(e,t,null)},e.prototype.remove=function(e,t){return this},e.prototype.count=function(){return 0},e.prototype.isEmpty=function(){return!0},e.prototype.inorderTraversal=function(e){return!1},e.prototype.reverseTraversal=function(e){return!1},e.prototype.minKey=function(){return null},e.prototype.maxKey=function(){return null},e.prototype.check_=function(){return 0},e.prototype.isRed_=function(){return!1},e}(),Xe=function(){function e(t,n){void 0===n&&(n=e.EMPTY_NODE),this.comparator_=t,this.root_=n}return e.prototype.insert=function(t,n){return new e(this.comparator_,this.root_.insert(t,n,this.comparator_).copy(null,null,ze.BLACK,null,null))},e.prototype.remove=function(t){return new e(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,ze.BLACK,null,null))},e.prototype.get=function(e){for(var t,n=this.root_;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key)))return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null},e.prototype.getPredecessorKey=function(e){for(var t,n=this.root_,r=null;!n.isEmpty();){if(0===(t=this.comparator_(e,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},e.prototype.isEmpty=function(){return this.root_.isEmpty()},e.prototype.count=function(){return this.root_.count()},e.prototype.minKey=function(){return this.root_.minKey()},e.prototype.maxKey=function(){return this.root_.maxKey()},e.prototype.inorderTraversal=function(e){return this.root_.inorderTraversal(e)},e.prototype.reverseTraversal=function(e){return this.root_.reverseTraversal(e)},e.prototype.getIterator=function(e){return new Ke(this.root_,null,this.comparator_,!1,e)},e.prototype.getIteratorFrom=function(e,t){return new Ke(this.root_,e,this.comparator_,!1,t)},e.prototype.getReverseIteratorFrom=function(e,t){return new Ke(this.root_,e,this.comparator_,!0,t)},e.prototype.getReverseIterator=function(e){return new Ke(this.root_,null,this.comparator_,!0,e)},e.EMPTY_NODE=new Ge,e}(),$e=Math.log(2),Je=function(){function e(e){var t;this.count=(t=e+1,parseInt(Math.log(t)/$e,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=e+1&r}return e.prototype.nextBitIsOne=function(){var e=!(this.bits_&1<<this.current_);return this.current_--,e},e}(),Ze=function(e,t,n,r){e.sort(t);var i=function(t,r){var o,s,a=r-t;if(0===a)return null;if(1===a)return o=e[t],s=n?n(o):o,new ze(s,o.node,ze.BLACK,null,null);var h=parseInt(a/2,10)+t,u=i(t,h),l=i(h+1,r);return o=e[h],s=n?n(o):o,new ze(s,o.node,ze.BLACK,u,l)},o=function(t){for(var r=null,o=null,s=e.length,a=function(t,r){var o=s-t,a=s;s-=t;var u=i(o+1,a),l=e[o],c=n?n(l):l;h(new ze(c,l.node,r,null,u))},h=function(e){r?(r.left=e,r=e):(o=e,r=e)},u=0;u<t.count;++u){var l=t.nextBitIsOne(),c=Math.pow(2,t.count-(u+1));l?a(c,ze.BLACK):(a(c,ze.BLACK),a(c,ze.RED))}return o}(new Je(e.length));return new Xe(r||t,o)},et={},tt=function(){function e(e,t){this.indexes_=e,this.indexSet_=t}return Object.defineProperty(e,"Default",{get:function(){return i.assert(et&&Ye,"ChildrenNode.ts has not been loaded"),He=He||new e({".priority":et},{".priority":Ye})},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var t=i.safeGet(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Xe?t:null},e.prototype.hasIndex=function(e){return i.contains(this.indexSet_,e.toString())},e.prototype.addIndex=function(t,n){i.assert(t!==Oe,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var o,s=[],a=!1,h=n.getIterator(De.Wrap),u=h.getNext();u;)a=a||t.isDefinedOn(u.node),s.push(u),u=h.getNext();o=a?Ze(s,t.getCompare()):et;var l=t.toString(),c=r.__assign({},this.indexSet_);c[l]=t;var p=r.__assign({},this.indexes_);return p[l]=o,new e(p,c)},e.prototype.addToIndexes=function(t,n){var r=this;return new e(i.map(this.indexes_,function(e,o){var s=i.safeGet(r.indexSet_,o);if(i.assert(s,"Missing index implementation for "+o),e===et){if(s.isDefinedOn(t.node)){for(var a=[],h=n.getIterator(De.Wrap),u=h.getNext();u;)u.name!==t.name&&a.push(u),u=h.getNext();return a.push(t),Ze(a,s.getCompare())}return et}var l=n.get(t.name),c=e;return l&&(c=c.remove(new De(t.name,l))),c.insert(t,t.node)}),this.indexSet_)},e.prototype.removeFromIndexes=function(t,n){return new e(i.map(this.indexes_,function(e){if(e===et)return e;var r=n.get(t.name);return r?e.remove(new De(t.name,r)):e}),this.indexSet_)},e}();function nt(e,t){return R(e.name,t.name)}function rt(e,t){return R(e,t)}var it=function(){function e(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&qe(this.priorityNode_),this.children_.isEmpty()&&i.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(e,"EMPTY_NODE",{get:function(){return je||(je=new e(new Xe(rt),null,tt.Default))},enumerable:!0,configurable:!0}),e.prototype.isLeafNode=function(){return!1},e.prototype.getPriority=function(){return this.priorityNode_||je},e.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)},e.prototype.getImmediateChild=function(e){if(".priority"===e)return this.getPriority();var t=this.children_.get(e);return null===t?je:t},e.prototype.getChild=function(e){var t=e.getFront();return null===t?this:this.getImmediateChild(t).getChild(e.popFront())},e.prototype.hasChild=function(e){return null!==this.children_.get(e)},e.prototype.updateImmediateChild=function(t,n){if(i.assert(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);var r=new De(t,n),o=void 0,s=void 0;n.isEmpty()?(o=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=o.isEmpty()?je:this.priorityNode_;return new e(o,a,s)},e.prototype.updateChild=function(e,t){var n=e.getFront();if(null===n)return t;i.assert(".priority"!==e.getFront()||1===e.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(e.popFront(),t);return this.updateImmediateChild(n,r)},e.prototype.isEmpty=function(){return this.children_.isEmpty()},e.prototype.numChildren=function(){return this.children_.count()},e.prototype.val=function(t){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Ye,function(s,a){n[s]=a.val(t),r++,o&&e.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!t&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},e.prototype.hash=function(){if(null===this.lazyHash_){var e="";this.getPriority().isEmpty()||(e+="priority:"+We(this.getPriority().val())+":"),this.forEachChild(Ye,function(t,n){var r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":f(e)}return this.lazyHash_},e.prototype.getPredecessorChildName=function(e,t,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new De(e,t));return i?i.name:null}return this.children_.getPredecessorKey(e)},e.prototype.getFirstChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.minKey();return n&&n.name}return this.children_.minKey()},e.prototype.getFirstChild=function(e){var t=this.getFirstChildName(e);return t?new De(t,this.children_.get(t)):null},e.prototype.getLastChildName=function(e){var t=this.resolveIndex_(e);if(t){var n=t.maxKey();return n&&n.name}return this.children_.maxKey()},e.prototype.getLastChild=function(e){var t=this.getLastChildName(e);return t?new De(t,this.children_.get(t)):null},e.prototype.forEachChild=function(e,t){var n=this.resolveIndex_(e);return n?n.inorderTraversal(function(e){return t(e.name,e.node)}):this.children_.inorderTraversal(t)},e.prototype.getIterator=function(e){return this.getIteratorFrom(e.minPost(),e)},e.prototype.getIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,function(e){return e});for(var r=this.children_.getIteratorFrom(e.name,De.Wrap),i=r.peek();null!=i&&t.compare(i,e)<0;)r.getNext(),i=r.peek();return r},e.prototype.getReverseIterator=function(e){return this.getReverseIteratorFrom(e.maxPost(),e)},e.prototype.getReverseIteratorFrom=function(e,t){var n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,function(e){return e});for(var r=this.children_.getReverseIteratorFrom(e.name,De.Wrap),i=r.peek();null!=i&&t.compare(i,e)>0;)r.getNext(),i=r.peek();return r},e.prototype.compareTo=function(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===st?-1:0},e.prototype.withIndex=function(t){if(t===Oe||this.indexMap_.hasIndex(t))return this;var n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)},e.prototype.isIndexed=function(e){return e===Oe||this.indexMap_.hasIndex(e)},e.prototype.equals=function(e){if(e===this)return!0;if(e.isLeafNode())return!1;var t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){for(var n=this.getIterator(Ye),r=t.getIterator(Ye),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},e.prototype.resolveIndex_=function(e){return e===Oe?null:this.indexMap_.get(e.toString())},e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e}(),ot=function(e){function t(){return e.call(this,new Xe(rt),it.EMPTY_NODE,tt.Default)||this}return r.__extends(t,e),t.prototype.compareTo=function(e){return e===this?0:1},t.prototype.equals=function(e){return e===this},t.prototype.getPriority=function(){return this},t.prototype.getImmediateChild=function(e){return it.EMPTY_NODE},t.prototype.isEmpty=function(){return!1},t}(it),st=new ot;Object.defineProperties(De,{MIN:{value:new De(N,it.EMPTY_NODE)},MAX:{value:new De(P,st)}}),ke.__EMPTY_NODE=it.EMPTY_NODE,Qe.__childrenNodeConstructor=it,Fe(st),Ve(st);var at=!0;function ht(e,t){if(void 0===t&&(t=null),null===e)return it.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),i.assert(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Qe(e,ht(t));if(e instanceof Array||!at){var n=it.EMPTY_NODE;return F(e,function(t,r){if(i.contains(e,t)&&"."!==t.substring(0,1)){var o=ht(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(t,o))}}),n.updatePriority(ht(t))}var r=[],o=!1;if(F(e,function(e,t){if("."!==e.substring(0,1)){var n=ht(t);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new De(e,n)))}}),0===r.length)return it.EMPTY_NODE;var s=Ze(r,nt,function(e){return e.name},rt);if(o){var a=Ze(r,Ye.getCompare());return new it(s,ht(t),new tt({".priority":a},{".priority":Ye}))}return new it(s,ht(t),tt.Default)}Ue(ht);var ut,lt=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t.prototype.compare=function(e,t){var n=e.node.compareTo(t.node);return 0===n?R(e.name,t.name):n},t.prototype.isDefinedOn=function(e){return!0},t.prototype.indexedValueChanged=function(e,t){return!e.equals(t)},t.prototype.minPost=function(){return De.MIN},t.prototype.maxPost=function(){return De.MAX},t.prototype.makePost=function(e,t){var n=ht(e);return new De(t,n)},t.prototype.toString=function(){return".value"},t}(xe),ct=new lt,pt=function(e){function t(t){var n=e.call(this)||this;return n.indexPath_=t,i.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),n}return r.__extends(t,e),t.prototype.extractChild=function(e){return e.getChild(this.indexPath_)},t.prototype.isDefinedOn=function(e){return!e.getChild(this.indexPath_).isEmpty()},t.prototype.compare=function(e,t){var n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?R(e.name,t.name):i},t.prototype.makePost=function(e,t){var n=ht(e),r=it.EMPTY_NODE.updateChild(this.indexPath_,n);return new De(t,r)},t.prototype.maxPost=function(){var e=it.EMPTY_NODE.updateChild(this.indexPath_,st);return new De(P,e)},t.prototype.toString=function(){return this.indexPath_.slice().join("/")},t}(xe),dt=function(){function e(e,t,n){this.node_=e,this.ref_=t,this.index_=n}return e.prototype.val=function(){return i.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},e.prototype.exportVal=function(){return i.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},e.prototype.toJSON=function(){return i.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},e.prototype.exists=function(){return i.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},e.prototype.child=function(t){i.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),we("DataSnapshot.child",1,t,!1);var n=new j(t),r=this.ref_.child(n);return new e(this.node_.getChild(n),r,Ye)},e.prototype.hasChild=function(e){i.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),we("DataSnapshot.hasChild",1,e,!1);var t=new j(e);return!this.node_.getChild(t).isEmpty()},e.prototype.getPriority=function(){return i.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},e.prototype.forEach=function(t){var n=this;return i.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),i.validateCallback("DataSnapshot.forEach",1,t,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(r,i){return t(new e(i,n.ref_.child(r),Ye))})},e.prototype.hasChildren=function(){return i.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),e.prototype.numChildren=function(){return i.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},e.prototype.getRef=function(){return i.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),ft=function(){function e(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}return e.prototype.getPath=function(){var e=this.snapshot.getRef();return"value"===this.eventType?e.path:e.getParent().path},e.prototype.getEventType=function(){return this.eventType},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+i.stringify(this.snapshot.exportVal())},e}(),_t=function(){function e(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}return e.prototype.getPath=function(){return this.path},e.prototype.getEventType=function(){return"cancel"},e.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},e.prototype.toString=function(){return this.path.toString()+":cancel"},e}(),yt=function(){function e(e,t,n){this.callback_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){return"value"===e},e.prototype.createEvent=function(e,t){var n=t.getQueryParams().getIndex();return new ft("value",this,new dt(e.snapshotNode,t.getRef(),n))},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){i.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callback_;return function(){r.call(t,e.snapshot)}},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new _t(this,e,t):null},e.prototype.matches=function(t){return t instanceof e&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},e.prototype.hasAnyCallback=function(){return null!==this.callback_},e}(),vt=function(){function e(e,t,n){this.callbacks_=e,this.cancelCallback_=t,this.context_=n}return e.prototype.respondsTo=function(e){var t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,i.contains(this.callbacks_,t)},e.prototype.createCancelEvent=function(e,t){return this.cancelCallback_?new _t(this,e,t):null},e.prototype.createEvent=function(e,t){i.assert(null!=e.childName,"Child events should have a childName.");var n=t.getRef().child(e.childName),r=t.getQueryParams().getIndex();return new ft(e.type,this,new dt(e.snapshotNode,n,r),e.prevName)},e.prototype.getEventRunner=function(e){var t=this.context_;if("cancel"===e.getEventType()){i.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(t,e.error)}}var r=this.callbacks_[e.eventType];return function(){r.call(t,e.snapshot,e.prevName)}},e.prototype.matches=function(t){var n=this;if(t instanceof e){if(!this.callbacks_||!t.callbacks_)return!0;if(this.context_===t.context_){var r=Object.keys(t.callbacks_),i=Object.keys(this.callbacks_),o=r.length;if(o===i.length){if(1===o){var s=r[0],a=i[0];return!(a!==s||t.callbacks_[s]&&this.callbacks_[a]&&t.callbacks_[s]!==this.callbacks_[a])}return i.every(function(e){return t.callbacks_[e]===n.callbacks_[e]})}}}return!1},e.prototype.hasAnyCallback=function(){return null!==this.callbacks_},e}(),gt=function(){function e(e,t,n,r){this.repo=e,this.path=t,this.queryParams_=n,this.orderByCalled_=r}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return i.assert(ut,"Reference.ts has not been loaded"),ut},set:function(e){ut=e},enumerable:!0,configurable:!0}),e.validateQueryEndpoints_=function(e){var t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===Oe){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==N)throw new Error(r);if("string"!=typeof t)throw new Error(o)}if(e.hasEnd()){if(e.getIndexEndName()!==P)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(e.getIndex()===Ye){if(null!=t&&!fe(t)||null!=n&&!fe(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(i.assert(e.getIndex()instanceof pt||e.getIndex()===ct,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},e.validateLimit_=function(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},e.prototype.validateNoPreviousOrderByCall_=function(e){if(!0===this.orderByCalled_)throw new Error(e+": You can't combine multiple orderBy calls.")},e.prototype.getQueryParams=function(){return this.queryParams_},e.prototype.getRef=function(){return i.validateArgCount("Query.ref",0,0,arguments.length),new e.__referenceConstructor(this.repo,this.path)},e.prototype.on=function(t,n,r,o){i.validateArgCount("Query.on",2,4,arguments.length),Ce("Query.on",1,t,!1),i.validateCallback("Query.on",2,n,!1);var s=e.getCancelAndContextArgs_("Query.on",r,o);if("value"===t)this.onValueEvent(n,s.cancel,s.context);else{var a={};a[t]=n,this.onChildEvent(a,s.cancel,s.context)}return n},e.prototype.onValueEvent=function(e,t,n){var r=new yt(e,t||null,n||null);this.repo.addEventCallbackForQuery(this,r)},e.prototype.onChildEvent=function(e,t,n){var r=new vt(e,t,n);this.repo.addEventCallbackForQuery(this,r)},e.prototype.off=function(e,t,n){i.validateArgCount("Query.off",0,3,arguments.length),Ce("Query.off",1,e,!0),i.validateCallback("Query.off",2,t,!0),i.validateContextObject("Query.off",3,n,!0);var r=null,o=null;"value"===e?r=new yt(t||null,null,n||null):e&&(t&&((o={})[e]=t),r=new vt(o,null,n||null));this.repo.removeEventCallbackForQuery(this,r)},e.prototype.once=function(t,n,r,o){var s=this;i.validateArgCount("Query.once",1,4,arguments.length),Ce("Query.once",1,t,!1),i.validateCallback("Query.once",2,n,!0);var a=e.getCancelAndContextArgs_("Query.once",r,o),h=!0,u=new i.Deferred;u.promise.catch(function(){});var l=function(e){h&&(h=!1,s.off(t,l),n&&n.bind(a.context)(e),u.resolve(e))};return this.on(t,l,function(e){s.off(t,l),a.cancel&&a.cancel.bind(a.context)(e),u.reject(e)}),u.promise},e.prototype.limitToFirst=function(t){if(i.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},e.prototype.limitToLast=function(t){if(i.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new e(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},e.prototype.orderByChild=function(t){if(i.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');we("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var n=new j(t);if(n.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var r=new pt(n),o=this.queryParams_.orderBy(r);return e.validateQueryEndpoints_(o),new e(this.repo,this.path,o,!0)},e.prototype.orderByKey=function(){i.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(Oe);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByPriority=function(){i.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Ye);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.orderByValue=function(){i.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(ct);return e.validateQueryEndpoints_(t),new e(this.repo,this.path,t,!0)},e.prototype.startAt=function(t,n){void 0===t&&(t=null),i.validateArgCount("Query.startAt",0,2,arguments.length),_e("Query.startAt",1,t,this.path,!0),Ee("Query.startAt",2,n,!0);var r=this.queryParams_.startAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(t=null,n=null),new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.endAt=function(t,n){void 0===t&&(t=null),i.validateArgCount("Query.endAt",0,2,arguments.length),_e("Query.endAt",1,t,this.path,!0),Ee("Query.endAt",2,n,!0);var r=this.queryParams_.endAt(t,n);if(e.validateLimit_(r),e.validateQueryEndpoints_(r),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new e(this.repo,this.path,r,this.orderByCalled_)},e.prototype.equalTo=function(e,t){if(i.validateArgCount("Query.equalTo",1,2,arguments.length),_e("Query.equalTo",1,e,this.path,!1),Ee("Query.equalTo",2,t,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(e,t).endAt(e,t)},e.prototype.toString=function(){return i.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},e.prototype.toJSON=function(){return i.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},e.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},e.prototype.queryIdentifier=function(){var e=this.queryObject(),t=k(e);return"{}"===t?"default":t},e.prototype.isEqual=function(t){if(i.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof e)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var n=this.repo===t.repo,r=this.path.equals(t.path),o=this.queryIdentifier()===t.queryIdentifier();return n&&r&&o},e.getCancelAndContextArgs_=function(e,t,n){var r={cancel:null,context:null};if(t&&n)r.cancel=t,i.validateCallback(e,3,r.cancel,!0),r.context=n,i.validateContextObject(e,4,r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error(i.errorPrefix(e,3,!0)+" must either be a cancel callback or a context object.");r.cancel=t}return r},Object.defineProperty(e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),e}(),mt=function(){function e(e){this.node_=e}return e.prototype.getImmediateChild=function(t){return new e(this.node_.getImmediateChild(t))},e.prototype.node=function(){return this.node_},e}(),Ct=function(){function e(e,t){this.syncTree_=e,this.path_=t}return e.prototype.getImmediateChild=function(t){var n=this.path_.child(t);return new e(this.syncTree_,n)},e.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},e}(),Et=function(e){return(e=e||{}).timestamp=e.timestamp||(new Date).getTime(),e},wt=function(e,t,n){return e&&"object"==typeof e?(i.assert(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?Tt(e[".sv"],t,n):"object"==typeof e[".sv"]?bt(e[".sv"],t):void i.assert(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},Tt=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:i.assert(!1,"Unexpected server value: "+e)}},bt=function(e,t,n){e.hasOwnProperty("increment")||i.assert(!1,"Unexpected server value: "+JSON.stringify(e,null,2));var r=e.increment;"number"!=typeof r&&i.assert(!1,"Unexpected increment value: "+r);var o=t.node();if(i.assert(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var s=o.getValue();return"number"!=typeof s?r:s+r},St=function(e,t,n,r){return Nt(t,new Ct(n,e),r)},It=function(e,t,n){return Nt(e,new mt(t),n)};function Nt(e,t,n){var r,i=e.getPriority().val(),o=wt(i,t.getImmediateChild(".priority"),n);if(e.isLeafNode()){var s=e,a=wt(s.getValue(),t,n);return a!==s.getValue()||o!==s.getPriority().val()?new Qe(a,ht(o)):e}var h=e;return r=h,o!==h.getPriority().val()&&(r=r.updatePriority(new Qe(o))),h.forEachChild(Ye,function(e,i){var o=Nt(i,t.getImmediateChild(e),n);o!==i&&(r=r.updateImmediateChild(e,o))}),r}var Pt,Rt=function(){function e(){this.value=null,this.children=new Map}return e.prototype.find=function(e){if(null!=this.value)return this.value.getChild(e);if(!e.isEmpty()&&this.children.size>0){var t=e.getFront();return e=e.popFront(),this.children.has(t)?this.children.get(t).find(e):null}return null},e.prototype.remember=function(t,n){if(t.isEmpty())this.value=n,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,n);else{var r=t.getFront();this.children.has(r)||this.children.set(r,new e);var i=this.children.get(r);t=t.popFront(),i.remember(t,n)}},e.prototype.forget=function(e){if(e.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var t=this.value;this.value=null;var n=this;return t.forEachChild(Ye,function(e,t){n.remember(new j(e),t)}),this.forget(e)}if(this.children.size>0){var r=e.getFront();if(e=e.popFront(),this.children.has(r))this.children.get(r).forget(e)&&this.children.delete(r);return 0===this.children.size}return!0},e.prototype.forEachTree=function(e,t){null!==this.value?t(e,this.value):this.forEachChild(function(n,r){var i=new j(e.toString()+"/"+n);r.forEachTree(i,t)})},e.prototype.forEachChild=function(e){this.children.forEach(function(t,n){e(n,t)})},e}();!function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Pt||(Pt={}));var Dt,xt,kt=function(){function e(e,t,n,r){this.fromUser=e,this.fromServer=t,this.queryId=n,this.tagged=r,i.assert(!r||t,"Tagged queries must be from server.")}return e.User=new e(!0,!1,null,!1),e.Server=new e(!1,!0,null,!1),e.forServerTaggedQuery=function(t){return new e(!1,!0,t,!0)},e}(),Ot=function(){function e(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Pt.ACK_USER_WRITE,this.source=kt.User}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return i.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new j(t));return new e(j.Empty,n,this.revert)}return i.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new e(this.path.popFront(),this.affectedTree,this.revert)},e}(),Ft=function(){return Dt||(Dt=new Xe(D)),Dt},At=function(){function e(e,t){void 0===t&&(t=Ft()),this.value=e,this.children=t}return e.fromObject=function(t){var n=e.Empty;return F(t,function(e,t){n=n.set(new j(e),t)}),n},e.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},e.prototype.findRootMostMatchingPathAndValue=function(e,t){if(null!=this.value&&t(this.value))return{path:j.Empty,value:this.value};if(e.isEmpty())return null;var n=e.getFront(),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(e.popFront(),t);return null!=i?{path:new j(n).child(i.path),value:i.value}:null}return null},e.prototype.findRootMostValueAndPath=function(e){return this.findRootMostMatchingPathAndValue(e,function(){return!0})},e.prototype.subtree=function(t){if(t.isEmpty())return this;var n=t.getFront(),r=this.children.get(n);return null!==r?r.subtree(t.popFront()):e.Empty},e.prototype.set=function(t,n){if(t.isEmpty())return new e(n,this.children);var r=t.getFront(),i=(this.children.get(r)||e.Empty).set(t.popFront(),n),o=this.children.insert(r,i);return new e(this.value,o)},e.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?e.Empty:new e(null,this.children);var n=t.getFront(),r=this.children.get(n);if(r){var i=r.remove(t.popFront()),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?e.Empty:new e(this.value,o)}return this},e.prototype.get=function(e){if(e.isEmpty())return this.value;var t=e.getFront(),n=this.children.get(t);return n?n.get(e.popFront()):null},e.prototype.setTree=function(t,n){if(t.isEmpty())return n;var r=t.getFront(),i=(this.children.get(r)||e.Empty).setTree(t.popFront(),n),o=void 0;return o=i.isEmpty()?this.children.remove(r):this.children.insert(r,i),new e(this.value,o)},e.prototype.fold=function(e){return this.fold_(j.Empty,e)},e.prototype.fold_=function(e,t){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(e.child(r),t)}),t(e,this.value,n)},e.prototype.findOnPath=function(e,t){return this.findOnPath_(e,j.Empty,t)},e.prototype.findOnPath_=function(e,t,n){var r=!!this.value&&n(t,this.value);if(r)return r;if(e.isEmpty())return null;var i=e.getFront(),o=this.children.get(i);return o?o.findOnPath_(e.popFront(),t.child(i),n):null},e.prototype.foreachOnPath=function(e,t){return this.foreachOnPath_(e,j.Empty,t)},e.prototype.foreachOnPath_=function(t,n,r){if(t.isEmpty())return this;this.value&&r(n,this.value);var i=t.getFront(),o=this.children.get(i);return o?o.foreachOnPath_(t.popFront(),n.child(i),r):e.Empty},e.prototype.foreach=function(e){this.foreach_(j.Empty,e)},e.prototype.foreach_=function(e,t){this.children.inorderTraversal(function(n,r){r.foreach_(e.child(n),t)}),this.value&&t(e,this.value)},e.prototype.foreachChild=function(e){this.children.inorderTraversal(function(t,n){n.value&&e(t,n.value)})},e.Empty=new e(null),e}(),Lt=function(){function e(e,t){this.source=e,this.path=t,this.type=Pt.LISTEN_COMPLETE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,j.Empty):new e(this.source,this.path.popFront())},e}(),Mt=function(){function e(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Pt.OVERWRITE}return e.prototype.operationForChild=function(t){return this.path.isEmpty()?new e(this.source,j.Empty,this.snap.getImmediateChild(t)):new e(this.source,this.path.popFront(),this.snap)},e}(),Wt=function(){function e(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Pt.MERGE}return e.prototype.operationForChild=function(t){if(this.path.isEmpty()){var n=this.children.subtree(new j(t));return n.isEmpty()?null:n.value?new Mt(this.source,j.Empty,n.value):new e(this.source,j.Empty,n)}return i.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new e(this.source,this.path.popFront(),this.children)},e.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},e}(),qt=function(){function e(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}return e.prototype.isFullyInitialized=function(){return this.fullyInitialized_},e.prototype.isFiltered=function(){return this.filtered_},e.prototype.isCompleteForPath=function(e){if(e.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var t=e.getFront();return this.isCompleteForChild(t)},e.prototype.isCompleteForChild=function(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)},e.prototype.getNode=function(){return this.node_},e}(),Qt=function(){function e(e,t){this.eventCache_=e,this.serverCache_=t}return e.prototype.updateEventSnap=function(t,n,r){return new e(new qt(t,n,r),this.serverCache_)},e.prototype.updateServerSnap=function(t,n,r){return new e(this.eventCache_,new qt(t,n,r))},e.prototype.getEventCache=function(){return this.eventCache_},e.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},e.prototype.getServerCache=function(){return this.serverCache_},e.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},e.Empty=new e(new qt(it.EMPTY_NODE,!1,!1),new qt(it.EMPTY_NODE,!1,!1)),e}(),Ut=function(){function e(e,t,n,r,i){this.type=e,this.snapshotNode=t,this.childName=n,this.oldSnap=r,this.prevName=i}return e.valueChange=function(t){return new e(e.VALUE,t)},e.childAddedChange=function(t,n){return new e(e.CHILD_ADDED,n,t)},e.childRemovedChange=function(t,n){return new e(e.CHILD_REMOVED,n,t)},e.childChangedChange=function(t,n,r){return new e(e.CHILD_CHANGED,n,t,r)},e.childMovedChange=function(t,n){return new e(e.CHILD_MOVED,n,t)},e.CHILD_ADDED="child_added",e.CHILD_REMOVED="child_removed",e.CHILD_CHANGED="child_changed",e.CHILD_MOVED="child_moved",e.VALUE="value",e}(),Vt=function(){function e(e){this.index_=e}return e.prototype.updateChild=function(e,t,n,r,o,s){i.assert(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=s&&(n.isEmpty()?e.hasChild(t)?s.trackChildChange(Ut.childRemovedChange(t,a)):i.assert(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(Ut.childAddedChange(t,n)):s.trackChildChange(Ut.childChangedChange(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))},e.prototype.updateFullNode=function(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(Ye,function(e,r){t.hasChild(e)||n.trackChildChange(Ut.childRemovedChange(e,r))}),t.isLeafNode()||t.forEachChild(Ye,function(t,r){if(e.hasChild(t)){var i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(Ut.childChangedChange(t,r,i))}else n.trackChildChange(Ut.childAddedChange(t,r))})),t.withIndex(this.index_)},e.prototype.updatePriority=function(e,t){return e.isEmpty()?it.EMPTY_NODE:e.updatePriority(t)},e.prototype.filtersNodes=function(){return!1},e.prototype.getIndexedFilter=function(){return this},e.prototype.getIndex=function(){return this.index_},e}(),Ht=function(){function e(){this.changeMap=new Map}return e.prototype.trackChildChange=function(e){var t=e.type,n=e.childName;i.assert(t===Ut.CHILD_ADDED||t===Ut.CHILD_CHANGED||t===Ut.CHILD_REMOVED,"Only child changes supported for tracking"),i.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if(t===Ut.CHILD_ADDED&&o===Ut.CHILD_REMOVED)this.changeMap.set(n,Ut.childChangedChange(n,e.snapshotNode,r.snapshotNode));else if(t===Ut.CHILD_REMOVED&&o===Ut.CHILD_ADDED)this.changeMap.delete(n);else if(t===Ut.CHILD_REMOVED&&o===Ut.CHILD_CHANGED)this.changeMap.set(n,Ut.childRemovedChange(n,r.oldSnap));else if(t===Ut.CHILD_CHANGED&&o===Ut.CHILD_ADDED)this.changeMap.set(n,Ut.childAddedChange(n,e.snapshotNode));else{if(t!==Ut.CHILD_CHANGED||o!==Ut.CHILD_CHANGED)throw i.assertionError("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,Ut.childChangedChange(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)},e.prototype.getChanges=function(){return Array.from(this.changeMap.values())},e}(),jt=function(){function e(){}return e.prototype.getCompleteChild=function(e){return null},e.prototype.getChildAfterChild=function(e,t,n){return null},e}(),Bt=new jt,Yt=function(){function e(e,t,n){void 0===n&&(n=null),this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}return e.prototype.getCompleteChild=function(e){var t=this.viewCache_.getEventCache();if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);var n=null!=this.optCompleteServerCache_?new qt(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(e,n)},e.prototype.getChildAfterChild=function(e,t,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,t,1,n,e);return 0===i.length?null:i[0]},e}(),Kt=function(){return function(e,t){this.viewCache=e,this.changes=t}}(),zt=function(){function e(e){this.filter_=e}return e.prototype.assertIndexed=function(e){i.assert(e.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),i.assert(e.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},e.prototype.applyOperation=function(t,n,r,o){var s,a,h=new Ht;if(n.type===Pt.OVERWRITE){var u=n;u.source.fromUser?s=this.applyUserOverwrite_(t,u.path,u.snap,r,o,h):(i.assert(u.source.fromServer,"Unknown source."),a=u.source.tagged||t.getServerCache().isFiltered()&&!u.path.isEmpty(),s=this.applyServerOverwrite_(t,u.path,u.snap,r,o,a,h))}else if(n.type===Pt.MERGE){var l=n;l.source.fromUser?s=this.applyUserMerge_(t,l.path,l.children,r,o,h):(i.assert(l.source.fromServer,"Unknown source."),a=l.source.tagged||t.getServerCache().isFiltered(),s=this.applyServerMerge_(t,l.path,l.children,r,o,a,h))}else if(n.type===Pt.ACK_USER_WRITE){var c=n;s=c.revert?this.revertUserWrite_(t,c.path,r,o,h):this.ackUserWrite_(t,c.path,c.affectedTree,r,o,h)}else{if(n.type!==Pt.LISTEN_COMPLETE)throw i.assertionError("Unknown operation type: "+n.type);s=this.listenComplete_(t,n.path,r,h)}var p=h.getChanges();return e.maybeAddValueEvent_(t,s,p),new Kt(s,p)},e.maybeAddValueEvent_=function(e,t,n){var r=t.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=e.getCompleteEventSnap();(n.length>0||!e.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(Ut.valueChange(t.getCompleteEventSnap()))}},e.prototype.generateEventCacheAfterServerEvent_=function(e,t,n,r,o){var s=e.getEventCache();if(null!=n.shadowingWrite(t))return e;var a=void 0,h=void 0;if(t.isEmpty())if(i.assert(e.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),e.getServerCache().isFiltered()){var u=e.getCompleteServerSnap(),l=u instanceof it?u:it.EMPTY_NODE,c=n.calcCompleteEventChildren(l);a=this.filter_.updateFullNode(e.getEventCache().getNode(),c,o)}else{var p=n.calcCompleteEventCache(e.getCompleteServerSnap());a=this.filter_.updateFullNode(e.getEventCache().getNode(),p,o)}else{var d=t.getFront();if(".priority"===d){i.assert(1===t.getLength(),"Can't have a priority with additional path components");var f=s.getNode();h=e.getServerCache().getNode();var _=n.calcEventCacheAfterServerOverwrite(t,f,h);a=null!=_?this.filter_.updatePriority(f,_):s.getNode()}else{var y=t.popFront(),v=void 0;if(s.isCompleteForChild(d)){h=e.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(t,s.getNode(),h);v=null!=g?s.getNode().getImmediateChild(d).updateChild(y,g):s.getNode().getImmediateChild(d)}else v=n.calcCompleteChild(d,e.getServerCache());a=null!=v?this.filter_.updateChild(s.getNode(),d,v,y,r,o):s.getNode()}}return e.updateEventSnap(a,s.isFullyInitialized()||t.isEmpty(),this.filter_.filtersNodes())},e.prototype.applyServerOverwrite_=function(e,t,n,r,i,o,s){var a,h=e.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(t.isEmpty())a=u.updateFullNode(h.getNode(),n,null);else if(u.filtersNodes()&&!h.isFiltered()){var l=h.getNode().updateChild(t,n);a=u.updateFullNode(h.getNode(),l,null)}else{var c=t.getFront();if(!h.isCompleteForPath(t)&&t.getLength()>1)return e;var p=t.popFront(),d=h.getNode().getImmediateChild(c).updateChild(p,n);a=".priority"===c?u.updatePriority(h.getNode(),d):u.updateChild(h.getNode(),c,d,p,Bt,null)}var f=e.updateServerSnap(a,h.isFullyInitialized()||t.isEmpty(),u.filtersNodes()),_=new Yt(r,f,i);return this.generateEventCacheAfterServerEvent_(f,t,r,_,s)},e.prototype.applyUserOverwrite_=function(e,t,n,r,i,o){var s,a,h=e.getEventCache(),u=new Yt(r,e,i);if(t.isEmpty())a=this.filter_.updateFullNode(e.getEventCache().getNode(),n,o),s=e.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var l=t.getFront();if(".priority"===l)a=this.filter_.updatePriority(e.getEventCache().getNode(),n),s=e.updateEventSnap(a,h.isFullyInitialized(),h.isFiltered());else{var c=t.popFront(),p=h.getNode().getImmediateChild(l),d=void 0;if(c.isEmpty())d=n;else{var f=u.getCompleteChild(l);d=null!=f?".priority"===c.getBack()&&f.getChild(c.parent()).isEmpty()?f:f.updateChild(c,n):it.EMPTY_NODE}if(p.equals(d))s=e;else{var _=this.filter_.updateChild(h.getNode(),l,d,c,u,o);s=e.updateEventSnap(_,h.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},e.cacheHasChild_=function(e,t){return e.getEventCache().isCompleteForChild(t)},e.prototype.applyUserMerge_=function(t,n,r,i,o,s){var a=this,h=t;return r.foreach(function(r,u){var l=n.child(r);e.cacheHasChild_(t,l.getFront())&&(h=a.applyUserOverwrite_(h,l,u,i,o,s))}),r.foreach(function(r,u){var l=n.child(r);e.cacheHasChild_(t,l.getFront())||(h=a.applyUserOverwrite_(h,l,u,i,o,s))}),h},e.prototype.applyMerge_=function(e,t){return t.foreach(function(t,n){e=e.updateChild(t,n)}),e},e.prototype.applyServerMerge_=function(e,t,n,r,i,o,s){var a=this;if(e.getServerCache().getNode().isEmpty()&&!e.getServerCache().isFullyInitialized())return e;var h,u=e;h=t.isEmpty()?n:At.Empty.setTree(t,n);var l=e.getServerCache().getNode();return h.children.inorderTraversal(function(t,n){if(l.hasChild(t)){var h=e.getServerCache().getNode().getImmediateChild(t),c=a.applyMerge_(h,n);u=a.applyServerOverwrite_(u,new j(t),c,r,i,o,s)}}),h.children.inorderTraversal(function(t,n){var h=!e.getServerCache().isCompleteForChild(t)&&null==n.value;if(!l.hasChild(t)&&!h){var c=e.getServerCache().getNode().getImmediateChild(t),p=a.applyMerge_(c,n);u=a.applyServerOverwrite_(u,new j(t),p,r,i,o,s)}}),u},e.prototype.ackUserWrite_=function(e,t,n,r,i,o){if(null!=r.shadowingWrite(t))return e;var s=e.getServerCache().isFiltered(),a=e.getServerCache();if(null!=n.value){if(t.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(t))return this.applyServerOverwrite_(e,t,a.getNode().getChild(t),r,i,s,o);if(t.isEmpty()){var h=At.Empty;return a.getNode().forEachChild(Oe,function(e,t){h=h.set(new j(e),t)}),this.applyServerMerge_(e,t,h,r,i,s,o)}return e}var u=At.Empty;return n.foreach(function(e,n){var r=t.child(e);a.isCompleteForPath(r)&&(u=u.set(e,a.getNode().getChild(r)))}),this.applyServerMerge_(e,t,u,r,i,s,o)},e.prototype.listenComplete_=function(e,t,n,r){var i=e.getServerCache(),o=e.updateServerSnap(i.getNode(),i.isFullyInitialized()||t.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,t,n,Bt,r)},e.prototype.revertUserWrite_=function(e,t,n,r,o){var s;if(null!=n.shadowingWrite(t))return e;var a=new Yt(n,e,r),h=e.getEventCache().getNode(),u=void 0;if(t.isEmpty()||".priority"===t.getFront()){var l=void 0;if(e.getServerCache().isFullyInitialized())l=n.calcCompleteEventCache(e.getCompleteServerSnap());else{var c=e.getServerCache().getNode();i.assert(c instanceof it,"serverChildren would be complete if leaf node"),l=n.calcCompleteEventChildren(c)}l=l,u=this.filter_.updateFullNode(h,l,o)}else{var p=t.getFront(),d=n.calcCompleteChild(p,e.getServerCache());null==d&&e.getServerCache().isCompleteForChild(p)&&(d=h.getImmediateChild(p)),(u=null!=d?this.filter_.updateChild(h,p,d,t.popFront(),a,o):e.getEventCache().getNode().hasChild(p)?this.filter_.updateChild(h,p,it.EMPTY_NODE,t.popFront(),a,o):h).isEmpty()&&e.getServerCache().isFullyInitialized()&&(s=n.calcCompleteEventCache(e.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,s,o))}return s=e.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(j.Empty),e.updateEventSnap(u,s,this.filter_.filtersNodes())},e}(),Gt=function(){function e(e){this.query_=e,this.index_=this.query_.getQueryParams().getIndex()}return e.prototype.generateEventsForChanges=function(e,t,n){var r=this,i=[],o=[];return e.forEach(function(e){e.type===Ut.CHILD_CHANGED&&r.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push(Ut.childMovedChange(e.childName,e.snapshotNode))}),this.generateEventsForType_(i,Ut.CHILD_REMOVED,e,n,t),this.generateEventsForType_(i,Ut.CHILD_ADDED,e,n,t),this.generateEventsForType_(i,Ut.CHILD_MOVED,o,n,t),this.generateEventsForType_(i,Ut.CHILD_CHANGED,e,n,t),this.generateEventsForType_(i,Ut.VALUE,e,n,t),i},e.prototype.generateEventsForType_=function(e,t,n,r,i){var o=this,s=n.filter(function(e){return e.type===t});s.sort(this.compareChanges_.bind(this)),s.forEach(function(t){var n=o.materializeSingleChange_(t,i);r.forEach(function(r){r.respondsTo(t.type)&&e.push(r.createEvent(n,o.query_))})})},e.prototype.materializeSingleChange_=function(e,t){return"value"===e.type||"child_removed"===e.type?e:(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,this.index_),e)},e.prototype.compareChanges_=function(e,t){if(null==e.childName||null==t.childName)throw i.assertionError("Should only compare child_ events.");var n=new De(e.childName,e.snapshotNode),r=new De(t.childName,t.snapshotNode);return this.index_.compare(n,r)},e}(),Xt=function(){function e(e,t){this.query_=e,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Vt(n.getIndex()),i=n.getNodeFilter();this.processor_=new zt(i);var o=t.getServerCache(),s=t.getEventCache(),a=r.updateFullNode(it.EMPTY_NODE,o.getNode(),null),h=i.updateFullNode(it.EMPTY_NODE,s.getNode(),null),u=new qt(a,o.isFullyInitialized(),r.filtersNodes()),l=new qt(h,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Qt(l,u),this.eventGenerator_=new Gt(this.query_)}return e.prototype.getQuery=function(){return this.query_},e.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},e.prototype.getCompleteServerCache=function(e){var t=this.viewCache_.getCompleteServerSnap();return t&&(this.query_.getQueryParams().loadsAllData()||!e.isEmpty()&&!t.getImmediateChild(e.getFront()).isEmpty())?t.getChild(e):null},e.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},e.prototype.addEventRegistration=function(e){this.eventRegistrations_.push(e)},e.prototype.removeEventRegistration=function(e,t){var n=[];if(t){i.assert(null==e,"A cancel should cancel all event registrations.");var r=this.query_.path;this.eventRegistrations_.forEach(function(e){t=t;var i=e.createCancelEvent(t,r);i&&n.push(i)})}if(e){for(var o=[],s=0;s<this.eventRegistrations_.length;++s){var a=this.eventRegistrations_[s];if(a.matches(e)){if(e.hasAnyCallback()){o=o.concat(this.eventRegistrations_.slice(s+1));break}}else o.push(a)}this.eventRegistrations_=o}else this.eventRegistrations_=[];return n},e.prototype.applyOperation=function(e,t,n){e.type===Pt.MERGE&&null!==e.source.queryId&&(i.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),i.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,o=this.processor_.applyOperation(r,e,t,n);return this.processor_.assertIndexed(o.viewCache),i.assert(o.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=o.viewCache,this.generateEventsForChanges_(o.changes,o.viewCache.getEventCache().getNode(),null)},e.prototype.getInitialEvents=function(e){var t=this.viewCache_.getEventCache(),n=[];t.getNode().isLeafNode()||t.getNode().forEachChild(Ye,function(e,t){n.push(Ut.childAddedChange(e,t))});return t.isFullyInitialized()&&n.push(Ut.valueChange(t.getNode())),this.generateEventsForChanges_(n,t.getNode(),e)},e.prototype.generateEventsForChanges_=function(e,t,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(e,t,r)},e}(),$t=function(){function e(){this.views=new Map}return Object.defineProperty(e,"__referenceConstructor",{get:function(){return i.assert(xt,"Reference.ts has not been loaded"),xt},set:function(e){i.assert(!xt,"__referenceConstructor has already been defined"),xt=e},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(){return 0===this.views.size},e.prototype.applyOperation=function(e,t,n){var o,s,a=e.source.queryId;if(null!==a){var h=this.views.get(a);return i.assert(null!=h,"SyncTree gave us an op for an invalid query."),h.applyOperation(e,t,n)}var u=[];try{for(var l=r.__values(this.views.values()),c=l.next();!c.done;c=l.next()){h=c.value;u=u.concat(h.applyOperation(e,t,n))}}catch(p){o={error:p}}finally{try{c&&!c.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}return u},e.prototype.addEventRegistration=function(e,t,n,r,i){var o=e.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),h=!1;a?h=!0:r instanceof it?(a=n.calcCompleteEventChildren(r),h=!1):(a=it.EMPTY_NODE,h=!1);var u=new Qt(new qt(a,h,!1),new qt(r,i,!1));s=new Xt(e,u),this.views.set(o,s)}return s.addEventRegistration(t),s.getInitialEvents(t)},e.prototype.removeEventRegistration=function(t,n,i){var o,s,a=t.queryIdentifier(),h=[],u=[],l=this.hasCompleteView();if("default"===a)try{for(var c=r.__values(this.views.entries()),p=c.next();!p.done;p=c.next()){var d=r.__read(p.value,2),f=d[0],_=d[1];u=u.concat(_.removeEventRegistration(n,i)),_.isEmpty()&&(this.views.delete(f),_.getQuery().getQueryParams().loadsAllData()||h.push(_.getQuery()))}}catch(y){o={error:y}}finally{try{p&&!p.done&&(s=c.return)&&s.call(c)}finally{if(o)throw o.error}}else(_=this.views.get(a))&&(u=u.concat(_.removeEventRegistration(n,i)),_.isEmpty()&&(this.views.delete(a),_.getQuery().getQueryParams().loadsAllData()||h.push(_.getQuery())));return l&&!this.hasCompleteView()&&h.push(new e.__referenceConstructor(t.repo,t.path)),{removed:h,events:u}},e.prototype.getQueryViews=function(){var e,t,n=[];try{for(var i=r.__values(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;s.getQuery().getQueryParams().loadsAllData()||n.push(s)}}catch(a){e={error:a}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}return n},e.prototype.getCompleteServerCache=function(e){var t,n,i=null;try{for(var o=r.__values(this.views.values()),s=o.next();!s.done;s=o.next()){var a=s.value;i=i||a.getCompleteServerCache(e)}}catch(h){t={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return i},e.prototype.viewForQuery=function(e){if(e.getQueryParams().loadsAllData())return this.getCompleteView();var t=e.queryIdentifier();return this.views.get(t)},e.prototype.viewExistsForQuery=function(e){return null!=this.viewForQuery(e)},e.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},e.prototype.getCompleteView=function(){var e,t;try{for(var n=r.__values(this.views.values()),i=n.next();!i.done;i=n.next()){var o=i.value;if(o.getQuery().getQueryParams().loadsAllData())return o}}catch(s){e={error:s}}finally{try{i&&!i.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},e}(),Jt=function(){function e(e){this.writeTree_=e}return e.prototype.addWrite=function(t,n){if(t.isEmpty())return new e(new At(n));var r=this.writeTree_.findRootMostValueAndPath(t);if(null!=r){var i=r.path,o=r.value,s=j.relativePath(i,t);return o=o.updateChild(s,n),new e(this.writeTree_.set(i,o))}var a=new At(n);return new e(this.writeTree_.setTree(t,a))},e.prototype.addWrites=function(e,t){var n=this;return F(t,function(t,r){n=n.addWrite(e.child(t),r)}),n},e.prototype.removeWrite=function(t){return t.isEmpty()?e.Empty:new e(this.writeTree_.setTree(t,At.Empty))},e.prototype.hasCompleteWrite=function(e){return null!=this.getCompleteNode(e)},e.prototype.getCompleteNode=function(e){var t=this.writeTree_.findRootMostValueAndPath(e);return null!=t?this.writeTree_.get(t.path).getChild(j.relativePath(t.path,e)):null},e.prototype.getCompleteChildren=function(){var e=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ye,function(t,n){e.push(new De(t,n))}):this.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new De(t,n.value))}),e},e.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var n=this.getCompleteNode(t);return new e(null!=n?new At(n):this.writeTree_.subtree(t))},e.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},e.prototype.apply=function(e){return Zt(j.Empty,this.writeTree_,e)},e.Empty=new e(new At(null)),e}();function Zt(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);var r=null;return t.children.inorderTraversal(function(t,o){".priority"===t?(i.assert(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=Zt(e.child(t),o,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(e.child(".priority"),r)),n}var en=function(){function e(){this.visibleWrites_=Jt.Empty,this.allWrites_=[],this.lastWriteId_=-1}return e.prototype.childWrites=function(e){return new tn(e,this)},e.prototype.addOverwrite=function(e,t,n,r){i.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:e,snap:t,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(e,t)),this.lastWriteId_=n},e.prototype.addMerge=function(e,t,n){i.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:e,children:t,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(e,t),this.lastWriteId_=n},e.prototype.getWrite=function(e){for(var t=0;t<this.allWrites_.length;t++){var n=this.allWrites_[t];if(n.writeId===e)return n}return null},e.prototype.removeWrite=function(e){var t=this,n=this.allWrites_.findIndex(function(t){return t.writeId===e});i.assert(n>=0,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[n];this.allWrites_.splice(n,1);for(var o=r.visible,s=!1,a=this.allWrites_.length-1;o&&a>=0;){var h=this.allWrites_[a];h.visible&&(a>=n&&this.recordContainsPath_(h,r.path)?o=!1:r.path.contains(h.path)&&(s=!0)),a--}if(o){if(s)return this.resetTree_(),!0;r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):F(r.children,function(e){t.visibleWrites_=t.visibleWrites_.removeWrite(r.path.child(e))});return!0}return!1},e.prototype.getCompleteWriteData=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcCompleteEventCache=function(t,n,r,i){if(r||i){var o=this.visibleWrites_.childCompoundWrite(t);if(!i&&o.isEmpty())return n;if(i||null!=n||o.hasCompleteWrite(j.Empty)){var s=e.layerTree_(this.allWrites_,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(e.path.contains(t)||t.contains(e.path))},t);u=n||it.EMPTY_NODE;return s.apply(u)}return null}var a=this.visibleWrites_.getCompleteNode(t);if(null!=a)return a;var h=this.visibleWrites_.childCompoundWrite(t);if(h.isEmpty())return n;if(null!=n||h.hasCompleteWrite(j.Empty)){var u=n||it.EMPTY_NODE;return h.apply(u)}return null},e.prototype.calcCompleteEventChildren=function(e,t){var n=it.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(e);if(r)return r.isLeafNode()||r.forEachChild(Ye,function(e,t){n=n.updateImmediateChild(e,t)}),n;if(t){var i=this.visibleWrites_.childCompoundWrite(e);return t.forEachChild(Ye,function(e,t){var r=i.childCompoundWrite(new j(e)).apply(t);n=n.updateImmediateChild(e,r)}),i.getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n}return this.visibleWrites_.childCompoundWrite(e).getCompleteChildren().forEach(function(e){n=n.updateImmediateChild(e.name,e.node)}),n},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n,r){i.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var o=e.child(t);if(this.visibleWrites_.hasCompleteWrite(o))return null;var s=this.visibleWrites_.childCompoundWrite(o);return s.isEmpty()?r.getChild(t):s.apply(r.getChild(t))},e.prototype.calcCompleteChild=function(e,t,n){var r=e.child(t),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(t)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(t)):null},e.prototype.shadowingWrite=function(e){return this.visibleWrites_.getCompleteNode(e)},e.prototype.calcIndexedSlice=function(e,t,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(e),h=a.getCompleteNode(j.Empty);if(null!=h)s=h;else{if(null==t)return[];s=a.apply(t)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],l=o.getCompare(),c=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),p=c.getNext();p&&u.length<r;)0!==l(p,n)&&u.push(p),p=c.getNext();return u},e.prototype.recordContainsPath_=function(e,t){if(e.snap)return e.path.contains(t);for(var n in e.children)if(e.children.hasOwnProperty(n)&&e.path.child(n).contains(t))return!0;return!1},e.prototype.resetTree_=function(){this.visibleWrites_=e.layerTree_(this.allWrites_,e.DefaultFilter_,j.Empty),this.allWrites_.length>0?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},e.DefaultFilter_=function(e){return e.visible},e.layerTree_=function(e,t,n){for(var r=Jt.Empty,o=0;o<e.length;++o){var s=e[o];if(t(s)){var a=s.path,h=void 0;if(s.snap)n.contains(a)?(h=j.relativePath(n,a),r=r.addWrite(h,s.snap)):a.contains(n)&&(h=j.relativePath(a,n),r=r.addWrite(j.Empty,s.snap.getChild(h)));else{if(!s.children)throw i.assertionError("WriteRecord should have .snap or .children");if(n.contains(a))h=j.relativePath(n,a),r=r.addWrites(h,s.children);else if(a.contains(n))if((h=j.relativePath(a,n)).isEmpty())r=r.addWrites(j.Empty,s.children);else{var u=i.safeGet(s.children,h.getFront());if(u){var l=u.getChild(h.popFront());r=r.addWrite(j.Empty,l)}}}}}return r},e}(),tn=function(){function e(e,t){this.treePath_=e,this.writeTree_=t}return e.prototype.calcCompleteEventCache=function(e,t,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,e,t,n)},e.prototype.calcCompleteEventChildren=function(e){return this.writeTree_.calcCompleteEventChildren(this.treePath_,e)},e.prototype.calcEventCacheAfterServerOverwrite=function(e,t,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,e,t,n)},e.prototype.shadowingWrite=function(e){return this.writeTree_.shadowingWrite(this.treePath_.child(e))},e.prototype.calcIndexedSlice=function(e,t,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,e,t,n,r,i)},e.prototype.calcCompleteChild=function(e,t){return this.writeTree_.calcCompleteChild(this.treePath_,e,t)},e.prototype.child=function(t){return new e(this.treePath_.child(t),this.writeTree_)},e}(),nn=function(){function e(e){this.listenProvider_=e,this.syncPointTree_=At.Empty,this.pendingWriteTree_=new en,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}return e.prototype.applyUserOverwrite=function(e,t,n,r){return this.pendingWriteTree_.addOverwrite(e,t,n,r),r?this.applyOperationToSyncPoints_(new Mt(kt.User,e,t)):[]},e.prototype.applyUserMerge=function(e,t,n){this.pendingWriteTree_.addMerge(e,t,n);var r=At.fromObject(t);return this.applyOperationToSyncPoints_(new Wt(kt.User,e,r))},e.prototype.ackUserWrite=function(e,t){void 0===t&&(t=!1);var n=this.pendingWriteTree_.getWrite(e);if(this.pendingWriteTree_.removeWrite(e)){var r=At.Empty;return null!=n.snap?r=r.set(j.Empty,!0):F(n.children,function(e,t){r=r.set(new j(e),t)}),this.applyOperationToSyncPoints_(new Ot(n.path,r,t))}return[]},e.prototype.applyServerOverwrite=function(e,t){return this.applyOperationToSyncPoints_(new Mt(kt.Server,e,t))},e.prototype.applyServerMerge=function(e,t){var n=At.fromObject(t);return this.applyOperationToSyncPoints_(new Wt(kt.Server,e,n))},e.prototype.applyListenComplete=function(e){return this.applyOperationToSyncPoints_(new Lt(kt.Server,e))},e.prototype.applyTaggedQueryOverwrite=function(t,n,r){var i=this.queryKeyForTag_(r);if(null!=i){var o=e.parseQueryKey_(i),s=o.path,a=o.queryId,h=j.relativePath(s,t),u=new Mt(kt.forServerTaggedQuery(a),h,n);return this.applyTaggedOperation_(s,u)}return[]},e.prototype.applyTaggedQueryMerge=function(t,n,r){var i=this.queryKeyForTag_(r);if(i){var o=e.parseQueryKey_(i),s=o.path,a=o.queryId,h=j.relativePath(s,t),u=At.fromObject(n),l=new Wt(kt.forServerTaggedQuery(a),h,u);return this.applyTaggedOperation_(s,l)}return[]},e.prototype.applyTaggedListenComplete=function(t,n){var r=this.queryKeyForTag_(n);if(r){var i=e.parseQueryKey_(r),o=i.path,s=i.queryId,a=j.relativePath(o,t),h=new Lt(kt.forServerTaggedQuery(s),a);return this.applyTaggedOperation_(o,h)}return[]},e.prototype.addEventRegistration=function(t,n){var r=t.path,o=null,s=!1;this.syncPointTree_.foreachOnPath(r,function(e,t){var n=j.relativePath(e,r);o=o||t.getCompleteServerCache(n),s=s||t.hasCompleteView()});var a,h=this.syncPointTree_.get(r);(h?(s=s||h.hasCompleteView(),o=o||h.getCompleteServerCache(j.Empty)):(h=new $t,this.syncPointTree_=this.syncPointTree_.set(r,h)),null!=o)?a=!0:(a=!1,o=it.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(e,t){var n=t.getCompleteServerCache(j.Empty);n&&(o=o.updateImmediateChild(e,n))}));var u=h.viewExistsForQuery(t);if(!u&&!t.getQueryParams().loadsAllData()){var l=e.makeQueryKey_(t);i.assert(!this.queryToTagMap.has(l),"View does not exist, but we have a tag");var c=e.getNextQueryTag_();this.queryToTagMap.set(l,c),this.tagToQueryMap.set(c,l)}var p=this.pendingWriteTree_.childWrites(r),d=h.addEventRegistration(t,n,p,o,a);if(!u&&!s){var f=h.viewForQuery(t);d=d.concat(this.setupListener_(t,f))}return d},e.prototype.removeEventRegistration=function(t,n,r){var i=this,o=t.path,s=this.syncPointTree_.get(o),a=[];if(s&&("default"===t.queryIdentifier()||s.viewExistsForQuery(t))){var h=s.removeEventRegistration(t,n,r);s.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(o));var u=h.removed;a=h.events;var l=-1!==u.findIndex(function(e){return e.getQueryParams().loadsAllData()}),c=this.syncPointTree_.findOnPath(o,function(e,t){return t.hasCompleteView()});if(l&&!c){var p=this.syncPointTree_.subtree(o);if(!p.isEmpty())for(var d=this.collectDistinctViewsForSubTree_(p),f=0;f<d.length;++f){var _=d[f],y=_.getQuery(),v=this.createListenerForView_(_);this.listenProvider_.startListening(e.queryForListening_(y),this.tagForQuery_(y),v.hashFn,v.onComplete)}}if(!c&&u.length>0&&!r)if(l){this.listenProvider_.stopListening(e.queryForListening_(t),null)}else u.forEach(function(t){var n=i.queryToTagMap.get(e.makeQueryKey_(t));i.listenProvider_.stopListening(e.queryForListening_(t),n)});this.removeTags_(u)}return a},e.prototype.calcCompleteEventCache=function(e,t){var n=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(e,function(t,n){var r=j.relativePath(t,e),i=n.getCompleteServerCache(r);if(i)return i});return n.calcCompleteEventCache(e,r,t,!0)},e.prototype.collectDistinctViewsForSubTree_=function(e){return e.fold(function(e,t,n){if(t&&t.hasCompleteView())return[t.getCompleteView()];var r=[];return t&&(r=t.getQueryViews()),F(n,function(e,t){r=r.concat(t)}),r})},e.prototype.removeTags_=function(t){for(var n=0;n<t.length;++n){var r=t[n];if(!r.getQueryParams().loadsAllData()){var i=e.makeQueryKey_(r),o=this.queryToTagMap.get(i);this.queryToTagMap.delete(i),this.tagToQueryMap.delete(o)}}},e.queryForListening_=function(e){return e.getQueryParams().loadsAllData()&&!e.getQueryParams().isDefault()?e.getRef():e},e.prototype.setupListener_=function(t,n){var r=t.path,o=this.tagForQuery_(t),s=this.createListenerForView_(n),a=this.listenProvider_.startListening(e.queryForListening_(t),o,s.hashFn,s.onComplete),h=this.syncPointTree_.subtree(r);if(o)i.assert(!h.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var u=h.fold(function(e,t,n){if(!e.isEmpty()&&t&&t.hasCompleteView())return[t.getCompleteView().getQuery()];var r=[];return t&&(r=r.concat(t.getQueryViews().map(function(e){return e.getQuery()}))),F(n,function(e,t){r=r.concat(t)}),r}),l=0;l<u.length;++l){var c=u[l];this.listenProvider_.stopListening(e.queryForListening_(c),this.tagForQuery_(c))}return a},e.prototype.createListenerForView_=function(e){var t=this,n=e.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(e.getServerCache()||it.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?t.applyTaggedListenComplete(n.path,r):t.applyListenComplete(n.path);var i=W(e,n);return t.removeEventRegistration(n,null,i)}}},e.makeQueryKey_=function(e){return e.path.toString()+"$"+e.queryIdentifier()},e.parseQueryKey_=function(e){var t=e.indexOf("$");return i.assert(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new j(e.substr(0,t))}},e.prototype.queryKeyForTag_=function(e){return this.tagToQueryMap.get(e)},e.prototype.tagForQuery_=function(t){var n=e.makeQueryKey_(t);return this.queryToTagMap.get(n)},e.getNextQueryTag_=function(){return e.nextQueryTag_++},e.prototype.applyTaggedOperation_=function(e,t){var n=this.syncPointTree_.get(e);i.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(e);return n.applyOperation(t,r,null)},e.prototype.applyOperationToSyncPoints_=function(e){return this.applyOperationHelper_(e,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(j.Empty))},e.prototype.applyOperationHelper_=function(e,t,n,r){if(e.path.isEmpty())return this.applyOperationDescendantsHelper_(e,t,n,r);var i=t.get(j.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(j.Empty));var o=[],s=e.path.getFront(),a=e.operationForChild(s),h=t.children.get(s);if(h&&a){var u=n?n.getImmediateChild(s):null,l=r.child(s);o=o.concat(this.applyOperationHelper_(a,h,u,l))}return i&&(o=o.concat(i.applyOperation(e,r,n))),o},e.prototype.applyOperationDescendantsHelper_=function(e,t,n,r){var i=this,o=t.get(j.Empty);null==n&&null!=o&&(n=o.getCompleteServerCache(j.Empty));var s=[];return t.children.inorderTraversal(function(t,o){var a=n?n.getImmediateChild(t):null,h=r.child(t),u=e.operationForChild(t);u&&(s=s.concat(i.applyOperationDescendantsHelper_(u,o,a,h)))}),o&&(s=s.concat(o.applyOperation(e,r,n))),s},e.nextQueryTag_=1,e}(),rn=function(){function e(){this.rootNode_=it.EMPTY_NODE}return e.prototype.getNode=function(e){return this.rootNode_.getChild(e)},e.prototype.updateSnapshot=function(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)},e}(),on=function(){function e(e,t){var n=this;this.app_=e,this.authProvider_=t,this.auth_=null,this.auth_=t.getImmediate({optional:!0}),this.auth_||t.get().then(function(e){return n.auth_=e})}return e.prototype.getToken=function(e){return this.auth_?this.auth_.getToken(e).catch(function(e){return e&&"auth/token-not-initialized"===e.code?(m("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)}):Promise.resolve(null)},e.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},e.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},e.prototype.notifyForInvalidToken=function(){var e='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',T(e)},e}(),sn=function(){function e(){this.counters_={}}return e.prototype.incrementCounter=function(e,t){void 0===t&&(t=1),i.contains(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t},e.prototype.get=function(){return i.deepCopy(this.counters_)},e}(),an=function(){function e(){}return e.getCollection=function(e){var t=e.toString();return this.collections_[t]||(this.collections_[t]=new sn),this.collections_[t]},e.getOrCreateReporter=function(e,t){var n=e.toString();return this.reporters_[n]||(this.reporters_[n]=t()),this.reporters_[n]},e.collections_={},e.reporters_={},e}(),hn=function(){function e(e){this.collection_=e,this.last_=null}return e.prototype.get=function(){var e=this.collection_.get(),t=r.__assign({},e);return this.last_&&F(this.last_,function(e,n){t[e]=t[e]-n}),this.last_=e,t},e}(),un=1e4,ln=3e4,cn=3e5,pn=function(){function e(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new hn(e);var n=un+(ln-un)*Math.random();H(this.reportStats_.bind(this),Math.floor(n))}return e.prototype.includeStat=function(e){this.statsToReport_[e]=!0},e.prototype.reportStats_=function(){var e=this,t=this.statsListener_.get(),n={},r=!1;F(t,function(t,o){o>0&&i.contains(e.statsToReport_,t)&&(n[t]=o,r=!0)}),r&&this.server_.reportStats(n),H(this.reportStats_.bind(this),Math.floor(2*Math.random()*cn))},e}(),dn=function(){function e(){this.eventLists_=[],this.recursionDepth_=0}return e.prototype.queueEvents=function(e){for(var t=null,n=0;n<e.length;n++){var r=e[n],i=r.getPath();null===t||i.equals(t.getPath())||(this.eventLists_.push(t),t=null),null===t&&(t=new fn(i)),t.add(r)}t&&this.eventLists_.push(t)},e.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},e.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},e.prototype.raiseQueuedEventsMatchingPredicate_=function(e){this.recursionDepth_++;for(var t=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];if(r)e(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):t=!1}t&&(this.eventLists_=[]),this.recursionDepth_--},e}(),fn=function(){function e(e){this.path_=e,this.events_=[]}return e.prototype.add=function(e){this.events_.push(e)},e.prototype.raise=function(){for(var e=0;e<this.events_.length;e++){var t=this.events_[e];if(null!==t){this.events_[e]=null;var n=t.getEventRunner();y&&m("event: "+t.toString()),U(n)}}},e.prototype.getPath=function(){return this.path_},e}(),_n=function(){function e(e){this.allowedEvents_=e,this.listeners_={},i.assert(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}return e.prototype.trigger=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Array.isArray(this.listeners_[e]))for(var i=r.__spread(this.listeners_[e]),o=0;o<i.length;o++)i[o].callback.apply(i[o].context,t)},e.prototype.on=function(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});var r=this.getInitialEvent(e);r&&t.apply(n,r)},e.prototype.off=function(e,t,n){this.validateEventType_(e);for(var r=this.listeners_[e]||[],i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)},e.prototype.validateEventType_=function(e){i.assert(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},e}(),yn=function(e){function t(){var t,n,r=e.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",t="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",t="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",t="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",t="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var e=!document[t];e!==r.visible_&&(r.visible_=e,r.trigger("visible",e))},!1),r}return r.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return i.assert("visible"===e,"Unknown event type: "+e),[this.visible_]},t}(_n),vn=function(e){function t(){var t=e.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||i.isMobileCordova()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}return r.__extends(t,e),t.getInstance=function(){return new t},t.prototype.getInitialEvent=function(e){return i.assert("online"===e,"Unknown event type: "+e),[this.online_]},t.prototype.currentlyOnline=function(){return this.online_},t}(_n),gn=function(){function e(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return e.prototype.closeAfter=function(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},e.prototype.handleResponse=function(e,t){var n=this;this.pendingResponses[e]=t;for(var r=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&U(function(){n.onMessage_(e[t])})},r=0;r<e.length;++r)t(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum];){if("break"===r())break}},e}(),mn="start",Cn="close",En="pLPCommand",wn="pRTLPCB",Tn="id",bn="pw",Sn="ser",In="cb",Nn="seg",Pn="ts",Rn="d",Dn="dframe",xn=1870,kn=30,On=xn-kn,Fn=25e3,An=3e4,Ln=function(){function e(e,t,n,r){this.connId=e,this.repoInfo=t,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=C(e),this.stats_=an.getCollection(t),this.urlFn=function(e){return t.connectionURL(ee,e)}}return e.prototype.open=function(e,t){var n=this;this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new gn(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(An)),I(function(){if(!n.isClosed_){n.scriptTagHolder=new Mn(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=r.__read(e,5),o=i[0],s=i[1],a=i[2];i[3],i[4];if(n.incrementIncomingBytes_(e),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,o===mn)n.id=s,n.password=a;else{if(o!==Cn)throw new Error("Unrecognized command received: "+o);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=r.__read(e,2),o=i[0],s=i[1];n.incrementIncomingBytes_(e),n.myPacketOrderer.handleResponse(o,s)},function(){n.onClosed_()},n.urlFn);var e={};e[mn]="t",e[Sn]=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(e[In]=n.scriptTagHolder.uniqueCallbackIdentifier),e[K]=Y,n.transportSessionId&&(e[z]=n.transportSessionId),n.lastSessionId&&(e[J]=n.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf($)&&(e[G]=X);var t=n.urlFn(e);n.log_("Connecting via long-poll to "+t),n.scriptTagHolder.addTag(t,function(){})}})},e.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},e.forceAllow=function(){e.forceAllow_=!0},e.forceDisallow=function(){e.forceDisallow_=!0},e.isAvailable=function(){return!i.isNodeSdk()&&(!!e.forceAllow_||!e.forceDisallow_&&"undefined"!=typeof document&&null!=document.createElement&&!L()&&!M())},e.prototype.markConnectionHealthy=function(){},e.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},e.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},e.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},e.prototype.send=function(e){var t=i.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var n=i.base64Encode(t),r=O(n,On),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},e.prototype.addDisconnectPingFrame=function(e,t){if(!i.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={};n[Dn]="t",n[Tn]=e,n[bn]=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},e.prototype.incrementIncomingBytes_=function(e){var t=i.stringify(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},e}(),Mn=function(){function e(t,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,i.isNodeSdk())this.commandCB=t,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=d(),window[En+this.uniqueCallbackIdentifier]=t,window[wn+this.uniqueCallbackIdentifier]=n,this.myIFrame=e.createIFrame_();var s="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))s='<script>document.domain="'+document.domain+'";<\/script>';var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(h){m("frame writing exception"),h.stack&&m(h.stack),m(h)}}}return e.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||m("No IE domain setting required")}catch(n){var t=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+t+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},e.prototype.close=function(){var e=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==e.myIFrame&&(document.body.removeChild(e.myIFrame),e.myIFrame=null)},Math.floor(0)));var t=this.onDisconnect;t&&(this.onDisconnect=null,t())},e.prototype.startLongPoll=function(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););},e.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var e={};e[Tn]=this.myID,e[bn]=this.myPW,e[Sn]=this.currentSerial;for(var t=this.urlFn(e),n="",r=0;this.pendingSegs.length>0;){if(!(this.pendingSegs[0].d.length+kn+n.length<=xn))break;var i=this.pendingSegs.shift();n=n+"&"+Nn+r+"="+i.seg+"&"+Pn+r+"="+i.ts+"&"+Rn+r+"="+i.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1},e.prototype.enqueueSegment=function(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()},e.prototype.addLongPollTag_=function(e,t){var n=this;this.outstandingRequests.add(t);var r=function(){n.outstandingRequests.delete(t),n.newRequest_()},i=setTimeout(r,Math.floor(Fn));this.addTag(e,function(){clearTimeout(i),r()})},e.prototype.addTag=function(e,t){var n=this;i.isNodeSdk()?this.doNodeLongPoll(e,t):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){var e=r.readyState;e&&"loaded"!==e&&"complete"!==e||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=function(){m("Long-poll script failed to load: "+e),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},e}(),Wn="";function qn(e){Wn=e}var Qn=16384,Un=45e3,Vn=null;"undefined"!=typeof MozWebSocket?Vn=MozWebSocket:"undefined"!=typeof WebSocket&&(Vn=WebSocket);var Hn=function(){function t(e,n,r,i){this.connId=e,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=C(this.connId),this.stats_=an.getCollection(n),this.connURL=t.connectionURL_(n,r,i)}return t.connectionURL_=function(e,t,n){var r={};return r[K]=Y,!i.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf($)&&(r[G]=X),t&&(r[z]=t),n&&(r[J]=n),e.connectionURL(Z,r)},t.prototype.open=function(t,n){var r=this;this.onDisconnect=n,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,l.set("previous_websocket_failure",!0);try{if(i.isNodeSdk()){var o=i.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",s={headers:{"User-Agent":"Firebase/"+Y+"/"+Wn+"/"+e.platform+"/"+o}},a=e.env,h=0===this.connURL.indexOf("wss://")?a.HTTPS_PROXY||a.https_proxy:a.HTTP_PROXY||a.http_proxy;h&&(s.proxy={origin:h}),this.mySock=new Vn(this.connURL,[],s)}else this.mySock=new Vn(this.connURL)}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(e){r.handleIncomingFrame(e)},this.mySock.onerror=function(e){r.log_("WebSocket error.  Closing connection.");var t=e.message||e.data;t&&r.log_(t),r.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==Vn&&!t.forceDisallow_},t.previouslyFailed=function(){return l.isInMemoryStorage||!0===l.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){l.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(e){if(this.frames.push(e),this.frames.length===this.totalFrames){var t=this.frames.join("");this.frames=null;var n=i.jsonEval(t);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(e){this.totalFrames=e,this.frames=[]},t.prototype.extractFrameCount_=function(e){if(i.assert(null===this.frames,"We already have a frame buffer"),e.length<=6){var t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e},t.prototype.handleIncomingFrame=function(e){if(null!==this.mySock){var t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{var n=this.extractFrameCount_(t);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(e){this.resetKeepAlive();var t=i.stringify(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var n=O(t,Qn);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var e=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){e.mySock&&e.sendString_("0"),e.resetKeepAlive()},Math.floor(Un))},t.prototype.sendString_=function(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),jn=function(){function e(e){this.initTransports_(e)}return Object.defineProperty(e,"ALL_TRANSPORTS",{get:function(){return[Ln,Hn]},enumerable:!0,configurable:!0}),e.prototype.initTransports_=function(t){var n,i,o=Hn&&Hn.isAvailable(),s=o&&!Hn.previouslyFailed();if(t.webSocketOnly&&(o||T("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[Hn];else{var a=this.transports_=[];try{for(var h=r.__values(e.ALL_TRANSPORTS),u=h.next();!u.done;u=h.next()){var l=u.value;l&&l.isAvailable()&&a.push(l)}}catch(c){n={error:c}}finally{try{u&&!u.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}},e.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},e.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},e}(),Bn=6e4,Yn=5e3,Kn=10240,zn=102400,Gn="t",Xn="d",$n="s",Jn="r",Zn="e",er="o",tr="a",nr="n",rr="p",ir="h",or=function(){function e(e,t,n,r,i,o,s){this.id=e,this.repoInfo_=t,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=C("c:"+this.id+":"),this.transportManager_=new jn(t),this.log_("Connection created"),this.start_()}return e.prototype.start_=function(){var e=this,t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){e.conn_&&e.conn_.open(n,r)},Math.floor(0));var i=t.healthyTimeout||0;i>0&&(this.healthyTimeout_=H(function(){e.healthyTimeout_=null,e.isHealthy_||(e.conn_&&e.conn_.bytesReceived>zn?(e.log_("Connection exceeded healthy timeout but has received "+e.conn_.bytesReceived+" bytes.  Marking connection healthy."),e.isHealthy_=!0,e.conn_.markConnectionHealthy()):e.conn_&&e.conn_.bytesSent>Kn?e.log_("Connection exceeded healthy timeout but has sent "+e.conn_.bytesSent+" bytes.  Leaving connection alive."):(e.log_("Closing unhealthy connection after timeout."),e.close()))},Math.floor(i)))},e.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},e.prototype.disconnReceiver_=function(e){var t=this;return function(n){e===t.conn_?t.onConnectionLost_(n):e===t.secondaryConn_?(t.log_("Secondary connection lost."),t.onSecondaryConnectionLost_()):t.log_("closing an old connection")}},e.prototype.connReceiver_=function(e){var t=this;return function(n){2!==t.state_&&(e===t.rx_?t.onPrimaryMessageReceived_(n):e===t.secondaryConn_?t.onSecondaryMessageReceived_(n):t.log_("message on old connection"))}},e.prototype.sendRequest=function(e){var t={t:"d",d:e};this.sendData_(t)},e.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},e.prototype.onSecondaryControl_=function(e){if(Gn in e){var t=e[Gn];t===tr?this.upgradeIfSecondaryHealthy_():t===Jn?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):t===er&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},e.prototype.onSecondaryMessageReceived_=function(e){var t=x("t",e),n=x("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}},e.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:rr,d:{}}}))},e.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:tr,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:nr,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},e.prototype.onPrimaryMessageReceived_=function(e){var t=x("t",e),n=x("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)},e.prototype.onDataMessage_=function(e){this.onPrimaryResponse_(),this.onMessage_(e)},e.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},e.prototype.onControl_=function(e){var t=x(Gn,e);if(Xn in e){var n=e[Xn];if(t===ir)this.onHandshake_(n);else if(t===nr){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else t===$n?this.onConnectionShutdown_(n):t===Jn?this.onReset_(n):t===Zn?E("Server Error: "+n):t===er?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+t)}},e.prototype.onHandshake_=function(e){var t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),Y!==n&&T("Protocol version mismatch detected"),this.tryStartUpgrade_())},e.prototype.tryStartUpgrade_=function(){var e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)},e.prototype.startUpgrade_=function(e){var t=this;this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),H(function(){t.secondaryConn_&&(t.log_("Timed out trying to upgrade."),t.secondaryConn_.close())},Math.floor(Bn))},e.prototype.onReset_=function(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.updateHost(e),1===this.state_?this.close():(this.closeConnections_(),this.start_())},e.prototype.onConnectionEstablished_=function(e,t){var n=this;this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):H(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(Yn))},e.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:rr,d:{}}}))},e.prototype.onSecondaryConnectionLost_=function(){var e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()},e.prototype.onConnectionLost_=function(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(l.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},e.prototype.onConnectionShutdown_=function(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()},e.prototype.sendData_=function(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)},e.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},e.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},e}(),sr=function(){function e(){}return e.prototype.put=function(e,t,n,r){},e.prototype.merge=function(e,t,n,r){},e.prototype.refreshAuthToken=function(e){},e.prototype.onDisconnectPut=function(e,t,n){},e.prototype.onDisconnectMerge=function(e,t,n){},e.prototype.onDisconnectCancel=function(e,t){},e.prototype.reportStats=function(e){},e}(),ar=1e3,hr=3e5,ur=3e4,lr=1.3,cr=3e4,pr="server_kill",dr=3,fr=function(e){function t(n,r,o,s,a,h){var u=e.call(this)||this;if(u.repoInfo_=n,u.onDataUpdate_=r,u.onConnectStatus_=o,u.onServerInfoUpdate_=s,u.authTokenProvider_=a,u.authOverride_=h,u.id=t.nextPersistentConnectionId_++,u.log_=C("p:"+u.id+":"),u.interruptReasons_={},u.listens=new Map,u.outstandingPuts_=[],u.outstandingPutCount_=0,u.onDisconnectRequestQueue_=[],u.connected_=!1,u.reconnectDelay_=ar,u.maxReconnectDelay_=hr,u.securityDebugCallback_=null,u.lastSessionId=null,u.establishConnectionTimer_=null,u.visible_=!1,u.requestCBHash_={},u.requestNumber_=0,u.realtime_=null,u.authToken_=null,u.forceTokenRefresh_=!1,u.invalidAuthTokenCount_=0,u.firstConnection_=!0,u.lastConnectionAttemptTime_=null,u.lastConnectionEstablishedTime_=null,h&&!i.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return u.scheduleConnect_(0),yn.getInstance().on("visible",u.onVisible_,u),-1===n.host.indexOf("fblocal")&&vn.getInstance().on("online",u.onOnline_,u),u}return r.__extends(t,e),t.prototype.sendRequest=function(e,t,n){var r=++this.requestNumber_,o={r:r,a:e,b:t};this.log_(i.stringify(o)),i.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},t.prototype.listen=function(e,t,n,r){var o=e.queryIdentifier(),s=e.path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),i.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),i.assert(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)},t.prototype.sendListen_=function(e){var n=this,r=e.query,i=r.path.toString(),o=r.queryIdentifier();this.log_("Listen on "+i+" for "+o);var s={p:i};e.tag&&(s.q=r.queryObject(),s.t=e.tag),s.h=e.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,h=s.s;t.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===e&&(n.log_("listen response",s),"ok"!==h&&n.removeListen_(i,o),e.onComplete&&e.onComplete(h,a))})},t.warnOnListenWarnings_=function(e,t){if(e&&"object"==typeof e&&i.contains(e,"w")){var n=i.safeGet(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+t.getQueryParams().getIndex().toString()+'"',o=t.path.toString();T("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},t.prototype.refreshAuthToken=function(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(e)},t.prototype.reduceReconnectDelayIfAdminCredential_=function(e){(e&&40===e.length||i.isAdmin(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=ur)},t.prototype.tryAuth=function(){var e=this;if(this.connected_&&this.authToken_){var t=this.authToken_,n=i.isValidFormat(t)?"auth":"gauth",r={cred:t};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";e.authToken_===t&&("ok"===r?e.invalidAuthTokenCount_=0:e.onAuthRevoked_(r,i))})}},t.prototype.unlisten=function(e,t){var n=e.path.toString(),r=e.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),i.assert(e.getQueryParams().isDefault()||!e.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e.queryObject(),t)},t.prototype.sendUnlisten_=function(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);var i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},t.prototype.onDisconnectPut=function(e,t,n){this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})},t.prototype.onDisconnectMerge=function(e,t,n){this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})},t.prototype.onDisconnectCancel=function(e,t){this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})},t.prototype.sendOnDisconnect_=function(e,t,n,r){var i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,function(e){r&&setTimeout(function(){r(e.s,e.d)},Math.floor(0))})},t.prototype.put=function(e,t,n,r){this.putInternal("p",e,t,n,r)},t.prototype.merge=function(e,t,n,r){this.putInternal("m",e,t,n,r)},t.prototype.putInternal=function(e,t,n,r,i){var o={p:t,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:e,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+t)},t.prototype.sendPut_=function(e){var t=this,n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,function(r){t.log_(n+" response",r),delete t.outstandingPuts_[e],t.outstandingPutCount_--,0===t.outstandingPutCount_&&(t.outstandingPuts_=[]),i&&i(r.s,r.d)})},t.prototype.reportStats=function(e){var t=this;if(this.connected_){var n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,function(e){if("ok"!==e.s){var n=e.d;t.log_("reportStats","Error sending stats: "+n)}})}},t.prototype.onDataMessage_=function(e){if("r"in e){this.log_("from server: "+i.stringify(e));var t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}},t.prototype.onDataPush_=function(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):E("Unrecognized action received from server: "+i.stringify(e)+"\nAre you using the latest client?")},t.prototype.onReady_=function(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},t.prototype.scheduleConnect_=function(e){var t=this;i.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){t.establishConnectionTimer_=null,t.establishConnection_()},Math.floor(e))},t.prototype.onVisible_=function(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ar,this.realtime_||this.scheduleConnect_(0)),this.visible_=e},t.prototype.onOnline_=function(e){e?(this.log_("Browser went online."),this.reconnectDelay_=ar,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},t.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){if(this.visible_){if(this.lastConnectionEstablishedTime_){(new Date).getTime()-this.lastConnectionEstablishedTime_>cr&&(this.reconnectDelay_=ar),this.lastConnectionEstablishedTime_=null}}else this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime();var e=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*lr)}this.onConnectStatus_(!1)},t.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+t.nextConnectionId_++,s=this,a=this.lastSessionId,h=!1,u=null,l=function(){u?u.close():(h=!0,r())};this.realtime_={close:l,sendRequest:function(e){i.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(e)}};var c=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(c).then(function(t){h?m("getToken() completed but was canceled"):(m("getToken() completed. Creating connection."),s.authToken_=t&&t.accessToken,u=new or(o,s.repoInfo_,e,n,r,function(e){T(e+" ("+s.repoInfo_.toString()+")"),s.interrupt(pr)},a))}).then(null,function(e){s.log_("Failed to get token: "+e),h||(i.CONSTANTS.NODE_ADMIN&&T(e),l())})}},t.prototype.interrupt=function(e){m("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},t.prototype.resume=function(e){m("Resuming connection for reason: "+e),delete this.interruptReasons_[e],i.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=ar,this.realtime_||this.scheduleConnect_(0))},t.prototype.handleTimestamp_=function(e){var t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},t.prototype.cancelSentTransactions_=function(){for(var e=0;e<this.outstandingPuts_.length;e++){var t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},t.prototype.onListenRevoked_=function(e,t){var n;n=t?t.map(function(e){return k(e)}).join("$"):"default";var r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")},t.prototype.removeListen_=function(e,t){var n,r=new j(e).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(t),i.delete(t),0===i.size&&this.listens.delete(r)}else n=void 0;return n},t.prototype.onAuthRevoked_=function(e,t){m("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=dr&&(this.reconnectDelay_=ur,this.authTokenProvider_.notifyForInvalidToken()))},t.prototype.onSecurityDebugPacket_=function(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))},t.prototype.restoreState_=function(){var e,t,n,i;this.tryAuth();try{for(var o=r.__values(this.listens.values()),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var h=(n=void 0,r.__values(a.values())),u=h.next();!u.done;u=h.next()){var l=u.value;this.sendListen_(l)}}catch(d){n={error:d}}finally{try{u&&!u.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}}catch(f){e={error:f}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}for(var c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){var p=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(p.action,p.pathString,p.data,p.onComplete)}},t.prototype.sendConnectStats_=function(){var e={},t="js";i.CONSTANTS.NODE_ADMIN?t="admin_node":i.CONSTANTS.NODE_CLIENT&&(t="node"),e["sdk."+t+"."+Wn.replace(/\./g,"-")]=1,i.isMobileCordova()?e["framework.cordova"]=1:i.isReactNative()&&(e["framework.reactnative"]=1),this.reportStats(e)},t.prototype.shouldReconnect_=function(){var e=vn.getInstance().currentlyOnline();return i.isEmpty(this.interruptReasons_)&&e},t.nextPersistentConnectionId_=0,t.nextConnectionId_=0,t}(sr),_r=function(e){function t(t,n,r){var i=e.call(this)||this;return i.repoInfo_=t,i.onDataUpdate_=n,i.authTokenProvider_=r,i.log_=C("p:rest:"),i.listens_={},i}return r.__extends(t,e),t.prototype.reportStats=function(e){throw new Error("Method not implemented.")},t.getListenId_=function(e,t){return void 0!==t?"tag$"+t:(i.assert(e.getQueryParams().isDefault(),"should have a tag if it's not a default query."),e.path.toString())},t.prototype.listen=function(e,n,r,o){var s=this,a=e.path.toString();this.log_("Listen called for "+a+" "+e.queryIdentifier());var h=t.getListenId_(e,r),u={};this.listens_[h]=u;var l=e.getQueryParams().toRestQueryStringParameters();this.restRequest_(a+".json",l,function(e,t){var n=t;(404===e&&(n=null,e=null),null===e&&s.onDataUpdate_(a,n,!1,r),i.safeGet(s.listens_,h)===u)&&o(e?401===e?"permission_denied":"rest_error:"+e:"ok",null)})},t.prototype.unlisten=function(e,n){var r=t.getListenId_(e,n);delete this.listens_[r]},t.prototype.refreshAuthToken=function(e){},t.prototype.restRequest_=function(e,t,n){var r=this;void 0===t&&(t={}),t.format="export",this.authTokenProvider_.getToken(!1).then(function(o){var s=o&&o.accessToken;s&&(t.auth=s);var a=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+e+"?ns="+r.repoInfo_.namespace+i.querystring(t);r.log_("Sending REST request for "+a);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+a+" received. status:",h.status,"response:",h.responseText);var e=null;if(h.status>=200&&h.status<300){try{e=i.jsonEval(h.responseText)}catch(t){T("Failed to parse JSON response for "+a+": "+h.responseText)}n(null,e)}else 401!==h.status&&404!==h.status&&T("Got unsuccessful REST response for "+a+" Status: "+h.status),n(h.status);n=null}},h.open("GET",a,!0),h.send()})},t}(sr),yr="repo_interrupt",vr=function(){function e(e,t,n,r){var o=this;this.repoInfo_=e,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new dn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new Rt,this.persistentConnection_=null;var s=new on(n,r);if(this.stats_=an.getCollection(e),t||V())this.server_=new _r(this.repoInfo_,this.onDataUpdate_.bind(this),s),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var a=n.options.databaseAuthVariableOverride;if(null!=a){if("object"!=typeof a)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{i.stringify(a)}catch(h){throw new Error("Invalid authOverride provided: "+h)}}this.persistentConnection_=new fr(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),s,a),this.server_=this.persistentConnection_}s.addTokenChangeListener(function(e){o.server_.refreshAuthToken(e)}),this.statsReporter_=an.getOrCreateReporter(e,function(){return new pn(o.stats_,o.server_)}),this.transactionsInit_(),this.infoData_=new rn,this.infoSyncTree_=new nn({startListening:function(e,t,n,r){var i=[],s=o.infoData_.getNode(e.path);return s.isEmpty()||(i=o.infoSyncTree_.applyServerOverwrite(e.path,s),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new nn({startListening:function(e,t,n,r){return o.server_.listen(e,n,t,function(t,n){var i=r(t,n);o.eventQueue_.raiseEventsForChangedPath(e.path,i)}),[]},stopListening:function(e,t){o.server_.unlisten(e,t)}})}return e.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},e.prototype.name=function(){return this.repoInfo_.namespace},e.prototype.serverTime=function(){var e=this.infoData_.getNode(new j(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e},e.prototype.generateServerValues=function(){return Et({timestamp:this.serverTime()})},e.prototype.onDataUpdate_=function(e,t,n,r){this.dataUpdateCount++;var o=new j(e);t=this.interceptServerDataCallback_?this.interceptServerDataCallback_(e,t):t;var s=[];if(r)if(n){var a=i.map(t,function(e){return ht(e)});s=this.serverSyncTree_.applyTaggedQueryMerge(o,a,r)}else{var h=ht(t);s=this.serverSyncTree_.applyTaggedQueryOverwrite(o,h,r)}else if(n){var u=i.map(t,function(e){return ht(e)});s=this.serverSyncTree_.applyServerMerge(o,u)}else{var l=ht(t);s=this.serverSyncTree_.applyServerOverwrite(o,l)}var c=o;s.length>0&&(c=this.rerunTransactions_(o)),this.eventQueue_.raiseEventsForChangedPath(c,s)},e.prototype.interceptServerData_=function(e){this.interceptServerDataCallback_=e},e.prototype.onConnectStatus_=function(e){this.updateInfo_("connected",e),!1===e&&this.runOnDisconnectEvents_()},e.prototype.onServerInfoUpdate_=function(e){var t=this;F(e,function(e,n){t.updateInfo_(e,n)})},e.prototype.updateInfo_=function(e,t){var n=new j("/.info/"+e),r=ht(t);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},e.prototype.getNextWriteId_=function(){return this.nextWriteId_++},e.prototype.setWithPriority=function(e,t,n,r){var i=this;this.log_("set",{path:e.toString(),value:t,priority:n});var o=this.generateServerValues(),s=ht(t,n),a=this.serverSyncTree_.calcCompleteEventCache(e),h=It(s,a,o),u=this.getNextWriteId_(),l=this.serverSyncTree_.applyUserOverwrite(e,h,u,!0);this.eventQueue_.queueEvents(l),this.server_.put(e.toString(),s.val(!0),function(t,n){var o="ok"===t;o||T("set at "+e+" failed: "+t);var s=i.serverSyncTree_.ackUserWrite(u,!o);i.eventQueue_.raiseEventsForChangedPath(e,s),i.callOnCompleteCallback(r,t,n)});var c=this.abortTransactions_(e);this.rerunTransactions_(c),this.eventQueue_.raiseEventsForChangedPath(c,[])},e.prototype.update=function(e,t,n){var r=this;this.log_("update",{path:e.toString(),value:t});var i=!0,o=this.generateServerValues(),s={};if(F(t,function(t,n){i=!1,s[t]=St(e.child(t),ht(n),r.serverSyncTree_,o)}),i)m("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(n,"ok");else{var a=this.getNextWriteId_(),h=this.serverSyncTree_.applyUserMerge(e,s,a);this.eventQueue_.queueEvents(h),this.server_.merge(e.toString(),t,function(t,i){var o="ok"===t;o||T("update at "+e+" failed: "+t);var s=r.serverSyncTree_.ackUserWrite(a,!o),h=s.length>0?r.rerunTransactions_(e):e;r.eventQueue_.raiseEventsForChangedPath(h,s),r.callOnCompleteCallback(n,t,i)}),F(t,function(t){var n=r.abortTransactions_(e.child(t));r.rerunTransactions_(n)}),this.eventQueue_.raiseEventsForChangedPath(e,[])}},e.prototype.runOnDisconnectEvents_=function(){var e=this;this.log_("onDisconnectEvents");var t=this.generateServerValues(),n=new Rt;this.onDisconnect_.forEachTree(j.Empty,function(r,i){var o=St(r,i,e.serverSyncTree_,t);n.remember(r,o)});var r=[];n.forEachTree(j.Empty,function(t,n){r=r.concat(e.serverSyncTree_.applyServerOverwrite(t,n));var i=e.abortTransactions_(t);e.rerunTransactions_(i)}),this.onDisconnect_=new Rt,this.eventQueue_.raiseEventsForChangedPath(j.Empty,r)},e.prototype.onDisconnectCancel=function(e,t){var n=this;this.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&n.onDisconnect_.forget(e),n.callOnCompleteCallback(t,r,i)})},e.prototype.onDisconnectSet=function(e,t,n){var r=this,i=ht(t);this.server_.onDisconnectPut(e.toString(),i.val(!0),function(t,o){"ok"===t&&r.onDisconnect_.remember(e,i),r.callOnCompleteCallback(n,t,o)})},e.prototype.onDisconnectSetWithPriority=function(e,t,n,r){var i=this,o=ht(t,n);this.server_.onDisconnectPut(e.toString(),o.val(!0),function(t,n){"ok"===t&&i.onDisconnect_.remember(e,o),i.callOnCompleteCallback(r,t,n)})},e.prototype.onDisconnectUpdate=function(e,t,n){var r=this;if(i.isEmpty(t))return m("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(n,"ok");this.server_.onDisconnectMerge(e.toString(),t,function(i,o){"ok"===i&&F(t,function(t,n){var i=ht(n);r.onDisconnect_.remember(e.child(t),i)}),r.callOnCompleteCallback(n,i,o)})},e.prototype.addEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.addEventRegistration(e,t):this.serverSyncTree_.addEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.removeEventCallbackForQuery=function(e,t){var n;n=".info"===e.path.getFront()?this.infoSyncTree_.removeEventRegistration(e,t):this.serverSyncTree_.removeEventRegistration(e,t),this.eventQueue_.raiseEventsAtPath(e.path,n)},e.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(yr)},e.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(yr)},e.prototype.stats=function(e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var t;e?(this.statsListener_||(this.statsListener_=new hn(this.stats_)),t=this.statsListener_.get()):t=this.stats_.get();var n=Object.keys(t).reduce(function(e,t){return Math.max(t.length,e)},0);F(t,function(e,t){for(var r=e,i=e.length;i<n+2;i++)r+=" ";console.log(r+t)})}},e.prototype.statsIncrementCounter=function(e){this.stats_.incrementCounter(e),this.statsReporter_.includeStat(e)},e.prototype.log_=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),m.apply(void 0,r.__spread([n],e))},e.prototype.callOnCompleteCallback=function(e,t,n){e&&U(function(){if("ok"===t)e(null);else{var r=(t||"error").toUpperCase(),i=r;n&&(i+=": "+n);var o=new Error(i);o.code=r,e(o)}})},Object.defineProperty(e.prototype,"database",{get:function(){return this.__database||(this.__database=new Rr(this))},enumerable:!0,configurable:!0}),e}(),gr=function(){function e(t){this.indexedFilter_=new Vt(t.getIndex()),this.index_=t.getIndex(),this.startPost_=e.getStartPost_(t),this.endPost_=e.getEndPost_(t)}return e.prototype.getStartPost=function(){return this.startPost_},e.prototype.getEndPost=function(){return this.endPost_},e.prototype.matches=function(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0},e.prototype.updateChild=function(e,t,n,r,i,o){return this.matches(new De(t,n))||(n=it.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,o)},e.prototype.updateFullNode=function(e,t,n){t.isLeafNode()&&(t=it.EMPTY_NODE);var r=t.withIndex(this.index_);r=r.updatePriority(it.EMPTY_NODE);var i=this;return t.forEachChild(Ye,function(e,t){i.matches(new De(e,t))||(r=r.updateImmediateChild(e,it.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.indexedFilter_},e.prototype.getIndex=function(){return this.index_},e.getStartPost_=function(e){if(e.hasStart()){var t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()},e.getEndPost_=function(e){if(e.hasEnd()){var t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()},e}(),mr=function(){function e(e){this.rangedFilter_=new gr(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}return e.prototype.updateChild=function(e,t,n,r,i,o){return this.rangedFilter_.matches(new De(t,n))||(n=it.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,o):this.fullLimitUpdateChild_(e,t,n,i,o)},e.prototype.updateFullNode=function(e,t,n){var r;if(t.isLeafNode()||t.isEmpty())r=it.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){r=it.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=t.withIndex(this.index_)).updatePriority(it.EMPTY_NODE);var a=void 0,h=void 0,u=void 0;i=void 0;if(this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),h=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();u=function(e,t){return l(t,e)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),h=this.rangedFilter_.getEndPost(),u=this.index_.getCompare();o=0;for(var c=!1;i.hasNext();){s=i.getNext();!c&&u(a,s)<=0&&(c=!0),c&&o<this.limit_&&u(s,h)<=0?o++:r=r.updateImmediateChild(s.name,it.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)},e.prototype.updatePriority=function(e,t){return e},e.prototype.filtersNodes=function(){return!0},e.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},e.prototype.getIndex=function(){return this.index_},e.prototype.fullLimitUpdateChild_=function(e,t,n,r,o){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(e,t){return a(t,e)}}else s=this.index_.getCompare();var h=e;i.assert(h.numChildren()===this.limit_,"");var u=new De(t,n),l=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),c=this.rangedFilter_.matches(u);if(h.hasChild(t)){for(var p=h.getImmediateChild(t),d=r.getChildAfterChild(this.index_,l,this.reverse_);null!=d&&(d.name===t||h.hasChild(d.name));)d=r.getChildAfterChild(this.index_,d,this.reverse_);var f=null==d?1:s(d,u);if(c&&!n.isEmpty()&&f>=0)return null!=o&&o.trackChildChange(Ut.childChangedChange(t,n,p)),h.updateImmediateChild(t,n);null!=o&&o.trackChildChange(Ut.childRemovedChange(t,p));var _=h.updateImmediateChild(t,it.EMPTY_NODE);return null!=d&&this.rangedFilter_.matches(d)?(null!=o&&o.trackChildChange(Ut.childAddedChange(d.name,d.node)),_.updateImmediateChild(d.name,d.node)):_}return n.isEmpty()?e:c&&s(l,u)>=0?(null!=o&&(o.trackChildChange(Ut.childRemovedChange(l.name,l.node)),o.trackChildChange(Ut.childAddedChange(t,n))),h.updateImmediateChild(t,n).updateImmediateChild(l.name,it.EMPTY_NODE)):e},e}(),Cr=function(){function e(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ye}return e.prototype.hasStart=function(){return this.startSet_},e.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},e.prototype.getIndexStartValue=function(){return i.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},e.prototype.getIndexStartName=function(){return i.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:N},e.prototype.hasEnd=function(){return this.endSet_},e.prototype.getIndexEndValue=function(){return i.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},e.prototype.getIndexEndName=function(){return i.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:P},e.prototype.hasLimit=function(){return this.limitSet_},e.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},e.prototype.getLimit=function(){return i.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},e.prototype.getIndex=function(){return this.index_},e.prototype.copy_=function(){var t=new e;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},e.prototype.limit=function(e){var t=this.copy_();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="",t},e.prototype.limitToFirst=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,n},e.prototype.limitToLast=function(t){var n=this.copy_();return n.limitSet_=!0,n.limit_=t,n.viewFrom_=e.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,n},e.prototype.startAt=function(e,t){var n=this.copy_();return n.startSet_=!0,void 0===e&&(e=null),n.indexStartValue_=e,null!=t?(n.startNameSet_=!0,n.indexStartName_=t):(n.startNameSet_=!1,n.indexStartName_=""),n},e.prototype.endAt=function(e,t){var n=this.copy_();return n.endSet_=!0,void 0===e&&(e=null),n.indexEndValue_=e,void 0!==t?(n.endNameSet_=!0,n.indexEndName_=t):(n.endNameSet_=!1,n.indexEndName_=""),n},e.prototype.orderBy=function(e){var t=this.copy_();return t.index_=e,t},e.prototype.getQueryObject=function(){var t=e.WIRE_PROTOCOL_CONSTANTS_,n={};if(this.startSet_&&(n[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){n[t.LIMIT]=this.limit_;var r=this.viewFrom_;""===r&&(r=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),n[t.VIEW_FROM]=r}return this.index_!==Ye&&(n[t.INDEX]=this.index_.toString()),n},e.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},e.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ye},e.prototype.getNodeFilter=function(){return this.loadsAllData()?new Vt(this.getIndex()):this.hasLimit()?new mr(this):new gr(this)},e.prototype.toRestQueryStringParameters=function(){var t,n=e.REST_QUERY_CONSTANTS_,r={};return this.isDefault()?r:(this.index_===Ye?t=n.PRIORITY_INDEX:this.index_===ct?t=n.VALUE_INDEX:this.index_===Oe?t=n.KEY_INDEX:(i.assert(this.index_ instanceof pt,"Unrecognized index type!"),t=this.index_.toString()),r[n.ORDER_BY]=i.stringify(t),this.startSet_&&(r[n.START_AT]=i.stringify(this.indexStartValue_),this.startNameSet_&&(r[n.START_AT]+=","+i.stringify(this.indexStartName_))),this.endSet_&&(r[n.END_AT]=i.stringify(this.indexEndValue_),this.endNameSet_&&(r[n.END_AT]+=","+i.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?r[n.LIMIT_TO_FIRST]=this.limit_:r[n.LIMIT_TO_LAST]=this.limit_),r)},e.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},e.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},e.DEFAULT=new e,e}(),Er=function(e){function t(t,n){if(!(t instanceof vr))throw new Error("new Reference() no longer supported - use app.database().");return e.call(this,t,n,Cr.DEFAULT,!1)||this}return r.__extends(t,e),t.prototype.getKey=function(){return i.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},t.prototype.child=function(e){return i.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof e?e=String(e):e instanceof j||(null===this.path.getFront()?Te("Reference.child",1,e,!1):we("Reference.child",1,e,!1)),new t(this.repo,this.path.child(e))},t.prototype.getParent=function(){i.validateArgCount("Reference.parent",0,0,arguments.length);var e=this.path.parent();return null===e?null:new t(this.repo,e)},t.prototype.getRoot=function(){i.validateArgCount("Reference.root",0,0,arguments.length);for(var e=this;null!==e.getParent();)e=e.getParent();return e},t.prototype.databaseProp=function(){return this.repo.database},t.prototype.set=function(e,t){i.validateArgCount("Reference.set",1,2,arguments.length),be("Reference.set",this.path),_e("Reference.set",1,e,this.path,!1),i.validateCallback("Reference.set",2,t,!0);var n=new i.Deferred;return this.repo.setWithPriority(this.path,e,null,n.wrapCallback(t)),n.promise},t.prototype.update=function(e,t){if(i.validateArgCount("Reference.update",1,2,arguments.length),be("Reference.update",this.path),Array.isArray(e)){for(var n={},r=0;r<e.length;++r)n[""+r]=e[r];e=n,T("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ge("Reference.update",1,e,this.path,!1),i.validateCallback("Reference.update",2,t,!0);var o=new i.Deferred;return this.repo.update(this.path,e,o.wrapCallback(t)),o.promise},t.prototype.setWithPriority=function(e,t,n){if(i.validateArgCount("Reference.setWithPriority",2,3,arguments.length),be("Reference.setWithPriority",this.path),_e("Reference.setWithPriority",1,e,this.path,!1),me("Reference.setWithPriority",2,t,!1),i.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new i.Deferred;return this.repo.setWithPriority(this.path,e,t,r.wrapCallback(n)),r.promise},t.prototype.remove=function(e){return i.validateArgCount("Reference.remove",0,1,arguments.length),be("Reference.remove",this.path),i.validateCallback("Reference.remove",1,e,!0),this.set(null,e)},t.prototype.transaction=function(e,t,n){if(i.validateArgCount("Reference.transaction",1,3,arguments.length),be("Reference.transaction",this.path),i.validateCallback("Reference.transaction",1,e,!1),i.validateCallback("Reference.transaction",2,t,!0),Ie("Reference.transaction",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===n&&(n=!0);var r=new i.Deferred;"function"==typeof t&&r.promise.catch(function(){});return this.repo.startTransaction(this.path,e,function(e,n,i){e?r.reject(e):r.resolve(new Pe(n,i)),"function"==typeof t&&t(e,n,i)},n),r.promise},t.prototype.setPriority=function(e,t){i.validateArgCount("Reference.setPriority",1,2,arguments.length),be("Reference.setPriority",this.path),me("Reference.setPriority",1,e,!1),i.validateCallback("Reference.setPriority",2,t,!0);var n=new i.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),e,null,n.wrapCallback(t)),n.promise},t.prototype.push=function(e,t){i.validateArgCount("Reference.push",0,2,arguments.length),be("Reference.push",this.path),_e("Reference.push",1,e,this.path,!0),i.validateCallback("Reference.push",2,t,!0);var n,r=this.repo.serverTime(),o=Re(r),s=this.child(o),a=this.child(o);return n=null!=e?s.set(e,t).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),"function"==typeof t&&n.catch(function(){}),s},t.prototype.onDisconnect=function(){return be("Reference.onDisconnect",this.path),new Ne(this.repo,this.path)},Object.defineProperty(t.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),t}(gt);gt.__referenceConstructor=Er,$t.__referenceConstructor=Er;var wr,Tr=function(){return function(){this.children={},this.childCount=0,this.value=null}}(),br=function(){function e(e,t,n){void 0===e&&(e=""),void 0===t&&(t=null),void 0===n&&(n=new Tr),this.name_=e,this.parent_=t,this.node_=n}return e.prototype.subTree=function(t){for(var n=t instanceof j?t:new j(t),r=this,o=n.getFront();null!==o;){r=new e(o,r,i.safeGet(r.node_.children,o)||new Tr),o=(n=n.popFront()).getFront()}return r},e.prototype.getValue=function(){return this.node_.value},e.prototype.setValue=function(e){i.assert(void 0!==e,"Cannot set value to undefined"),this.node_.value=e,this.updateParents_()},e.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},e.prototype.hasChildren=function(){return this.node_.childCount>0},e.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},e.prototype.forEachChild=function(t){var n=this;F(this.node_.children,function(r,i){t(new e(r,n,i))})},e.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},e.prototype.forEachAncestor=function(e,t){for(var n=t?this:this.parent();null!==n;){if(e(n))return!0;n=n.parent()}return!1},e.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},e.prototype.path=function(){return new j(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},e.prototype.name=function(){return this.name_},e.prototype.parent=function(){return this.parent_},e.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},e.prototype.updateChild_=function(e,t){var n=t.isEmpty(),r=i.contains(this.node_.children,e);n&&r?(delete this.node_.children[e],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[e]=t.node_,this.node_.childCount++,this.updateParents_())},e}();!function(e){e[e.RUN=0]="RUN",e[e.SENT=1]="SENT",e[e.COMPLETED=2]="COMPLETED",e[e.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",e[e.NEEDS_ABORT=4]="NEEDS_ABORT"}(wr||(wr={})),vr.MAX_TRANSACTION_RETRIES_=25,vr.prototype.transactionsInit_=function(){this.transactionQueueTree_=new br},vr.prototype.startTransaction=function(e,t,n,r){this.log_("transaction on "+e);var o=function(){},s=new Er(this,e);s.on("value",o);var a={path:e,update:t,onComplete:n,status:null,order:d(),applyLocally:r,retryCount:0,unwatcher:function(){s.off("value",o)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=this.getLatestState_(e);a.currentInputSnapshot=h;var u=a.update(h.val());if(void 0===u){if(a.unwatcher(),a.currentOutputSnapshotRaw=null,a.currentOutputSnapshotResolved=null,a.onComplete){var l=new dt(a.currentInputSnapshot,new Er(this,a.path),Ye);a.onComplete(null,!1,l)}}else{ye("transaction failed: Data returned ",u,a.path),a.status=wr.RUN;var c=this.transactionQueueTree_.subTree(e),p=c.getValue()||[];p.push(a),c.setValue(p);var f=void 0;if("object"==typeof u&&null!==u&&i.contains(u,".priority"))f=i.safeGet(u,".priority"),i.assert(fe(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(e)||it.EMPTY_NODE).getPriority().val();f=f;var _=this.generateServerValues(),y=ht(u,f),v=It(y,h,_);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=v,a.currentWriteId=this.getNextWriteId_();var g=this.serverSyncTree_.applyUserOverwrite(e,v,a.currentWriteId,a.applyLocally);this.eventQueue_.raiseEventsForChangedPath(e,g),this.sendReadyTransactions_()}},vr.prototype.getLatestState_=function(e,t){return this.serverSyncTree_.calcCompleteEventCache(e,t)||it.EMPTY_NODE},vr.prototype.sendReadyTransactions_=function(e){var t=this;if(void 0===e&&(e=this.transactionQueueTree_),e||this.pruneCompletedTransactionsBelowNode_(e),null!==e.getValue()){var n=this.buildTransactionQueue_(e);i.assert(n.length>0,"Sending zero length transaction queue"),n.every(function(e){return e.status===wr.RUN})&&this.sendTransactionQueue_(e.path(),n)}else e.hasChildren()&&e.forEachChild(function(e){t.sendReadyTransactions_(e)})},vr.prototype.sendTransactionQueue_=function(e,t){for(var n=this,r=t.map(function(e){return e.currentWriteId}),o=this.getLatestState_(e,r),s=o,a=o.hash(),h=0;h<t.length;h++){var u=t[h];i.assert(u.status===wr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),u.status=wr.SENT,u.retryCount++;var l=j.relativePath(e,u.path);s=s.updateChild(l,u.currentOutputSnapshotRaw)}var c=s.val(!0),p=e;this.server_.put(p.toString(),c,function(r){n.log_("transaction put response",{path:p.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=0;s<t.length;s++){if(t[s].status=wr.COMPLETED,i=i.concat(n.serverSyncTree_.ackUserWrite(t[s].currentWriteId)),t[s].onComplete){var a=t[s].currentOutputSnapshotResolved,h=new Er(n,t[s].path),u=new dt(a,h,Ye);o.push(t[s].onComplete.bind(null,null,!0,u))}t[s].unwatcher()}n.pruneCompletedTransactionsBelowNode_(n.transactionQueueTree_.subTree(e)),n.sendReadyTransactions_(),n.eventQueue_.raiseEventsForChangedPath(e,i);for(s=0;s<o.length;s++)U(o[s])}else{if("datastale"===r)for(s=0;s<t.length;s++)t[s].status===wr.SENT_NEEDS_ABORT?t[s].status=wr.NEEDS_ABORT:t[s].status=wr.RUN;else{T("transaction at "+p.toString()+" failed: "+r);for(s=0;s<t.length;s++)t[s].status=wr.NEEDS_ABORT,t[s].abortReason=r}n.rerunTransactions_(e)}},a)},vr.prototype.rerunTransactions_=function(e){var t=this.getAncestorTransactionNode_(e),n=t.path(),r=this.buildTransactionQueue_(t);return this.rerunTransactionQueue_(r,n),n},vr.prototype.rerunTransactionQueue_=function(e,t){if(0!==e.length){for(var n,r=[],o=[],s=e.filter(function(e){return e.status===wr.RUN}).map(function(e){return e.currentWriteId}),a=0;a<e.length;a++){var h=e[a],u=j.relativePath(t,h.path),l=!1,c=void 0;if(i.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),h.status===wr.NEEDS_ABORT)l=!0,c=h.abortReason,o=o.concat(this.serverSyncTree_.ackUserWrite(h.currentWriteId,!0));else if(h.status===wr.RUN)if(h.retryCount>=vr.MAX_TRANSACTION_RETRIES_)l=!0,c="maxretry",o=o.concat(this.serverSyncTree_.ackUserWrite(h.currentWriteId,!0));else{var p=this.getLatestState_(h.path,s);h.currentInputSnapshot=p;var d=e[a].update(p.val());if(void 0!==d){ye("transaction failed: Data returned ",d,h.path);var f=ht(d);"object"==typeof d&&null!=d&&i.contains(d,".priority")||(f=f.updatePriority(p.getPriority()));var _=h.currentWriteId,y=this.generateServerValues(),v=It(f,p,y);h.currentOutputSnapshotRaw=f,h.currentOutputSnapshotResolved=v,h.currentWriteId=this.getNextWriteId_(),s.splice(s.indexOf(_),1),o=(o=o.concat(this.serverSyncTree_.applyUserOverwrite(h.path,v,h.currentWriteId,h.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(_,!0))}else l=!0,c="nodata",o=o.concat(this.serverSyncTree_.ackUserWrite(h.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(t,o),o=[],l&&(e[a].status=wr.COMPLETED,n=e[a].unwatcher,setTimeout(n,Math.floor(0)),e[a].onComplete))if("nodata"===c){var g=new Er(this,e[a].path),m=e[a].currentInputSnapshot,C=new dt(m,g,Ye);r.push(e[a].onComplete.bind(null,null,!1,C))}else r.push(e[a].onComplete.bind(null,new Error(c),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(a=0;a<r.length;a++)U(r[a]);this.sendReadyTransactions_()}},vr.prototype.getAncestorTransactionNode_=function(e){var t,n=this.transactionQueueTree_;for(t=e.getFront();null!==t&&null===n.getValue();)n=n.subTree(t),t=(e=e.popFront()).getFront();return n},vr.prototype.buildTransactionQueue_=function(e){var t=[];return this.aggregateTransactionQueuesForNode_(e,t),t.sort(function(e,t){return e.order-t.order}),t},vr.prototype.aggregateTransactionQueuesForNode_=function(e,t){var n=this,r=e.getValue();if(null!==r)for(var i=0;i<r.length;i++)t.push(r[i]);e.forEachChild(function(e){n.aggregateTransactionQueuesForNode_(e,t)})},vr.prototype.pruneCompletedTransactionsBelowNode_=function(e){var t=this,n=e.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==wr.COMPLETED&&(n[r]=n[i],r++);n.length=r,e.setValue(n.length>0?n:null)}e.forEachChild(function(e){t.pruneCompletedTransactionsBelowNode_(e)})},vr.prototype.abortTransactions_=function(e){var t=this,n=this.getAncestorTransactionNode_(e).path(),r=this.transactionQueueTree_.subTree(e);return r.forEachAncestor(function(e){t.abortTransactionsOnNode_(e)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(e){t.abortTransactionsOnNode_(e)}),n},vr.prototype.abortTransactionsOnNode_=function(e){var t=e.getValue();if(null!==t){for(var n=[],r=[],o=-1,s=0;s<t.length;s++)if(t[s].status===wr.SENT_NEEDS_ABORT);else if(t[s].status===wr.SENT)i.assert(o===s-1,"All SENT items should be at beginning of queue."),o=s,t[s].status=wr.SENT_NEEDS_ABORT,t[s].abortReason="set";else if(i.assert(t[s].status===wr.RUN,"Unexpected transaction status in abort"),t[s].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(t[s].currentWriteId,!0)),t[s].onComplete){n.push(t[s].onComplete.bind(null,new Error("set"),!1,null))}-1===o?e.setValue(null):t.length=o+1,this.eventQueue_.raiseEventsForChangedPath(e.path(),r);for(s=0;s<n.length;s++)U(n[s])}};var Sr,Ir="databaseURL",Nr="FIREBASE_DATABASE_EMULATOR_HOST",Pr=function(){function t(){this.repos_={},this.useRestClient_=!1}return t.getInstance=function(){return Sr||(Sr=new t),Sr},t.prototype.interrupt=function(){var e,t,n,i;try{for(var o=r.__values(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var h=(n=void 0,r.__values(Object.keys(this.repos_[a]))),u=h.next();!u.done;u=h.next()){var l=u.value;this.repos_[a][l].interrupt()}}catch(c){n={error:c}}finally{try{u&&!u.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},t.prototype.resume=function(){var e,t,n,i;try{for(var o=r.__values(Object.keys(this.repos_)),s=o.next();!s.done;s=o.next()){var a=s.value;try{for(var h=(n=void 0,r.__values(Object.keys(this.repos_[a]))),u=h.next();!u.done;u=h.next()){var l=u.value;this.repos_[a][l].resume()}}catch(c){n={error:c}}finally{try{u&&!u.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}}}catch(p){e={error:p}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}},t.prototype.databaseFromApp=function(t,n,r){var i=r||t.options[Ir];void 0===i&&w("Can't determine Firebase Database URL.  Be sure to include "+Ir+" option when calling firebase.initializeApp().");var o=se(i),s=o.repoInfo,a=void 0;return void 0!==e&&(a=e.env[Nr]),a&&(i="http://"+a+"?ns="+s.namespace,s=(o=se(i)).repoInfo),Se("Invalid Firebase Database URL",1,o),o.path.isEmpty()||w("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(s,t,n).database},t.prototype.deleteRepo=function(e){var t=i.safeGet(this.repos_,e.app.name);t&&i.safeGet(t,e.repoInfo_.toURLString())===e||w("Database "+e.app.name+"("+e.repoInfo_+") has already been deleted."),e.interrupt(),delete t[e.repoInfo_.toURLString()]},t.prototype.createRepo=function(e,t,n){var r=i.safeGet(this.repos_,t.name);r||(r={},this.repos_[t.name]=r);var o=i.safeGet(r,e.toURLString());return o&&w("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new vr(e,this.useRestClient_,t,n),r[e.toURLString()]=o,o},t.prototype.forceRestClient=function(e){this.useRestClient_=e},t}(),Rr=function(){function e(e){this.repo_=e,e instanceof vr||w("Don't call new Database() directly - please use firebase.database()."),this.root_=new Er(e,j.Empty),this.INTERNAL=new Dr(this)}return Object.defineProperty(e.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),e.prototype.ref=function(e){return this.checkDeleted_("ref"),i.validateArgCount("database.ref",0,1,arguments.length),e instanceof Er?this.refFromURL(e.toString()):void 0!==e?this.root_.child(e):this.root_},e.prototype.refFromURL=function(e){var t="database.refFromURL";this.checkDeleted_(t),i.validateArgCount(t,1,1,arguments.length);var n=se(e);Se(t,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&w(t+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},e.prototype.checkDeleted_=function(e){null===this.repo_&&w("Cannot call "+e+" on a deleted database.")},e.prototype.goOffline=function(){i.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},e.prototype.goOnline=function(){i.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},e.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(e){return{".sv":{increment:e}}}},e}(),Dr=function(){function e(e){this.database=e}return e.prototype.delete=function(){return r.__awaiter(this,void 0,void 0,function(){return r.__generator(this,function(e){return this.database.checkDeleted_("delete"),Pr.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},e}(),xr=function(){Hn.forceDisallow(),Ln.forceAllow()},kr=function(){Ln.forceDisallow()},Or=function(){return Hn.isAvailable()},Fr=function(e,t){e.repo.persistentConnection_.securityDebugCallback_=t},Ar=function(e,t){e.repo.stats(t)},Lr=function(e,t){e.repo.statsIncrementCounter(t)},Mr=function(e){return e.repo.dataUpdateCount},Wr=function(e,t){return e.repo.interceptServerData_(t)},qr=Object.freeze({__proto__:null,forceLongPolling:xr,forceWebSockets:kr,isWebSocketsAvailable:Or,setSecurityDebugCallback:Fr,stats:Ar,statsIncrementCounter:Lr,dataUpdateCount:Mr,interceptServerData:Wr}),Qr=fr;fr.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},fr.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)};var Ur=or,Vr=function(e){var t=fr.prototype.put;return fr.prototype.put=function(n,r,i,o){void 0!==o&&(o=e()),t.call(this,n,r,i,o)},function(){fr.prototype.put=t}},Hr=te,jr=function(e){return e.queryIdentifier()},Br=function(e){Pr.getInstance().forceRestClient(e)},Yr=Object.freeze({__proto__:null,DataConnection:Qr,RealTimeConnection:Ur,hijackHash:Vr,ConnectionTarget:Hr,queryIdentifier:jr,forceRestClient:Br}),Kr="@firebase/database",zr="0.6.2",Gr=Rr.ServerValue;function Xr(e){qn(e.SDK_VERSION);var t=e.INTERNAL.registerComponent(new s.Component("database",function(e,t){var n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal");return Pr.getInstance().databaseFromApp(n,r,t)},"PUBLIC").setServiceProps({Reference:Er,Query:gt,Database:Rr,DataSnapshot:dt,enableLogging:g,INTERNAL:qr,ServerValue:Gr,TEST_ACCESS:Yr}).setMultipleInstances(!0));e.registerVersion(Kr,zr),i.isNodeSdk()&&(module.exports=t)}Xr(n),exports.DataSnapshot=dt,exports.Database=Rr,exports.OnDisconnect=Ne,exports.Query=gt,exports.Reference=Er,exports.ServerValue=Gr,exports.enableLogging=g,exports.registerDatabase=Xr;
},{"@firebase/app":"dP58","tslib":"vCxL","@firebase/util":"xA6u","@firebase/logger":"TUpU","@firebase/component":"nzQs","process":"pBGv"}],"wU43":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.registerStorage=It;var e=n(require("@firebase/app")),t=require("tslib"),r=require("@firebase/component");function n(e){return e&&e.__esModule?e:{default:e}}var o="firebasestorage.googleapis.com",i="storageBucket",a=12e4,s=6e5,u=-9007199254740991,c=function(){function e(e,t){this.code_=p(e),this.message_="Firebase Storage: "+t,this.serverResponse_=null,this.name_="FirebaseError"}return e.prototype.codeProp=function(){return this.code},e.prototype.codeEquals=function(e){return p(e)===this.codeProp()},e.prototype.serverResponseProp=function(){return this.serverResponse_},e.prototype.setServerResponseProp=function(e){this.serverResponse_=e},Object.defineProperty(e.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),e}(),l={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function p(e){return"storage/"+e}function h(){return new c(l.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function f(e){return new c(l.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function d(e){return new c(l.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _(){return new c(l.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}function v(e){return new c(l.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function m(){return new c(l.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function g(){return new c(l.CANCELED,"User canceled the upload/download.")}function b(e){return new c(l.INVALID_URL,"Invalid URL '"+e+"'.")}function y(e){return new c(l.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function R(){return new c(l.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function w(){return new c(l.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function E(){return new c(l.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function T(e,t,r){return new c(l.INVALID_ARGUMENT,"Invalid argument in `"+t+"` at index "+e+": "+r)}function U(e,t,r,n){var o,i;return e===t?(o=e,i=1===e?"argument":"arguments"):(o="between "+e+" and "+t,i="arguments"),new c(l.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+r+"`: Expected "+o+" "+i+", received "+n+".")}function A(){return new c(l.APP_DELETED,"The Firebase app was deleted.")}function N(e){return new c(l.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function O(e,t){return new c(l.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function k(e){throw new c(l.INTERNAL_ERROR,"Internal error: "+e)}var C={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function S(e){switch(e){case C.RAW:case C.BASE64:case C.BASE64URL:case C.DATA_URL:return;default:throw"Expected one of the event types: ["+C.RAW+", "+C.BASE64+", "+C.BASE64URL+", "+C.DATA_URL+"]."}}var x=function(){return function(e,t){this.data=e,this.contentType=t||null}}();function P(e,t){switch(e){case C.RAW:return new x(I(t));case C.BASE64:case C.BASE64URL:return new x(D(e,t));case C.DATA_URL:return new x(W(t),B(t))}throw h()}function I(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(n<=127)t.push(n);else if(n<=2047)t.push(192|n>>6,128|63&n);else if(55296==(64512&n))if(r<e.length-1&&56320==(64512&e.charCodeAt(r+1)))n=65536|(1023&n)<<10|1023&e.charCodeAt(++r),t.push(240|n>>18,128|n>>12&63,128|n>>6&63,128|63&n);else t.push(239,191,189);else 56320==(64512&n)?t.push(239,191,189):t.push(224|n>>12,128|n>>6&63,128|63&n)}return new Uint8Array(t)}function L(e){var t;try{t=decodeURIComponent(e)}catch(r){throw O(C.DATA_URL,"Malformed data URL.")}return I(t)}function D(e,t){switch(e){case C.BASE64:var r=-1!==t.indexOf("-"),n=-1!==t.indexOf("_");if(r||n)throw O(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break;case C.BASE64URL:var o=-1!==t.indexOf("+"),i=-1!==t.indexOf("/");if(o||i)throw O(e,"Invalid character '"+(o?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var a;try{a=atob(t)}catch(c){throw O(e,"Invalid character found")}for(var s=new Uint8Array(a.length),u=0;u<a.length;u++)s[u]=a.charCodeAt(u);return s}var M=function(){return function(e){this.base64=!1,this.contentType=null;var t=e.match(/^data:([^,]+)?,/);if(null===t)throw O(C.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=t[1]||null;null!=r&&(this.base64=G(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=e.substring(e.indexOf(",")+1)}}();function W(e){var t=new M(e);return t.base64?D(C.BASE64,t.rest):L(t.rest)}function B(e){return new M(e).contentType}function G(e,t){return!!(e.length>=t.length)&&e.substring(e.length-t.length)===t}var q,j={STATE_CHANGED:"state_changed"},F={RUNNING:"running",PAUSING:"pausing",PAUSED:"paused",SUCCESS:"success",CANCELING:"canceling",CANCELED:"canceled",ERROR:"error"},H={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function z(e){switch(e){case F.RUNNING:case F.PAUSING:case F.CANCELING:return H.RUNNING;case F.PAUSED:return H.PAUSED;case F.SUCCESS:return H.SUCCESS;case F.CANCELED:return H.CANCELED;case F.ERROR:default:return H.ERROR}}function X(e){return null!=e}function V(e){return void 0!==e}function K(e){return"function"==typeof e}function Z(e){return"object"==typeof e}function J(e){return Z(e)&&null!==e}function Q(e){return Z(e)&&!Array.isArray(e)}function $(e){return"string"==typeof e||e instanceof String}function Y(e){return ee(e)&&Number.isInteger(e)}function ee(e){return"number"==typeof e||e instanceof Number}function te(e){return re()&&e instanceof Blob}function re(){return"undefined"!=typeof Blob}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(q||(q={}));var ne=function(){function e(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=q.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=q.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=q.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}return e.prototype.send=function(e,t,r,n){if(this.sent_)throw k("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),X(n))for(var o in n)n.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,n[o].toString());return X(r)?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_},e.prototype.getErrorCode=function(){if(!this.sent_)throw k("cannot .getErrorCode() before sending");return this.errorCode_},e.prototype.getStatus=function(){if(!this.sent_)throw k("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}},e.prototype.getResponseText=function(){if(!this.sent_)throw k("cannot .getResponseText() before sending");return this.xhr_.responseText},e.prototype.abort=function(){this.xhr_.abort()},e.prototype.getResponseHeader=function(e){return this.xhr_.getResponseHeader(e)},e.prototype.addUploadProgressListener=function(e){X(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",e)},e.prototype.removeUploadProgressListener=function(e){X(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",e)},e}(),oe=function(){function e(){}return e.prototype.createXhrIo=function(){return new ne},e}();function ie(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function ae(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=ie();if(void 0!==r){for(var n=new r,o=0;o<e.length;o++)n.append(e[o]);return n.getBlob()}if(re())return new Blob(e);throw Error("This browser doesn't seem to support creating Blobs")}function se(e,t,r){return e.webkitSlice?e.webkitSlice(t,r):e.mozSlice?e.mozSlice(t,r):e.slice?e.slice(t,r):null}var ue=function(){function e(e,t){var r=0,n="";te(e)?(this.data_=e,r=e.size,n=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=n}return e.prototype.size=function(){return this.size_},e.prototype.type=function(){return this.type_},e.prototype.slice=function(t,r){if(te(this.data_)){var n=se(this.data_,t,r);return null===n?null:new e(n)}return new e(new Uint8Array(this.data_.buffer,t,r-t),!0)},e.getBlob=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(re()){var n=t.map(function(t){return t instanceof e?t.data_:t});return new e(ae.apply(null,n))}var o=t.map(function(e){return $(e)?P(C.RAW,e).data:e.data_}),i=0;o.forEach(function(e){i+=e.byteLength});var a=new Uint8Array(i),s=0;return o.forEach(function(e){for(var t=0;t<e.length;t++)a[s++]=e[t]}),new e(a,!0)},e.prototype.uploadData=function(){return this.data_},e}(),ce=function(){function e(e,t){this.bucket=e,this.path_=t}return Object.defineProperty(e.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),e.prototype.fullServerUrl=function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)},e.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},e.makeFromBucketSpec=function(t){var r;try{r=e.makeFromUrl(t)}catch(n){return new e(t,"")}if(""===r.path)return r;throw y(t)},e.makeFromUrl=function(t){var r=null;var n=new RegExp("^gs://([A-Za-z0-9.\\-_]+)(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}for(var a=o.replace(/[.]/g,"\\."),s=[{regex:n,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/([A-Za-z0-9.\\-_]+)/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/([A-Za-z0-9.\\-_]+)/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],u=0;u<s.length;u++){var c=s[u],l=c.regex.exec(t);if(l){var p=l[c.indices.bucket],h=l[c.indices.path];h||(h=""),r=new e(p,h),c.postModify(r);break}}if(null==r)throw b(t);return r},e}();function le(e){var t;try{t=JSON.parse(e)}catch(r){return null}return Q(t)?t:null}function pe(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}function he(e,t){var r=t.split("/").filter(function(e){return e.length>0}).join("/");return 0===e.length?r:e+"/"+r}function fe(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function de(e){return"https://"+o+"/v0"+e}function _e(e){var t=encodeURIComponent,r="?";for(var n in e){if(e.hasOwnProperty(n))r=r+(t(n)+"="+t(e[n]))+"&"}return r=r.slice(0,-1)}function ve(e,t){return t}var me=function(){return function(e,t,r,n){this.server=e,this.local=t||e,this.writable=!!r,this.xform=n||ve}}(),ge=null;function be(e){return!$(e)||e.length<2?e:fe(e)}function ye(){if(ge)return ge;var e=[];e.push(new me("bucket")),e.push(new me("generation")),e.push(new me("metageneration")),e.push(new me("name","fullPath",!0));var t=new me("name");t.xform=function(e,t){return be(t)},e.push(t);var r=new me("size");return r.xform=function(e,t){return X(t)?Number(t):t},e.push(r),e.push(new me("timeCreated")),e.push(new me("updated")),e.push(new me("md5Hash",null,!0)),e.push(new me("cacheControl",null,!0)),e.push(new me("contentDisposition",null,!0)),e.push(new me("contentEncoding",null,!0)),e.push(new me("contentLanguage",null,!0)),e.push(new me("contentType",null,!0)),e.push(new me("metadata","customMetadata",!0)),ge=e}function Re(e,t){Object.defineProperty(e,"ref",{get:function(){var r=e.bucket,n=e.fullPath,o=new ce(r,n);return t.makeStorageReference(o)}})}function we(e,t,r){for(var n={type:"file"},o=r.length,i=0;i<o;i++){var a=r[i];n[a.local]=a.xform(n,t[a.server])}return Re(n,e),n}function Ee(e,t,r){var n=le(t);return null===n?null:we(e,n,r)}function Te(e,t){var r=le(t);if(null===r)return null;if(!$(r.downloadTokens))return null;var n=r.downloadTokens;if(0===n.length)return null;var o=encodeURIComponent;return n.split(",").map(function(t){var r=e.bucket,n=e.fullPath;return de("/b/"+o(r)+"/o/"+o(n))+_e({alt:"media",token:t})})[0]}function Ue(e,t){for(var r={},n=t.length,o=0;o<n;o++){var i=t[o];i.writable&&(r[i.server]=e[i.local])}return JSON.stringify(r)}function Ae(e){if(!Z(e)||!e)throw"Expected Metadata object.";for(var t in e)if(e.hasOwnProperty(t)){var r=e[t];if("customMetadata"===t){if(!Z(r))throw"Expected object for 'customMetadata' mapping."}else if(J(r))throw"Mapping for '"+t+"' cannot be an object."}}var Ne="maxResults",Oe=1e3,ke="pageToken",Ce="prefixes",Se="items";function xe(e,t,r){var n={prefixes:[],items:[],nextPageToken:r.nextPageToken};if(r[Ce])for(var o=0,i=r[Ce];o<i.length;o++){var a=i[o].replace(/\/$/,""),s=e.makeStorageReference(new ce(t,a));n.prefixes.push(s)}if(r[Se])for(var u=0,c=r[Se];u<c.length;u++){var l=c[u];s=e.makeStorageReference(new ce(t,l.name));n.items.push(s)}return n}function Pe(e,t,r){var n=le(r);return null===n?null:xe(e,t,n)}function Ie(e){if(!Z(e)||!e)throw"Expected ListOptions object.";for(var t in e)if(t===Ne){if(!Y(e[Ne])||e[Ne]<=0)throw"Expected maxResults to be a positive number.";if(e[Ne]>1e3)throw"Expected maxResults to be less than or equal to "+Oe+"."}else{if(t!==ke)throw"Unknown option: "+t;if(e[ke]&&!$(e[ke]))throw"Expected pageToken to be string."}}var Le=function(){return function(e,t,r,n){this.url=e,this.method=t,this.handler=r,this.timeout=n,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function De(e){if(!e)throw h()}function Me(e,t){return function(r,n){var o=Ee(e,n,t);return De(null!==o),o}}function We(e,t){return function(r,n){var o=Pe(e,t,n);return De(null!==o),o}}function Be(e,t){return function(r,n){var o=Ee(e,n,t);return De(null!==o),Te(o,n)}}function Ge(e){return function(t,r){var n;return(n=401===t.getStatus()?_():402===t.getStatus()?d(e.bucket):403===t.getStatus()?v(e.path):r).setServerResponseProp(r.serverResponseProp()),n}}function qe(e){var t=Ge(e);return function(r,n){var o=t(r,n);return 404===r.getStatus()&&(o=f(e.path)),o.setServerResponseProp(n.serverResponseProp()),o}}function je(e,t,r){var n=de(t.fullServerUrl()),o=e.maxOperationRetryTime(),i=new Le(n,"GET",Me(e,r),o);return i.errorHandler=qe(t),i}function Fe(e,t,r,n,o){var i={};t.isRoot?i.prefix="":i.prefix=t.path+"/",r&&r.length>0&&(i.delimiter=r),n&&(i.pageToken=n),o&&(i.maxResults=o);var a=de(t.bucketOnlyServerUrl()),s=e.maxOperationRetryTime(),u=new Le(a,"GET",We(e,t.bucket),s);return u.urlParams=i,u.errorHandler=Ge(t),u}function He(e,t,r){var n=de(t.fullServerUrl()),o=e.maxOperationRetryTime(),i=new Le(n,"GET",Be(e,r),o);return i.errorHandler=qe(t),i}function ze(e,t,r,n){var o=de(t.fullServerUrl()),i=Ue(r,n),a=e.maxOperationRetryTime(),s=new Le(o,"PATCH",Me(e,n),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=i,s.errorHandler=qe(t),s}function Xe(e,t){var r=de(t.fullServerUrl()),n=e.maxOperationRetryTime();var o=new Le(r,"DELETE",function(e,t){},n);return o.successCodes=[200,204],o.errorHandler=qe(t),o}function Ve(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Ke(e,t,r){var n=Object.assign({},r);return n.fullPath=e.path,n.size=t.size(),n.contentType||(n.contentType=Ve(null,t)),n}function Ze(e,t,r,n,o){var i=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"};var s=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;var u=Ke(t,n,o),c="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ue(u,r)+"\r\n--"+s+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",l="\r\n--"+s+"--",p=ue.getBlob(c,n,l);if(null===p)throw R();var h={name:u.fullPath},f=de(i),d=e.maxUploadRetryTime(),_=new Le(f,"POST",Me(e,r),d);return _.urlParams=h,_.headers=a,_.body=p.uploadData(),_.errorHandler=Ge(t),_}var Je=function(){return function(e,t,r,n){this.current=e,this.total=t,this.finalized=!!r,this.metadata=n||null}}();function Qe(e,t){var r=null;try{r=e.getResponseHeader("X-Goog-Upload-Status")}catch(n){De(!1)}return De(!!r&&-1!==(t||["active"]).indexOf(r)),r}function $e(e,t,r,n,o){var i=t.bucketOnlyServerUrl(),a=Ke(t,n,o),s={name:a.fullPath},u=de(i),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":n.size(),"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},l=Ue(a,r),p=e.maxUploadRetryTime();var h=new Le(u,"POST",function(e){var t;Qe(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(r){De(!1)}return De($(t)),t},p);return h.urlParams=s,h.headers=c,h.body=l,h.errorHandler=Ge(t),h}function Ye(e,t,r,n){var o=e.maxUploadRetryTime(),i=new Le(r,"POST",function(e){var t=Qe(e,["active","final"]),r=null;try{r=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(i){De(!1)}r||De(!1);var o=Number(r);return De(!isNaN(o)),new Je(o,n.size(),"final"===t)},o);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=Ge(t),i}var et=262144;function tt(e,t,r,n,o,i,a,s){var u=new Je(0,0);if(a?(u.current=a.current,u.total=a.total):(u.current=0,u.total=n.size()),n.size()!==u.total)throw w();var c=u.total-u.current,l=c;o>0&&(l=Math.min(l,o));var p=u.current,h=p+l,f={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},d=n.slice(p,h);if(null===d)throw R();var _=t.maxUploadRetryTime(),v=new Le(r,"POST",function(e,r){var o,a=Qe(e,["active","final"]),s=u.current+l,c=n.size();return o="final"===a?Me(t,i)(e,r):null,new Je(s,c,"final"===a,o)},_);return v.headers=f,v.body=d.uploadData(),v.progressCallback=s||null,v.errorHandler=Ge(e),v}var rt=function(){return function(e,t,r){if(K(e)||X(t)||X(r))this.next=e,this.error=t||null,this.complete=r||null;else{var n=e;this.next=n.next||null,this.error=n.error||null,this.complete=n.complete||null}}}(),nt=function(){return function(e,t,r,n,o,i){this.bytesTransferred=e,this.totalBytes=t,this.state=r,this.metadata=n,this.task=o,this.ref=i}}();function ot(e,t,r){for(var n=t.length,o=t.length,i=0;i<t.length;i++)if(t[i].optional){n=i;break}if(!(n<=r.length&&r.length<=o))throw U(n,o,e,r.length);for(i=0;i<r.length;i++)try{t[i].validator(r[i])}catch(a){throw a instanceof Error?T(i,e,a.message):T(i,e,a)}}var it=function(){return function(e,t){var r=this;this.validator=function(t){r.optional&&!V(t)||e(t)},this.optional=!!t}}();function at(e,t){return function(r){e(r),t(r)}}function st(e,t){function r(e){if(!$(e))throw"Expected string."}var n;return n=e?at(r,e):r,new it(n,t)}function ut(){return new it(function(e){if(!(e instanceof Uint8Array||e instanceof ArrayBuffer||re()&&e instanceof Blob))throw"Expected Blob or File."})}function ct(e){return new it(Ae,e)}function lt(e){return new it(Ie,e)}function pt(){return new it(function(e){if(!(ee(e)&&e>=0))throw"Expected a number 0 or greater."})}function ht(e,t){return new it(function(t){if(!(null===t||X(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function ft(e){return new it(function(e){if(null!==e&&!K(e))throw"Expected a Function."},e)}function dt(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];Promise.resolve().then(function(){return e.apply(void 0,t)})}}var _t=function(){function e(e,t,r,n,o,i){var a=this;void 0===i&&(i=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=e,this.authWrapper_=t,this.location_=r,this.blob_=o,this.metadata_=i,this.mappings_=n,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=F.RUNNING,this.errorHandler_=function(e){a.request_=null,a.chunkMultiplier_=1,e.codeEquals(l.CANCELED)?(a.needToFetchStatus_=!0,a.completeTransitions_()):(a.error_=e,a.transition_(F.ERROR))},this.metadataErrorHandler_=function(e){a.request_=null,e.codeEquals(l.CANCELED)?a.completeTransitions_():(a.error_=e,a.transition_(F.ERROR))},this.promise_=new Promise(function(e,t){a.resolve_=e,a.reject_=t,a.start_()}),this.promise_.then(null,function(){})}return e.prototype.makeProgressCallback_=function(){var e=this,t=this.transferred_;return function(r){return e.updateProgress_(t+r)}},e.prototype.shouldDoResumable_=function(e){return e.size()>262144},e.prototype.start_=function(){this.state_===F.RUNNING&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},e.prototype.resolveToken_=function(e){var t=this;this.authWrapper_.getAuthToken().then(function(r){switch(t.state_){case F.RUNNING:e(r);break;case F.CANCELING:t.transition_(F.CANCELED);break;case F.PAUSING:t.transition_(F.PAUSED)}})},e.prototype.createResumable_=function(){var e=this;this.resolveToken_(function(t){var r=$e(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),n=e.authWrapper_.makeRequest(r,t);e.request_=n,n.getPromise().then(function(t){e.request_=null,e.uploadUrl_=t,e.needToFetchStatus_=!1,e.completeTransitions_()},e.errorHandler_)})},e.prototype.fetchStatus_=function(){var e=this,t=this.uploadUrl_;this.resolveToken_(function(r){var n=Ye(e.authWrapper_,e.location_,t,e.blob_),o=e.authWrapper_.makeRequest(n,r);e.request_=o,o.getPromise().then(function(t){t=t,e.request_=null,e.updateProgress_(t.current),e.needToFetchStatus_=!1,t.finalized&&(e.needToFetchMetadata_=!0),e.completeTransitions_()},e.errorHandler_)})},e.prototype.continueUpload_=function(){var e=this,t=et*this.chunkMultiplier_,r=new Je(this.transferred_,this.blob_.size()),n=this.uploadUrl_;this.resolveToken_(function(o){var i;try{i=tt(e.location_,e.authWrapper_,n,e.blob_,t,e.mappings_,r,e.makeProgressCallback_())}catch(s){return e.error_=s,void e.transition_(F.ERROR)}var a=e.authWrapper_.makeRequest(i,o);e.request_=a,a.getPromise().then(function(t){e.increaseMultiplier_(),e.request_=null,e.updateProgress_(t.current),t.finalized?(e.metadata_=t.metadata,e.transition_(F.SUCCESS)):e.completeTransitions_()},e.errorHandler_)})},e.prototype.increaseMultiplier_=function(){et*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},e.prototype.fetchMetadata_=function(){var e=this;this.resolveToken_(function(t){var r=je(e.authWrapper_,e.location_,e.mappings_),n=e.authWrapper_.makeRequest(r,t);e.request_=n,n.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.transition_(F.SUCCESS)},e.metadataErrorHandler_)})},e.prototype.oneShotUpload_=function(){var e=this;this.resolveToken_(function(t){var r=Ze(e.authWrapper_,e.location_,e.mappings_,e.blob_,e.metadata_),n=e.authWrapper_.makeRequest(r,t);e.request_=n,n.getPromise().then(function(t){e.request_=null,e.metadata_=t,e.updateProgress_(e.blob_.size()),e.transition_(F.SUCCESS)},e.errorHandler_)})},e.prototype.updateProgress_=function(e){var t=this.transferred_;this.transferred_=e,this.transferred_!==t&&this.notifyObservers_()},e.prototype.transition_=function(e){if(this.state_!==e)switch(e){case F.CANCELING:case F.PAUSING:this.state_=e,null!==this.request_&&this.request_.cancel();break;case F.RUNNING:var t=this.state_===F.PAUSED;this.state_=e,t&&(this.notifyObservers_(),this.start_());break;case F.PAUSED:this.state_=e,this.notifyObservers_();break;case F.CANCELED:this.error_=g(),this.state_=e,this.notifyObservers_();break;case F.ERROR:case F.SUCCESS:this.state_=e,this.notifyObservers_()}},e.prototype.completeTransitions_=function(){switch(this.state_){case F.PAUSING:this.transition_(F.PAUSED);break;case F.CANCELING:this.transition_(F.CANCELED);break;case F.RUNNING:this.start_()}},Object.defineProperty(e.prototype,"snapshot",{get:function(){var e=z(this.state_);return new nt(this.transferred_,this.blob_.size(),e,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),e.prototype.on=function(e,t,r,n){var o="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=ft(!0).validator,a=ht(null,!0).validator;function s(e){try{return void i(e)}catch(t){}try{if(a(e),!(V(e.next)||V(e.error)||V(e.complete)))throw"";return}catch(t){throw o}}ot("on",[st(function(){if(e!==j.STATE_CHANGED)throw"Expected one of the event types: ["+j.STATE_CHANGED+"]."}),ht(s,!0),ft(!0),ft(!0)],arguments);var u=this;function c(e){return function(t,r,o){null!==e&&ot("on",e,arguments);var i=new rt(t,r,n);return u.addObserver_(i),function(){u.removeObserver_(i)}}}var l=[ht(function(e){if(null===e)throw o;s(e)}),ft(!0),ft(!0)];return!(V(t)||V(r)||V(n))?c(l):c(null)(t,r,n)},e.prototype.then=function(e,t){return this.promise_.then(e,t)},e.prototype.catch=function(e){return this.then(null,e)},e.prototype.addObserver_=function(e){this.observers_.push(e),this.notifyObserver_(e)},e.prototype.removeObserver_=function(e){var t=this.observers_.indexOf(e);-1!==t&&this.observers_.splice(t,1)},e.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},e.prototype.finishPromise_=function(){if(null!==this.resolve_){var e=!0;switch(z(this.state_)){case H.SUCCESS:dt(this.resolve_.bind(null,this.snapshot))();break;case H.CANCELED:case H.ERROR:dt(this.reject_.bind(null,this.error_))();break;default:e=!1}e&&(this.resolve_=null,this.reject_=null)}},e.prototype.notifyObserver_=function(e){switch(z(this.state_)){case H.RUNNING:case H.PAUSED:e.next&&dt(e.next.bind(e,this.snapshot))();break;case H.SUCCESS:e.complete&&dt(e.complete.bind(e))();break;case H.CANCELED:case H.ERROR:e.error&&dt(e.error.bind(e,this.error_))();break;default:e.error&&dt(e.error.bind(e,this.error_))()}},e.prototype.resume=function(){ot("resume",[],arguments);var e=this.state_===F.PAUSED||this.state_===F.PAUSING;return e&&this.transition_(F.RUNNING),e},e.prototype.pause=function(){ot("pause",[],arguments);var e=this.state_===F.RUNNING;return e&&this.transition_(F.PAUSING),e},e.prototype.cancel=function(){ot("cancel",[],arguments);var e=this.state_===F.RUNNING||this.state_===F.PAUSING;return e&&this.transition_(F.CANCELING),e},e}(),vt=function(){function e(e,t){this.authWrapper=e,this.location=t instanceof ce?t:ce.makeFromUrl(t)}return e.prototype.toString=function(){return ot("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},e.prototype.newRef=function(t,r){return new e(t,r)},e.prototype.mappings=function(){return ye()},e.prototype.child=function(e){ot("child",[st()],arguments);var t=he(this.location.path,e),r=new ce(this.location.bucket,t);return this.newRef(this.authWrapper,r)},Object.defineProperty(e.prototype,"parent",{get:function(){var e=pe(this.location.path);if(null===e)return null;var t=new ce(this.location.bucket,e);return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){var e=new ce(this.location.bucket,"");return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return fe(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),e.prototype.put=function(e,t){return void 0===t&&(t=null),ot("put",[ut(),ct(!0)],arguments),this.throwIfRoot_("put"),new _t(this,this.authWrapper,this.location,this.mappings(),new ue(e),t)},e.prototype.putString=function(e,t,r){void 0===t&&(t=C.RAW),ot("putString",[st(),st(S,!0),ct(!0)],arguments),this.throwIfRoot_("putString");var n=P(t,e),o=Object.assign({},r);return!X(o.contentType)&&X(n.contentType)&&(o.contentType=n.contentType),new _t(this,this.authWrapper,this.location,this.mappings(),new ue(n.data,!0),o)},e.prototype.delete=function(){var e=this;return ot("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(t){var r=Xe(e.authWrapper,e.location);return e.authWrapper.makeRequest(r,t).getPromise()})},e.prototype.listAll=function(){ot("listAll",[],arguments);var e={prefixes:[],items:[]};return this.listAllHelper(e).then(function(){return e})},e.prototype.listAllHelper=function(e,r){return(0,t.__awaiter)(this,void 0,void 0,function(){var n,o,i,a;return(0,t.__generator)(this,function(t){switch(t.label){case 0:return n={pageToken:r},[4,this.list(n)];case 1:return o=t.sent(),(i=e.prefixes).push.apply(i,o.prefixes),(a=e.items).push.apply(a,o.items),null==o.nextPageToken?[3,3]:[4,this.listAllHelper(e,o.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.list=function(e){ot("list",[lt(!0)],arguments);var t=this;return this.authWrapper.getAuthToken().then(function(r){var n=e||{},o=Fe(t.authWrapper,t.location,"/",n.pageToken,n.maxResults);return t.authWrapper.makeRequest(o,r).getPromise()})},e.prototype.getMetadata=function(){var e=this;return ot("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(t){var r=je(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(r,t).getPromise()})},e.prototype.updateMetadata=function(e){var t=this;return ot("updateMetadata",[ct()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(r){var n=ze(t.authWrapper,t.location,e,t.mappings());return t.authWrapper.makeRequest(n,r).getPromise()})},e.prototype.getDownloadURL=function(){var e=this;return ot("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(t){var r=He(e.authWrapper,e.location,e.mappings());return e.authWrapper.makeRequest(r,t).getPromise().then(function(e){if(null===e)throw E();return e})})},e.prototype.throwIfRoot_=function(e){if(""===this.location.path)throw N(e)},e}(),mt=function(){function e(e){this.promise_=Promise.reject(e)}return e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){},e}(),gt=function(){function e(){this.map=new Map,this.id=u}return e.prototype.addRequest=function(e){var t=this,r=this.id;this.id++,this.map.set(r,e),e.getPromise().then(function(){return t.map.delete(r)},function(){return t.map.delete(r)})},e.prototype.clear=function(){this.map.forEach(function(e){e&&e.cancel(!0)}),this.map.clear()},e}(),bt=function(){function e(t,r,n,o,i,u){var c;if(this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var l=this.app_.options;X(l)&&(this.bucket_=e.extractBucket_(l),this.appId_=null!==(c=l.appId)&&void 0!==c?c:null)}this.authProvider_=r,this.storageRefMaker_=n,this.requestMaker_=o,this.pool_=u,this.service_=i,this.maxOperationRetryTime_=a,this.maxUploadRetryTime_=s,this.requestMap_=new gt}return e.extractBucket_=function(e){var t=e[i]||null;return null==t?null:ce.makeFromBucketSpec(t).bucket},e.prototype.getAuthToken=function(){var e=this.authProvider_.getImmediate({optional:!0});return e?e.getToken().then(function(e){return null!==e?e.accessToken:null},function(){return null}):Promise.resolve(null)},e.prototype.bucket=function(){if(this.deleted_)throw A();return this.bucket_},e.prototype.service=function(){return this.service_},e.prototype.makeStorageReference=function(e){return this.storageRefMaker_(this,e)},e.prototype.makeRequest=function(e,t){if(this.deleted_)return new mt(A());var r=this.requestMaker_(e,this.appId_,t,this.pool_);return this.requestMap_.addRequest(r),r},e.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},e.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},e.prototype.setMaxUploadRetryTime=function(e){this.maxUploadRetryTime_=e},e.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},e.prototype.setMaxOperationRetryTime=function(e){this.maxOperationRetryTime_=e},e}();function yt(e,r,n){var o=1,i=null,a=!1,s=0;function u(){return 2===s}var c=!1;function l(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c||(c=!0,r.apply(null,e))}function p(t){i=setTimeout(function(){i=null,e(h,u())},t)}function h(e){for(var r,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];c||(e?l.call.apply(l,(0,t.__spreadArrays)([null,e],n)):u()||a?l.call.apply(l,(0,t.__spreadArrays)([null,e],n)):(o<64&&(o*=2),1===s?(s=2,r=0):r=1e3*(o+Math.random()),p(r)))}var f=!1;function d(e){f||(f=!0,c||(null!==i?(e||(s=2),clearTimeout(i),p(0)):e||(s=1)))}return p(0),setTimeout(function(){a=!0,d(!0)},n),d}function Rt(e){e(!1)}var wt=function(){function e(e,t,r,n,o,i,a,s,u,c,l){var p=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=e,this.method_=t,this.headers_=r,this.body_=n,this.successCodes_=o.slice(),this.additionalRetryCodes_=i.slice(),this.callback_=a,this.errorCallback_=s,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(e,t){p.resolve_=e,p.reject_=t,p.start_()})}return e.prototype.start_=function(){var e=this;function t(t,r){var n,o=e.resolve_,i=e.reject_,a=r.xhr;if(r.wasSuccessCode)try{var s=e.callback_(a,a.getResponseText());V(s)?o(s):o()}catch(u){i(u)}else null!==a?((n=h()).setServerResponseProp(a.getResponseText()),e.errorCallback_?i(e.errorCallback_(a,n)):i(n)):r.canceled?i(n=e.appDelete_?A():g()):i(n=m())}this.canceled_?t(0,new Et(!1,null,!0)):this.backoffId_=yt(function(t,r){if(r)t(!1,new Et(!1,null,!0));else{var n=e.pool_.createXhrIo();e.pendingXhr_=n,null!==e.progressCallback_&&n.addUploadProgressListener(o),n.send(e.url_,e.method_,e.body_,e.headers_).then(function(r){null!==e.progressCallback_&&r.removeUploadProgressListener(o),e.pendingXhr_=null;var n=(r=r).getErrorCode()===q.NO_ERROR,i=r.getStatus();if(n&&!e.isRetryStatusCode_(i)){var a=-1!==e.successCodes_.indexOf(i);t(!0,new Et(a,r))}else{var s=r.getErrorCode()===q.ABORT;t(!1,new Et(!1,null,s))}})}function o(t){var r=t.loaded,n=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(r,n)}},t,this.timeout_)},e.prototype.getPromise=function(){return this.promise_},e.prototype.cancel=function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&Rt(this.backoffId_),null!==this.pendingXhr_&&this.pendingXhr_.abort()},e.prototype.isRetryStatusCode_=function(e){var t=e>=500&&e<600,r=-1!==[408,429].indexOf(e),n=-1!==this.additionalRetryCodes_.indexOf(e);return t||r||n},e}(),Et=function(){return function(e,t,r){this.wasSuccessCode=e,this.xhr=t,this.canceled=!!r}}();function Tt(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}function Ut(t){var r=void 0!==e.default?e.default.SDK_VERSION:"AppManager";t["X-Firebase-Storage-Version"]="webjs/"+r}function At(e,t){t&&(e["X-Firebase-GMPID"]=t)}function Nt(e,t,r,n){var o=_e(e.urlParams),i=e.url+o,a=Object.assign({},e.headers);return At(a,t),Tt(a,r),Ut(a),new wt(i,e.method,a,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,n)}var Ot=function(){function e(e,t,r,n){if(this.bucket_=null,this.authWrapper_=new bt(e,t,function(e,t){return new vt(e,t)},Nt,this,r),this.app_=e,null!=n)this.bucket_=ce.makeFromBucketSpec(n);else{var o=this.authWrapper_.bucket();null!=o&&(this.bucket_=new ce(o,""))}this.internals_=new kt(this)}return e.prototype.ref=function(e){if(ot("ref",[st(function(e){if("string"!=typeof e)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(e))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var t=new vt(this.authWrapper_,this.bucket_);return null!=e?t.child(e):t},e.prototype.refFromURL=function(e){return ot("refFromURL",[st(function(e){if("string"!=typeof e)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(e))throw"Expected full URL but got a child path, use ref instead.";try{ce.makeFromUrl(e)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new vt(this.authWrapper_,e)},Object.defineProperty(e.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),e.prototype.setMaxUploadRetryTime=function(e){ot("setMaxUploadRetryTime",[pt()],arguments),this.authWrapper_.setMaxUploadRetryTime(e)},e.prototype.setMaxOperationRetryTime=function(e){ot("setMaxOperationRetryTime",[pt()],arguments),this.authWrapper_.setMaxOperationRetryTime(e)},Object.defineProperty(e.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),e}(),kt=function(){function e(e){this.service_=e}return e.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},e}(),Ct="@firebase/storage",St="0.3.33",xt="storage";function Pt(e,t){var r=e.getProvider("app").getImmediate(),n=e.getProvider("auth-internal");return new Ot(r,n,new oe,t)}function It(e){var t={TaskState:H,TaskEvent:j,StringFormat:C,Storage:Ot,Reference:vt};e.INTERNAL.registerComponent(new r.Component(xt,Pt,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion(Ct,St)}It(e.default);
},{"@firebase/app":"dP58","tslib":"vCxL","@firebase/component":"nzQs"}],"IAgR":[function(require,module,exports) {
var s=1e3,e=60*s,r=60*e,a=24*r,n=7*a,c=365.25*a;function t(t){if(!((t=String(t)).length>100)){var u=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(u){var i=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return i*c;case"weeks":case"week":case"w":return i*n;case"days":case"day":case"d":return i*a;case"hours":case"hour":case"hrs":case"hr":case"h":return i*r;case"minutes":case"minute":case"mins":case"min":case"m":return i*e;case"seconds":case"second":case"secs":case"sec":case"s":return i*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}function u(n){var c=Math.abs(n);return c>=a?Math.round(n/a)+"d":c>=r?Math.round(n/r)+"h":c>=e?Math.round(n/e)+"m":c>=s?Math.round(n/s)+"s":n+"ms"}function i(n){var c=Math.abs(n);return c>=a?o(n,c,a,"day"):c>=r?o(n,c,r,"hour"):c>=e?o(n,c,e,"minute"):c>=s?o(n,c,s,"second"):n+" ms"}function o(s,e,r,a){var n=e>=1.5*r;return Math.round(s/r)+" "+a+(n?"s":"")}module.exports=function(s,e){e=e||{};var r=typeof s;if("string"===r&&s.length>0)return t(s);if("number"===r&&isFinite(s))return e.long?i(s):u(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};
},{}],"Kest":[function(require,module,exports) {
function e(e){function n(e){let n=0;for(let t=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t),n|=0;return t.colors[Math.abs(n)%t.colors.length]}function t(e){let o;function i(...e){if(!i.enabled)return;const n=i,s=Number(new Date),r=s-(o||s);n.diff=r,n.prev=o,n.curr=s,o=s,e[0]=t.coerce(e[0]),"string"!=typeof e[0]&&e.unshift("%O");let a=0;e[0]=e[0].replace(/%([a-zA-Z%])/g,(s,r)=>{if("%%"===s)return s;a++;const o=t.formatters[r];if("function"==typeof o){const t=e[a];s=o.call(n,t),e.splice(a,1),a--}return s}),t.formatArgs.call(n,e),(n.log||t.log).apply(n,e)}return i.namespace=e,i.enabled=t.enabled(e),i.useColors=t.useColors(),i.color=n(e),i.destroy=s,i.extend=r,"function"==typeof t.init&&t.init(i),t.instances.push(i),i}function s(){const e=t.instances.indexOf(this);return-1!==e&&(t.instances.splice(e,1),!0)}function r(e,n){const s=t(this.namespace+(void 0===n?":":n)+e);return s.log=this.log,s}function o(e){return e.toString().substring(2,e.toString().length-2).replace(/\.\*\?$/,"*")}return t.debug=t,t.default=t,t.coerce=function(e){if(e instanceof Error)return e.stack||e.message;return e},t.disable=function(){const e=[...t.names.map(o),...t.skips.map(o).map(e=>"-"+e)].join(",");return t.enable(""),e},t.enable=function(e){let n;t.save(e),t.names=[],t.skips=[];const s=("string"==typeof e?e:"").split(/[\s,]+/),r=s.length;for(n=0;n<r;n++)s[n]&&("-"===(e=s[n].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")));for(n=0;n<t.instances.length;n++){const e=t.instances[n];e.enabled=t.enabled(e.namespace)}},t.enabled=function(e){if("*"===e[e.length-1])return!0;let n,s;for(n=0,s=t.skips.length;n<s;n++)if(t.skips[n].test(e))return!1;for(n=0,s=t.names.length;n<s;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=require("ms"),Object.keys(e).forEach(n=>{t[n]=e[n]}),t.instances=[],t.names=[],t.skips=[],t.formatters={},t.selectColor=n,t.enable(t.load()),t}module.exports=e;
},{"ms":"IAgR"}],"jcLW":[function(require,module,exports) {
var process = require("process");
var e=require("process");function o(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))}function C(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+module.exports.humanize(this.diff),!this.useColors)return;const o="color: "+this.color;e.splice(1,0,o,"color: inherit");let C=0,t=0;e[0].replace(/%[a-zA-Z%]/g,e=>{"%%"!==e&&(C++,"%c"===e&&(t=C))}),e.splice(t,0,o)}function t(...e){return"object"==typeof console&&console.log&&console.log(...e)}function r(e){try{e?exports.storage.setItem("debug",e):exports.storage.removeItem("debug")}catch(o){}}function n(){let o;try{o=exports.storage.getItem("debug")}catch(C){}return!o&&void 0!==e&&"env"in e&&(o=void 0),o}function s(){try{return localStorage}catch(e){}}exports.log=t,exports.formatArgs=C,exports.save=r,exports.load=n,exports.useColors=o,exports.storage=s(),exports.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],module.exports=require("./common")(exports);const{formatters:F}=module.exports;F.j=function(e){try{return JSON.stringify(e)}catch(o){return"[UnexpectedJSONParseError]: "+o.message}};
},{"./common":"Kest","process":"pBGv"}],"BJI5":[function(require,module,exports) {
module.exports=function(){if("undefined"==typeof window)return null;var n={RTCPeerConnection:window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,RTCSessionDescription:window.RTCSessionDescription||window.mozRTCSessionDescription||window.webkitRTCSessionDescription,RTCIceCandidate:window.RTCIceCandidate||window.mozRTCIceCandidate||window.webkitRTCIceCandidate};return n.RTCPeerConnection?n:null};
},{}],"yh9p":[function(require,module,exports) {
"use strict";exports.byteLength=u,exports.toByteArray=i,exports.fromByteArray=d;for(var r=[],t=[],e="undefined"!=typeof Uint8Array?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0,a=n.length;o<a;++o)r[o]=n[o],t[n.charCodeAt(o)]=o;function h(r){var t=r.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var e=r.indexOf("=");return-1===e&&(e=t),[e,e===t?0:4-e%4]}function u(r){var t=h(r),e=t[0],n=t[1];return 3*(e+n)/4-n}function c(r,t,e){return 3*(t+e)/4-e}function i(r){var n,o,a=h(r),u=a[0],i=a[1],f=new e(c(r,u,i)),A=0,d=i>0?u-4:u;for(o=0;o<d;o+=4)n=t[r.charCodeAt(o)]<<18|t[r.charCodeAt(o+1)]<<12|t[r.charCodeAt(o+2)]<<6|t[r.charCodeAt(o+3)],f[A++]=n>>16&255,f[A++]=n>>8&255,f[A++]=255&n;return 2===i&&(n=t[r.charCodeAt(o)]<<2|t[r.charCodeAt(o+1)]>>4,f[A++]=255&n),1===i&&(n=t[r.charCodeAt(o)]<<10|t[r.charCodeAt(o+1)]<<4|t[r.charCodeAt(o+2)]>>2,f[A++]=n>>8&255,f[A++]=255&n),f}function f(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function A(r,t,e){for(var n,o=[],a=t;a<e;a+=3)n=(r[a]<<16&16711680)+(r[a+1]<<8&65280)+(255&r[a+2]),o.push(f(n));return o.join("")}function d(t){for(var e,n=t.length,o=n%3,a=[],h=0,u=n-o;h<u;h+=16383)a.push(A(t,h,h+16383>u?u:h+16383));return 1===o?(e=t[n-1],a.push(r[e>>2]+r[e<<4&63]+"==")):2===o&&(e=(t[n-2]<<8)+t[n-1],a.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"=")),a.join("")}t["-".charCodeAt(0)]=62,t["_".charCodeAt(0)]=63;
},{}],"JgNJ":[function(require,module,exports) {
exports.read=function(a,o,t,r,h){var M,p,w=8*h-r-1,f=(1<<w)-1,e=f>>1,i=-7,N=t?h-1:0,n=t?-1:1,s=a[o+N];for(N+=n,M=s&(1<<-i)-1,s>>=-i,i+=w;i>0;M=256*M+a[o+N],N+=n,i-=8);for(p=M&(1<<-i)-1,M>>=-i,i+=r;i>0;p=256*p+a[o+N],N+=n,i-=8);if(0===M)M=1-e;else{if(M===f)return p?NaN:1/0*(s?-1:1);p+=Math.pow(2,r),M-=e}return(s?-1:1)*p*Math.pow(2,M-r)},exports.write=function(a,o,t,r,h,M){var p,w,f,e=8*M-h-1,i=(1<<e)-1,N=i>>1,n=23===h?Math.pow(2,-24)-Math.pow(2,-77):0,s=r?0:M-1,u=r?1:-1,l=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(w=isNaN(o)?1:0,p=i):(p=Math.floor(Math.log(o)/Math.LN2),o*(f=Math.pow(2,-p))<1&&(p--,f*=2),(o+=p+N>=1?n/f:n*Math.pow(2,1-N))*f>=2&&(p++,f/=2),p+N>=i?(w=0,p=i):p+N>=1?(w=(o*f-1)*Math.pow(2,h),p+=N):(w=o*Math.pow(2,N-1)*Math.pow(2,h),p=0));h>=8;a[t+s]=255&w,s+=u,w/=256,h-=8);for(p=p<<h|w,e+=h;e>0;a[t+s]=255&p,s+=u,p/=256,e-=8);a[t+s-u]|=128*l};
},{}],"REa7":[function(require,module,exports) {
var r={}.toString;module.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)};
},{}],"dskh":[function(require,module,exports) {

var global = arguments[3];
var t=arguments[3],r=require("base64-js"),e=require("ieee754"),n=require("isarray");function i(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(r){return!1}}function o(){return f.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function u(t,r){if(o()<r)throw new RangeError("Invalid typed array length");return f.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(r)).__proto__=f.prototype:(null===t&&(t=new f(r)),t.length=r),t}function f(t,r,e){if(!(f.TYPED_ARRAY_SUPPORT||this instanceof f))return new f(t,r,e);if("number"==typeof t){if("string"==typeof r)throw new Error("If encoding is specified then the first argument must be a string");return c(this,t)}return s(this,t,r,e)}function s(t,r,e,n){if("number"==typeof r)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&r instanceof ArrayBuffer?g(t,r,e,n):"string"==typeof r?l(t,r,e):y(t,r)}function h(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function a(t,r,e,n){return h(r),r<=0?u(t,r):void 0!==e?"string"==typeof n?u(t,r).fill(e,n):u(t,r).fill(e):u(t,r)}function c(t,r){if(h(r),t=u(t,r<0?0:0|w(r)),!f.TYPED_ARRAY_SUPPORT)for(var e=0;e<r;++e)t[e]=0;return t}function l(t,r,e){if("string"==typeof e&&""!==e||(e="utf8"),!f.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');var n=0|v(r,e),i=(t=u(t,n)).write(r,e);return i!==n&&(t=t.slice(0,i)),t}function p(t,r){var e=r.length<0?0:0|w(r.length);t=u(t,e);for(var n=0;n<e;n+=1)t[n]=255&r[n];return t}function g(t,r,e,n){if(r.byteLength,e<0||r.byteLength<e)throw new RangeError("'offset' is out of bounds");if(r.byteLength<e+(n||0))throw new RangeError("'length' is out of bounds");return r=void 0===e&&void 0===n?new Uint8Array(r):void 0===n?new Uint8Array(r,e):new Uint8Array(r,e,n),f.TYPED_ARRAY_SUPPORT?(t=r).__proto__=f.prototype:t=p(t,r),t}function y(t,r){if(f.isBuffer(r)){var e=0|w(r.length);return 0===(t=u(t,e)).length?t:(r.copy(t,0,0,e),t)}if(r){if("undefined"!=typeof ArrayBuffer&&r.buffer instanceof ArrayBuffer||"length"in r)return"number"!=typeof r.length||W(r.length)?u(t,0):p(t,r);if("Buffer"===r.type&&n(r.data))return p(t,r.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function w(t){if(t>=o())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o().toString(16)+" bytes");return 0|t}function d(t){return+t!=t&&(t=0),f.alloc(+t)}function v(t,r){if(f.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var e=t.length;if(0===e)return 0;for(var n=!1;;)switch(r){case"ascii":case"latin1":case"binary":return e;case"utf8":case"utf-8":case void 0:return $(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*e;case"hex":return e>>>1;case"base64":return K(t).length;default:if(n)return $(t).length;r=(""+r).toLowerCase(),n=!0}}function E(t,r,e){var n=!1;if((void 0===r||r<0)&&(r=0),r>this.length)return"";if((void 0===e||e>this.length)&&(e=this.length),e<=0)return"";if((e>>>=0)<=(r>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return x(this,r,e);case"utf8":case"utf-8":return Y(this,r,e);case"ascii":return L(this,r,e);case"latin1":case"binary":return D(this,r,e);case"base64":return S(this,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,r,e);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function b(t,r,e){var n=t[r];t[r]=t[e],t[e]=n}function R(t,r,e,n,i){if(0===t.length)return-1;if("string"==typeof e?(n=e,e=0):e>2147483647?e=2147483647:e<-2147483648&&(e=-2147483648),e=+e,isNaN(e)&&(e=i?0:t.length-1),e<0&&(e=t.length+e),e>=t.length){if(i)return-1;e=t.length-1}else if(e<0){if(!i)return-1;e=0}if("string"==typeof r&&(r=f.from(r,n)),f.isBuffer(r))return 0===r.length?-1:_(t,r,e,n,i);if("number"==typeof r)return r&=255,f.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,r,e):Uint8Array.prototype.lastIndexOf.call(t,r,e):_(t,[r],e,n,i);throw new TypeError("val must be string, number or Buffer")}function _(t,r,e,n,i){var o,u=1,f=t.length,s=r.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||r.length<2)return-1;u=2,f/=2,s/=2,e/=2}function h(t,r){return 1===u?t[r]:t.readUInt16BE(r*u)}if(i){var a=-1;for(o=e;o<f;o++)if(h(t,o)===h(r,-1===a?0:o-a)){if(-1===a&&(a=o),o-a+1===s)return a*u}else-1!==a&&(o-=o-a),a=-1}else for(e+s>f&&(e=f-s),o=e;o>=0;o--){for(var c=!0,l=0;l<s;l++)if(h(t,o+l)!==h(r,l)){c=!1;break}if(c)return o}return-1}function A(t,r,e,n){e=Number(e)||0;var i=t.length-e;n?(n=Number(n))>i&&(n=i):n=i;var o=r.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var u=0;u<n;++u){var f=parseInt(r.substr(2*u,2),16);if(isNaN(f))return u;t[e+u]=f}return u}function m(t,r,e,n){return Q($(r,t.length-e),t,e,n)}function P(t,r,e,n){return Q(G(r),t,e,n)}function T(t,r,e,n){return P(t,r,e,n)}function B(t,r,e,n){return Q(K(r),t,e,n)}function U(t,r,e,n){return Q(H(r,t.length-e),t,e,n)}function S(t,e,n){return 0===e&&n===t.length?r.fromByteArray(t):r.fromByteArray(t.slice(e,n))}function Y(t,r,e){e=Math.min(t.length,e);for(var n=[],i=r;i<e;){var o,u,f,s,h=t[i],a=null,c=h>239?4:h>223?3:h>191?2:1;if(i+c<=e)switch(c){case 1:h<128&&(a=h);break;case 2:128==(192&(o=t[i+1]))&&(s=(31&h)<<6|63&o)>127&&(a=s);break;case 3:o=t[i+1],u=t[i+2],128==(192&o)&&128==(192&u)&&(s=(15&h)<<12|(63&o)<<6|63&u)>2047&&(s<55296||s>57343)&&(a=s);break;case 4:o=t[i+1],u=t[i+2],f=t[i+3],128==(192&o)&&128==(192&u)&&128==(192&f)&&(s=(15&h)<<18|(63&o)<<12|(63&u)<<6|63&f)>65535&&s<1114112&&(a=s)}null===a?(a=65533,c=1):a>65535&&(a-=65536,n.push(a>>>10&1023|55296),a=56320|1023&a),n.push(a),i+=c}return O(n)}exports.Buffer=f,exports.SlowBuffer=d,exports.INSPECT_MAX_BYTES=50,f.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:i(),exports.kMaxLength=o(),f.poolSize=8192,f._augment=function(t){return t.__proto__=f.prototype,t},f.from=function(t,r,e){return s(null,t,r,e)},f.TYPED_ARRAY_SUPPORT&&(f.prototype.__proto__=Uint8Array.prototype,f.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&f[Symbol.species]===f&&Object.defineProperty(f,Symbol.species,{value:null,configurable:!0})),f.alloc=function(t,r,e){return a(null,t,r,e)},f.allocUnsafe=function(t){return c(null,t)},f.allocUnsafeSlow=function(t){return c(null,t)},f.isBuffer=function(t){return!(null==t||!t._isBuffer)},f.compare=function(t,r){if(!f.isBuffer(t)||!f.isBuffer(r))throw new TypeError("Arguments must be Buffers");if(t===r)return 0;for(var e=t.length,n=r.length,i=0,o=Math.min(e,n);i<o;++i)if(t[i]!==r[i]){e=t[i],n=r[i];break}return e<n?-1:n<e?1:0},f.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},f.concat=function(t,r){if(!n(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return f.alloc(0);var e;if(void 0===r)for(r=0,e=0;e<t.length;++e)r+=t[e].length;var i=f.allocUnsafe(r),o=0;for(e=0;e<t.length;++e){var u=t[e];if(!f.isBuffer(u))throw new TypeError('"list" argument must be an Array of Buffers');u.copy(i,o),o+=u.length}return i},f.byteLength=v,f.prototype._isBuffer=!0,f.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var r=0;r<t;r+=2)b(this,r,r+1);return this},f.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var r=0;r<t;r+=4)b(this,r,r+3),b(this,r+1,r+2);return this},f.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var r=0;r<t;r+=8)b(this,r,r+7),b(this,r+1,r+6),b(this,r+2,r+5),b(this,r+3,r+4);return this},f.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?Y(this,0,t):E.apply(this,arguments)},f.prototype.equals=function(t){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===f.compare(this,t)},f.prototype.inspect=function(){var t="",r=exports.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},f.prototype.compare=function(t,r,e,n,i){if(!f.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===r&&(r=0),void 0===e&&(e=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),r<0||e>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&r>=e)return 0;if(n>=i)return-1;if(r>=e)return 1;if(this===t)return 0;for(var o=(i>>>=0)-(n>>>=0),u=(e>>>=0)-(r>>>=0),s=Math.min(o,u),h=this.slice(n,i),a=t.slice(r,e),c=0;c<s;++c)if(h[c]!==a[c]){o=h[c],u=a[c];break}return o<u?-1:u<o?1:0},f.prototype.includes=function(t,r,e){return-1!==this.indexOf(t,r,e)},f.prototype.indexOf=function(t,r,e){return R(this,t,r,e,!0)},f.prototype.lastIndexOf=function(t,r,e){return R(this,t,r,e,!1)},f.prototype.write=function(t,r,e,n){if(void 0===r)n="utf8",e=this.length,r=0;else if(void 0===e&&"string"==typeof r)n=r,e=this.length,r=0;else{if(!isFinite(r))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");r|=0,isFinite(e)?(e|=0,void 0===n&&(n="utf8")):(n=e,e=void 0)}var i=this.length-r;if((void 0===e||e>i)&&(e=i),t.length>0&&(e<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return A(this,t,r,e);case"utf8":case"utf-8":return m(this,t,r,e);case"ascii":return P(this,t,r,e);case"latin1":case"binary":return T(this,t,r,e);case"base64":return B(this,t,r,e);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,r,e);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},f.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var I=4096;function O(t){var r=t.length;if(r<=I)return String.fromCharCode.apply(String,t);for(var e="",n=0;n<r;)e+=String.fromCharCode.apply(String,t.slice(n,n+=I));return e}function L(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(127&t[i]);return n}function D(t,r,e){var n="";e=Math.min(t.length,e);for(var i=r;i<e;++i)n+=String.fromCharCode(t[i]);return n}function x(t,r,e){var n=t.length;(!r||r<0)&&(r=0),(!e||e<0||e>n)&&(e=n);for(var i="",o=r;o<e;++o)i+=Z(t[o]);return i}function C(t,r,e){for(var n=t.slice(r,e),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function M(t,r,e){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+r>e)throw new RangeError("Trying to access beyond buffer length")}function k(t,r,e,n,i,o){if(!f.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(r>i||r<o)throw new RangeError('"value" argument is out of bounds');if(e+n>t.length)throw new RangeError("Index out of range")}function N(t,r,e,n){r<0&&(r=65535+r+1);for(var i=0,o=Math.min(t.length-e,2);i<o;++i)t[e+i]=(r&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function z(t,r,e,n){r<0&&(r=4294967295+r+1);for(var i=0,o=Math.min(t.length-e,4);i<o;++i)t[e+i]=r>>>8*(n?i:3-i)&255}function F(t,r,e,n,i,o){if(e+n>t.length)throw new RangeError("Index out of range");if(e<0)throw new RangeError("Index out of range")}function j(t,r,n,i,o){return o||F(t,r,n,4,3.4028234663852886e38,-3.4028234663852886e38),e.write(t,r,n,i,23,4),n+4}function q(t,r,n,i,o){return o||F(t,r,n,8,1.7976931348623157e308,-1.7976931348623157e308),e.write(t,r,n,i,52,8),n+8}f.prototype.slice=function(t,r){var e,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(r=void 0===r?n:~~r)<0?(r+=n)<0&&(r=0):r>n&&(r=n),r<t&&(r=t),f.TYPED_ARRAY_SUPPORT)(e=this.subarray(t,r)).__proto__=f.prototype;else{var i=r-t;e=new f(i,void 0);for(var o=0;o<i;++o)e[o]=this[o+t]}return e},f.prototype.readUIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n},f.prototype.readUIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t+--r],i=1;r>0&&(i*=256);)n+=this[t+--r]*i;return n},f.prototype.readUInt8=function(t,r){return r||M(t,1,this.length),this[t]},f.prototype.readUInt16LE=function(t,r){return r||M(t,2,this.length),this[t]|this[t+1]<<8},f.prototype.readUInt16BE=function(t,r){return r||M(t,2,this.length),this[t]<<8|this[t+1]},f.prototype.readUInt32LE=function(t,r){return r||M(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},f.prototype.readUInt32BE=function(t,r){return r||M(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},f.prototype.readIntLE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=this[t],i=1,o=0;++o<r&&(i*=256);)n+=this[t+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*r)),n},f.prototype.readIntBE=function(t,r,e){t|=0,r|=0,e||M(t,r,this.length);for(var n=r,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*r)),o},f.prototype.readInt8=function(t,r){return r||M(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},f.prototype.readInt16LE=function(t,r){r||M(t,2,this.length);var e=this[t]|this[t+1]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt16BE=function(t,r){r||M(t,2,this.length);var e=this[t+1]|this[t]<<8;return 32768&e?4294901760|e:e},f.prototype.readInt32LE=function(t,r){return r||M(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},f.prototype.readInt32BE=function(t,r){return r||M(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},f.prototype.readFloatLE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!0,23,4)},f.prototype.readFloatBE=function(t,r){return r||M(t,4,this.length),e.read(this,t,!1,23,4)},f.prototype.readDoubleLE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!0,52,8)},f.prototype.readDoubleBE=function(t,r){return r||M(t,8,this.length),e.read(this,t,!1,52,8)},f.prototype.writeUIntLE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=1,o=0;for(this[r]=255&t;++o<e&&(i*=256);)this[r+o]=t/i&255;return r+e},f.prototype.writeUIntBE=function(t,r,e,n){(t=+t,r|=0,e|=0,n)||k(this,t,r,e,Math.pow(2,8*e)-1,0);var i=e-1,o=1;for(this[r+i]=255&t;--i>=0&&(o*=256);)this[r+i]=t/o&255;return r+e},f.prototype.writeUInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,255,0),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[r]=255&t,r+1},f.prototype.writeUInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeUInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,65535,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeUInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=255&t):z(this,t,r,!0),r+4},f.prototype.writeUInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,4294967295,0),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeIntLE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=0,u=1,f=0;for(this[r]=255&t;++o<e&&(u*=256);)t<0&&0===f&&0!==this[r+o-1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeIntBE=function(t,r,e,n){if(t=+t,r|=0,!n){var i=Math.pow(2,8*e-1);k(this,t,r,e,i-1,-i)}var o=e-1,u=1,f=0;for(this[r+o]=255&t;--o>=0&&(u*=256);)t<0&&0===f&&0!==this[r+o+1]&&(f=1),this[r+o]=(t/u>>0)-f&255;return r+e},f.prototype.writeInt8=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,1,127,-128),f.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[r]=255&t,r+1},f.prototype.writeInt16LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8):N(this,t,r,!0),r+2},f.prototype.writeInt16BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,2,32767,-32768),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>8,this[r+1]=255&t):N(this,t,r,!1),r+2},f.prototype.writeInt32LE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),f.TYPED_ARRAY_SUPPORT?(this[r]=255&t,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24):z(this,t,r,!0),r+4},f.prototype.writeInt32BE=function(t,r,e){return t=+t,r|=0,e||k(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),f.TYPED_ARRAY_SUPPORT?(this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=255&t):z(this,t,r,!1),r+4},f.prototype.writeFloatLE=function(t,r,e){return j(this,t,r,!0,e)},f.prototype.writeFloatBE=function(t,r,e){return j(this,t,r,!1,e)},f.prototype.writeDoubleLE=function(t,r,e){return q(this,t,r,!0,e)},f.prototype.writeDoubleBE=function(t,r,e){return q(this,t,r,!1,e)},f.prototype.copy=function(t,r,e,n){if(e||(e=0),n||0===n||(n=this.length),r>=t.length&&(r=t.length),r||(r=0),n>0&&n<e&&(n=e),n===e)return 0;if(0===t.length||0===this.length)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(e<0||e>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-r<n-e&&(n=t.length-r+e);var i,o=n-e;if(this===t&&e<r&&r<n)for(i=o-1;i>=0;--i)t[i+r]=this[i+e];else if(o<1e3||!f.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+r]=this[i+e];else Uint8Array.prototype.set.call(t,this.subarray(e,e+o),r);return o},f.prototype.fill=function(t,r,e,n){if("string"==typeof t){if("string"==typeof r?(n=r,r=0,e=this.length):"string"==typeof e&&(n=e,e=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!f.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(r<0||this.length<r||this.length<e)throw new RangeError("Out of range index");if(e<=r)return this;var o;if(r>>>=0,e=void 0===e?this.length:e>>>0,t||(t=0),"number"==typeof t)for(o=r;o<e;++o)this[o]=t;else{var u=f.isBuffer(t)?t:$(new f(t,n).toString()),s=u.length;for(o=0;o<e-r;++o)this[o+r]=u[o%s]}return this};var V=/[^+\/0-9A-Za-z-_]/g;function X(t){if((t=J(t).replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}function J(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function Z(t){return t<16?"0"+t.toString(16):t.toString(16)}function $(t,r){var e;r=r||1/0;for(var n=t.length,i=null,o=[],u=0;u<n;++u){if((e=t.charCodeAt(u))>55295&&e<57344){if(!i){if(e>56319){(r-=3)>-1&&o.push(239,191,189);continue}if(u+1===n){(r-=3)>-1&&o.push(239,191,189);continue}i=e;continue}if(e<56320){(r-=3)>-1&&o.push(239,191,189),i=e;continue}e=65536+(i-55296<<10|e-56320)}else i&&(r-=3)>-1&&o.push(239,191,189);if(i=null,e<128){if((r-=1)<0)break;o.push(e)}else if(e<2048){if((r-=2)<0)break;o.push(e>>6|192,63&e|128)}else if(e<65536){if((r-=3)<0)break;o.push(e>>12|224,e>>6&63|128,63&e|128)}else{if(!(e<1114112))throw new Error("Invalid code point");if((r-=4)<0)break;o.push(e>>18|240,e>>12&63|128,e>>6&63|128,63&e|128)}}return o}function G(t){for(var r=[],e=0;e<t.length;++e)r.push(255&t.charCodeAt(e));return r}function H(t,r){for(var e,n,i,o=[],u=0;u<t.length&&!((r-=2)<0);++u)n=(e=t.charCodeAt(u))>>8,i=e%256,o.push(i),o.push(n);return o}function K(t){return r.toByteArray(X(t))}function Q(t,r,e,n){for(var i=0;i<n&&!(i+e>=r.length||i>=t.length);++i)r[i+e]=t[i];return i}function W(t){return t!=t}
},{"base64-js":"yh9p","ieee754":"JgNJ","isarray":"REa7","buffer":"dskh"}],"Wugr":[function(require,module,exports) {

var r=require("buffer"),e=r.Buffer;function n(r,e){for(var n in r)e[n]=r[n]}function o(r,n,o){return e(r,n,o)}e.from&&e.alloc&&e.allocUnsafe&&e.allocUnsafeSlow?module.exports=r:(n(r,exports),exports.Buffer=o),n(e,o),o.from=function(r,n,o){if("number"==typeof r)throw new TypeError("Argument must not be a number");return e(r,n,o)},o.alloc=function(r,n,o){if("number"!=typeof r)throw new TypeError("Argument must be a number");var f=e(r);return void 0!==n?"string"==typeof o?f.fill(n,o):f.fill(n):f.fill(0),f},o.allocUnsafe=function(r){if("number"!=typeof r)throw new TypeError("Argument must be a number");return e(r)},o.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return r.SlowBuffer(e)};
},{"buffer":"dskh"}],"XJNj":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e=arguments[3],r=require("process"),o=65536,n=4294967295;function t(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}var s=require("safe-buffer").Buffer,u=e.crypto||e.msCrypto;function a(e,t){if(e>n)throw new RangeError("requested too many random bytes");var a=s.allocUnsafe(e);if(e>0)if(e>o)for(var f=0;f<e;f+=o)u.getRandomValues(a.slice(f,f+o));else u.getRandomValues(a);return"function"==typeof t?r.nextTick(function(){t(null,a)}):a}u&&u.getRandomValues?module.exports=a:module.exports=t;
},{"safe-buffer":"Wugr","process":"pBGv"}],"XCYG":[function(require,module,exports) {
module.exports=require("events").EventEmitter;
},{"events":"FRpO"}],"R4gw":[function(require,module,exports) {

"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function e(e){for(var a=1;a<arguments.length;a++){var i=null!=arguments[a]?arguments[a]:{};a%2?t(Object(i),!0).forEach(function(t){n(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function n(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function r(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}var h=require("buffer"),l=h.Buffer,s=require("util"),u=s.inspect,o=u&&u.custom||"inspect";function c(t,e,n){l.prototype.copy.call(t,e,n)}module.exports=function(){function t(){a(this,t),this.head=null,this.tail=null,this.length=0}return r(t,[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,n=""+e.data;e=e.next;)n+=t+e.data;return n}},{key:"concat",value:function(t){if(0===this.length)return l.alloc(0);for(var e=l.allocUnsafe(t>>>0),n=this.head,a=0;n;)c(n.data,e,a),a+=n.data.length,n=n.next;return e}},{key:"consume",value:function(t,e){var n;return t<this.head.data.length?(n=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):n=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),n}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,n=1,a=e.data;for(t-=a.length;e=e.next;){var i=e.data,r=t>i.length?i.length:t;if(r===i.length?a+=i:a+=i.slice(0,t),0===(t-=r)){r===i.length?(++n,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=i.slice(r));break}++n}return this.length-=n,a}},{key:"_getBuffer",value:function(t){var e=l.allocUnsafe(t),n=this.head,a=1;for(n.data.copy(e),t-=n.data.length;n=n.next;){var i=n.data,r=t>i.length?i.length:t;if(i.copy(e,e.length-t,0,r),0===(t-=r)){r===i.length?(++a,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=i.slice(r));break}++a}return this.length-=a,e}},{key:o,value:function(t,n){return u(this,e({},n,{depth:0,customInspect:!1}))}}]),t}();
},{"buffer":"dskh","util":"AQGI"}],"a1pV":[function(require,module,exports) {
var process = require("process");
var t=require("process");function e(e,r){var d=this,l=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return l||o?(r?r(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,t.nextTick(s,this,e)):t.nextTick(s,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(e){!r&&e?d._writableState?d._writableState.errorEmitted?t.nextTick(i,d):(d._writableState.errorEmitted=!0,t.nextTick(a,d,e)):t.nextTick(a,d,e):r?(t.nextTick(i,d),r(e)):t.nextTick(i,d)}),this)}function a(t,e){s(t,e),i(t)}function i(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function r(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function s(t,e){t.emit("error",e)}function d(t,e){var a=t._readableState,i=t._writableState;a&&a.autoDestroy||i&&i.autoDestroy?t.destroy(e):t.emit("error",e)}module.exports={destroy:e,undestroy:r,errorOrDestroy:d};
},{"process":"pBGv"}],"pTiH":[function(require,module,exports) {
"use strict";function t(t,n){t.prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n}var n={};function e(e,r,o){o||(o=Error);var c=function(n){function e(t,e,o){return n.call(this,function(t,n,e){return"string"==typeof r?r:r(t,n,e)}(t,e,o))||this}return t(e,n),e}(o);c.prototype.name=o.name,c.prototype.code=e,n[e]=c}function r(t,n){if(Array.isArray(t)){var e=t.length;return t=t.map(function(t){return String(t)}),e>2?"one of ".concat(n," ").concat(t.slice(0,e-1).join(", "),", or ")+t[e-1]:2===e?"one of ".concat(n," ").concat(t[0]," or ").concat(t[1]):"of ".concat(n," ").concat(t[0])}return"of ".concat(n," ").concat(String(t))}function o(t,n,e){return t.substr(!e||e<0?0:+e,n.length)===n}function c(t,n,e){return(void 0===e||e>t.length)&&(e=t.length),t.substring(e-n.length,e)===n}function a(t,n,e){return"number"!=typeof e&&(e=0),!(e+n.length>t.length)&&-1!==t.indexOf(n,e)}e("ERR_INVALID_OPT_VALUE",function(t,n){return'The value "'+n+'" is invalid for option "'+t+'"'},TypeError),e("ERR_INVALID_ARG_TYPE",function(t,n,e){var E,u;if("string"==typeof n&&o(n,"not ")?(E="must not be",n=n.replace(/^not /,"")):E="must be",c(t," argument"))u="The ".concat(t," ").concat(E," ").concat(r(n,"type"));else{var i=a(t,".")?"property":"argument";u='The "'.concat(t,'" ').concat(i," ").concat(E," ").concat(r(n,"type"))}return u+=". Received type ".concat(typeof e)},TypeError),e("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),e("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),e("ERR_STREAM_PREMATURE_CLOSE","Premature close"),e("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),e("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),e("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),e("ERR_STREAM_WRITE_AFTER_END","write after end"),e("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),e("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),e("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),module.exports.codes=n;
},{}],"OWl0":[function(require,module,exports) {
"use strict";var r=require("../../../errors").codes.ERR_INVALID_OPT_VALUE;function e(r,e,t){return null!=r.highWaterMark?r.highWaterMark:e?r[t]:null}function t(t,i,o,a){var n=e(i,a,o);if(null!=n){if(!isFinite(n)||Math.floor(n)!==n||n<0)throw new r(a?o:"highWaterMark",n);return Math.floor(n)}return t.objectMode?16:16384}module.exports={getHighWaterMark:t};
},{"../../../errors":"pTiH"}],"Bm0n":[function(require,module,exports) {
"function"==typeof Object.create?module.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:module.exports=function(t,e){if(e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t}};
},{}],"yM1o":[function(require,module,exports) {
var global = arguments[3];
var r=arguments[3];function t(r,t){if(e("noDeprecation"))return r;var n=!1;return function(){if(!n){if(e("throwDeprecation"))throw new Error(t);e("traceDeprecation")?console.trace(t):console.warn(t),n=!0}return r.apply(this,arguments)}}function e(t){try{if(!r.localStorage)return!1}catch(n){return!1}var e=r.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}module.exports=t;
},{}],"ELqw":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e,t=arguments[3],n=require("process");function r(e,t,n){this.chunk=e,this.encoding=t,this.callback=n,this.next=null}function i(e){var t=this;this.next=null,this.entry=null,this.finish=function(){G(t,e)}}module.exports=x,x.WritableState=m;var o={deprecate:require("util-deprecate")},s=require("./internal/streams/stream"),u=require("buffer").Buffer,f=t.Uint8Array||function(){};function a(e){return u.from(e)}function c(e){return u.isBuffer(e)||e instanceof f}var l,d=require("./internal/streams/destroy"),h=require("./internal/streams/state"),b=h.getHighWaterMark,p=require("../errors").codes,y=p.ERR_INVALID_ARG_TYPE,w=p.ERR_METHOD_NOT_IMPLEMENTED,g=p.ERR_MULTIPLE_CALLBACK,_=p.ERR_STREAM_CANNOT_PIPE,R=p.ERR_STREAM_DESTROYED,k=p.ERR_STREAM_NULL_VALUES,E=p.ERR_STREAM_WRITE_AFTER_END,S=p.ERR_UNKNOWN_ENCODING,q=d.errorOrDestroy;function v(){}function m(t,n,r){e=e||require("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof e),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=b(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var o=!1===t.decodeStrings;this.decodeStrings=!o,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){O(n,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new i(this)}function x(t){var n=this instanceof(e=e||require("./_stream_duplex"));if(!n&&!l.call(x,this))return new x(t);this._writableState=new m(t,this,n),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),s.call(this)}function M(e,t){var r=new E;q(e,r),n.nextTick(t,r)}function B(e,t,r,i){var o;return null===r?o=new k:"string"==typeof r||t.objectMode||(o=new y("chunk",["string","Buffer"],r)),!o||(q(e,o),n.nextTick(i,o),!1)}function T(e,t,n){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=u.from(t,n)),t}function D(e,t,n,r,i,o){if(!n){var s=T(t,r,i);r!==s&&(n=!0,i="buffer",r=s)}var u=t.objectMode?1:r.length;t.length+=u;var f=t.length<t.highWaterMark;if(f||(t.needDrain=!0),t.writing||t.corked){var a=t.lastBufferedRequest;t.lastBufferedRequest={chunk:r,encoding:i,isBuf:n,callback:o,next:null},a?a.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else P(e,t,!1,u,r,i,o);return f}function P(e,t,n,r,i,o,s){t.writelen=r,t.writecb=s,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new R("write")):n?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function j(e,t,r,i,o){--t.pendingcb,r?(n.nextTick(o,i),n.nextTick(U,e,t),e._writableState.errorEmitted=!0,q(e,i)):(o(i),e._writableState.errorEmitted=!0,q(e,i),U(e,t))}function C(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function O(e,t){var r=e._writableState,i=r.sync,o=r.writecb;if("function"!=typeof o)throw new g;if(C(r),t)j(e,r,i,t,o);else{var s=I(r)||e.destroyed;s||r.corked||r.bufferProcessing||!r.bufferedRequest||N(e,r),i?n.nextTick(A,e,r,s,o):A(e,r,s,o)}}function A(e,t,n,r){n||L(e,t),t.pendingcb--,r(),U(e,t)}function L(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function N(e,t){t.bufferProcessing=!0;var n=t.bufferedRequest;if(e._writev&&n&&n.next){var r=t.bufferedRequestCount,o=new Array(r),s=t.corkedRequestsFree;s.entry=n;for(var u=0,f=!0;n;)o[u]=n,n.isBuf||(f=!1),n=n.next,u+=1;o.allBuffers=f,P(e,t,!0,t.length,o,"",s.finish),t.pendingcb++,t.lastBufferedRequest=null,s.next?(t.corkedRequestsFree=s.next,s.next=null):t.corkedRequestsFree=new i(t),t.bufferedRequestCount=0}else{for(;n;){var a=n.chunk,c=n.encoding,l=n.callback;if(P(e,t,!1,t.objectMode?1:a.length,a,c,l),n=n.next,t.bufferedRequestCount--,t.writing)break}null===n&&(t.lastBufferedRequest=null)}t.bufferedRequest=n,t.bufferProcessing=!1}function I(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function W(e,t){e._final(function(n){t.pendingcb--,n&&q(e,n),t.prefinished=!0,e.emit("prefinish"),U(e,t)})}function F(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,n.nextTick(W,e,t)))}function U(e,t){var n=I(t);if(n&&(F(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var r=e._readableState;(!r||r.autoDestroy&&r.endEmitted)&&e.destroy()}return n}function H(e,t,r){t.ending=!0,U(e,t),r&&(t.finished?n.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function G(e,t,n){var r=e.entry;for(e.entry=null;r;){var i=r.callback;t.pendingcb--,i(n),r=r.next}t.corkedRequestsFree.next=e}require("inherits")(x,s),m.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(m.prototype,"buffer",{get:o.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(x,Symbol.hasInstance,{value:function(e){return!!l.call(this,e)||this===x&&(e&&e._writableState instanceof m)}})):l=function(e){return e instanceof this},x.prototype.pipe=function(){q(this,new _)},x.prototype.write=function(e,t,n){var r=this._writableState,i=!1,o=!r.objectMode&&c(e);return o&&!u.isBuffer(e)&&(e=a(e)),"function"==typeof t&&(n=t,t=null),o?t="buffer":t||(t=r.defaultEncoding),"function"!=typeof n&&(n=v),r.ending?M(this,n):(o||B(this,r,e,n))&&(r.pendingcb++,i=D(this,r,o,e,t,n)),i},x.prototype.cork=function(){this._writableState.corked++},x.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||N(this,e))},x.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new S(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(x.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(x.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),x.prototype._write=function(e,t,n){n(new w("_write()"))},x.prototype._writev=null,x.prototype.end=function(e,t,n){var r=this._writableState;return"function"==typeof e?(n=e,e=null,t=null):"function"==typeof t&&(n=t,t=null),null!=e&&this.write(e,t),r.corked&&(r.corked=1,this.uncork()),r.ending||H(this,r,n),this},Object.defineProperty(x.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(x.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),x.prototype.destroy=d.destroy,x.prototype._undestroy=d.undestroy,x.prototype._destroy=function(e,t){t(e)};
},{"util-deprecate":"yM1o","./internal/streams/stream":"XCYG","buffer":"dskh","./internal/streams/destroy":"a1pV","./internal/streams/state":"OWl0","../errors":"pTiH","inherits":"Bm0n","./_stream_duplex":"YgPj","process":"pBGv"}],"YgPj":[function(require,module,exports) {
var process = require("process");
var e=require("process"),t=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};module.exports=l;var r=require("./_stream_readable"),a=require("./_stream_writable");require("inherits")(l,r);for(var i=t(a.prototype),n=0;n<i.length;n++){var o=i[n];l.prototype[o]||(l.prototype[o]=a.prototype[o])}function l(e){if(!(this instanceof l))return new l(e);r.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",s)))}function s(){this._writableState.ended||e.nextTick(b,this)}function b(e){e.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed&&this._writableState.destroyed)},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}});
},{"./_stream_readable":"hUVU","./_stream_writable":"ELqw","inherits":"Bm0n","process":"pBGv"}],"z0rv":[function(require,module,exports) {

"use strict";var t=require("safe-buffer").Buffer,e=t.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function i(i){var a=s(i);if("string"!=typeof a&&(t.isEncoding===e||!e(i)))throw new Error("Unknown encoding: "+i);return a||i}function a(e){var s;switch(this.encoding=i(e),this.encoding){case"utf16le":this.text=c,this.end=f,s=4;break;case"utf8":this.fillLast=l,s=4;break;case"base64":this.text=d,this.end=g,s=3;break;default:return this.write=N,void(this.end=v)}this.lastNeed=0,this.lastTotal=0,this.lastChar=t.allocUnsafe(s)}function r(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function n(t,e,s){var i=e.length-1;if(i<s)return 0;var a=r(e[i]);return a>=0?(a>0&&(t.lastNeed=a-1),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(t.lastNeed=a-2),a):--i<s||-2===a?0:(a=r(e[i]))>=0?(a>0&&(2===a?a=0:t.lastNeed=a-3),a):0}function h(t,e,s){if(128!=(192&e[0]))return t.lastNeed=0,"ÔøΩ";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"ÔøΩ";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,"ÔøΩ"}}function l(t){var e=this.lastTotal-this.lastNeed,s=h(this,t,e);return void 0!==s?s:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function u(t,e){var s=n(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=s;var i=t.length-(s-this.lastNeed);return t.copy(this.lastChar,0,i),t.toString("utf8",e,i)}function o(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"ÔøΩ":e}function c(t,e){if((t.length-e)%2==0){var s=t.toString("utf16le",e);if(s){var i=s.charCodeAt(s.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],s.slice(0,-1)}return s}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function f(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var s=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,s)}return e}function d(t,e){var s=(t.length-e)%3;return 0===s?t.toString("base64",e):(this.lastNeed=3-s,this.lastTotal=3,1===s?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-s))}function g(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function N(t){return t.toString(this.encoding)}function v(t){return t&&t.length?this.write(t):""}exports.StringDecoder=a,a.prototype.write=function(t){if(0===t.length)return"";var e,s;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";s=this.lastNeed,this.lastNeed=0}else s=0;return s<t.length?e?e+this.text(t,s):this.text(t,s):e||""},a.prototype.end=o,a.prototype.text=u,a.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};
},{"safe-buffer":"Wugr"}],"R4zQ":[function(require,module,exports) {
"use strict";var e=require("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function r(e){var r=!1;return function(){if(!r){r=!0;for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e.apply(this,n)}}}function t(){}function n(e){return e.setHeader&&"function"==typeof e.abort}function o(i,a,l){if("function"==typeof a)return o(i,null,a);a||(a={}),l=r(l||t);var s=a.readable||!1!==a.readable&&i.readable,c=a.writable||!1!==a.writable&&i.writable,u=function(){i.writable||d()},f=i._writableState&&i._writableState.finished,d=function(){c=!1,f=!0,s||l.call(i)},b=i._readableState&&i._readableState.endEmitted,v=function(){s=!1,b=!0,c||l.call(i)},m=function(e){l.call(i,e)},w=function(){var r;return s&&!b?(i._readableState&&i._readableState.ended||(r=new e),l.call(i,r)):c&&!f?(i._writableState&&i._writableState.ended||(r=new e),l.call(i,r)):void 0},_=function(){i.req.on("finish",d)};return n(i)?(i.on("complete",d),i.on("abort",w),i.req?_():i.on("request",_)):c&&!i._writableState&&(i.on("end",u),i.on("close",u)),i.on("end",v),i.on("finish",d),!1!==a.error&&i.on("error",m),i.on("close",w),function(){i.removeListener("complete",d),i.removeListener("abort",w),i.removeListener("request",_),i.req&&i.req.removeListener("finish",d),i.removeListener("end",u),i.removeListener("close",u),i.removeListener("finish",d),i.removeListener("end",v),i.removeListener("error",m),i.removeListener("close",w)}}module.exports=o;
},{"../../../errors":"pTiH"}],"zLIC":[function(require,module,exports) {
var process = require("process");
var e,n=require("process");function r(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}var t=require("./end-of-stream"),l=Symbol("lastResolve"),u=Symbol("lastReject"),i=Symbol("error"),o=Symbol("ended"),a=Symbol("lastPromise"),s=Symbol("handlePromise"),c=Symbol("stream");function f(e,n){return{value:e,done:n}}function v(e){var n=e[l];if(null!==n){var r=e[c].read();null!==r&&(e[a]=null,e[l]=null,e[u]=null,n(f(r,!1)))}}function d(e){n.nextTick(v,e)}function b(e,n){return function(r,t){e.then(function(){n[o]?r(f(void 0,!0)):n[s](r,t)},t)}}var m=Object.getPrototypeOf(function(){}),h=Object.setPrototypeOf((r(e={get stream(){return this[c]},next:function(){var e=this,r=this[i];if(null!==r)return Promise.reject(r);if(this[o])return Promise.resolve(f(void 0,!0));if(this[c].destroyed)return new Promise(function(r,t){n.nextTick(function(){e[i]?t(e[i]):r(f(void 0,!0))})});var t,l=this[a];if(l)t=new Promise(b(l,this));else{var u=this[c].read();if(null!==u)return Promise.resolve(f(u,!1));t=new Promise(this[s])}return this[a]=t,t}},Symbol.asyncIterator,function(){return this}),r(e,"return",function(){var e=this;return new Promise(function(n,r){e[c].destroy(null,function(e){e?r(e):n(f(void 0,!0))})})}),e),m),y=function(e){var n,v=Object.create(h,(r(n={},c,{value:e,writable:!0}),r(n,l,{value:null,writable:!0}),r(n,u,{value:null,writable:!0}),r(n,i,{value:null,writable:!0}),r(n,o,{value:e._readableState.endEmitted,writable:!0}),r(n,s,{value:function(e,n){var r=v[c].read();r?(v[a]=null,v[l]=null,v[u]=null,e(f(r,!1))):(v[l]=e,v[u]=n)},writable:!0}),n));return v[a]=null,t(e,function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var n=v[u];return null!==n&&(v[a]=null,v[l]=null,v[u]=null,n(e)),void(v[i]=e)}var r=v[l];null!==r&&(v[a]=null,v[l]=null,v[u]=null,r(f(void 0,!0))),v[o]=!0}),e.on("readable",d.bind(null,v)),v};module.exports=y;
},{"./end-of-stream":"R4zQ","process":"pBGv"}],"JbJ4":[function(require,module,exports) {
module.exports=function(){throw new Error("Readable.from is not available in the browser")};
},{}],"hUVU":[function(require,module,exports) {

var global = arguments[3];
var process = require("process");
var e,t=arguments[3],n=require("process");module.exports=j,j.ReadableState=L;var r=require("events").EventEmitter,i=function(e,t){return e.listeners(t).length},a=require("./internal/streams/stream"),d=require("buffer").Buffer,o=t.Uint8Array||function(){};function s(e){return d.from(e)}function l(e){return d.isBuffer(e)||e instanceof o}var u,h=require("util");u=h&&h.debuglog?h.debuglog("stream"):function(){};var p,f,c,b=require("./internal/streams/buffer_list"),g=require("./internal/streams/destroy"),m=require("./internal/streams/state"),y=m.getHighWaterMark,_=require("../errors").codes,v=_.ERR_INVALID_ARG_TYPE,w=_.ERR_STREAM_PUSH_AFTER_EOF,S=_.ERR_METHOD_NOT_IMPLEMENTED,R=_.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;require("inherits")(j,a);var M=g.errorOrDestroy,E=["error","close","destroy","pause","resume"];function k(e,t,n){if("function"==typeof e.prependListener)return e.prependListener(t,n);e._events&&e._events[t]?Array.isArray(e._events[t])?e._events[t].unshift(n):e._events[t]=[n,e._events[t]]:e.on(t,n)}function L(t,n,r){e=e||require("./_stream_duplex"),t=t||{},"boolean"!=typeof r&&(r=n instanceof e),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=y(this,t,"readableHighWaterMark",r),this.buffer=new b,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=require("string_decoder/").StringDecoder),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function j(t){if(e=e||require("./_stream_duplex"),!(this instanceof j))return new j(t);var n=this instanceof e;this._readableState=new L(t,this,n),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function D(e,t,n,r,i){u("readableAddChunk",t);var a,o=e._readableState;if(null===t)o.reading=!1,A(e,o);else if(i||(a=T(o,t)),a)M(e,a);else if(o.objectMode||t&&t.length>0)if("string"==typeof t||o.objectMode||Object.getPrototypeOf(t)===d.prototype||(t=s(t)),r)o.endEmitted?M(e,new R):C(e,o,t,!0);else if(o.ended)M(e,new w);else{if(o.destroyed)return!1;o.reading=!1,o.decoder&&!n?(t=o.decoder.write(t),o.objectMode||0!==t.length?C(e,o,t,!1):U(e,o)):C(e,o,t,!1)}else r||(o.reading=!1,U(e,o));return!o.ended&&(o.length<o.highWaterMark||0===o.length)}function C(e,t,n,r){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",n)):(t.length+=t.objectMode?1:n.length,r?t.buffer.unshift(n):t.buffer.push(n),t.needReadable&&O(e)),U(e,t)}function T(e,t){var n;return l(t)||"string"==typeof t||void 0===t||e.objectMode||(n=new v("chunk",["string","Buffer","Uint8Array"],t)),n}Object.defineProperty(j.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),j.prototype.destroy=g.destroy,j.prototype._undestroy=g.undestroy,j.prototype._destroy=function(e,t){t(e)},j.prototype.push=function(e,t){var n,r=this._readableState;return r.objectMode?n=!0:"string"==typeof e&&((t=t||r.defaultEncoding)!==r.encoding&&(e=d.from(e,t),t=""),n=!0),D(this,e,t,!1,n)},j.prototype.unshift=function(e){return D(this,e,null,!0,!1)},j.prototype.isPaused=function(){return!1===this._readableState.flowing},j.prototype.setEncoding=function(e){p||(p=require("string_decoder/").StringDecoder);var t=new p(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,r="";null!==n;)r+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==r&&this._readableState.buffer.push(r),this._readableState.length=r.length,this};var q=1073741824;function W(e){return e>=q?e=q:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function x(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=W(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function A(e,t){if(u("onEofChunk"),!t.ended){if(t.decoder){var n=t.decoder.end();n&&n.length&&(t.buffer.push(n),t.length+=t.objectMode?1:n.length)}t.ended=!0,t.sync?O(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,P(e)))}}function O(e){var t=e._readableState;u("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(u("emitReadable",t.flowing),t.emittedReadable=!0,n.nextTick(P,e))}function P(e){var t=e._readableState;u("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,G(e)}function U(e,t){t.readingMore||(t.readingMore=!0,n.nextTick(N,e,t))}function N(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var n=t.length;if(u("maybeReadMore read 0"),e.read(0),n===t.length)break}t.readingMore=!1}function H(e){return function(){var t=e._readableState;u("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&i(e,"data")&&(t.flowing=!0,G(e))}}function I(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function F(e){u("readable nexttick read 0"),e.read(0)}function B(e,t){t.resumeScheduled||(t.resumeScheduled=!0,n.nextTick(V,e,t))}function V(e,t){u("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),G(e),t.flowing&&!t.reading&&e.read(0)}function G(e){var t=e._readableState;for(u("flow",t.flowing);t.flowing&&null!==e.read(););}function Y(e,t){return 0===t.length?null:(t.objectMode?n=t.buffer.shift():!e||e>=t.length?(n=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):n=t.buffer.consume(e,t.decoder),n);var n}function z(e){var t=e._readableState;u("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,n.nextTick(J,t,e))}function J(e,t){if(u("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var n=t._writableState;(!n||n.autoDestroy&&n.finished)&&t.destroy()}}function K(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}j.prototype.read=function(e){u("read",e),e=parseInt(e,10);var t=this._readableState,n=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return u("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?z(this):O(this),null;if(0===(e=x(e,t))&&t.ended)return 0===t.length&&z(this),null;var r,i=t.needReadable;return u("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&u("length less than watermark",i=!0),t.ended||t.reading?u("reading or ended",i=!1):i&&(u("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=x(n,t))),null===(r=e>0?Y(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),n!==e&&t.ended&&z(this)),null!==r&&this.emit("data",r),r},j.prototype._read=function(e){M(this,new S("_read()"))},j.prototype.pipe=function(e,t){var r=this,a=this._readableState;switch(a.pipesCount){case 0:a.pipes=e;break;case 1:a.pipes=[a.pipes,e];break;default:a.pipes.push(e)}a.pipesCount+=1,u("pipe count=%d opts=%j",a.pipesCount,t);var d=(!t||!1!==t.end)&&e!==n.stdout&&e!==n.stderr?s:g;function o(t,n){u("onunpipe"),t===r&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,u("cleanup"),e.removeListener("close",c),e.removeListener("finish",b),e.removeListener("drain",l),e.removeListener("error",f),e.removeListener("unpipe",o),r.removeListener("end",s),r.removeListener("end",g),r.removeListener("data",p),h=!0,!a.awaitDrain||e._writableState&&!e._writableState.needDrain||l())}function s(){u("onend"),e.end()}a.endEmitted?n.nextTick(d):r.once("end",d),e.on("unpipe",o);var l=H(r);e.on("drain",l);var h=!1;function p(t){u("ondata");var n=e.write(t);u("dest.write",n),!1===n&&((1===a.pipesCount&&a.pipes===e||a.pipesCount>1&&-1!==K(a.pipes,e))&&!h&&(u("false write response, pause",a.awaitDrain),a.awaitDrain++),r.pause())}function f(t){u("onerror",t),g(),e.removeListener("error",f),0===i(e,"error")&&M(e,t)}function c(){e.removeListener("finish",b),g()}function b(){u("onfinish"),e.removeListener("close",c),g()}function g(){u("unpipe"),r.unpipe(e)}return r.on("data",p),k(e,"error",f),e.once("close",c),e.once("finish",b),e.emit("pipe",r),a.flowing||(u("pipe resume"),r.resume()),e},j.prototype.unpipe=function(e){var t=this._readableState,n={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,n),this);if(!e){var r=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<i;a++)r[a].emit("unpipe",this,{hasUnpiped:!1});return this}var d=K(t.pipes,e);return-1===d?this:(t.pipes.splice(d,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,n),this)},j.prototype.on=function(e,t){var r=a.prototype.on.call(this,e,t),i=this._readableState;return"data"===e?(i.readableListening=this.listenerCount("readable")>0,!1!==i.flowing&&this.resume()):"readable"===e&&(i.endEmitted||i.readableListening||(i.readableListening=i.needReadable=!0,i.flowing=!1,i.emittedReadable=!1,u("on readable",i.length,i.reading),i.length?O(this):i.reading||n.nextTick(F,this))),r},j.prototype.addListener=j.prototype.on,j.prototype.removeListener=function(e,t){var r=a.prototype.removeListener.call(this,e,t);return"readable"===e&&n.nextTick(I,this),r},j.prototype.removeAllListeners=function(e){var t=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||n.nextTick(I,this),t},j.prototype.resume=function(){var e=this._readableState;return e.flowing||(u("resume"),e.flowing=!e.readableListening,B(this,e)),e.paused=!1,this},j.prototype.pause=function(){return u("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(u("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},j.prototype.wrap=function(e){var t=this,n=this._readableState,r=!1;for(var i in e.on("end",function(){if(u("wrapped end"),n.decoder&&!n.ended){var e=n.decoder.end();e&&e.length&&t.push(e)}t.push(null)}),e.on("data",function(i){(u("wrapped data"),n.decoder&&(i=n.decoder.write(i)),n.objectMode&&null==i)||(n.objectMode||i&&i.length)&&(t.push(i)||(r=!0,e.pause()))}),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<E.length;a++)e.on(E[a],this.emit.bind(this,E[a]));return this._read=function(t){u("wrapped _read",t),r&&(r=!1,e.resume())},this},"function"==typeof Symbol&&(j.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=require("./internal/streams/async_iterator")),f(this)}),Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(j.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(j.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),j._fromList=Y,Object.defineProperty(j.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(j.from=function(e,t){return void 0===c&&(c=require("./internal/streams/from")),c(j,e,t)});
},{"events":"FRpO","./internal/streams/stream":"XCYG","buffer":"dskh","util":"AQGI","./internal/streams/buffer_list":"R4gw","./internal/streams/destroy":"a1pV","./internal/streams/state":"OWl0","../errors":"pTiH","inherits":"Bm0n","./_stream_duplex":"YgPj","string_decoder/":"z0rv","./internal/streams/async_iterator":"zLIC","./internal/streams/from":"JbJ4","process":"pBGv"}],"GcoZ":[function(require,module,exports) {
"use strict";module.exports=o;var t=require("../errors").codes,r=t.ERR_METHOD_NOT_IMPLEMENTED,e=t.ERR_MULTIPLE_CALLBACK,n=t.ERR_TRANSFORM_ALREADY_TRANSFORMING,i=t.ERR_TRANSFORM_WITH_LENGTH_0,a=require("./_stream_duplex");function s(t,r){var n=this._transformState;n.transforming=!1;var i=n.writecb;if(null===i)return this.emit("error",new e);n.writechunk=null,n.writecb=null,null!=r&&this.push(r),i(t);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);a.call(this,t),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",h)}function h(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush(function(r,e){f(t,r,e)})}function f(t,r,e){if(r)return t.emit("error",r);if(null!=e&&t.push(e),t._writableState.length)throw new i;if(t._transformState.transforming)throw new n;return t.push(null)}require("inherits")(o,a),o.prototype.push=function(t,r){return this._transformState.needTransform=!1,a.prototype.push.call(this,t,r)},o.prototype._transform=function(t,e,n){n(new r("_transform()"))},o.prototype._write=function(t,r,e){var n=this._transformState;if(n.writecb=e,n.writechunk=t,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},o.prototype._read=function(t){var r=this._transformState;null===r.writechunk||r.transforming?r.needTransform=!0:(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform))},o.prototype._destroy=function(t,r){a.prototype._destroy.call(this,t,function(t){r(t)})};
},{"../errors":"pTiH","./_stream_duplex":"YgPj","inherits":"Bm0n"}],"Yb4v":[function(require,module,exports) {
"use strict";module.exports=t;var r=require("./_stream_transform");function t(e){if(!(this instanceof t))return new t(e);r.call(this,e)}require("inherits")(t,r),t.prototype._transform=function(r,t,e){e(null,r)};
},{"./_stream_transform":"GcoZ","inherits":"Bm0n"}],"erw2":[function(require,module,exports) {
"use strict";var r;function n(r){var n=!1;return function(){n||(n=!0,r.apply(void 0,arguments))}}var t=require("../../../errors").codes,e=t.ERR_MISSING_ARGS,o=t.ERR_STREAM_DESTROYED;function i(r){if(r)throw r}function u(r){return r.setHeader&&"function"==typeof r.abort}function f(t,e,i,f){f=n(f);var a=!1;t.on("close",function(){a=!0}),void 0===r&&(r=require("./end-of-stream")),r(t,{readable:e,writable:i},function(r){if(r)return f(r);a=!0,f()});var c=!1;return function(r){if(!a&&!c)return c=!0,u(t)?t.abort():"function"==typeof t.destroy?t.destroy():void f(r||new o("pipe"))}}function a(r){r()}function c(r,n){return r.pipe(n)}function p(r){return r.length?"function"!=typeof r[r.length-1]?i:r.pop():i}function s(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];var o,i=p(n);if(Array.isArray(n[0])&&(n=n[0]),n.length<2)throw new e("streams");var u=n.map(function(r,t){var e=t<n.length-1;return f(r,e,t>0,function(r){o||(o=r),r&&u.forEach(a),e||(u.forEach(a),i(o))})});return n.reduce(c)}module.exports=s;
},{"../../../errors":"pTiH","./end-of-stream":"R4zQ"}],"s7zJ":[function(require,module,exports) {
exports=module.exports=require("./lib/_stream_readable.js"),exports.Stream=exports,exports.Readable=exports,exports.Writable=require("./lib/_stream_writable.js"),exports.Duplex=require("./lib/_stream_duplex.js"),exports.Transform=require("./lib/_stream_transform.js"),exports.PassThrough=require("./lib/_stream_passthrough.js"),exports.finished=require("./lib/internal/streams/end-of-stream.js"),exports.pipeline=require("./lib/internal/streams/pipeline.js");
},{"./lib/_stream_readable.js":"hUVU","./lib/_stream_writable.js":"ELqw","./lib/_stream_duplex.js":"YgPj","./lib/_stream_transform.js":"GcoZ","./lib/_stream_passthrough.js":"Yb4v","./lib/internal/streams/end-of-stream.js":"R4zQ","./lib/internal/streams/pipeline.js":"erw2"}],"T2VL":[function(require,module,exports) {
let e;module.exports="function"==typeof queueMicrotask?queueMicrotask:t=>(e||(e=Promise.resolve())).then(t).catch(e=>setTimeout(()=>{throw e},0));
},{}],"Jlv9":[function(require,module,exports) {
var Buffer = require("buffer").Buffer;
var e=require("buffer").Buffer,t=require("debug")("simple-peer"),i=require("get-browser-rtc"),s=require("randombytes"),n=require("readable-stream"),a=require("queue-microtask"),r=65536,h=5e3,o=5e3;function d(e){return e.replace(/a=ice-options:trickle\s\n/g,"")}function c(e,t){return"string"==typeof e&&(e=new Error(e)),e.error instanceof Error&&(e=e.error),e.code=t,e}function l(e){console.warn(e)}class _ extends n.Duplex{constructor(e){if(super(e=Object.assign({allowHalfOpen:!1},e)),this._id=s(4).toString("hex").slice(0,7),this._debug("new peer %o",e),this.channelName=e.initiator?e.channelName||s(20).toString("hex"):null,this.initiator=e.initiator||!1,this.channelConfig=e.channelConfig||_.channelConfig,this.negotiated=this.channelConfig.negotiated,this.config=Object.assign({},_.config,e.config),this.offerOptions=e.offerOptions||{},this.answerOptions=e.answerOptions||{},this.sdpTransform=e.sdpTransform||(e=>e),this.streams=e.streams||(e.stream?[e.stream]:[]),this.trickle=void 0===e.trickle||e.trickle,this.allowHalfTrickle=void 0!==e.allowHalfTrickle&&e.allowHalfTrickle,this.iceCompleteTimeout=e.iceCompleteTimeout||h,this.destroyed=!1,this._connected=!1,this.remoteAddress=void 0,this.remoteFamily=void 0,this.remotePort=void 0,this.localAddress=void 0,this.localFamily=void 0,this.localPort=void 0,this._wrtc=e.wrtc&&"object"==typeof e.wrtc?e.wrtc:i(),!this._wrtc)throw"undefined"==typeof window?c("No WebRTC support: Specify `opts.wrtc` option in this environment","ERR_WEBRTC_SUPPORT"):c("No WebRTC support: Not a supported browser","ERR_WEBRTC_SUPPORT");this._pcReady=!1,this._channelReady=!1,this._iceComplete=!1,this._iceCompleteTimer=null,this._channel=null,this._pendingCandidates=[],this._isNegotiating=!this.negotiated&&!this.initiator,this._batchedNegotiation=!1,this._queuedNegotiation=!1,this._sendersAwaitingStable=[],this._senderMap=new Map,this._firstStable=!0,this._closingInterval=null,this._remoteTracks=[],this._remoteStreams=[],this._chunk=null,this._cb=null,this._interval=null;try{this._pc=new this._wrtc.RTCPeerConnection(this.config)}catch(t){return void a(()=>this.destroy(c(t,"ERR_PC_CONSTRUCTOR")))}this._isReactNativeWebrtc="number"==typeof this._pc._peerConnectionId,this._pc.oniceconnectionstatechange=(()=>{this._onIceStateChange()}),this._pc.onicegatheringstatechange=(()=>{this._onIceStateChange()}),this._pc.onconnectionstatechange=(()=>{this._onConnectionStateChange()}),this._pc.onsignalingstatechange=(()=>{this._onSignalingStateChange()}),this._pc.onicecandidate=(e=>{this._onIceCandidate(e)}),this.initiator||this.negotiated?this._setupData({channel:this._pc.createDataChannel(this.channelName,this.channelConfig)}):this._pc.ondatachannel=(e=>{this._setupData(e)}),this.streams&&this.streams.forEach(e=>{this.addStream(e)}),this._pc.ontrack=(e=>{this._onTrack(e)}),this.initiator&&this._needsNegotiation(),this._onFinishBound=(()=>{this._onFinish()}),this.once("finish",this._onFinishBound)}get bufferSize(){return this._channel&&this._channel.bufferedAmount||0}get connected(){return this._connected&&"open"===this._channel.readyState}address(){return{port:this.localPort,family:this.localFamily,address:this.localAddress}}signal(e){if(this.destroyed)throw c("cannot signal after peer is destroyed","ERR_SIGNALING");if("string"==typeof e)try{e=JSON.parse(e)}catch(t){e={}}this._debug("signal()"),e.renegotiate&&this.initiator&&(this._debug("got request to renegotiate"),this._needsNegotiation()),e.transceiverRequest&&this.initiator&&(this._debug("got request for transceiver"),this.addTransceiver(e.transceiverRequest.kind,e.transceiverRequest.init)),e.candidate&&(this._pc.remoteDescription&&this._pc.remoteDescription.type?this._addIceCandidate(e.candidate):this._pendingCandidates.push(e.candidate)),e.sdp&&this._pc.setRemoteDescription(new this._wrtc.RTCSessionDescription(e)).then(()=>{this.destroyed||(this._pendingCandidates.forEach(e=>{this._addIceCandidate(e)}),this._pendingCandidates=[],"offer"===this._pc.remoteDescription.type&&this._createAnswer())}).catch(e=>{this.destroy(c(e,"ERR_SET_REMOTE_DESCRIPTION"))}),e.sdp||e.candidate||e.renegotiate||e.transceiverRequest||this.destroy(c("signal() called with invalid signal data","ERR_SIGNALING"))}_addIceCandidate(e){var t=new this._wrtc.RTCIceCandidate(e);this._pc.addIceCandidate(t).catch(e=>{!t.address||t.address.endsWith(".local")?l("Ignoring unsupported ICE candidate."):this.destroy(c(e,"ERR_ADD_ICE_CANDIDATE"))})}send(e){this._channel.send(e)}addTransceiver(e,t){if(this._debug("addTransceiver()"),this.initiator)try{this._pc.addTransceiver(e,t),this._needsNegotiation()}catch(i){this.destroy(c(i,"ERR_ADD_TRANSCEIVER"))}else this.emit("signal",{transceiverRequest:{kind:e,init:t}})}addStream(e){this._debug("addStream()"),e.getTracks().forEach(t=>{this.addTrack(t,e)})}addTrack(e,t){this._debug("addTrack()");var i=this._senderMap.get(e)||new Map,s=i.get(t);if(s)throw s.removed?c("Track has been removed. You should enable/disable tracks that you want to re-add.","ERR_SENDER_REMOVED"):c("Track has already been added to that stream.","ERR_SENDER_ALREADY_ADDED");s=this._pc.addTrack(e,t),i.set(t,s),this._senderMap.set(e,i),this._needsNegotiation()}replaceTrack(e,t,i){this._debug("replaceTrack()");var s=this._senderMap.get(e),n=s?s.get(i):null;if(!n)throw c("Cannot replace track that was never added.","ERR_TRACK_NOT_ADDED");t&&this._senderMap.set(t,s),null!=n.replaceTrack?n.replaceTrack(t):this.destroy(c("replaceTrack is not supported in this browser","ERR_UNSUPPORTED_REPLACETRACK"))}removeTrack(e,t){this._debug("removeSender()");var i=this._senderMap.get(e),s=i?i.get(t):null;if(!s)throw c("Cannot remove track that was never added.","ERR_TRACK_NOT_ADDED");try{s.removed=!0,this._pc.removeTrack(s)}catch(n){"NS_ERROR_UNEXPECTED"===n.name?this._sendersAwaitingStable.push(s):this.destroy(c(n,"ERR_REMOVE_TRACK"))}this._needsNegotiation()}removeStream(e){this._debug("removeSenders()"),e.getTracks().forEach(t=>{this.removeTrack(t,e)})}_needsNegotiation(){this._debug("_needsNegotiation"),this._batchedNegotiation||(this._batchedNegotiation=!0,a(()=>{this._batchedNegotiation=!1,this._debug("starting batched negotiation"),this.negotiate()}))}negotiate(){this.initiator?this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("start negotiation"),setTimeout(()=>{this._createOffer()},0)):this._isNegotiating?(this._queuedNegotiation=!0,this._debug("already negotiating, queueing")):(this._debug("requesting negotiation from initiator"),this.emit("signal",{renegotiate:!0})),this._isNegotiating=!0}destroy(e){this._destroy(e,()=>{})}_destroy(e,t){if(!this.destroyed){if(this._debug("destroy (error: %s)",e&&(e.message||e)),this.readable=this.writable=!1,this._readableState.ended||this.push(null),this._writableState.finished||this.end(),this.destroyed=!0,this._connected=!1,this._pcReady=!1,this._channelReady=!1,this._remoteTracks=null,this._remoteStreams=null,this._senderMap=null,clearInterval(this._closingInterval),this._closingInterval=null,clearInterval(this._interval),this._interval=null,this._chunk=null,this._cb=null,this._onFinishBound&&this.removeListener("finish",this._onFinishBound),this._onFinishBound=null,this._channel){try{this._channel.close()}catch(e){}this._channel.onmessage=null,this._channel.onopen=null,this._channel.onclose=null,this._channel.onerror=null}if(this._pc){try{this._pc.close()}catch(e){}this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ontrack=null,this._pc.ondatachannel=null}this._pc=null,this._channel=null,e&&this.emit("error",e),this.emit("close"),t()}}_setupData(e){if(!e.channel)return this.destroy(c("Data channel event is missing `channel` property","ERR_DATA_CHANNEL"));this._channel=e.channel,this._channel.binaryType="arraybuffer","number"==typeof this._channel.bufferedAmountLowThreshold&&(this._channel.bufferedAmountLowThreshold=r),this.channelName=this._channel.label,this._channel.onmessage=(e=>{this._onChannelMessage(e)}),this._channel.onbufferedamountlow=(()=>{this._onChannelBufferedAmountLow()}),this._channel.onopen=(()=>{this._onChannelOpen()}),this._channel.onclose=(()=>{this._onChannelClose()}),this._channel.onerror=(e=>{this.destroy(c(e,"ERR_DATA_CHANNEL"))});var t=!1;this._closingInterval=setInterval(()=>{this._channel&&"closing"===this._channel.readyState?(t&&this._onChannelClose(),t=!0):t=!1},o)}_read(){}_write(e,t,i){if(this.destroyed)return i(c("cannot write after peer is destroyed","ERR_DATA_CHANNEL"));if(this._connected){try{this.send(e)}catch(s){return this.destroy(c(s,"ERR_DATA_CHANNEL"))}this._channel.bufferedAmount>r?(this._debug("start backpressure: bufferedAmount %d",this._channel.bufferedAmount),this._cb=i):i(null)}else this._debug("write before connect"),this._chunk=e,this._cb=i}_onFinish(){if(this.destroyed)return;const e=()=>{setTimeout(()=>this.destroy(),1e3)};this._connected?e():this.once("connect",e)}_startIceCompleteTimeout(){this.destroyed||this._iceCompleteTimer||(this._debug("started iceComplete timeout"),this._iceCompleteTimer=setTimeout(()=>{this._iceComplete||(this._iceComplete=!0,this._debug("iceComplete timeout completed"),this.emit("iceTimeout"),this.emit("_iceComplete"))},this.iceCompleteTimeout))}_createOffer(){this.destroyed||this._pc.createOffer(this.offerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=d(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp})}};this._pc.setLocalDescription(e).then(()=>{this._debug("createOffer success"),this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(c(e,"ERR_CREATE_OFFER"))})}_requestMissingTransceivers(){this._pc.getTransceivers&&this._pc.getTransceivers().forEach(e=>{e.mid||!e.sender.track||e.requested||(e.requested=!0,this.addTransceiver(e.sender.track.kind))})}_createAnswer(){this.destroyed||this._pc.createAnswer(this.answerOptions).then(e=>{if(this.destroyed)return;this.trickle||this.allowHalfTrickle||(e.sdp=d(e.sdp)),e.sdp=this.sdpTransform(e.sdp);const t=()=>{if(!this.destroyed){var t=this._pc.localDescription||e;this._debug("signal"),this.emit("signal",{type:t.type,sdp:t.sdp}),this.initiator||this._requestMissingTransceivers()}};this._pc.setLocalDescription(e).then(()=>{this.destroyed||(this.trickle||this._iceComplete?t():this.once("_iceComplete",t))}).catch(e=>{this.destroy(c(e,"ERR_SET_LOCAL_DESCRIPTION"))})}).catch(e=>{this.destroy(c(e,"ERR_CREATE_ANSWER"))})}_onConnectionStateChange(){this.destroyed||"failed"===this._pc.connectionState&&this.destroy(c("Connection failed.","ERR_CONNECTION_FAILURE"))}_onIceStateChange(){if(!this.destroyed){var e=this._pc.iceConnectionState,t=this._pc.iceGatheringState;this._debug("iceStateChange (connection: %s) (gathering: %s)",e,t),this.emit("iceStateChange",e,t),"connected"!==e&&"completed"!==e||(this._pcReady=!0,this._maybeReady()),"failed"===e&&this.destroy(c("Ice connection failed.","ERR_ICE_CONNECTION_FAILURE")),"closed"===e&&this.destroy(c("Ice connection closed.","ERR_ICE_CONNECTION_CLOSED"))}}getStats(e){const t=e=>("[object Array]"===Object.prototype.toString.call(e.values)&&e.values.forEach(t=>{Object.assign(e,t)}),e);0===this._pc.getStats.length||this._isReactNativeWebrtc?this._pc.getStats().then(i=>{var s=[];i.forEach(e=>{s.push(t(e))}),e(null,s)},t=>e(t)):this._pc.getStats.length>0?this._pc.getStats(i=>{if(!this.destroyed){var s=[];i.result().forEach(e=>{var i={};e.names().forEach(t=>{i[t]=e.stat(t)}),i.id=e.id,i.type=e.type,i.timestamp=e.timestamp,s.push(t(i))}),e(null,s)}},t=>e(t)):e(null,[])}_maybeReady(){if(this._debug("maybeReady pc %s channel %s",this._pcReady,this._channelReady),this._connected||this._connecting||!this._pcReady||!this._channelReady)return;this._connecting=!0;const e=()=>{this.destroyed||this.getStats((t,i)=>{if(this.destroyed)return;t&&(i=[]);var s={},n={},a={},r=!1;i.forEach(e=>{"remotecandidate"!==e.type&&"remote-candidate"!==e.type||(s[e.id]=e),"localcandidate"!==e.type&&"local-candidate"!==e.type||(n[e.id]=e),"candidatepair"!==e.type&&"candidate-pair"!==e.type||(a[e.id]=e)});const h=e=>{r=!0;var t=n[e.localCandidateId];t&&(t.ip||t.address)?(this.localAddress=t.ip||t.address,this.localPort=Number(t.port)):t&&t.ipAddress?(this.localAddress=t.ipAddress,this.localPort=Number(t.portNumber)):"string"==typeof e.googLocalAddress&&(t=e.googLocalAddress.split(":"),this.localAddress=t[0],this.localPort=Number(t[1])),this.localAddress&&(this.localFamily=this.localAddress.includes(":")?"IPv6":"IPv4");var i=s[e.remoteCandidateId];i&&(i.ip||i.address)?(this.remoteAddress=i.ip||i.address,this.remotePort=Number(i.port)):i&&i.ipAddress?(this.remoteAddress=i.ipAddress,this.remotePort=Number(i.portNumber)):"string"==typeof e.googRemoteAddress&&(i=e.googRemoteAddress.split(":"),this.remoteAddress=i[0],this.remotePort=Number(i[1])),this.remoteAddress&&(this.remoteFamily=this.remoteAddress.includes(":")?"IPv6":"IPv4"),this._debug("connect local: %s:%s remote: %s:%s",this.localAddress,this.localPort,this.remoteAddress,this.remotePort)};if(i.forEach(e=>{"transport"===e.type&&e.selectedCandidatePairId&&h(a[e.selectedCandidatePairId]),("googCandidatePair"===e.type&&"true"===e.googActiveConnection||("candidatepair"===e.type||"candidate-pair"===e.type)&&e.selected)&&h(e)}),r||Object.keys(a).length&&!Object.keys(n).length){if(this._connecting=!1,this._connected=!0,this._chunk){try{this.send(this._chunk)}catch(t){return this.destroy(c(t,"ERR_DATA_CHANNEL"))}this._chunk=null,this._debug('sent chunk from "write before connect"');var o=this._cb;this._cb=null,o(null)}"number"!=typeof this._channel.bufferedAmountLowThreshold&&(this._interval=setInterval(()=>this._onInterval(),150),this._interval.unref&&this._interval.unref()),this._debug("connect"),this.emit("connect")}else setTimeout(e,100)})};e()}_onInterval(){!this._cb||!this._channel||this._channel.bufferedAmount>r||this._onChannelBufferedAmountLow()}_onSignalingStateChange(){this.destroyed||("stable"!==this._pc.signalingState||this._firstStable||(this._isNegotiating=!1,this._debug("flushing sender queue",this._sendersAwaitingStable),this._sendersAwaitingStable.forEach(e=>{this._pc.removeTrack(e),this._queuedNegotiation=!0}),this._sendersAwaitingStable=[],this._queuedNegotiation&&(this._debug("flushing negotiation queue"),this._queuedNegotiation=!1,this._needsNegotiation()),this._debug("negotiate"),this.emit("negotiate")),this._firstStable=!1,this._debug("signalingStateChange %s",this._pc.signalingState),this.emit("signalingStateChange",this._pc.signalingState))}_onIceCandidate(e){this.destroyed||(e.candidate&&this.trickle?this.emit("signal",{candidate:{candidate:e.candidate.candidate,sdpMLineIndex:e.candidate.sdpMLineIndex,sdpMid:e.candidate.sdpMid}}):e.candidate||this._iceComplete||(this._iceComplete=!0,this.emit("_iceComplete")),e.candidate&&this._startIceCompleteTimeout())}_onChannelMessage(t){if(!this.destroyed){var i=t.data;i instanceof ArrayBuffer&&(i=e.from(i)),this.push(i)}}_onChannelBufferedAmountLow(){if(!this.destroyed&&this._cb){this._debug("ending backpressure: bufferedAmount %d",this._channel.bufferedAmount);var e=this._cb;this._cb=null,e(null)}}_onChannelOpen(){this._connected||this.destroyed||(this._debug("on channel open"),this._channelReady=!0,this._maybeReady())}_onChannelClose(){this.destroyed||(this._debug("on channel close"),this.destroy())}_onTrack(e){this.destroyed||e.streams.forEach(t=>{this._debug("on track"),this.emit("track",e.track,t),this._remoteTracks.push({track:e.track,stream:t}),this._remoteStreams.some(e=>e.id===t.id)||(this._remoteStreams.push(t),a(()=>{this.emit("stream",t)}))})}_debug(){var e=[].slice.call(arguments);e[0]="["+this._id+"] "+e[0],t.apply(null,e)}}_.WEBRTC_SUPPORT=!!i(),_.config={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:"stun:global.stun.twilio.com:3478?transport=udp"}],sdpSemantics:"unified-plan"},_.channelConfig={},module.exports=_;
},{"debug":"jcLW","get-browser-rtc":"BJI5","randombytes":"XJNj","readable-stream":"s7zJ","queue-microtask":"T2VL","buffer":"dskh"}],"RSrv":[function(require,module,exports) {
"use strict";var e=1;function t(){return(e=(9301*e+49297)%233280)/233280}function n(t){e=t}module.exports={nextValue:t,seed:n};
},{}],"Sd1I":[function(require,module,exports) {
"use strict";var e,t,r,n=require("./random/random-from-seed"),u="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_-";function o(){r=!1}function i(t){if(t){if(t!==e){if(t.length!==u.length)throw new Error("Custom alphabet for shortid must be "+u.length+" unique characters. You submitted "+t.length+" characters: "+t);var r=t.split("").filter(function(e,t,r){return t!==r.lastIndexOf(e)});if(r.length)throw new Error("Custom alphabet for shortid must be "+u.length+" unique characters. These characters were not unique: "+r.join(", "));e=t,o()}}else e!==u&&(e=u,o())}function s(t){return i(t),e}function a(e){n.seed(e),t!==e&&(o(),t=e)}function h(){e||i(u);for(var t,r=e.split(""),o=[],s=n.nextValue();r.length>0;)s=n.nextValue(),t=Math.floor(s*r.length),o.push(r.splice(t,1)[0]);return o.join("")}function f(){return r||(r=h())}function l(e){return f()[e]}function c(){return e||u}module.exports={get:c,characters:s,seed:a,lookup:l,shuffled:f};
},{"./random/random-from-seed":"RSrv"}],"rGSO":[function(require,module,exports) {
"use strict";var o,t="object"==typeof window&&(window.crypto||window.msCrypto);o=t&&t.getRandomValues?function(o){return t.getRandomValues(new Uint8Array(o))}:function(o){for(var t=[],r=0;r<o;r++)t.push(Math.floor(256*Math.random()));return t},module.exports=o;
},{}],"URoT":[function(require,module,exports) {
module.exports=function(t,r,e){for(var n=(2<<Math.log(r.length-1)/Math.LN2)-1,o=-~(1.6*n*e/r.length),h="";;)for(var l=t(o),a=o;a--;)if((h+=r[l[a]&n]||"").length===+e)return h};
},{}],"gnMd":[function(require,module,exports) {
"use strict";var r=require("./alphabet"),e=require("./random/random-byte"),t=require("nanoid/format");function a(a){for(var o,n=0,u="";!o;)u+=t(e,r.get(),1),o=a<Math.pow(16,n+1),n++;return u}module.exports=a;
},{"./alphabet":"Sd1I","./random/random-byte":"rGSO","nanoid/format":"URoT"}],"EQbp":[function(require,module,exports) {
"use strict";var e,r,t=require("./generate"),a=require("./alphabet"),o=1567752802062,u=7;function n(a){var n="",i=Math.floor(.001*(Date.now()-o));return i===r?e++:(e=0,r=i),n+=t(u),n+=t(a),e>0&&(n+=t(e)),n+=t(i)}module.exports=n;
},{"./generate":"gnMd","./alphabet":"Sd1I"}],"mo1C":[function(require,module,exports) {
"use strict";var e=require("./alphabet");function t(t){return!(!t||"string"!=typeof t||t.length<6)&&!new RegExp("[^"+e.get().replace(/[|\\{}()[\]^$+*?.-]/g,"\\$&")+"]").test(t)}module.exports=t;
},{"./alphabet":"Sd1I"}],"n5O4":[function(require,module,exports) {
"use strict";module.exports=0;
},{}],"LEeL":[function(require,module,exports) {
"use strict";var e=require("./alphabet"),r=require("./build"),u=require("./is-valid"),t=require("./util/cluster-worker-id")||0;function o(r){return e.seed(r),module.exports}function s(e){return t=e,module.exports}function i(r){return void 0!==r&&e.characters(r),e.shuffled()}function d(){return r(t)}module.exports=d,module.exports.generate=d,module.exports.seed=o,module.exports.worker=s,module.exports.characters=i,module.exports.isValid=u;
},{"./alphabet":"Sd1I","./build":"EQbp","./is-valid":"mo1C","./util/cluster-worker-id":"n5O4"}],"KmFl":[function(require,module,exports) {
"use strict";module.exports=require("./lib/index");
},{"./lib/index":"LEeL"}],"pQno":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,n,t,i){return new(t||(t=Promise))(function(o,a){function r(e){try{c(i.next(e))}catch(n){a(n)}}function s(e){try{c(i.throw(e))}catch(n){a(n)}}function c(e){var n;e.done?o(e.value):(n=e.value,n instanceof t?n:new t(function(e){e(n)})).then(r,s)}c((i=i.apply(e,n||[])).next())})},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const t=n(require("@firebase/app"));require("@firebase/database"),require("@firebase/storage");const i=n(require("simple-peer")),o=n(require("shortid")),a={apiKey:"AIzaSyAqOhVg3jRKDXZ4doTh9wPHRHM2hb-j_B4",authDomain:"cl-sharedpiano.firebaseapp.com",databaseURL:"https://cl-sharedpiano.firebaseio.com",projectId:"cl-sharedpiano",storageBucket:"cl-sharedpiano.appspot.com",messagingSenderId:"21188183820",appId:"1:21188183820:web:ba9bae3effb89f9bbaeb29"},r={emojiChange:"e",instrumentChange:"i",ping:"p",pong:"P",noteOn:"1",noteOff:"0",sustain:"s",save:"v",keymap:"k"},s=["üê≠","üêØ","üê∞","üê∂","ü¶ä","üêÆ","üêª","üêº","üê∏","üê≤","ü¶Ñ","üê±","üê®","üêô","üê≥","üêò","üê¶","ü¶î"],c={},l=2e3,u=10;let d,f,p,h,m,v,g,b,y,j,w,$,_,O="piano";function k(e,n){"_"!==e&&N(e,!1).connection.signal(n)}function I(e,n){e===h||c[e]||N(e,!0)}function N(e,n){if(c[e])return c[e];const t=new i.default({initiator:n,trickle:!1});t.on("signal",n=>{const t=p.ref(`/${f}/users/${e}/${h}`).push();t.set(n),t.onDisconnect().remove()}),t.on("data",n=>{const i=n.toString();if(i[0]===r.emojiChange)return c[e].emoji=i.slice(1),void j([d].concat(Object.values(c).map(e=>e.emoji)));if(i[0]===r.instrumentChange)return void $(c[e].emoji,i.slice(1));if(i[0]===r.ping)return void t.send(r.pong+i.slice(1));if(i[0]===r.pong)return c[e].ping=(Date.now()-parseInt(i.slice(1),10))/2,void w(Object.fromEntries(Object.values(c).map(e=>[e.emoji,e.ping])));if(i[0]===r.sustain){return void(parseInt(i.slice(1))?b(c[e].emoji):g(c[e].emoji))}if(i[0]===r.save){let[e,n]=i.slice(2).split("|");return void y(e,n)}if(i[0]===r.keymap){try{_(JSON.parse(i.slice(2)))}catch(u){}return}const o=i[0]===r.noteOn?m:v;let[a,s,l]=i.slice(1).split("|");if(a=parseFloat(a),s=parseFloat(s),isNaN(a)||isNaN(s))return;o({midi:a,velocity:s},l,!0)});const o={connection:t,ready:!1,emoji:"",ping:0,pingInterval:setInterval(()=>o.ready&&t.send(r.ping+Date.now()),l)};return t.on("connect",()=>{o.ready=!0,t.send(r.emojiChange+d),t.send(r.instrumentChange+O)}),c[e]=o,o}function D(e){c[e]&&(clearInterval(c[e].pingInterval),delete c[e],j([d].concat(Object.values(c).map(e=>e.emoji))),p.ref(`/${f}/users/${e}/${h}`).remove())}function x(e){Object.values(c).forEach(({ready:n,connection:t})=>{n&&t.send(e)})}function C(e,n){x(`${Number(e)}${n.midi}|${n.velocity}|${d}`)}function q(e){x(r.sustain+Number(e))}function S(e){O=e,x(r.instrumentChange+e)}function M(e){x(`${r.save}|${e}|${d}`)}function A(e){x(`${r.keymap}|${JSON.stringify(e)}`)}function P(e,n,i,r,c,l,O,N,x,P){t.default.apps.length||t.default.initializeApp(a);const R=window.location.hash.slice(1);window.location.hash?f=R:(f=o.default.generate(),window.location.hash=f);let z=!1;p=t.default.database(),h=o.default.generate(),m=e,v=n,b=i,g=r,y=c,j=O,w=N,$=x,_=P;const B=p.ref(`/${f}/users/${h}`);B.on("child_added",e=>{const n=e.key;e.ref.on("child_added",e=>k(n,e.val()))}),B.on("child_removed",e=>D(e.key)),B.onDisconnect().remove();const J=p.ref(`/${f}/users`);return J.once("value",e=>{const n=e.val();if(n&&Object.keys(n).length>=u)return l(null,!0),void B.remove();let t;if(n){const e=Object.values(n).map(e=>e.id);t=s.filter(n=>!e.includes(n))}else t=s;d=t[Math.floor(Math.random()*t.length)],B.set({_:!0,id:d}),l(d,!1),z=!0}),J.on("child_added",e=>z&&I(e.key,e.val())),J.on("child_removed",e=>z&&D(e.key)),[C.bind(null,!0),C.bind(null,!1),q,S,M,A]}function R(n){return e(this,void 0,void 0,function*(){const e=o.default.generate()+o.default.generate();return yield t.default.storage().ref().child(e).put(new Blob([JSON.stringify(n)],{type:"application/json"})),e})}function z(n){return e(this,void 0,void 0,function*(){return t.default.apps.length||t.default.initializeApp(a),(yield fetch(yield t.default.storage().ref(n).getDownloadURL())).text()})}exports.init=P,exports.upload=R,exports.download=z;
},{"@firebase/app":"dP58","@firebase/database":"vmMz","@firebase/storage":"wU43","simple-peer":"Jlv9","shortid":"KmFl"}],"QCba":[function(require,module,exports) {
"use strict";var e=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))(function(i,a){function r(e){try{d(o.next(e))}catch(t){a(t)}}function s(e){try{d(o.throw(e))}catch(t){a(t)}}function d(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(r,s)}d((o=o.apply(e,t||[])).next())})},t=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),require("./locale"),require("./util/browser");const o=t(require("tone"));require("./interface/logo"),require("./interface/language-selector"),require("./interface/jumpstart"),require("./interface/mute"),require("./interface/clear"),require("./interface/about"),require("./interface/metronome"),require("./interface/save"),require("./interface/banner"),require("./interface/share"),require("./interface/browser-warning"),require("./roll/roll"),require("./piano/piano"),require("./midi/input"),require("./interface/settings"),require("./interface/instrument-selector"),require("./sound/sound"),require("./interface/copresence-info"),require("./interface/full-room");const i=require("./interface/save-chip"),a=t(require("./copresence")),r=n(require("./util/global-state"));exports.customKeyMap={},exports.resizeMode="auto";const s=r.default.getInstance(),d="ontouchstart"in window||navigator.msMaxTouchPoints>0;function l(e,t,n){k.keyDown(e,t,n),h.keyDown(e,t),g.keyDown(e,t,n)}function c(e,t,n){k.keyUp(e,t),h.keyUp(e,t),g.keyUp(e,t)}function u(e){g.sustainDown(e),h.sustainDown(e)}function p(e){g.sustainUp(e),h.sustainUp(e)}function y(e,t){D.setSave(e,t)}function m(t,n){return e(this,void 0,void 0,function*(){b.loading=!0,yield g.setInstrument(t.detail.instrument,n),b.loading=!1,w||_(t.detail.instrument)})}const v="saved",w=location.pathname.endsWith("/saved/"),f=document.body.querySelector("piano-input"),h=document.body.querySelector("piano-roll"),k=document.body.querySelector("piano-keyboard"),q=document.body.querySelector("piano-settings"),b=document.body.querySelector("piano-instrument-selector"),g=document.body.querySelector("piano-sounds"),E=document.body.querySelector("copresence-info"),M=document.body.querySelector("piano-save"),S=i.SaveChip,D=document.body.querySelector("save-chip"),U=document.body.querySelector("piano-clear");let x,L,j,O,_,z,N=!1;function I(e,t,n){t?document.body.querySelector("piano-full-room").shown=!0:(h.addEventListener("keyDown",e=>{g.keyDown(e.detail,e.detail.emoji),k.keyDown(e.detail,e.detail.emoji)}),h.addEventListener("keyUp",e=>{g.keyUp(e.detail,e.detail.emoji),k.keyUp(e.detail,e.detail.emoji)}),h.addEventListener("sustainDown",e=>{g.sustainDown(e.detail)}),h.addEventListener("sustainUp",e=>{g.sustainUp(e.detail)}),h.addEventListener("sustainDown",e=>{g.sustainDown(e.detail)}),h.addEventListener("sustainUp",e=>{g.sustainUp(e.detail)}),n||(g.addInstrument("piano",e),E.selfId=e,E.users=[e],E.link=window.location.href,k.addEventListener("keyDown",t=>{g.keyDown(t.detail,e),h.keyDown(t.detail,e),w?k.keyDown(t.detail):(k.keyDown(t.detail,e),x(t.detail)),h.bottom||h.toBottom()}),k.addEventListener("keyUp",t=>{g.keyUp(t.detail,e),h.keyUp(t.detail,e),w?k.keyUp(t.detail):(k.keyUp(t.detail,e),L(t.detail))}),f.addEventListener("keyDown",t=>{h.keyDown(t.detail,e),g.keyDown(t.detail,e),w?k.keyDown(t.detail):(k.keyDown(t.detail,e),x(t.detail)),h.bottom||h.toBottom()}),f.addEventListener("keyUp",t=>{h.keyUp(t.detail,e),g.keyUp(t.detail,e),w?k.keyUp(t.detail):(k.keyUp(t.detail,e),L(t.detail))}),f.addEventListener("sustainDown",()=>{g.sustainDown(e),h.sustainDown(e),w||j(!0)}),f.addEventListener("sustainUp",()=>{g.sustainUp(e),h.sustainUp(e),w||j(!1)}),f.addEventListener("playPause",e=>{h.canvas.scroller.bottom||h.canvas.scroller.playToggle()}),b.addEventListener("change",t=>m(t,e),!1),U.addEventListener("clear",e=>{h.canvas.clear()})))}function B(){return void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile")?"90"==window.orientation||"-90"==window.orientation?130:180:((e,t,n,o,i)=>(e-t)*(i-o)/(n-t)+o)(window.innerHeight,350,750,120,170)}function H(){let e;if(h.triggerline=window.innerHeight<=750?B():380,"manual"!==exports.resizeMode){e=s.getMinimumRequiredOctaves(),k.octaves=e,h.octaves=e;const t=Math.ceil((8-e)/2)+1;k.rootoctave=t,h.rootoctave=t}if(w){const e=document.body.querySelector("piano-banner"),t=document.body.querySelector("header"),n=document.body.querySelector("#piano");t.style.top=e.offsetHeight+"px",n.style.top="136px",n.style.height="calc(100% - 245px)",window.innerWidth<=768&&(n.style.top="98px",n.style.height="calc(100% - 218px)"),window.innerWidth>window.innerHeight&&d&&(n.style.top="92px",n.style.height="calc(100% - 192px)")}}q.addEventListener("settings",e=>{k.releaseAll();let t=void 0!==e.detail.octaves?e.detail.octaves:Math.min(8,Math.floor(window.innerWidth/200));"manual"!==e.detail.resizeMode&&(t=s.getMinimumRequiredOctaves());const n=Math.ceil((8-t)/2)+1;exports.resizeMode=e.detail.resizeMode,k.octaves=t,h.octaves=t,f.settingsDialog=e.detail.dialog,k.rootoctave=n,h.rootoctave=n,h.notetrail=e.detail.notetrail,k.notename=e.detail.notename,k.emoji=e.detail.emoji,h.scrollBehavior=e.detail.scrollBehavior,h.notename=e.detail.notename,h.hide=!e.detail.pianoroll,f.device=e.detail.midiinput,e.detail.keymap===exports.customKeyMap&&e.detail.resizeMode===exports.resizeMode||(exports.customKeyMap=e.detail.keymap,k.notename=!e.detail.notename,h.notename=!e.detail.notename,N||w||z(exports.customKeyMap),N=!1,setTimeout(()=>{k.notename=e.detail.notename,h.notename=e.detail.notename},0)),h.setSpeedMultiplier(e.detail.speed),h.canvas.transpose(e.detail.transpose)}),q.addEventListener("settingsOpen",e=>{h.canvas.scroller.disableScroll()}),q.addEventListener("settingsClose",e=>{h.canvas.scroller.enableScroll()}),H(),window.addEventListener("click",()=>o.start()),window.addEventListener("resize",H);const K=document.body.querySelector("piano-save"),P=document.body.querySelector("piano-share");K.addEventListener("onSave",()=>e(void 0,void 0,void 0,function*(){h.toBottom();const e=h.serialize(),t=yield a.upload(Object.assign(Object.assign({},e),{users:Object.fromEntries(Array.from(g.pianos.keys()).map(e=>[e,g.pianos.get(e).instrument])),keymap:exports.customKeyMap,showNoteNames:q.notename,showEmojis:q.emoji})),n=`${location.origin}${location.pathname}saved/#${t}`;M.setSavedLink(n),O(n)})),(()=>e(void 0,void 0,void 0,function*(){if(w){const e=window.location.hash.slice(1),t=JSON.parse(yield a.download(e)),n=document.body.querySelector("piano-banner"),o=document.body.querySelector("header");n.style.display="block",o.style.top=n.offsetHeight+"px";const i=Object.keys(t.users);P.style.display="block",K.style.display="none",U.style.display="none",E.users=i,E.savedMode=!0,i.forEach(e=>g.addInstrument(t.users[e],e)),h.deserialize(t.notes,t.elapsed),h.canvas.setSavedMode(),s.recordedSessionNotes=t.notes,q.savedMode=!0,q.resizeMode="auto",b.savedMode=!0,t.keymap&&(N=!0,q.keymap=t.keymap),"showNoteNames"in t&&t.showNoteNames!==q.notename&&(N=!0,q.notename=t.showNoteNames),"showEmojis"in t&&t.showEmojis!==q.emoji&&(N=!0,q.emoji=t.showEmojis),I("üî•",!1,!1)}else[x,L,j,_,O,z]=a.init(l,c,u,p,y,I,e=>{e=e.filter(e=>e),E.users=e,e.forEach(e=>g.addInstrument("piano",e))},e=>E.pings=e,(e,t)=>g.setInstrument(t,e),e=>{N=!0,q.keymap=e})}))();
},{"./locale":"HLSW","./util/browser":"LJG5","tone":"GfHe","./interface/logo":"IKBr","./interface/language-selector":"eIcz","./interface/jumpstart":"erLX","./interface/mute":"ciwe","./interface/clear":"gFJJ","./interface/about":"CkD9","./interface/metronome":"O4Jr","./interface/save":"XEaR","./interface/banner":"Xlfm","./interface/share":"Gz1l","./interface/browser-warning":"fF5f","./roll/roll":"xdHm","./piano/piano":"jJAW","./midi/input":"GSLc","./interface/settings":"iEU1","./interface/instrument-selector":"BlNK","./sound/sound":"dBIS","./interface/copresence-info":"PdmL","./interface/full-room":"vXzt","./interface/save-chip":"EWRF","./copresence":"pQno","./util/global-state":"M8Ve"}]},{},["QCba"], null)